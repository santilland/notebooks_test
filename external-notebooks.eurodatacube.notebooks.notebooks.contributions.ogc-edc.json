{"version":1,"kind":"Notebook","sha256":"8e669ace29a476ac241afb41b9b2077759f485d5c17c47a2f7ecd29786681189","slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ogc-edc","location":"/external_notebooks/eurodatacube/notebooks/notebooks/contributions/ogc-edc.ipynb","dependencies":[],"frontmatter":{"title":"Important notes","content_includes_title":true,"kernelspec":{"name":"python3","display_name":"Python 3","language":"python"},"github":"https://github.com/eoxhub-workspaces/documentation/","numbering":{"title":{"offset":5}},"edit_url":"https://github.com/eoxhub-workspaces/documentation//blob/main/external_notebooks/eurodatacube/notebooks/notebooks/contributions/ogc-edc.ipynb","exports":[{"format":"ipynb","filename":"ogc-edc.ipynb","url":"/notebooks_test/build/ogc-edc-83d3c6eb2c2726229b4ebed4cbb39b1f.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"from edc import setup_environment_variables\nsetup_environment_variables()","key":"Uj0JfNwMgE"},{"type":"output","id":"0QNom6XJhMWWboknV5F2v","data":[{"output_type":"display_data","metadata":{},"data":{"text/markdown":{"content":"API credentials have automatically been injected for your active subscriptions.  \nThe following environment variables are now available:\n* `SH_CLIENT_NAME`\n* `SH_CLIENT_SECRET`\n* `SH_INSTANCE_ID`\n* `SH_CLIENT_ID`\n* `MY_AWS_BUCKET`\n* `MY_OGC_EDC_URL`\n","content_type":"text/markdown"},"text/plain":{"content":"<IPython.core.display.Markdown object>","content_type":"text/plain"}}}],"key":"YJS8yNQ2JR"}],"key":"KjnAADxqHx"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Important notes","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"P5Yjm8ninW"}],"identifier":"important-notes","label":"Important notes","html_id":"important-notes","implicit":true,"key":"w17dPHCwRL"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"This notebook requires:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"cW9kB6PzfE"}],"key":"j2fcApg0OA"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"OGC layer installed in EDC marketplace (with access url exposed as environment variable MY_OGC_EDC_URL)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"oa1IB1I7Hs"}],"key":"RSIUEqdoLD"}],"key":"MIws7FsrSt"}],"key":"Zai8FyMBda"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"OGC-EDC example calls","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"U0dDjXhx8b"}],"identifier":"ogc-edc-example-calls","label":"OGC-EDC example calls","html_id":"ogc-edc-example-calls","implicit":true,"key":"KnSaNqE1I8"}],"key":"XqUvbO5N1T"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"This Notebook containes some WMs calls for the generated and configured EGC_OGC URL, all the presented samples where taken from\npre-configured collecions and layers.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rzMKysrDI8"}],"key":"hCOq3P4KKL"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"The wms layers were simply requested using the python ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"DczfXiL53r"},{"type":"inlineCode","value":"requests","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"ucMuyBDPsM"},{"type":"text","value":" library, and the desired parameters were set to exploit ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"LZPACgMfIL"},{"type":"emphasis","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"EDC-OGC","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Wzt3aARne8"}],"key":"eOXhjKA0pn"},{"type":"text","value":" backend potentials","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"dt1mafiPoE"}],"key":"OCvKZsJoq1"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Below is a comparison between a True Color image (Top) and a NDVI image (Bottom) of Sentinel 2 L1C","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"TQMs16sRw9"}],"key":"SbE2iVcIw9"}],"key":"x3aGQM7Mg5"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"import requests\nfrom IPython.display import Image, display\n\n# api-endpoint \nURL = %env MY_OGC_EDC_URL\n  \nPARAMS_1 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'S2L1C__TRUECOLOR',\n    'bbox': '-15.759545,46.269951,-15.698739,46.426163',\n    'crs': 'EPSG:4326',\n    'styles': '',\n    'width': 1000,\n    'height': 500,\n    'format': 'image/png',\n    'time' : '',\n}\n  \nPARAMS_2 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'L8L1C__NDVI',\n    'bbox': '-15.759545,46.269951,-15.698739,46.426163',\n    'crs': 'EPSG:4326',\n    'styles': 'EOX NDVI Colorscale',\n    'width': 1000,\n    'height': 500,\n    'format': 'image/png',\n    'time' : '',\n}","key":"Qj9clbvfyN"},{"type":"output","id":"AHpPws087gGkZIFc0wJYt","data":[],"key":"g9AXqIc8dS"}],"key":"fAPEaMp05J"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"r_1 = requests.get(url = URL, params = PARAMS_1, stream=all) \nr_2= requests.get(url = URL, params = PARAMS_2, stream=all)\n","key":"lEeSa75SRA"},{"type":"output","id":"pHY5lvcgV3--m0vs51GU6","data":[],"key":"j5f3HmdHE9"}],"key":"ESioql320A"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"\ndisplay(Image(r_1.content))\n\ndisplay(Image(r_2.content))\n","key":"jyzGePK2pQ"},{"type":"output","id":"ojO1arSBMXJcSj3Hvxwpo","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"54da3d33e4fe44e90dc975459e1783ef","path":"/notebooks_test/build/54da3d33e4fe44e90dc975459e1783ef.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"bd985b3f305dbc733fb6649c1a8606a0","path":"/notebooks_test/build/bd985b3f305dbc733fb6649c1a8606a0.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}}],"key":"Gve6eswDJx"}],"key":"zIqjhtc3Hb"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"users can set the required cloud coverage to filter out cloud, jsut by setting the cloud coverage parameter ‘maxcc’.\nbelow is a comparison between a 100% cloud coverage image  and a 50% cloud coverage","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"maDsq7O3P1"}],"key":"fCbBFMhZT9"}],"key":"okAyR0eGW2"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"PARAMS_3 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'S2L1C__TRUECOLOR',\n    'bbox': '1466647.93,6036752.61,1517415.19,6052309.71',\n    'crs': 'EPSG:3857',\n    'styles': '',\n    'width': 1000,\n    'height': 300,\n    'format': 'image/png',\n    'time' : '',\n    'maxcc': '100'\n} \n\nPARAMS_4 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'S2L1C__TRUECOLOR',\n    'bbox': '1466647.93,6036752.61,1517415.19,6052309.71',\n    'crs': 'EPSG:3857',\n    'styles': '',\n    'width': 1000,\n    'height': 300,\n    'format': 'image/png',\n    'time' : '',\n    'maxcc': '50'\n}  ","key":"cRxJlztU1p"},{"type":"output","id":"RqvHujnDDxUgjkqGK4JRp","data":[],"key":"lmduQ35JgS"}],"key":"jhF7rCUS73"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"a_1 = requests.get(url = URL, params = PARAMS_3, stream=all) \na_2= requests.get(url = URL, params = PARAMS_4, stream=all) ","key":"sKKeXfnfPp"},{"type":"output","id":"-VBqGcuPdyWG07sPYOZ8H","data":[],"key":"KAB5XerGbQ"}],"key":"w8YaVJnvOT"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"display(Image(a_1.content))\n\ndisplay(Image(a_2.content))\n","key":"IghgDmz1w9"},{"type":"output","id":"0-dG6_4NapHbr692zd8VB","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"cb5412383930253b7f1ea3d072eff8c3","path":"/notebooks_test/build/cb5412383930253b7f1ea3d072eff8c3.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"c42ddeb822f60a51a0a79db3e4e9760e","path":"/notebooks_test/build/c42ddeb822f60a51a0a79db3e4e9760e.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}}],"key":"SQVUY6bHzE"}],"key":"wBj107Va3r"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"below is S5 dataset","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"G2LARzmLWH"}],"key":"aYeo5ySvWD"}],"key":"mWJxaxJbRU"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"PARAMS_3 = {\n    'service': 'WMS',\n    'version': '1.3.0',\n    'request': 'GetMap',\n    'layers': 'S5PL2__NO2',\n    'bbox': '45,-11.25,56.25,0',\n    'crs': 'EPSG:4326',\n    'styles': '',\n    'width': 512,\n    'height': 512,\n    'format': 'image/png',\n    'time' : '2020-04-21/2020-04-26',\n    'maxcc': '100'\n}","key":"BSmUdiAd1X"},{"type":"output","id":"uG1TFj-V-JJihVzAGp50n","data":[],"key":"pvsSJYAuad"}],"key":"awvpfe2n8P"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"a = requests.get(url = URL, params = PARAMS_3, stream=all)","key":"U6172Gmics"},{"type":"output","id":"YaH_DUiFrTO_oy54pEQd-","data":[],"key":"khIek9KM5P"}],"key":"iaxIdvQMxE"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"display(Image(a.content))","key":"z1qbGaAQm4"},{"type":"output","id":"9gaNoXbmFyk44C8brZiQj","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"a1b383f1daffe86e6f7005f864de15af","path":"/notebooks_test/build/a1b383f1daffe86e6f7005f864de15af.png"},"text/plain":{"content":"<IPython.core.display.Image object>","content_type":"text/plain"}}}],"key":"LjV7TCmJI1"}],"key":"K034mxggvj"}],"key":"Wx8IorVzXR"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Using the NASA VEDA EOAPI","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/no2-so2-trend-veda-api-igarss-2023","group":"Contributions"},"next":{"title":"openEO Client Demo","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/openeo-client-demo","group":"Contributions"}}},"domain":"http://localhost:3000"}