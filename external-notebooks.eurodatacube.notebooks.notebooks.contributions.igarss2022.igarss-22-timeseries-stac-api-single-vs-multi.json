{"version":1,"kind":"Notebook","sha256":"8454703a0fbf2d8f2612830a4bf6a07d921672769527069ac88c7c96d73686df","slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-timeseries-stac-api-single-vs-multi","location":"/external_notebooks/eurodatacube/notebooks/notebooks/contributions/IGARSS2022/IGARSS-22_Timeseries_STAC_API_single_vs_multi.ipynb","dependencies":[],"frontmatter":{"title":"Time series using STAC API statistics endpoints","content_includes_title":true,"kernelspec":{"name":"conda-env-edc-default-2022.07-00-py","display_name":"python3 (edc-default-2022.07-00)","language":"python"},"github":"https://github.com/eoxhub-workspaces/documentation/","numbering":{"title":{"offset":5}},"edit_url":"https://github.com/eoxhub-workspaces/documentation//blob/main/external_notebooks/eurodatacube/notebooks/notebooks/contributions/IGARSS2022/IGARSS-22_Timeseries_STAC_API_single_vs_multi.ipynb","exports":[{"format":"ipynb","filename":"IGARSS-22_Timeseries_STAC_API_single_vs_multi.ipynb","url":"/build/IGARSS-22_Timeseries-39c98af44c31949ed6769548f2cae4b2.ipynb"}]},"widgets":{"application/vnd.jupyter.widget-state+json":{"state":{"114b67c22e784517bdd03c452db2e21d":{"model_module":"jupyter-leaflet","model_module_version":"^0.17","model_name":"LeafletAttributionControlModel","state":{"_model_module":"jupyter-leaflet","_model_module_version":"^0.17","_model_name":"LeafletAttributionControlModel","_view_count":null,"_view_module":"jupyter-leaflet","_view_module_version":"^0.17","_view_name":"LeafletAttributionControlView","options":["position","prefix"],"position":"bottomright","prefix":"ipyleaflet"}},"2ee20beb545d45d9bede67d852e2e136":{"model_module":"jupyter-leaflet","model_module_version":"^0.17","model_name":"LeafletGeoJSONModel","state":{"_model_module":"jupyter-leaflet","_model_module_version":"^0.17","_model_name":"LeafletGeoJSONModel","_view_count":null,"_view_module":"jupyter-leaflet","_view_module_version":"^0.17","_view_name":"LeafletGeoJSONView","base":false,"bottom":false,"data":{"geometry":{"coordinates":[[[-5.4534286,41.2632185],[9.8678344,41.2632185],[9.8678344,51.268318],[-5.4534286,51.268318],[-5.4534286,41.2632185]]],"type":"Polygon"},"properties":{"style":{"color":"red","fillOpacity":0}},"type":"Feature"},"hover_style":{},"layers":[],"name":"","options":[],"pane":"","point_style":{},"popup":null,"popup_max_height":null,"popup_max_width":300,"popup_min_width":50,"style":{"color":"red","fillOpacity":0},"subitems":[],"visible":true}},"57012888104c4daf9d6e453399d7c1df":{"model_module":"jupyter-leaflet","model_module_version":"^0.17","model_name":"LeafletMapStyleModel","state":{"_model_module":"jupyter-leaflet","_model_module_version":"^0.17","_model_name":"LeafletMapStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"StyleView","cursor":"grab"}},"8493885b7fdd4c41b10daa2ed9cbd9d0":{"model_module":"jupyter-leaflet","model_module_version":"^0.17","model_name":"LeafletTileLayerModel","state":{"_model_module":"jupyter-leaflet","_model_module_version":"^0.17","_model_name":"LeafletTileLayerModel","_view_count":null,"_view_module":"jupyter-leaflet","_view_module_version":"^0.17","_view_name":"LeafletTileLayerView","attribution":"&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors","base":true,"bottom":true,"bounds":null,"detect_retina":false,"loading":false,"max_native_zoom":null,"max_zoom":19,"min_native_zoom":null,"min_zoom":1,"name":"OpenStreetMap.Mapnik","no_wrap":false,"opacity":1,"options":["attribution","bounds","detect_retina","max_native_zoom","max_zoom","min_native_zoom","min_zoom","no_wrap","tile_size","tms","zoom_offset"],"pane":"","popup":null,"popup_max_height":null,"popup_max_width":300,"popup_min_width":50,"show_loading":false,"subitems":[],"tile_size":256,"tms":false,"url":"https://tile.openstreetmap.org/{z}/{x}/{y}.png","visible":true,"zoom_offset":0}},"a24bfc3ec6714fbfa5ff61354fb4c06d":{"model_module":"jupyter-leaflet","model_module_version":"^0.17","model_name":"LeafletMapModel","state":{"_dom_classes":[],"_model_module":"jupyter-leaflet","_model_module_version":"^0.17","_model_name":"LeafletMapModel","_view_count":null,"_view_module":"jupyter-leaflet","_view_module_version":"^0.17","_view_name":"LeafletMapView","bottom":0,"bounce_at_zoom_limits":true,"box_zoom":true,"center":[47,4],"close_popup_on_click":true,"controls":["IPY_MODEL_c11c0fd0086248128c3059cedba8b5f1","IPY_MODEL_114b67c22e784517bdd03c452db2e21d"],"crs":{"custom":false,"name":"EPSG3857"},"default_style":"IPY_MODEL_57012888104c4daf9d6e453399d7c1df","double_click_zoom":true,"dragging":true,"dragging_style":"IPY_MODEL_dcf854492e414ed897e5d89f00d029bf","east":0,"fullscreen":false,"inertia":true,"inertia_deceleration":3000,"inertia_max_speed":1500,"interpolation":"bilinear","keyboard":true,"keyboard_pan_offset":80,"keyboard_zoom_offset":1,"layers":["IPY_MODEL_8493885b7fdd4c41b10daa2ed9cbd9d0","IPY_MODEL_2ee20beb545d45d9bede67d852e2e136"],"layout":"IPY_MODEL_b1ca97c235c940f5bcd25b31843db090","left":9007199254740991,"max_zoom":null,"min_zoom":null,"modisdate":"2023-03-21","north":0,"options":["bounce_at_zoom_limits","box_zoom","center","close_popup_on_click","double_click_zoom","dragging","fullscreen","inertia","inertia_deceleration","inertia_max_speed","interpolation","keyboard","keyboard_pan_offset","keyboard_zoom_offset","max_zoom","min_zoom","prefer_canvas","scroll_wheel_zoom","tap","tap_tolerance","touch_zoom","world_copy_jump","zoom","zoom_animation_threshold","zoom_delta","zoom_snap"],"panes":{},"prefer_canvas":false,"right":0,"scroll_wheel_zoom":false,"south":0,"style":"IPY_MODEL_d7c16f376b6f4a76b08d1be5844baba0","tabbable":null,"tap":true,"tap_tolerance":15,"tooltip":null,"top":9007199254740991,"touch_zoom":true,"west":0,"window_url":"","world_copy_jump":false,"zoom":3,"zoom_animation_threshold":4,"zoom_delta":1,"zoom_snap":1}},"b1ca97c235c940f5bcd25b31843db090":{"model_module":"@jupyter-widgets/base","model_module_version":"2.0.0","model_name":"LayoutModel","state":{"_model_module":"@jupyter-widgets/base","_model_module_version":"2.0.0","_model_name":"LayoutModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"LayoutView","align_content":null,"align_items":null,"align_self":null,"border_bottom":null,"border_left":null,"border_right":null,"border_top":null,"bottom":null,"display":null,"flex":null,"flex_flow":null,"grid_area":null,"grid_auto_columns":null,"grid_auto_flow":null,"grid_auto_rows":null,"grid_column":null,"grid_gap":null,"grid_row":null,"grid_template_areas":null,"grid_template_columns":null,"grid_template_rows":null,"height":null,"justify_content":null,"justify_items":null,"left":null,"margin":null,"max_height":null,"max_width":null,"min_height":null,"min_width":null,"object_fit":null,"object_position":null,"order":null,"overflow":null,"padding":null,"right":null,"top":null,"visibility":null,"width":null}},"c11c0fd0086248128c3059cedba8b5f1":{"model_module":"jupyter-leaflet","model_module_version":"^0.17","model_name":"LeafletZoomControlModel","state":{"_model_module":"jupyter-leaflet","_model_module_version":"^0.17","_model_name":"LeafletZoomControlModel","_view_count":null,"_view_module":"jupyter-leaflet","_view_module_version":"^0.17","_view_name":"LeafletZoomControlView","options":["position","zoom_in_text","zoom_in_title","zoom_out_text","zoom_out_title"],"position":"topleft","zoom_in_text":"+","zoom_in_title":"Zoom in","zoom_out_text":"-","zoom_out_title":"Zoom out"}},"d7c16f376b6f4a76b08d1be5844baba0":{"model_module":"jupyter-leaflet","model_module_version":"^0.17","model_name":"LeafletMapStyleModel","state":{"_model_module":"jupyter-leaflet","_model_module_version":"^0.17","_model_name":"LeafletMapStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"StyleView","cursor":"grab"}},"dcf854492e414ed897e5d89f00d029bf":{"model_module":"jupyter-leaflet","model_module_version":"^0.17","model_name":"LeafletMapStyleModel","state":{"_model_module":"jupyter-leaflet","_model_module_version":"^0.17","_model_name":"LeafletMapStyleModel","_view_count":null,"_view_module":"@jupyter-widgets/base","_view_module_version":"2.0.0","_view_name":"StyleView","cursor":"move"}}},"version_major":2,"version_minor":0}},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:14:02.154099Z","iopub.status.busy":"2023-03-22T13:14:02.152393Z","iopub.status.idle":"2023-03-22T13:14:02.267553Z","shell.execute_reply":"2023-03-22T13:14:02.265095Z"},"papermill":{"duration":0.129807,"end_time":"2023-03-22T13:14:02.270394","exception":false,"start_time":"2023-03-22T13:14:02.140587","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from eoxhub import check_compatibility\ncheck_compatibility(\"user-2023.03-02\", dependencies=[])","visibility":"show","key":"XCvVKApcHY"},{"type":"output","id":"OSOpAv0r5mr8TxJHOyCJb","data":[{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"<script type=\"text/javascript\">\n        function toggle(id) {\n            el = document.getElementById(id);\n            el.style.display = el.style.display === \"none\" ? \"block\" : \"none\";\n        }\n    </script>","content_type":"text/html"},"text/plain":{"content":"<IPython.core.display.HTML object>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"This notebook is compatible with this base image version (user-2023.03-02).","content_type":"text/html"},"text/plain":{"content":"<IPython.core.display.HTML object>","content_type":"text/plain"}}}],"visibility":"show","key":"UnuViCunuA"}],"visibility":"show","key":"WiH2VyBeEB"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.007609,"end_time":"2023-03-22T13:14:02.287176","exception":false,"start_time":"2023-03-22T13:14:02.279567","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Time series using STAC API statistics endpoints","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WavYY67Kn5"}],"identifier":"time-series-using-stac-api-statistics-endpoints","label":"Time series using STAC API statistics endpoints","html_id":"time-series-using-stac-api-statistics-endpoints","implicit":true,"key":"ElPdJrD8Fh"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This notebook demonstrates how to generate a timeseries using STAC API statistics endpoints.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"o0mNOyEkS8"}],"key":"g9ol4qe7Z4"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Author: Leo Thomas","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"m6PvLkizZZ"}],"key":"Kce7ZVVcgJ"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Lasted Updated Date: July 13, 2022","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"o8vE0W5zwh"}],"key":"bOQhURdgiz"}],"key":"S5enVJaNPf"}],"visibility":"show","key":"FpAbSdxOVk"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:14:02.310657Z","iopub.status.busy":"2023-03-22T13:14:02.309835Z","iopub.status.idle":"2023-03-22T13:14:03.830891Z","shell.execute_reply":"2023-03-22T13:14:03.828608Z"},"papermill":{"duration":1.538027,"end_time":"2023-03-22T13:14:03.834390","exception":false,"start_time":"2023-03-22T13:14:02.296363","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import datetime as dt\nfrom ipyleaflet import basemaps, Map, GeoJSON\nimport json\nimport requests as re\nimport matplotlib.pyplot as plt\nimport pprint\nimport time\n\nSTAC_API_URL = \"https://staging-stac.delta-backend.com\"\nRASTER_API_URL = \"https://staging-raster.delta-backend.com\"","visibility":"show","key":"TMUdFKjT1r"},{"type":"output","id":"-xheOhwAxDpeJGl3nohxY","data":[],"visibility":"show","key":"s8Uhc0FNT0"}],"visibility":"show","key":"PQnKVZ9wOA"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.010152,"end_time":"2023-03-22T13:14:03.859097","exception":false,"start_time":"2023-03-22T13:14:03.848945","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Declare your collection of interest","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"a5jq5R6tYu"}],"identifier":"declare-your-collection-of-interest","label":"Declare your collection of interest","html_id":"declare-your-collection-of-interest","implicit":true,"key":"Z0mN4MFlrT"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"You can discover available collections the following ways:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"FZwaNsC6Wf"}],"key":"PCFvY5Ub11"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Use the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"kqrEF2aYpO"},{"type":"inlineCode","value":"{STAC_ENDPOINT_URL}/collections","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ggRh0PfzCz"},{"type":"text","value":" API endpoint (JSON response)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"GT941VYSE5"}],"key":"DVZjV34IhC"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Programmatically using ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"MGFy4ssrON"},{"type":"inlineCode","value":"pystac","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"y3DzlkwRap"},{"type":"text","value":" (see example in the ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"XN8wOSKSYC"},{"type":"inlineCode","value":"list-collections.ipynb","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"DoTpYVYru9"},{"type":"text","value":" notebook","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"WqK4aXGDoZ"}],"key":"yL51rSIrak"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"In the STAC Browser: ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"DLswUU6JWj"},{"type":"link","url":"http://delta-staging-stac-browser.s3-website-us-east-1.amazonaws.com/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"http://​delta​-staging​-stac​-browser​.s3​-website​-us​-east​-1​.amazonaws​.com/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"NUfW4KEvXl"}],"urlSource":"http://delta-staging-stac-browser.s3-website-us-east-1.amazonaws.com/","key":"l6tSR7QVTx"}],"key":"TGFPp4469m"}],"key":"XBUkDhlWwO"}],"visibility":"show","key":"u527V696Hz"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:14:03.884049Z","iopub.status.busy":"2023-03-22T13:14:03.883285Z","iopub.status.idle":"2023-03-22T13:14:03.892798Z","shell.execute_reply":"2023-03-22T13:14:03.889039Z"},"papermill":{"duration":0.026651,"end_time":"2023-03-22T13:14:03.897242","exception":false,"start_time":"2023-03-22T13:14:03.870591","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"collection = 'no2-monthly'","visibility":"show","key":"ChHY68f0bn"},{"type":"output","id":"HKndBAHtJ1ECAaZJRZtMd","data":[],"visibility":"show","key":"BaSi9aFOat"}],"visibility":"show","key":"Xne8wyhkKI"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.011979,"end_time":"2023-03-22T13:14:03.920867","exception":false,"start_time":"2023-03-22T13:14:03.908888","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Discover data using the STAC endpoint","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Wb8xzHduhd"}],"identifier":"discover-data-using-the-stac-endpoint","label":"Discover data using the STAC endpoint","html_id":"discover-data-using-the-stac-endpoint","implicit":true,"key":"wWtcjZ6kTx"}],"visibility":"show","key":"gYHpAtwr6g"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:14:03.945406Z","iopub.status.busy":"2023-03-22T13:14:03.944595Z","iopub.status.idle":"2023-03-22T13:14:04.715317Z","shell.execute_reply":"2023-03-22T13:14:04.712382Z"},"papermill":{"duration":0.786754,"end_time":"2023-03-22T13:14:04.719141","exception":false,"start_time":"2023-03-22T13:14:03.932387","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"re.get(f\"{STAC_API_URL}/collections/{collection}\").json()","visibility":"show","key":"C37N2gT7Ie"},{"type":"output","id":"zEPbwKPrzypKOIySJTlfi","data":[{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/plain":{"content":"{'id': 'no2-monthly',\n 'type': 'Collection',\n 'links': [{'rel': 'items',\n   'type': 'application/geo+json',\n   'href': 'https://staging-stac.delta-backend.com/collections/no2-monthly/items'},\n  {'rel': 'parent',\n   'type': 'application/json',\n   'href': 'https://staging-stac.delta-backend.com/'},\n  {'rel': 'root',\n   'type': 'application/json',\n   'href': 'https://staging-stac.delta-backend.com/'},\n  {'rel': 'self',\n   'type': 'application/json',\n   'href': 'https://staging-stac.delta-backend.com/collections/no2-monthly'}],\n 'title': 'NO₂',\n 'extent': {'spatial': {'bbox': [[-180, -90, 180, 90]]},\n  'temporal': {'interval': [['2016-01-01 00:00:00+00',\n     '2022-12-01 00:00:00+00']]}},\n 'license': 'MIT',\n 'summaries': {'datetime': ['2016-01-01T00:00:00Z', '2022-12-01T00:00:00Z'],\n  'cog_default': {'max': 50064805976866816, 'min': -10183824872833024}},\n 'description': 'Darker colors indicate higher nitrogen dioxide (NO₂) levels and more activity. Lighter colors indicate lower levels of NO₂ and less activity. Missing pixels indicate areas of no data most likely associated with cloud cover or snow.',\n 'item_assets': {'cog_default': {'type': 'image/tiff; application=geotiff; profile=cloud-optimized',\n   'roles': ['data', 'layer'],\n   'title': 'Default COG Layer',\n   'description': 'Cloud optimized default layer to display on map'}},\n 'stac_version': '1.0.0',\n 'stac_extensions': ['https://stac-extensions.github.io/item-assets/v1.0.0/schema.json'],\n 'dashboard:is_periodic': True,\n 'dashboard:time_density': 'month'}","content_type":"text/plain"}}}],"visibility":"show","key":"Yj0AmTSIPv"}],"visibility":"show","key":"e46wehsjDL"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.008965,"end_time":"2023-03-22T13:14:04.736750","exception":false,"start_time":"2023-03-22T13:14:04.727785","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Describe the periodic nature of the data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cVhHS9ihQ6"}],"identifier":"describe-the-periodic-nature-of-the-data","label":"Describe the periodic nature of the data","html_id":"describe-the-periodic-nature-of-the-data","implicit":true,"key":"n7jhI90r55"}],"visibility":"show","key":"yGdVXZ89vp"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:14:04.801035Z","iopub.status.busy":"2023-03-22T13:14:04.798695Z","iopub.status.idle":"2023-03-22T13:14:05.549573Z","shell.execute_reply":"2023-03-22T13:14:05.541024Z"},"papermill":{"duration":0.766128,"end_time":"2023-03-22T13:14:05.553301","exception":false,"start_time":"2023-03-22T13:14:04.787173","status":"completed"},"scrolled":true,"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"pprint.pprint({\n    k:v for k,v in re.get(f\"{STAC_API_URL}/collections/no2-monthly\").json().items()\n    if k in [\"dashboard:is_periodic\", \"dashboard:time_density\", \"summaries\"]\n})","visibility":"show","key":"L8HsRXoqbT"},{"type":"output","id":"YQDwtE2xymZM8-bT4Ov8P","data":[{"name":"stdout","output_type":"stream","text":"{'dashboard:is_periodic': True,\n 'dashboard:time_density': 'month',\n 'summaries': {'cog_default': {'max': 50064805976866816,\n                               'min': -10183824872833024},\n               'datetime': ['2016-01-01T00:00:00Z', '2022-12-01T00:00:00Z']}}\n"}],"visibility":"show","key":"xCGkk8CHA7"}],"visibility":"show","key":"q1Fk5pyoG5"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.009484,"end_time":"2023-03-22T13:14:05.585488","exception":false,"start_time":"2023-03-22T13:14:05.576004","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Load and inspect one of the STAC items","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AaRV76WbR9"}],"identifier":"load-and-inspect-one-of-the-stac-items","label":"Load and inspect one of the STAC items","html_id":"load-and-inspect-one-of-the-stac-items","implicit":true,"key":"unChDi7xVj"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This step is just for demonstration, to inspect what an item looks like.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"fZtfKuijRl"}],"key":"AEJL5ctGui"}],"visibility":"show","key":"PmPWccU8Kd"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:14:05.608667Z","iopub.status.busy":"2023-03-22T13:14:05.607960Z","iopub.status.idle":"2023-03-22T13:14:06.964447Z","shell.execute_reply":"2023-03-22T13:14:06.961945Z"},"papermill":{"duration":1.375056,"end_time":"2023-03-22T13:14:06.971215","exception":false,"start_time":"2023-03-22T13:14:05.596159","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"items = re.get(f\"{STAC_API_URL}/collections/{collection}/items?limit=100\").json()[\"features\"]\nitems[0]","visibility":"show","key":"oCyh5dgDT7"},{"type":"output","id":"3hni6ndVI_oQ0X4kJ1keP","data":[{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/plain":{"content":"{'id': 'OMI_trno2_0.10x0.10_202212_Col3_V4.nc',\n 'bbox': [-180.0, -90.0, 180.0, 90.0],\n 'type': 'Feature',\n 'links': [{'rel': 'collection',\n   'type': 'application/json',\n   'href': 'https://staging-stac.delta-backend.com/collections/no2-monthly'},\n  {'rel': 'parent',\n   'type': 'application/json',\n   'href': 'https://staging-stac.delta-backend.com/collections/no2-monthly'},\n  {'rel': 'root',\n   'type': 'application/json',\n   'href': 'https://staging-stac.delta-backend.com/'},\n  {'rel': 'self',\n   'type': 'application/geo+json',\n   'href': 'https://staging-stac.delta-backend.com/collections/no2-monthly/items/OMI_trno2_0.10x0.10_202212_Col3_V4.nc'}],\n 'assets': {'cog_default': {'href': 's3://veda-data-store-staging/no2-monthly/OMI_trno2_0.10x0.10_202212_Col3_V4.nc.tif',\n   'type': 'image/tiff; application=geotiff; profile=cloud-optimized',\n   'roles': ['data', 'layer'],\n   'title': 'Default COG Layer',\n   'description': 'Cloud optimized default layer to display on map',\n   'raster:bands': [{'scale': 1.0,\n     'nodata': -1.2676506002282294e+30,\n     'offset': 0.0,\n     'sampling': 'area',\n     'data_type': 'float32',\n     'histogram': {'max': 38843752944500740,\n      'min': -6707683428139008.0,\n      'count': 11.0,\n      'buckets': [58.0,\n       423787.0,\n       8532.0,\n       1008.0,\n       339.0,\n       199.0,\n       79.0,\n       4.0,\n       0.0,\n       2.0]},\n     'statistics': {'mean': 423085978017950.7,\n      'stddev': 971153921053730.1,\n      'maximum': 38843752944500740,\n      'minimum': -6707683428139008.0,\n      'valid_percent': 82.78045654296875}}]}},\n 'geometry': {'type': 'Polygon',\n  'coordinates': [[[-180, -90],\n    [180, -90],\n    [180, 90],\n    [-180, 90],\n    [-180, -90]]]},\n 'collection': 'no2-monthly',\n 'properties': {'proj:bbox': [-180.0, -90.0, 180.0, 90.0],\n  'proj:epsg': 4326.0,\n  'proj:shape': [1800.0, 3600.0],\n  'end_datetime': '2022-12-31T00:00:00',\n  'proj:geometry': {'type': 'Polygon',\n   'coordinates': [[[-180.0, -90.0],\n     [180.0, -90.0],\n     [180.0, 90.0],\n     [-180.0, 90.0],\n     [-180.0, -90.0]]]},\n  'proj:transform': [0.1, 0.0, -180.0, 0.0, -0.1, 90.0, 0.0, 0.0, 1.0],\n  'start_datetime': '2022-12-01T00:00:00'},\n 'stac_version': '1.0.0',\n 'stac_extensions': ['https://stac-extensions.github.io/projection/v1.0.0/schema.json',\n  'https://stac-extensions.github.io/raster/v1.1.0/schema.json']}","content_type":"text/plain"}}}],"visibility":"show","key":"kc6riIJcA1"}],"visibility":"show","key":"lrvl6lS6BG"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.015219,"end_time":"2023-03-22T13:14:07.000160","exception":false,"start_time":"2023-03-22T13:14:06.984941","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Define a bounding box","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oJZvajvXG0"}],"identifier":"define-a-bounding-box","label":"Define a bounding box","html_id":"define-a-bounding-box","implicit":true,"key":"FqquZ0Ls2S"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We’ve defined a bounding box for France in this case.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Uff4GI2iTL"}],"key":"XuNA4aZpfE"}],"visibility":"show","key":"nqHYw3HUba"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:14:07.042727Z","iopub.status.busy":"2023-03-22T13:14:07.042035Z","iopub.status.idle":"2023-03-22T13:14:07.072841Z","shell.execute_reply":"2023-03-22T13:14:07.070098Z"},"papermill":{"duration":0.055523,"end_time":"2023-03-22T13:14:07.078577","exception":false,"start_time":"2023-03-22T13:14:07.023054","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"bounding_box_france = { \n    \"type\": \"Feature\",\n    \"properties\": {},\n    \"geometry\": {\n        \"type\": \"Polygon\",\n        \"coordinates\": [[\n            [\n              -5.4534286,\n              41.2632185\n            ],\n            [\n              9.8678344,\n              41.2632185\n            ],\n            [\n              9.8678344,\n              51.268318\n            ],\n            [\n              -5.4534286,\n              51.268318\n            ],\n            [\n              -5.4534286,\n              41.2632185\n            ]\n        ]]\n    }\n}\n\n","visibility":"show","key":"lzYbwQiIXi"},{"type":"output","id":"voBmuQ7ufi5or0GUNUyz8","data":[],"visibility":"show","key":"PJaFunbxlN"}],"visibility":"show","key":"uH3toRPylW"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.022779,"end_time":"2023-03-22T13:14:07.118491","exception":false,"start_time":"2023-03-22T13:14:07.095712","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Map the bounding box","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DEHK4uV2ZL"}],"identifier":"map-the-bounding-box","label":"Map the bounding box","html_id":"map-the-bounding-box","implicit":true,"key":"PQfi1UjynX"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This step is for visual inspection of the bounding box.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jHK2UkWwL9"}],"key":"ZxquyEmPVw"}],"visibility":"show","key":"kYmzuzsIcc"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:14:07.155259Z","iopub.status.busy":"2023-03-22T13:14:07.154280Z","iopub.status.idle":"2023-03-22T13:14:07.184049Z","shell.execute_reply":"2023-03-22T13:14:07.182475Z"},"papermill":{"duration":0.095161,"end_time":"2023-03-22T13:14:07.228618","exception":false,"start_time":"2023-03-22T13:14:07.133457","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"m = Map(\n    basemap=basemaps.OpenStreetMap.Mapnik,\n    center=(47,4),\n    zoom=3\n)\ngeo = GeoJSON(\n    data=bounding_box_france,\n    style={\"color\": \"red\", \"fillOpacity\": 0}\n)\nm.add_layer(geo)\nm","visibility":"show","key":"QzYqzg2FSL"},{"type":"output","id":"bYpTeyAesNvLMP9VqRY6e","data":[{"output_type":"execute_result","execution_count":8,"metadata":{},"data":{"application/vnd.jupyter.widget-view+json":{"content":"{\"model_id\":\"a24bfc3ec6714fbfa5ff61354fb4c06d\",\"version_major\":2,\"version_minor\":0}","content_type":"application/vnd.jupyter.widget-view+json"},"text/plain":{"content":"Map(center=[47, 4], controls=(ZoomControl(options=['position', 'zoom_in_text', 'zoom_in_title', 'zoom_out_text…","content_type":"text/plain"}}}],"visibility":"show","key":"EAnm7YCyXl"}],"visibility":"show","key":"qAFy8uKlwo"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.016362,"end_time":"2023-03-22T13:14:07.258371","exception":false,"start_time":"2023-03-22T13:14:07.242009","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Use ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QYb8WtsLxM"},{"type":"inlineCode","value":"/cog/statistics","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UCgvM9bLV6"},{"type":"text","value":" to get data for the bounding box","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"x0hGnpfy9W"}],"identifier":"use-cog-statistics-to-get-data-for-the-bounding-box","label":"Use /cog/statistics to get data for the bounding box","html_id":"use-cog-statistics-to-get-data-for-the-bounding-box","implicit":true,"key":"xnrF6eXX5U"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"First, we create a ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"B5A3ikzrFs"},{"type":"inlineCode","value":"generate_stats","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"U1fgyt3hUS"},{"type":"text","value":" function and then we call it with the bounding box defined for France.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VI8G1AwkJ5"}],"key":"CEKcSyeTIC"}],"visibility":"show","key":"IjZugpQg7v"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:14:07.280233Z","iopub.status.busy":"2023-03-22T13:14:07.279834Z","iopub.status.idle":"2023-03-22T13:14:07.292092Z","shell.execute_reply":"2023-03-22T13:14:07.288380Z"},"papermill":{"duration":0.029689,"end_time":"2023-03-22T13:14:07.298709","exception":false,"start_time":"2023-03-22T13:14:07.269020","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"def generate_stats(item, bounding_box):\n    result = re.post(\n        f\"{RASTER_API_URL}/cog/statistics\", \n        params={\n            \"url\":item[\"assets\"][\"cog_default\"][\"href\"]\n        },\n        json=bounding_box\n    ).json()    \n    return {\n        **result[\"properties\"], \"start_datetime\":item[\"properties\"][\"start_datetime\"]\n    }\n   ","visibility":"show","key":"SMRQeuYVmP"},{"type":"output","id":"owYc9rQ4rXc92q5cR_3mW","data":[],"visibility":"show","key":"jcpILDritb"}],"visibility":"show","key":"IsZTaEFvRw"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.014967,"end_time":"2023-03-22T13:14:07.328855","exception":false,"start_time":"2023-03-22T13:14:07.313888","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Generate and estimate time to generate statistics","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cRPq23Z7fJ"}],"identifier":"generate-and-estimate-time-to-generate-statistics","label":"Generate and estimate time to generate statistics","html_id":"generate-and-estimate-time-to-generate-statistics","implicit":true,"key":"mTz40sUawu"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This may take a minute, depending on the network.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cz8UmZ8DYL"}],"key":"s3vKPx7LWP"}],"visibility":"show","key":"CYYTY2liUp"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:14:07.358187Z","iopub.status.busy":"2023-03-22T13:14:07.357659Z","iopub.status.idle":"2023-03-22T13:15:29.960141Z","shell.execute_reply":"2023-03-22T13:15:29.952468Z"},"papermill":{"duration":82.640115,"end_time":"2023-03-22T13:15:29.985929","exception":false,"start_time":"2023-03-22T13:14:07.345814","status":"completed"},"scrolled":true,"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"start = time.time()\nstats = [generate_stats(item, bounding_box_france) for item in items]\nend = time.time()\nprint(f\"Elapsed time for small bounding box (france): {round(end-start,2)} seconds. Items queried: {len(items)}\")","visibility":"show","key":"X1ronzG6Ay"},{"type":"output","id":"LizokuHz8NWwYKZviiSN_","data":[{"name":"stdout","output_type":"stream","text":"Elapsed time for small bounding box (france): 82.58 seconds. Items queried: 84\n"}],"visibility":"show","key":"e4WugevqxD"}],"visibility":"show","key":"MaUUlkHugw"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.028121,"end_time":"2023-03-22T13:15:30.061808","exception":false,"start_time":"2023-03-22T13:15:30.033687","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Inspect one result","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rvhuuipKSl"}],"identifier":"inspect-one-result","label":"Inspect one result","html_id":"inspect-one-result","implicit":true,"key":"UeI71q3Xoj"}],"visibility":"show","key":"mNWnXLTu4U"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:15:30.111260Z","iopub.status.busy":"2023-03-22T13:15:30.107875Z","iopub.status.idle":"2023-03-22T13:15:30.157196Z","shell.execute_reply":"2023-03-22T13:15:30.150028Z"},"papermill":{"duration":0.07487,"end_time":"2023-03-22T13:15:30.163173","exception":false,"start_time":"2023-03-22T13:15:30.088303","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"stats[1]","visibility":"show","key":"mgGLpDINLz"},{"type":"output","id":"pIwPCHnFT8XDoLIzZznqv","data":[{"output_type":"execute_result","execution_count":11,"metadata":{},"data":{"text/plain":{"content":"{'statistics': {'1': {'min': -3706634085859328.0,\n   'max': 9359124580007936.0,\n   'mean': 1527997900534075.2,\n   'count': 15163.0,\n   'sum': 2.3169032165798183e+19,\n   'std': 1219667867095242.0,\n   'median': 1346475602739200.0,\n   'majority': 408108295782400.0,\n   'minority': -3706634085859328.0,\n   'unique': 15147.0,\n   'histogram': [[11.0,\n     127.0,\n     1014.0,\n     7655.0,\n     4688.0,\n     1083.0,\n     375.0,\n     151.0,\n     42.0,\n     17.0],\n    [-3706634085859328.0,\n     -2400058326646784.0,\n     -1093482366107648.0,\n     213093510545408.0,\n     1519669353644032.0,\n     2826245247074304.0,\n     4132821006286848.0,\n     5439396765499392.0,\n     6745973061582848.0,\n     8052548820795392.0,\n     9359124580007936.0]],\n   'valid_percent': 99.1,\n   'masked_pixels': 137.0,\n   'valid_pixels': 15163.0,\n   'percentile_98': 5036644475129037.0,\n   'percentile_2': -612850714196049.9}},\n 'start_datetime': '2022-11-01T00:00:00'}","content_type":"text/plain"}}}],"visibility":"show","key":"I90LF4y6JY"}],"visibility":"show","key":"LXLPVpbLEZ"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:15:30.197877Z","iopub.status.busy":"2023-03-22T13:15:30.196641Z","iopub.status.idle":"2023-03-22T13:15:30.242716Z","shell.execute_reply":"2023-03-22T13:15:30.237637Z"},"papermill":{"duration":0.068718,"end_time":"2023-03-22T13:15:30.248139","exception":false,"start_time":"2023-03-22T13:15:30.179421","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"dates = [dt.datetime.strptime(stat[\"start_datetime\"], \"%Y-%m-%dT%H:%M:%S\") for stat in stats]\nmeans = [stat[\"statistics\"][\"1\"][\"mean\"] for stat in stats]\nstd_devs = [stat[\"statistics\"][\"1\"][\"std\"] for stat in stats]\nupper_bounds = [m+s for (m,s) in zip(means, std_devs)]\nlower_bounds = [m-s for (m,s) in zip(means, std_devs)]","visibility":"show","key":"PBtWy1rFYO"},{"type":"output","id":"4LJdpX6j3mrRPhqCpvpC0","data":[],"visibility":"show","key":"NZOrzTOLnB"}],"visibility":"show","key":"PsxOcmQPhQ"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:15:30.278457Z","iopub.status.busy":"2023-03-22T13:15:30.277913Z","iopub.status.idle":"2023-03-22T13:15:31.060430Z","shell.execute_reply":"2023-03-22T13:15:31.058771Z"},"papermill":{"duration":0.809461,"end_time":"2023-03-22T13:15:31.069523","exception":false,"start_time":"2023-03-22T13:15:30.260062","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig = plt.figure(figsize=(20,10))\nplt.plot(dates, means, 'black', label=\"Mean monthly NO2 values\")\n\nplt.fill_between(dates, upper_bounds, lower_bounds, facecolor=\"lightgray\", interpolate=False, label=\"+/- one standard devation\")\nplt.legend()\nplt.title(\"NO2 Values in France (2016-2022)\")","visibility":"show","key":"OZin21R1Lo"},{"type":"output","id":"jYnf46Y-XntdMnMq_2MLu","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"8d326d957309da02b66986fa387b02dd","path":"/build/8d326d957309da02b66986fa387b02dd.png"},"text/plain":{"content":"<Figure size 2000x1000 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"GUGJRR1R7f"}],"visibility":"show","key":"xdbak1LzL5"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.019207,"end_time":"2023-03-22T13:15:31.120464","exception":false,"start_time":"2023-03-22T13:15:31.101257","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Comparison: multi vs single threaded approach","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oVFK7lRQST"}],"identifier":"comparison-multi-vs-single-threaded-approach","label":"Comparison: multi vs single threaded approach","html_id":"comparison-multi-vs-single-threaded-approach","implicit":true,"key":"tZJI9dDr85"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Earlier we requested the statistics from the NASA API for each timestep individually. The API is powered by ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Ix0C9Yy0cb"},{"type":"link","url":"https://aws.amazon.com/lambda/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"AWS Lambda","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nVfxucza3d"}],"urlSource":"https://aws.amazon.com/lambda/","key":"rs0BKvyOE2"},{"type":"text","value":", which is ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"M4qlEvMTpz"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"highly","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KOA9V8qXk6"}],"key":"pfKfKJHsW7"},{"type":"text","value":" scalable. Since each statistics request is for a single timestamp, we can request statistics for multiple timesteps concurrently. We will do this by using the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KcGPPt1NKM"},{"type":"inlineCode","value":"concurrent.futures","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"HcqulSHFDq"},{"type":"text","value":" library:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vAviOPBWzA"}],"key":"gKYIP65l5A"}],"visibility":"show","key":"CYDFiyAYOR"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:15:31.153911Z","iopub.status.busy":"2023-03-22T13:15:31.152575Z","iopub.status.idle":"2023-03-22T13:15:39.471364Z","shell.execute_reply":"2023-03-22T13:15:39.469785Z"},"papermill":{"duration":8.33949,"end_time":"2023-03-22T13:15:39.475801","exception":false,"start_time":"2023-03-22T13:15:31.136311","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from concurrent.futures import ThreadPoolExecutor \n\ndef _generate_stats(item):\n    return generate_stats(item, bounding_box_france)\n\nstart = time.time()\nwith ThreadPoolExecutor(max_workers=10) as executor: \n    stats = list(executor.map(_generate_stats, items))\nend = time.time()\nprint(f\"Elapsed time for small bounding box (france) with multi-threading: {round(end-start,2)} seconds. Items queried: {len(items)}\")","visibility":"show","key":"aG9p53Ym7E"},{"type":"output","id":"32P3oicW1yIIHZjWcM8LF","data":[{"name":"stdout","output_type":"stream","text":"Elapsed time for small bounding box (france) with multi-threading: 8.31 seconds. Items queried: 84\n"}],"visibility":"show","key":"jjCxsrcVHZ"}],"visibility":"show","key":"HethMjgdig"}],"key":"jwzXUyktuZ"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"NO2 timeseries analysis","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/igarss2022/igarss-22-no2-timeseries-analysis","group":"Contributions"},"next":{"title":"How to access IACS Spatial Data","url":"/external-notebooks/eurodatacube/notebooks/notebooks/curated/access-iacs-data","group":"Curated"}}},"domain":"http://localhost:3000"}