{"version":1,"kind":"Notebook","sha256":"bd7893f5c2878edf734c53cfd491b949783cd0865504bfb6cee4d4e32ae1ed69","slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.gpu-support-eoxhub","location":"/external_notebooks/eurodatacube/notebooks/notebooks/contributions/GPU-Support_EOxHub.ipynb","dependencies":[],"frontmatter":{"title":"GPU-Support on EOxHub","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3","language":"python"},"github":"https://github.com/eoxhub-workspaces/documentation/","numbering":{"title":{"offset":5}},"edit_url":"https://github.com/eoxhub-workspaces/documentation//blob/main/external_notebooks/eurodatacube/notebooks/notebooks/contributions/GPU-Support_EOxHub.ipynb","exports":[{"format":"ipynb","filename":"GPU-Support_EOxHub.ipynb","url":"/build/GPU-Support_EOxHub-1e3375719610f3fa0c2692e6e89a204d.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"GPU support is established via CUDA drivers for users subscribed to EOxHub GPU Plan.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hWGMBg4VqJ"}],"key":"uGUt0kcsLc"}],"key":"H6giuYZ0uX"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"!nvidia-smi","key":"kR4o5djmM4"},{"type":"output","id":"0gX2_MmLqW3dYgtPxsZFE","data":[{"name":"stdout","output_type":"stream","text":"Thu Apr  9 06:45:56 2020       \n+-----------------------------------------------------------------------------+\n| NVIDIA-SMI 418.87.00    Driver Version: 418.87.00    CUDA Version: 10.1     |\n|-------------------------------+----------------------+----------------------+\n| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |\n| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |\n|===============================+======================+======================|\n|   0  Tesla V100-SXM2...  On   | 00000000:00:1E.0 Off |                    0 |\n| N/A   36C    P0    51W / 300W |    953MiB / 16130MiB |      0%      Default |\n+-------------------------------+----------------------+----------------------+\n                                                                               \n+-----------------------------------------------------------------------------+\n| Processes:                                                       GPU Memory |\n|  GPU       PID   Type   Process name                             Usage      |\n|=============================================================================|\n+-----------------------------------------------------------------------------+\n"}],"key":"J3VXujWVfk"}],"key":"CG5FvIY26o"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"PyTorch","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FxizGk5y1W"}],"identifier":"pytorch","label":"PyTorch","html_id":"pytorch","implicit":true,"key":"cK31f6nlOp"}],"key":"YkE3G4lzaK"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"import torch\nassert torch.cuda.is_available()","key":"nVNlPL50rH"},{"type":"output","id":"3MLSvkMl99ZX5k0dWPa0E","data":[],"key":"RNSXvpzjzu"}],"key":"vTvM4KllRN"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"CPU","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iDZXiykPZx"}],"identifier":"cpu","label":"CPU","html_id":"cpu","implicit":true,"key":"dndP9jd56l"}],"key":"G17QRBbcwf"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"x = torch.rand(10000, 256)","key":"CUwS73Ih7K"},{"type":"output","id":"OAeaJ3b08My1RREUzPJJ3","data":[],"key":"rjWICvMnLo"}],"key":"sseMY0mh4J"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"%%timeit\nH = x.mm( (x.t().mm(x)).inverse() ).mm(x.t())","key":"oVYq2eJOYC"},{"type":"output","id":"OyJufEEGFsqWi2CAIR1Ot","data":[{"name":"stdout","output_type":"stream","text":"241 ms ± 4.78 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)\n"}],"key":"fKyIYqdpow"}],"key":"Gc8n3J73mH"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"GPU","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tD59hALWa7"}],"identifier":"gpu","label":"GPU","html_id":"gpu","implicit":true,"key":"cxFSc9zFTo"}],"key":"rPSCBqrwgz"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"device = torch.device(\"cuda\")\nx = torch.rand(10000, 256, device=device)\nx = x.to(device)","key":"bH0jL1OlNa"},{"type":"output","id":"5SdSXseNfSJ2JbkSHscd2","data":[],"key":"RDmYcDpsP2"}],"key":"h7TEJVmpAD"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"%%timeit\nH = x.mm( (x.t().mm(x)).inverse() ).mm(x.t())","key":"B8gSnvI7wb"},{"type":"output","id":"BWFWj0ZUDUm1FgYwfU3uI","data":[{"name":"stdout","output_type":"stream","text":"11.6 ms ± 290 µs per loop (mean ± std. dev. of 7 runs, 1 loop each)\n"}],"key":"BcWEp3oOBr"}],"key":"DwQhQpXWEK"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Tensorflow","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"u45quHrg7t"}],"identifier":"tensorflow","label":"Tensorflow","html_id":"tensorflow","implicit":true,"key":"dZNU6nkgv0"}],"key":"qgtZ40N031"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"import tensorflow as tf\nimport datetime\nfrom tensorflow.python.client import device_lib\nassert tf.test.is_gpu_available(cuda_only=True)\ntf.config.list_physical_devices('GPU')","key":"pCsrB6XNNr"},{"type":"output","id":"MIuwlmPrxC5g1uJ4cLX8Q","data":[{"name":"stdout","output_type":"stream","text":"WARNING:tensorflow:From <ipython-input-7-7c4202774046>:4: is_gpu_available (from tensorflow.python.framework.test_util) is deprecated and will be removed in a future version.\nInstructions for updating:\nUse `tf.config.list_physical_devices('GPU')` instead.\n"},{"output_type":"execute_result","execution_count":7,"metadata":{},"data":{"text/plain":{"content":"[PhysicalDevice(name='/physical_device:GPU:0', device_type='GPU')]","content_type":"text/plain"}}}],"key":"rbgTLQwnyd"}],"key":"KIOQ6kcgMl"}],"key":"EUULqIqLAr"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Pre-requisites","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/globalearthmonitor-example","group":"Contributions"},"next":{"title":"ESA EO \\phi- week 2020","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/gran-chaco-phiweek","group":"Contributions"}}},"domain":"http://localhost:3000"}