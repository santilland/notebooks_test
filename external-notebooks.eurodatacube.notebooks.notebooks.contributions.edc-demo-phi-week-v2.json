{"version":1,"kind":"Notebook","sha256":"01853120e2e5aa87a75ddd814310b0a2db65edaee065264d2b2ddae8ff6cfd5d","slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-demo-phi-week-v2","location":"/external_notebooks/eurodatacube/notebooks/notebooks/contributions/EDC_demo_phi-week_v2.ipynb","dependencies":[],"frontmatter":{"title":"xcube-gen and xcube-geodb Hands-On Workshop Φ-Week 2020","content_includes_title":true,"kernelspec":{"name":"edc","display_name":"EDC 0.25.0-preview.7 (Python3)","language":"python"},"github":"https://github.com/eoxhub-workspaces/documentation/","numbering":{"title":{"offset":5}},"edit_url":"https://github.com/eoxhub-workspaces/documentation//blob/main/external_notebooks/eurodatacube/notebooks/notebooks/contributions/EDC_demo_phi-week_v2.ipynb","exports":[{"format":"ipynb","filename":"EDC_demo_phi-week_v2.ipynb","url":"/build/EDC_demo_phi-week_v2-012f81415c451200d2f8cf11d60b0fc3.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:06:11.885528Z","iopub.status.busy":"2022-02-23T14:06:11.885220Z","iopub.status.idle":"2022-02-23T14:06:11.991289Z","shell.execute_reply":"2022-02-23T14:06:11.990564Z"},"papermill":{"duration":0.18235,"end_time":"2022-02-23T14:06:11.993450","exception":false,"start_time":"2022-02-23T14:06:11.811100","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from edc import check_compatibility\ncheck_compatibility(\"user-2022.02\", dependencies=[])","visibility":"show","key":"cMNj4u0OKS"},{"type":"output","id":"iLrm4Go0L94OK1R_ZE2YZ","data":[{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"<script type=\"text/javascript\">\n        function toggle(id) {\n            el = document.getElementById(id);\n            el.style.display = el.style.display === \"none\" ? \"block\" : \"none\";\n        }\n    </script>","content_type":"text/html"},"text/plain":{"content":"<IPython.core.display.HTML object>","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"This notebook is compatible with this base image version (user-2022.02).","content_type":"text/html"},"text/plain":{"content":"<IPython.core.display.HTML object>","content_type":"text/plain"}}}],"visibility":"show","key":"GCdNSq4wCP"}],"visibility":"show","key":"NBaLROKgGL"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.067789,"end_time":"2022-02-23T14:06:12.135216","exception":false,"start_time":"2022-02-23T14:06:12.067427","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"xcube-gen and xcube-geodb Hands-On Workshop Φ-Week 2020","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FdfbKMhIuq"}],"identifier":"xcube-gen-and-xcube-geodb-hands-on-workshop-week-2020","label":"xcube-gen and xcube-geodb Hands-On Workshop Φ-Week 2020","html_id":"xcube-gen-and-xcube-geodb-hands-on-workshop-week-2020","implicit":true,"key":"Bx2elYrc3R"},{"type":"heading","depth":2,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Alicja Balfanz and Helge Dzierzon from Brockmann Consult","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"S2sm4Lfz4E"}],"identifier":"alicja-balfanz-and-helge-dzierzon-from-brockmann-consult","label":"Alicja Balfanz and Helge Dzierzon from Brockmann Consult","html_id":"alicja-balfanz-and-helge-dzierzon-from-brockmann-consult","implicit":true,"key":"ivRLQziTTv"}],"visibility":"show","key":"MnFfu0p9nO"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.067936,"end_time":"2022-02-23T14:06:12.274826","exception":false,"start_time":"2022-02-23T14:06:12.206890","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In this Notebook we present how to:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bKIo7c9D2Y"}],"key":"jt87ks341s"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Access data via xcube-sh with a short excursion to the xcube Generator User Interface","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"kgcjhelrdJ"}],"key":"Na2Q0b85C3"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Use xcube-geodb","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xGoter3HZj"}],"key":"KZJlGu7Y5d"}],"key":"Kccn1Urx8x"}],"visibility":"show","key":"pBOpesW73p"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.06972,"end_time":"2022-02-23T14:06:12.409512","exception":false,"start_time":"2022-02-23T14:06:12.339792","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1) Data access via xcube-sh","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SVhOUo2H5A"}],"identifier":"id-1-data-access-via-xcube-sh","label":"1) Data access via xcube-sh","html_id":"id-1-data-access-via-xcube-sh","implicit":true,"key":"s7K6EC6jeN"}],"visibility":"show","key":"z6cYCiHteV"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.059784,"end_time":"2022-02-23T14:06:12.533867","exception":false,"start_time":"2022-02-23T14:06:12.474083","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Please Note!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qW48QL6wwj"}],"key":"TPomYjtxHp"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"The following example shows the use of xcube and xcube Generator User Interface by accissing Sentinel-2 data from SentinelHub. However, SentinelHub is not the only available source!\nCurrently there are three Datastores accessible:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WYHaiblAqD"}],"key":"F8sFlK83dp"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Climate Data Store","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"WpPTnUOsby"}],"key":"esjFL6OaGa"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"SENTINEL Hub","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"lflt16eGou"}],"key":"vXm9CXDUAp"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"ESA CCI Open Data Portal","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"cnNHkO3Vcj"}],"key":"L2c6CGzntb"}],"key":"KhQzB5KXc7"}],"visibility":"show","key":"vpSTquo6id"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.065044,"end_time":"2022-02-23T14:06:12.671806","exception":false,"start_time":"2022-02-23T14:06:12.606762","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 1","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cuAB7tGN4W"}],"key":"Nxs7WY3w9y"},{"type":"text","value":": Import packages for xcube-sh","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dULZckXDjJ"}],"key":"eA9OarvsNF"}],"visibility":"show","key":"x3nAUvoDtF"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:06:12.796403Z","iopub.status.busy":"2022-02-23T14:06:12.796150Z","iopub.status.idle":"2022-02-23T14:06:15.030940Z","shell.execute_reply":"2022-02-23T14:06:15.030224Z"},"papermill":{"duration":2.301416,"end_time":"2022-02-23T14:06:15.033024","exception":false,"start_time":"2022-02-23T14:06:12.731608","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# xcube_sh imports\nfrom xcube_sh.cube import open_cube\nfrom xcube_sh.config import CubeConfig\n\n# various utilities\nimport json\nimport xarray as xr\nimport shapely.geometry\nimport IPython.display\nimport zarr\nimport numpy as np\n\nimport warnings\nwarnings.filterwarnings('ignore')\nwarnings.simplefilter('ignore')\n\n%matplotlib inline","visibility":"show","key":"UhWFMjRu2J"},{"type":"output","id":"HcHKI62KyZIUBpM6R5yfS","data":[],"visibility":"show","key":"sQNzkxkIng"}],"visibility":"show","key":"FZbTu7Q8rP"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.066839,"end_time":"2022-02-23T14:06:15.162248","exception":false,"start_time":"2022-02-23T14:06:15.095409","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 2","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qp7eaCO42N"}],"key":"nPU2LchOt4"},{"type":"text","value":": Setting CubeConfig parameters for generating S2 cubes","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EMaqdtct1c"}],"key":"WMvFyu3ma2"}],"visibility":"show","key":"NribDIPm2I"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:06:15.299824Z","iopub.status.busy":"2022-02-23T14:06:15.299507Z","iopub.status.idle":"2022-02-23T14:06:15.305288Z","shell.execute_reply":"2022-02-23T14:06:15.304501Z"},"papermill":{"duration":0.072404,"end_time":"2022-02-23T14:06:15.307202","exception":false,"start_time":"2022-02-23T14:06:15.234798","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"dataset_name = 'S2L2A' # dataset name\nband_names = ['B01', 'B02', 'B03', 'B04', 'B05', 'B06', 'B08', 'SCL', 'CLD'] # band names\ntile_size = [500, 500] # tile size \n# geometry (bounding box for the area covering Hamburg)\nx1 = 9.86\ny1 = 53.45\nx2 = 10.14\ny2 = 53.62\nbbox = x1, y1, x2, y2\nspatial_res = 0.00018 # spatial resolution (approx. 20 m in degree)\ntime_tolerance='2H'","visibility":"show","key":"GxScEcWSB6"},{"type":"output","id":"HdNBJtlBzhzHcF6c0PaVu","data":[],"visibility":"show","key":"pRbN5quVhK"}],"visibility":"show","key":"rn6NXdZeOd"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.058925,"end_time":"2022-02-23T14:06:15.432366","exception":false,"start_time":"2022-02-23T14:06:15.373441","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"A description about the dataset and the bands may be found here: ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"J50QwoSYzp"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/data/sentinel-2-l2a/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"https://​docs​.sentinel​-hub​.com​/api​/latest​/data​/sentinel​-2​-l2a/","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"T9grIPz7y3"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/data/sentinel-2-l2a/","key":"xzfxV9X7Qb"},{"type":"text","value":" .","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ytOcQfxWu5"}],"key":"ZyOganZXd0"}],"visibility":"show","key":"wl7u3Mq0oc"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.061634,"end_time":"2022-02-23T14:06:15.553932","exception":false,"start_time":"2022-02-23T14:06:15.492298","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 3:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UYCmHbJoCY"}],"key":"KY9y5PJIwd"},{"type":"text","value":" Setting cube configurations for 2018 summer season (May - August)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"d4Pi2nkbI8"}],"key":"rgJ1erSVnc"}],"visibility":"show","key":"LjsNhAy4AU"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:06:15.677847Z","iopub.status.busy":"2022-02-23T14:06:15.677410Z","iopub.status.idle":"2022-02-23T14:06:15.683207Z","shell.execute_reply":"2022-02-23T14:06:15.682352Z"},"papermill":{"duration":0.070396,"end_time":"2022-02-23T14:06:15.685126","exception":false,"start_time":"2022-02-23T14:06:15.614730","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"cube_config_2018 = CubeConfig(dataset_name = dataset_name,\n                              band_names = band_names,\n                              tile_size = tile_size, \n                              bbox = bbox,\n                              spatial_res = spatial_res,\n                              time_range = ['2018-05-01', '2018-08-31'],\n                              time_tolerance = time_tolerance)","visibility":"show","key":"jdWmg4t4Kl"},{"type":"output","id":"bABn_2TPiwp4WBre9uXZo","data":[],"visibility":"show","key":"Z9fh6hTSIl"}],"visibility":"show","key":"mJFXyDoJuB"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.059618,"end_time":"2022-02-23T14:06:15.809834","exception":false,"start_time":"2022-02-23T14:06:15.750216","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 4:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WiLLixoJax"}],"key":"Rs6ibRypzx"},{"type":"text","value":" View bounding box to check seleceted area","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eKUP8RO6Ux"}],"key":"v9ST5JunH4"}],"visibility":"show","key":"PBx4ksaeeN"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:06:15.935761Z","iopub.status.busy":"2022-02-23T14:06:15.935126Z","iopub.status.idle":"2022-02-23T14:06:15.946253Z","shell.execute_reply":"2022-02-23T14:06:15.945108Z"},"papermill":{"duration":0.073931,"end_time":"2022-02-23T14:06:15.949314","exception":false,"start_time":"2022-02-23T14:06:15.875383","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"IPython.display.GeoJSON(shapely.geometry.box(*bbox).__geo_interface__)","visibility":"show","key":"C5a4DbDS41"},{"type":"output","id":"C9IFs0DqDAVULPCVgoIhB","data":[{"output_type":"display_data","metadata":{"application/geo+json":{"expanded":false,"root":"root"}},"data":{"application/geo+json":{"content":"{\"coordinates\":[[[10.14,53.45],[10.14,53.62],[9.86,53.62],[9.86,53.45],[10.14,53.45]]],\"type\":\"Polygon\"}","content_type":"application/geo+json"},"text/plain":{"content":"<IPython.display.GeoJSON object>","content_type":"text/plain"}}}],"visibility":"show","key":"xqub42hHfx"}],"visibility":"show","key":"N3H6Am4RP3"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.063434,"end_time":"2022-02-23T14:06:16.074766","exception":false,"start_time":"2022-02-23T14:06:16.011332","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 5:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QPXSRLMz4v"}],"key":"xkzTpAjoHQ"},{"type":"text","value":" Open data cube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ajErI01XDr"}],"key":"PH2tL2KTSk"}],"visibility":"show","key":"tj3KqTgh0I"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:06:16.198331Z","iopub.status.busy":"2022-02-23T14:06:16.197969Z","iopub.status.idle":"2022-02-23T14:06:17.082537Z","shell.execute_reply":"2022-02-23T14:06:17.081852Z"},"papermill":{"duration":0.952157,"end_time":"2022-02-23T14:06:17.086647","exception":false,"start_time":"2022-02-23T14:06:16.134490","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"cube_S2_2018 = open_cube(cube_config_2018)\ncube_S2_2018","visibility":"show","key":"s1LsmWKi1H"},{"type":"output","id":"R_P0990Dd6ScB5gKlMop8","data":[{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"4caf2707285137cea9e57a38a2f4715a","path":"/build/4caf2707285137cea9e57a38a2f4715a.html"},"text/plain":{"content":"<xarray.Dataset>\nDimensions:    (time: 48, lat: 1000, lon: 2000, bnds: 2)\nCoordinates:\n  * lat        (lat) float64 53.63 53.63 53.63 53.63 ... 53.45 53.45 53.45 53.45\n  * lon        (lon) float64 9.86 9.86 9.86 9.861 ... 10.22 10.22 10.22 10.22\n  * time       (time) datetime64[ns] 2018-05-03T10:42:09 ... 2018-08-28T10:30:13\n    time_bnds  (time, bnds) datetime64[ns] dask.array<chunksize=(48, 2), meta=np.ndarray>\nDimensions without coordinates: bnds\nData variables:\n    B01        (time, lat, lon) float32 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\n    B02        (time, lat, lon) float32 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\n    B03        (time, lat, lon) float32 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\n    B04        (time, lat, lon) float32 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\n    B05        (time, lat, lon) float32 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\n    B06        (time, lat, lon) float32 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\n    B08        (time, lat, lon) float32 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\n    CLD        (time, lat, lon) uint8 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\n    SCL        (time, lat, lon) uint8 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\nAttributes:\n    Conventions:             CF-1.7\n    title:                   S2L2A Data Cube Subset\n    history:                 [{'program': 'xcube_sh.chunkstore.SentinelHubChu...\n    date_created:            2022-02-23T14:06:16.689569\n    time_coverage_start:     2018-05-03T10:42:09+00:00\n    time_coverage_end:       2018-08-28T10:30:13+00:00\n    time_coverage_duration:  P116DT23H48M4S\n    geospatial_lon_min:      9.86\n    geospatial_lat_min:      53.45\n    geospatial_lon_max:      10.219999999999999\n    geospatial_lat_max:      53.63\n    processing_level:        L2A","content_type":"text/plain"}}}],"visibility":"show","key":"JAllFBrhFw"}],"visibility":"show","key":"WCakRQeVov"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.062296,"end_time":"2022-02-23T14:06:17.223600","exception":false,"start_time":"2022-02-23T14:06:17.161304","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 6:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"x9J2KHVSpj"}],"key":"nYsBU7HU7I"},{"type":"text","value":" Plot a single scene for a specific timestamp and band","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oMJ8RXN7FD"}],"key":"Es0nyKM0Kt"}],"visibility":"show","key":"a8QwSZ0TPl"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:06:17.375134Z","iopub.status.busy":"2022-02-23T14:06:17.374456Z","iopub.status.idle":"2022-02-23T14:06:22.699042Z","shell.execute_reply":"2022-02-23T14:06:22.698348Z"},"papermill":{"duration":5.417929,"end_time":"2022-02-23T14:06:22.714130","exception":false,"start_time":"2022-02-23T14:06:17.296201","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"cube_S2_2018.B04.sel(time='2018-07-25 12:00:00', method='nearest').plot.imshow(vmin=0, vmax=0.2, cmap='Greys_r', figsize=(14, 10))","visibility":"show","key":"qMVUwlhIUy"},{"type":"output","id":"wtBk7WhLnCLS5GfIXoPei","data":[{"output_type":"display_data","metadata":{"needs_background":"light"},"data":{"image/png":{"content_type":"image/png","hash":"ec52d6d476bd3eaaf0e9b643b96d3528","path":"/build/ec52d6d476bd3eaaf0e9b643b96d3528.png"},"text/plain":{"content":"<Figure size 1008x720 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"Bbp7yfJFz3"}],"visibility":"show","key":"B1SYhXU7HU"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.091856,"end_time":"2022-02-23T14:06:22.902772","exception":false,"start_time":"2022-02-23T14:06:22.810916","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 7:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KjSmmAam28"}],"key":"lZf5jKElBG"},{"type":"text","value":" Plot a timeseries for a certain location","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"abYyDg2RRh"}],"key":"edpMQcOj4W"}],"visibility":"show","key":"El9IwCAIhZ"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:06:23.083803Z","iopub.status.busy":"2022-02-23T14:06:23.083140Z","iopub.status.idle":"2022-02-23T14:06:54.520008Z","shell.execute_reply":"2022-02-23T14:06:54.519298Z"},"papermill":{"duration":31.528135,"end_time":"2022-02-23T14:06:54.522315","exception":false,"start_time":"2022-02-23T14:06:22.994180","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"cube_S2_2018.B04.sel(lat=53.56, lon=10.00, method='nearest').plot()","visibility":"show","key":"q83W6RdduZ"},{"type":"output","id":"IL7fLfjWXfpDvqUFtlqOB","data":[{"output_type":"display_data","metadata":{"needs_background":"light"},"data":{"image/png":{"content_type":"image/png","hash":"1f29d11402a5398a38e72ffeafa33fd2","path":"/build/1f29d11402a5398a38e72ffeafa33fd2.png"},"text/plain":{"content":"<Figure size 432x288 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"nYFK7T8vII"}],"visibility":"show","key":"ddUpeXl908"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.088689,"end_time":"2022-02-23T14:06:54.707107","exception":false,"start_time":"2022-02-23T14:06:54.618418","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If one wants a subest, e.g. because the region of interest is smaler, this can be achieved by using xcube python api:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dov4UD5qKp"}],"key":"bRrDw6XtZo"}],"visibility":"show","key":"uJTA0yZWnk"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:06:54.895679Z","iopub.status.busy":"2022-02-23T14:06:54.895185Z","iopub.status.idle":"2022-02-23T14:06:55.283717Z","shell.execute_reply":"2022-02-23T14:06:55.282956Z"},"papermill":{"duration":0.482686,"end_time":"2022-02-23T14:06:55.285772","exception":false,"start_time":"2022-02-23T14:06:54.803086","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# xcube imports\nfrom xcube.core.compute import compute_cube\nfrom xcube.core.maskset import MaskSet\nfrom xcube.core.geom import mask_dataset_by_geometry\nfrom xcube.core.geom import clip_dataset_by_geometry","visibility":"show","key":"tqGASFA1cv"},{"type":"output","id":"qlvv1wJ-33y_BGfX4RHzH","data":[],"visibility":"show","key":"vZy5vQxW2s"}],"visibility":"show","key":"wAGpW4Fz9p"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.088889,"end_time":"2022-02-23T14:06:55.462884","exception":false,"start_time":"2022-02-23T14:06:55.373995","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"There are two ways of selecting the area of interest:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fg2toV78nV"}],"key":"zFMRkam3FE"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"By masking - this keeps only the data of the WKT Polygon or shapefile","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"oC5o0n6ceq"}],"key":"p6hZtxk7Yl"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"By clipping - this creates a new bounding box, which ensures that the area of interest is within the subset but keeps the surrounding data (","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"yLzYmk8wiI"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"this is commented out in the following cells","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WeFrCeggB2"}],"key":"MxCV92L3Ra"},{"type":"text","value":")","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zcXI8NuTpF"}],"key":"gganqaOIsS"}],"key":"lAxvyKNxkC"}],"visibility":"show","key":"RHUrp1yfUS"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:06:55.639819Z","iopub.status.busy":"2022-02-23T14:06:55.639143Z","iopub.status.idle":"2022-02-23T14:06:55.644515Z","shell.execute_reply":"2022-02-23T14:06:55.643032Z"},"papermill":{"duration":0.096077,"end_time":"2022-02-23T14:06:55.646905","exception":false,"start_time":"2022-02-23T14:06:55.550828","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Great tool to quickly generate WKT Polygons: https://arthur-e.github.io/Wicket/sandbox-gmaps3.html\npolygon = \"POLYGON((9.994461289534694 53.580963332925194,10.0002977763511 53.57280950628081,9.995147935042507 53.5625130540729,9.987766495833522 53.55374380185022,9.993946305403835 53.55088830422569,10.002529374251491 53.5553754282651,10.016605607161647 53.56190130476089,10.018493882308132 53.568528117753054,10.00853752244485 53.57535774603685,10.016090623030788 53.578211592240635,10.013000718245632 53.579740359179034,10.00682090867532 53.579230776342285,10.003387681136257 53.58249200035297,9.994461289534694 53.580963332925194))\"","visibility":"show","key":"snOVRI0bmJ"},{"type":"output","id":"d3zlKGrdvhB1uCQdYlqL0","data":[],"visibility":"show","key":"yKSPbY2uc1"}],"visibility":"show","key":"P6SkbXKvf7"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:06:55.849288Z","iopub.status.busy":"2022-02-23T14:06:55.848528Z","iopub.status.idle":"2022-02-23T14:06:55.918300Z","shell.execute_reply":"2022-02-23T14:06:55.917584Z"},"papermill":{"duration":0.167789,"end_time":"2022-02-23T14:06:55.920791","exception":false,"start_time":"2022-02-23T14:06:55.753002","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"cube_S2_2018_masked = mask_dataset_by_geometry(cube_S2_2018, geometry=polygon)\n# cube_S2_2018_clipped = clip_dataset_by_geometry(cube_S2_2018, geometry=polygon)","visibility":"show","key":"FHdwtSXSkU"},{"type":"output","id":"6Ho9AQ_GybKo2yPgXfQPd","data":[],"visibility":"show","key":"S7MVyhRaUH"}],"visibility":"show","key":"PtIu7ysqPV"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:06:56.110025Z","iopub.status.busy":"2022-02-23T14:06:56.109337Z","iopub.status.idle":"2022-02-23T14:06:56.185740Z","shell.execute_reply":"2022-02-23T14:06:56.184994Z"},"papermill":{"duration":0.17353,"end_time":"2022-02-23T14:06:56.189791","exception":false,"start_time":"2022-02-23T14:06:56.016261","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"cube_S2_2018_masked\n# cube_S2_2018_clipped","visibility":"show","key":"AOevDD3ggf"},{"type":"output","id":"adJ3G33gJwIH6-vGXCm_0","data":[{"output_type":"execute_result","execution_count":12,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"380411b2c3900322a63fff7da32ed885","path":"/build/380411b2c3900322a63fff7da32ed885.html"},"text/plain":{"content":"<xarray.Dataset>\nDimensions:    (lat: 177, lon: 172, time: 48, bnds: 2)\nCoordinates:\n  * lat        (lat) float64 53.58 53.58 53.58 53.58 ... 53.55 53.55 53.55 53.55\n  * lon        (lon) float64 9.988 9.988 9.988 9.988 ... 10.02 10.02 10.02 10.02\n  * time       (time) datetime64[ns] 2018-05-03T10:42:09 ... 2018-08-28T10:30:13\n    time_bnds  (time, bnds) datetime64[ns] dask.array<chunksize=(48, 2), meta=np.ndarray>\nDimensions without coordinates: bnds\nData variables:\n    B01        (time, lat, lon) float32 dask.array<chunksize=(1, 177, 172), meta=np.ndarray>\n    B02        (time, lat, lon) float32 dask.array<chunksize=(1, 177, 172), meta=np.ndarray>\n    B03        (time, lat, lon) float32 dask.array<chunksize=(1, 177, 172), meta=np.ndarray>\n    B04        (time, lat, lon) float32 dask.array<chunksize=(1, 177, 172), meta=np.ndarray>\n    B05        (time, lat, lon) float32 dask.array<chunksize=(1, 177, 172), meta=np.ndarray>\n    B06        (time, lat, lon) float32 dask.array<chunksize=(1, 177, 172), meta=np.ndarray>\n    B08        (time, lat, lon) float32 dask.array<chunksize=(1, 177, 172), meta=np.ndarray>\n    CLD        (time, lat, lon) float64 dask.array<chunksize=(1, 177, 172), meta=np.ndarray>\n    SCL        (time, lat, lon) float64 dask.array<chunksize=(1, 177, 172), meta=np.ndarray>\nAttributes: (12/17)\n    Conventions:                CF-1.7\n    title:                      S2L2A Data Cube Subset\n    history:                    [{'program': 'xcube_sh.chunkstore.SentinelHub...\n    date_created:               2022-02-23T14:06:16.689569\n    time_coverage_start:        2018-05-03T10:42:09+00:00\n    time_coverage_end:          2018-08-28T10:30:13+00:00\n    ...                         ...\n    processing_level:           L2A\n    geospatial_lon_units:       degrees_east\n    geospatial_lon_resolution:  0.00018000000000000017\n    geospatial_lat_units:       degrees_north\n    geospatial_lat_resolution:  0.00018000000000000844\n    date_modified:              2022-02-23T14:06:55.872526","content_type":"text/plain"}}}],"visibility":"show","key":"zIYbrkLaeU"}],"visibility":"show","key":"EJEfJd0pB6"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:06:56.379692Z","iopub.status.busy":"2022-02-23T14:06:56.379077Z","iopub.status.idle":"2022-02-23T14:06:56.918937Z","shell.execute_reply":"2022-02-23T14:06:56.918148Z"},"papermill":{"duration":0.636844,"end_time":"2022-02-23T14:06:56.921749","exception":false,"start_time":"2022-02-23T14:06:56.284905","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"cube_S2_2018_masked.B04.sel(time='2018-07-25 12:00:00', method='nearest').plot.imshow(vmin=0, vmax=0.2, cmap='Greys_r', figsize=(14, 10))\n# cube_S2_2018_clipped.B04.sel(time='2018-07-25 12:00:00', method='nearest').plot.imshow(vmin=0, vmax=0.2, cmap='Greys_r', figsize=(14, 10))","visibility":"show","key":"THPLytKVpx"},{"type":"output","id":"7BqUKfkZFU54xPNOZ2gQf","data":[{"output_type":"display_data","metadata":{"needs_background":"light"},"data":{"image/png":{"content_type":"image/png","hash":"bce6fb1c8b172720abead093af6b674d","path":"/build/bce6fb1c8b172720abead093af6b674d.png"},"text/plain":{"content":"<Figure size 1008x720 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"FvSOVoyMOE"}],"visibility":"show","key":"K4BvDs7XSC"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.092185,"end_time":"2022-02-23T14:06:57.112337","exception":false,"start_time":"2022-02-23T14:06:57.020152","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Save cube as zarr:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UJjLRA0oNA"}],"key":"B1VfZ9ZM4l"}],"visibility":"show","key":"CfBQjRQxQq"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:06:57.322294Z","iopub.status.busy":"2022-02-23T14:06:57.321875Z","iopub.status.idle":"2022-02-23T14:06:57.326056Z","shell.execute_reply":"2022-02-23T14:06:57.325004Z"},"papermill":{"duration":0.099948,"end_time":"2022-02-23T14:06:57.328316","exception":false,"start_time":"2022-02-23T14:06:57.228368","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# cube_S2_2018_masked.to_zarr('Alster_cube_2018_masked.zarr')\n# cube_S2_2018_clipped.to_zarr('Alster_cube_2018.zarr')","visibility":"show","key":"BSEkv9ShzR"},{"type":"output","id":"ak0DaT7l7Loub3yLWpWl-","data":[],"visibility":"show","key":"wI7eri9aZg"}],"visibility":"show","key":"ZX9vTVXx2w"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.093532,"end_time":"2022-02-23T14:06:57.520061","exception":false,"start_time":"2022-02-23T14:06:57.426529","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"How to generate a datacube with the help of xcube Generator user interface","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"A7IPgCze9q"}],"identifier":"how-to-generate-a-datacube-with-the-help-of-xcube-generator-user-interface","label":"How to generate a datacube with the help of xcube Generator user interface","html_id":"how-to-generate-a-datacube-with-the-help-of-xcube-generator-user-interface","implicit":true,"key":"KlTW6q5pqF"}],"visibility":"show","key":"SBfaNXrpD2"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.095113,"end_time":"2022-02-23T14:06:57.717945","exception":false,"start_time":"2022-02-23T14:06:57.622832","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"This section is not hands-on!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nmt2XieLgm"}],"key":"pFiNxCsUG3"}],"key":"NHl9cHXj9t"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"If you want to check out the xcube Generator yourself later, please take a look at the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Pqt0NjavlD"},{"type":"link","url":"https://eurodatacube.com/documentation/xcube-gen-ui-guide","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"xcube Generator User Guide","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NDgUiLcrAY"}],"urlSource":"https://eurodatacube.com/documentation/xcube-gen-ui-guide","key":"YNJkaF0h4x"},{"type":"text","value":" to give you more detail.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"GDJrIdKh4i"}],"key":"L5wOjOX7Kp"}],"visibility":"show","key":"UbWRi9bBQe"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.098141,"end_time":"2022-02-23T14:06:57.910513","exception":false,"start_time":"2022-02-23T14:06:57.812372","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Open a cube from s3 bucket:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ikHgKcdLN2"}],"key":"GKmO7uBcaT"},{"type":"break","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"n3Wkf0LWKX"},{"type":"text","value":"The below cell shows how to open a generated datacube which is stored in a public bucket with the help of xcube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qV2ZP6zmHi"}],"key":"pVofPzBqu8"}],"visibility":"show","key":"CuDcMcwoLn"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:06:58.103002Z","iopub.status.busy":"2022-02-23T14:06:58.102721Z","iopub.status.idle":"2022-02-23T14:07:00.892592Z","shell.execute_reply":"2022-02-23T14:07:00.891602Z"},"papermill":{"duration":2.887709,"end_time":"2022-02-23T14:07:00.894616","exception":false,"start_time":"2022-02-23T14:06:58.006907","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from xcube.core.dsio import open_cube\ncube = open_cube('https://s3.eu-central-1.amazonaws.com/edc-phi-week-2020/xcube-gen-1b11e7c1-94f9-4246-833e-a2a12d301a3e.zarr', \n                 s3_kwargs={\n                     'anon': True\n                 })","visibility":"show","key":"FAPhkAuVR9"},{"type":"output","id":"IxKMdF3fgAmJia79h_yME","data":[],"visibility":"show","key":"Ovr4U04kPw"}],"visibility":"show","key":"lFeAdVeB3h"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:01.107193Z","iopub.status.busy":"2022-02-23T14:07:01.106767Z","iopub.status.idle":"2022-02-23T14:07:01.159041Z","shell.execute_reply":"2022-02-23T14:07:01.158276Z"},"papermill":{"duration":0.169942,"end_time":"2022-02-23T14:07:01.163070","exception":false,"start_time":"2022-02-23T14:07:00.993128","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"cube","visibility":"show","key":"tuaZVoHqEN"},{"type":"output","id":"8MJlVFpl1qhXWcgTmWISQ","data":[{"output_type":"execute_result","execution_count":16,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"c5236dbbdbc9771b64362d594bd843a3","path":"/build/c5236dbbdbc9771b64362d594bd843a3.html"},"text/plain":{"content":"<xarray.Dataset>\nDimensions:    (time: 31, lat: 463, lon: 824, bnds: 2)\nCoordinates:\n  * lat        (lat) float64 53.78 53.77 53.77 53.77 ... 53.32 53.32 53.31 53.31\n  * lon        (lon) float64 9.592 9.593 9.594 9.595 ... 10.41 10.41 10.41 10.41\n  * time       (time) datetime64[ns] 2018-07-01T12:00:00 ... 2018-07-31T12:00:00\n    time_bnds  (time, bnds) datetime64[ns] dask.array<chunksize=(31, 2), meta=np.ndarray>\nDimensions without coordinates: bnds\nData variables:\n    B04        (time, lat, lon) float32 dask.array<chunksize=(1, 463, 824), meta=np.ndarray>\n    SCL        (time, lat, lon) uint8 dask.array<chunksize=(1, 463, 824), meta=np.ndarray>\nAttributes: (12/13)\n    Conventions:               CF-1.7\n    date_created:              2020-09-30T07:08:42.412099\n    geospatial_lat_max:        53.77637357203123\n    geospatial_lat_min:        53.31337357203123\n    geospatial_lon_max:        10.415064453125002\n    geospatial_lon_min:        9.591064453125002\n    ...                        ...\n    processing_level:          L2A\n    time_coverage_duration:    P31DT0H0M0S\n    time_coverage_end:         2018-08-01T00:00:00+00:00\n    time_coverage_resolution:  P1DT0H0M0S\n    time_coverage_start:       2018-07-01T00:00:00+00:00\n    title:                     S2L2A Data Cube Subset","content_type":"text/plain"}}}],"visibility":"show","key":"eGzNncGyHK"}],"visibility":"show","key":"AH7Y8BgpLC"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.096066,"end_time":"2022-02-23T14:07:01.373594","exception":false,"start_time":"2022-02-23T14:07:01.277528","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Open a cube stored loccaly, here in the workspace:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cboJAUjkB3"}],"key":"JLh5RAcSce"}],"key":"WgvoH5pigu"}],"visibility":"show","key":"UM51tLRvlO"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:01.576457Z","iopub.status.busy":"2022-02-23T14:07:01.575986Z","iopub.status.idle":"2022-02-23T14:07:01.580585Z","shell.execute_reply":"2022-02-23T14:07:01.579439Z"},"papermill":{"duration":0.113248,"end_time":"2022-02-23T14:07:01.582615","exception":false,"start_time":"2022-02-23T14:07:01.469367","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"#cube = xr.open_zarr('Alster_cube_2018.zarr')","visibility":"show","key":"ksTbeTxk3G"},{"type":"output","id":"whpsZ4ah14mvzbbeEICWm","data":[],"visibility":"show","key":"ALkdWAWHqk"}],"visibility":"show","key":"ER08Ipwjx2"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.101852,"end_time":"2022-02-23T14:07:01.797002","exception":false,"start_time":"2022-02-23T14:07:01.695150","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Discover, which flags are available within the datacube:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Lud7voQHiL"}],"key":"igcLXwJm5z"}],"visibility":"show","key":"pIBeKLfwja"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:02.006178Z","iopub.status.busy":"2022-02-23T14:07:02.005519Z","iopub.status.idle":"2022-02-23T14:07:02.012766Z","shell.execute_reply":"2022-02-23T14:07:02.011411Z"},"papermill":{"duration":0.107188,"end_time":"2022-02-23T14:07:02.014923","exception":false,"start_time":"2022-02-23T14:07:01.907735","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"mask = MaskSet(cube.SCL)\nmask","visibility":"show","key":"SHGqZ1fK3z"},{"type":"output","id":"Vvv0BguAA1Axyw4IrwYjs","data":[{"output_type":"execute_result","execution_count":18,"metadata":{},"data":{"text/html":{"content":"<html>\n<table>\n<tr><th>Flag name</th><th>Mask</th><th>Value</th></tr>\n<tr><td>no_data</td><td>None</td><td>0</td></tr>\n<tr><td>saturated_or_defective</td><td>None</td><td>1</td></tr>\n<tr><td>dark_area_pixels</td><td>None</td><td>2</td></tr>\n<tr><td>cloud_shadows</td><td>None</td><td>3</td></tr>\n<tr><td>vegetation</td><td>None</td><td>4</td></tr>\n<tr><td>bare_soils</td><td>None</td><td>5</td></tr>\n<tr><td>water</td><td>None</td><td>6</td></tr>\n<tr><td>clouds_low_probability_or_unclassified</td><td>None</td><td>7</td></tr>\n<tr><td>clouds_medium_probability</td><td>None</td><td>8</td></tr>\n<tr><td>clouds_high_probability</td><td>None</td><td>9</td></tr>\n<tr><td>cirrus</td><td>None</td><td>10</td></tr>\n<tr><td>snow_or_ice</td><td>None</td><td>11</td></tr>\n</table>\n</html>","content_type":"text/html"},"text/plain":{"content":"<xcube.core.maskset.MaskSet at 0x7f5e397149a0>","content_type":"text/plain"}}}],"visibility":"show","key":"TI2jHst2KY"}],"visibility":"show","key":"rJoFefygWg"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:02.233226Z","iopub.status.busy":"2022-02-23T14:07:02.232777Z","iopub.status.idle":"2022-02-23T14:07:02.271728Z","shell.execute_reply":"2022-02-23T14:07:02.270783Z"},"papermill":{"duration":0.147437,"end_time":"2022-02-23T14:07:02.274117","exception":false,"start_time":"2022-02-23T14:07:02.126680","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"mask.clouds_high_probability","visibility":"show","key":"ULxasipgy9"},{"type":"output","id":"LWIAHmvsI5J59hOjlMsCi","data":[{"output_type":"execute_result","execution_count":19,"metadata":{},"data":{"text/html":{"content":"<div><svg style=\"position: absolute; width: 0; height: 0; overflow: hidden\">\n<defs>\n<symbol id=\"icon-database\" viewBox=\"0 0 32 32\">\n<path d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"></path>\n<path d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n<path d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"></path>\n</symbol>\n<symbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\">\n<path d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"></path>\n<path d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n<path d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"></path>\n</symbol>\n</defs>\n</svg>\n<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=dark],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1F1F1F;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header > div,\n.xr-header > ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 20px 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: none;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary > span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: '►';\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: '▼';\n}\n\n.xr-section-summary-in:checked + label > span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap > label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: '(';\n}\n\n.xr-dim-list:after {\n  content: ')';\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: ',';\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item > div,\n.xr-var-item label,\n.xr-var-item > .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item > .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list > li:nth-child(odd) > div,\n.xr-var-list > li:nth-child(odd) > label,\n.xr-var-list > li:nth-child(odd) > .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data {\n  display: block;\n}\n\n.xr-var-data > table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2 {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n</style><pre class='xr-text-repr-fallback'>&lt;xarray.DataArray &#x27;clouds_high_probability&#x27; (time: 31, lat: 463, lon: 824)&gt;\ndask.array&lt;where, shape=(31, 463, 824), dtype=uint8, chunksize=(1, 463, 824), chunktype=numpy.ndarray&gt;\nCoordinates:\n  * lat      (lat) float64 53.78 53.77 53.77 53.77 ... 53.32 53.32 53.31 53.31\n  * lon      (lon) float64 9.592 9.593 9.594 9.595 ... 10.41 10.41 10.41 10.41\n  * time     (time) datetime64[ns] 2018-07-01T12:00:00 ... 2018-07-31T12:00:00</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.DataArray</div><div class='xr-array-name'>'clouds_high_probability'</div><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 31</li><li><span class='xr-has-index'>lat</span>: 463</li><li><span class='xr-has-index'>lon</span>: 824</li></ul></div><ul class='xr-sections'><li class='xr-section-item'><div class='xr-array-wrap'><input id='section-f72b7e50-4475-4fb3-b446-892e11cbff7d' class='xr-array-in' type='checkbox' checked><label for='section-f72b7e50-4475-4fb3-b446-892e11cbff7d' title='Show/hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-array-preview xr-preview'><span>dask.array&lt;chunksize=(1, 463, 824), meta=np.ndarray&gt;</span></div><div class='xr-array-data'><table>\n    <tr>\n        <td>\n            <table>\n                <thead>\n                    <tr>\n                        <td> </td>\n                        <th> Array </th>\n                        <th> Chunk </th>\n                    </tr>\n                </thead>\n                <tbody>\n                    \n                    <tr>\n                        <th> Bytes </th>\n                        <td> 11.28 MiB </td>\n                        <td> 372.57 kiB </td>\n                    </tr>\n                    \n                    <tr>\n                        <th> Shape </th>\n                        <td> (31, 463, 824) </td>\n                        <td> (1, 463, 824) </td>\n                    </tr>\n                    <tr>\n                        <th> Count </th>\n                        <td> 125 Tasks </td>\n                        <td> 31 Chunks </td>\n                    </tr>\n                    <tr>\n                    <th> Type </th>\n                    <td> uint8 </td>\n                    <td> numpy.ndarray </td>\n                    </tr>\n                </tbody>\n            </table>\n        </td>\n        <td>\n        <svg width=\"199\" height=\"136\" style=\"stroke:rgb(0,0,0);stroke-width:1\" >\n\n  <!-- Horizontal lines -->\n  <line x1=\"10\" y1=\"0\" x2=\"29\" y2=\"19\" style=\"stroke-width:2\" />\n  <line x1=\"10\" y1=\"67\" x2=\"29\" y2=\"86\" style=\"stroke-width:2\" />\n\n  <!-- Vertical lines -->\n  <line x1=\"10\" y1=\"0\" x2=\"10\" y2=\"67\" style=\"stroke-width:2\" />\n  <line x1=\"10\" y1=\"0\" x2=\"10\" y2=\"68\" />\n  <line x1=\"11\" y1=\"1\" x2=\"11\" y2=\"69\" />\n  <line x1=\"12\" y1=\"2\" x2=\"12\" y2=\"69\" />\n  <line x1=\"13\" y1=\"3\" x2=\"13\" y2=\"71\" />\n  <line x1=\"14\" y1=\"4\" x2=\"14\" y2=\"72\" />\n  <line x1=\"15\" y1=\"5\" x2=\"15\" y2=\"73\" />\n  <line x1=\"16\" y1=\"6\" x2=\"16\" y2=\"74\" />\n  <line x1=\"18\" y1=\"8\" x2=\"18\" y2=\"75\" />\n  <line x1=\"18\" y1=\"8\" x2=\"18\" y2=\"76\" />\n  <line x1=\"19\" y1=\"9\" x2=\"19\" y2=\"77\" />\n  <line x1=\"20\" y1=\"10\" x2=\"20\" y2=\"77\" />\n  <line x1=\"21\" y1=\"11\" x2=\"21\" y2=\"79\" />\n  <line x1=\"23\" y1=\"13\" x2=\"23\" y2=\"80\" />\n  <line x1=\"23\" y1=\"13\" x2=\"23\" y2=\"81\" />\n  <line x1=\"24\" y1=\"14\" x2=\"24\" y2=\"82\" />\n  <line x1=\"26\" y1=\"16\" x2=\"26\" y2=\"83\" />\n  <line x1=\"26\" y1=\"16\" x2=\"26\" y2=\"84\" />\n  <line x1=\"28\" y1=\"18\" x2=\"28\" y2=\"85\" />\n  <line x1=\"29\" y1=\"19\" x2=\"29\" y2=\"86\" style=\"stroke-width:2\" />\n\n  <!-- Colored Rectangle -->\n  <polygon points=\"10.0,0.0 29.27026426568337,19.27026426568337 29.27026426568337,86.69744873170278 10.0,67.42718446601941\" style=\"fill:#8B4903A0;stroke-width:0\"/>\n\n  <!-- Horizontal lines -->\n  <line x1=\"10\" y1=\"0\" x2=\"130\" y2=\"0\" style=\"stroke-width:2\" />\n  <line x1=\"10\" y1=\"0\" x2=\"130\" y2=\"0\" />\n  <line x1=\"11\" y1=\"1\" x2=\"131\" y2=\"1\" />\n  <line x1=\"12\" y1=\"2\" x2=\"132\" y2=\"2\" />\n  <line x1=\"13\" y1=\"3\" x2=\"133\" y2=\"3\" />\n  <line x1=\"14\" y1=\"4\" x2=\"134\" y2=\"4\" />\n  <line x1=\"15\" y1=\"5\" x2=\"135\" y2=\"5\" />\n  <line x1=\"16\" y1=\"6\" x2=\"136\" y2=\"6\" />\n  <line x1=\"18\" y1=\"8\" x2=\"138\" y2=\"8\" />\n  <line x1=\"18\" y1=\"8\" x2=\"138\" y2=\"8\" />\n  <line x1=\"19\" y1=\"9\" x2=\"139\" y2=\"9\" />\n  <line x1=\"20\" y1=\"10\" x2=\"140\" y2=\"10\" />\n  <line x1=\"21\" y1=\"11\" x2=\"141\" y2=\"11\" />\n  <line x1=\"23\" y1=\"13\" x2=\"143\" y2=\"13\" />\n  <line x1=\"23\" y1=\"13\" x2=\"143\" y2=\"13\" />\n  <line x1=\"24\" y1=\"14\" x2=\"144\" y2=\"14\" />\n  <line x1=\"26\" y1=\"16\" x2=\"146\" y2=\"16\" />\n  <line x1=\"26\" y1=\"16\" x2=\"146\" y2=\"16\" />\n  <line x1=\"28\" y1=\"18\" x2=\"148\" y2=\"18\" />\n  <line x1=\"29\" y1=\"19\" x2=\"149\" y2=\"19\" style=\"stroke-width:2\" />\n\n  <!-- Vertical lines -->\n  <line x1=\"10\" y1=\"0\" x2=\"29\" y2=\"19\" style=\"stroke-width:2\" />\n  <line x1=\"130\" y1=\"0\" x2=\"149\" y2=\"19\" style=\"stroke-width:2\" />\n\n  <!-- Colored Rectangle -->\n  <polygon points=\"10.0,0.0 130.0,0.0 149.27026426568338,19.27026426568337 29.27026426568337,19.27026426568337\" style=\"fill:#8B4903A0;stroke-width:0\"/>\n\n  <!-- Horizontal lines -->\n  <line x1=\"29\" y1=\"19\" x2=\"149\" y2=\"19\" style=\"stroke-width:2\" />\n  <line x1=\"29\" y1=\"86\" x2=\"149\" y2=\"86\" style=\"stroke-width:2\" />\n\n  <!-- Vertical lines -->\n  <line x1=\"29\" y1=\"19\" x2=\"29\" y2=\"86\" style=\"stroke-width:2\" />\n  <line x1=\"149\" y1=\"19\" x2=\"149\" y2=\"86\" style=\"stroke-width:2\" />\n\n  <!-- Colored Rectangle -->\n  <polygon points=\"29.27026426568337,19.27026426568337 149.27026426568338,19.27026426568337 149.27026426568338,86.69744873170278 29.27026426568337,86.69744873170278\" style=\"fill:#ECB172A0;stroke-width:0\"/>\n\n  <!-- Text -->\n  <text x=\"89.270264\" y=\"106.697449\" font-size=\"1.0rem\" font-weight=\"100\" text-anchor=\"middle\" >824</text>\n  <text x=\"169.270264\" y=\"52.983856\" font-size=\"1.0rem\" font-weight=\"100\" text-anchor=\"middle\" transform=\"rotate(-90,169.270264,52.983856)\">463</text>\n  <text x=\"9.635132\" y=\"97.062317\" font-size=\"1.0rem\" font-weight=\"100\" text-anchor=\"middle\" transform=\"rotate(45,9.635132,97.062317)\">31</text>\n</svg>\n        </td>\n    </tr>\n</table></div></div></li><li class='xr-section-item'><input id='section-3af05f73-bf7b-4bcd-8add-1a1eb4c669f1' class='xr-section-summary-in' type='checkbox'  checked><label for='section-3af05f73-bf7b-4bcd-8add-1a1eb4c669f1' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>53.78 53.77 53.77 ... 53.31 53.31</div><input id='attrs-00c5f91a-a365-42d5-9856-a61e211777de' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-00c5f91a-a365-42d5-9856-a61e211777de' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2632caeb-7e4c-4661-adab-e5a845fe2408' class='xr-var-data-in' type='checkbox'><label for='data-2632caeb-7e4c-4661-adab-e5a845fe2408' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>longitude</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>decimal_degrees</dd></dl></div><div class='xr-var-data'><pre>array([53.775874, 53.774874, 53.773874, ..., 53.315874, 53.314874, 53.313874])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>9.592 9.593 9.594 ... 10.41 10.41</div><input id='attrs-ce082ae4-9a9c-41d5-a517-32ffdbadb7ca' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-ce082ae4-9a9c-41d5-a517-32ffdbadb7ca' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ce5467d9-6116-4dd6-a252-050980ea3bd8' class='xr-var-data-in' type='checkbox'><label for='data-ce5467d9-6116-4dd6-a252-050980ea3bd8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>longitude</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>decimal_degrees</dd></dl></div><div class='xr-var-data'><pre>array([ 9.591564,  9.592564,  9.593564, ..., 10.412564, 10.413564, 10.414564])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>2018-07-01T12:00:00 ... 2018-07-...</div><input id='attrs-17ab7ef3-983b-4b77-be3b-0d5758515b58' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-17ab7ef3-983b-4b77-be3b-0d5758515b58' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-72aa4f65-7108-4333-be31-6333d4156903' class='xr-var-data-in' type='checkbox'><label for='data-72aa4f65-7108-4333-be31-6333d4156903' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>bounds :</span></dt><dd>time_bnds</dd><dt><span>standard_name :</span></dt><dd>time</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;2018-07-01T12:00:00.000000000&#x27;, &#x27;2018-07-02T12:00:00.000000000&#x27;,\n       &#x27;2018-07-03T12:00:00.000000000&#x27;, &#x27;2018-07-04T12:00:00.000000000&#x27;,\n       &#x27;2018-07-05T12:00:00.000000000&#x27;, &#x27;2018-07-06T12:00:00.000000000&#x27;,\n       &#x27;2018-07-07T12:00:00.000000000&#x27;, &#x27;2018-07-08T12:00:00.000000000&#x27;,\n       &#x27;2018-07-09T12:00:00.000000000&#x27;, &#x27;2018-07-10T12:00:00.000000000&#x27;,\n       &#x27;2018-07-11T12:00:00.000000000&#x27;, &#x27;2018-07-12T12:00:00.000000000&#x27;,\n       &#x27;2018-07-13T12:00:00.000000000&#x27;, &#x27;2018-07-14T12:00:00.000000000&#x27;,\n       &#x27;2018-07-15T12:00:00.000000000&#x27;, &#x27;2018-07-16T12:00:00.000000000&#x27;,\n       &#x27;2018-07-17T12:00:00.000000000&#x27;, &#x27;2018-07-18T12:00:00.000000000&#x27;,\n       &#x27;2018-07-19T12:00:00.000000000&#x27;, &#x27;2018-07-20T12:00:00.000000000&#x27;,\n       &#x27;2018-07-21T12:00:00.000000000&#x27;, &#x27;2018-07-22T12:00:00.000000000&#x27;,\n       &#x27;2018-07-23T12:00:00.000000000&#x27;, &#x27;2018-07-24T12:00:00.000000000&#x27;,\n       &#x27;2018-07-25T12:00:00.000000000&#x27;, &#x27;2018-07-26T12:00:00.000000000&#x27;,\n       &#x27;2018-07-27T12:00:00.000000000&#x27;, &#x27;2018-07-28T12:00:00.000000000&#x27;,\n       &#x27;2018-07-29T12:00:00.000000000&#x27;, &#x27;2018-07-30T12:00:00.000000000&#x27;,\n       &#x27;2018-07-31T12:00:00.000000000&#x27;], dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-33344214-6cf5-49dc-8170-302cba3f2f4e' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-33344214-6cf5-49dc-8170-302cba3f2f4e' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div>","content_type":"text/html"},"text/plain":{"content":"<xarray.DataArray 'clouds_high_probability' (time: 31, lat: 463, lon: 824)>\ndask.array<where, shape=(31, 463, 824), dtype=uint8, chunksize=(1, 463, 824), chunktype=numpy.ndarray>\nCoordinates:\n  * lat      (lat) float64 53.78 53.77 53.77 53.77 ... 53.32 53.32 53.31 53.31\n  * lon      (lon) float64 9.592 9.593 9.594 9.595 ... 10.41 10.41 10.41 10.41\n  * time     (time) datetime64[ns] 2018-07-01T12:00:00 ... 2018-07-31T12:00:00","content_type":"text/plain"}}}],"visibility":"show","key":"cU9X9jUo6w"}],"visibility":"show","key":"XAJ5NaITwM"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.111988,"end_time":"2022-02-23T14:07:02.501565","exception":false,"start_time":"2022-02-23T14:07:02.389577","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Make a datacube with all clouds masked out:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CbemWHNC5y"}],"key":"izhj9M77zr"}],"visibility":"show","key":"keFIG9jUoM"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:02.729590Z","iopub.status.busy":"2022-02-23T14:07:02.729128Z","iopub.status.idle":"2022-02-23T14:07:02.796994Z","shell.execute_reply":"2022-02-23T14:07:02.796209Z"},"papermill":{"duration":0.177693,"end_time":"2022-02-23T14:07:02.798925","exception":false,"start_time":"2022-02-23T14:07:02.621232","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"cube_wo_clouds = cube.where(np.logical_not(mask.cloud_shadows | mask.snow_or_ice | \n                                           mask.saturated_or_defective | mask.cirrus | \n                                           mask.clouds_low_probability_or_unclassified | \n                                           mask.clouds_medium_probability | mask.clouds_high_probability))","visibility":"show","key":"jEAyJhRsLC"},{"type":"output","id":"ixKY4mLS2v_knZdsx0C4o","data":[],"visibility":"show","key":"afrpwtK2Fc"}],"visibility":"show","key":"T2c3jyHekc"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.105735,"end_time":"2022-02-23T14:07:03.032544","exception":false,"start_time":"2022-02-23T14:07:02.926809","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Keep only the waterbodies of the datacube:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TgWBHjunx3"}],"key":"Udhhec7N3W"}],"visibility":"show","key":"nXnqrvLPs6"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:03.244252Z","iopub.status.busy":"2022-02-23T14:07:03.240978Z","iopub.status.idle":"2022-02-23T14:07:03.259507Z","shell.execute_reply":"2022-02-23T14:07:03.258787Z"},"papermill":{"duration":0.122476,"end_time":"2022-02-23T14:07:03.261813","exception":false,"start_time":"2022-02-23T14:07:03.139337","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"cube_water_wo_clouds = cube_wo_clouds.where(mask.water)","visibility":"show","key":"pu4UiSOghb"},{"type":"output","id":"dj8oYHYXsBt7oZtUCu0o7","data":[],"visibility":"show","key":"Xs41Jj1ukr"}],"visibility":"show","key":"Tmh2618Kkp"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.104865,"end_time":"2022-02-23T14:07:03.470162","exception":false,"start_time":"2022-02-23T14:07:03.365297","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If you want to take a look at the water mask, please uncomment the following line:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WKE80A1sxU"}],"key":"k9kxQGipjW"}],"visibility":"show","key":"BN1A1lm2iN"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:03.697108Z","iopub.status.busy":"2022-02-23T14:07:03.696685Z","iopub.status.idle":"2022-02-23T14:07:03.700736Z","shell.execute_reply":"2022-02-23T14:07:03.699574Z"},"papermill":{"duration":0.123252,"end_time":"2022-02-23T14:07:03.702550","exception":false,"start_time":"2022-02-23T14:07:03.579298","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# mask.water.sel(time='2018-07-20 12:00:00', method='nearest').plot.imshow(figsize=(14, 10))","visibility":"show","key":"vvDAUi38g3"},{"type":"output","id":"2DvqFJ9Bb5On-VOFtlz8M","data":[],"visibility":"show","key":"MqgTVqh0x6"}],"visibility":"show","key":"UuQu9pvMGB"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.10953,"end_time":"2022-02-23T14:07:03.929508","exception":false,"start_time":"2022-02-23T14:07:03.819978","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Take a look at a time stamp without any masking:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QdSOvog9cZ"}],"key":"ww9PeyZsld"}],"visibility":"show","key":"T3nJl0RH5T"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:04.140798Z","iopub.status.busy":"2022-02-23T14:07:04.140189Z","iopub.status.idle":"2022-02-23T14:07:05.162165Z","shell.execute_reply":"2022-02-23T14:07:05.161341Z"},"papermill":{"duration":1.135677,"end_time":"2022-02-23T14:07:05.172991","exception":false,"start_time":"2022-02-23T14:07:04.037314","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"cube.B04.sel(time='2018-07-19 12:00:00', method='nearest').plot.imshow(vmin=0, vmax=0.2, cmap='Greys_r', figsize=(14, 10))","visibility":"show","key":"fVikocO6Vr"},{"type":"output","id":"DIgmAipASlANslJu0CAoW","data":[{"output_type":"display_data","metadata":{"needs_background":"light"},"data":{"image/png":{"content_type":"image/png","hash":"823d6a1faaa92a6d3dc19b286eb43ad5","path":"/build/823d6a1faaa92a6d3dc19b286eb43ad5.png"},"text/plain":{"content":"<Figure size 1008x720 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"oN600ztPrc"}],"visibility":"show","key":"m62LBy3CV4"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.113336,"end_time":"2022-02-23T14:07:05.406003","exception":false,"start_time":"2022-02-23T14:07:05.292667","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Take a look at a time stamp of the waterbodies and all clouds masked out:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HtyodWJULW"}],"key":"Jloeg3feXQ"}],"visibility":"show","key":"zbZGb3Ffec"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:05.644737Z","iopub.status.busy":"2022-02-23T14:07:05.641659Z","iopub.status.idle":"2022-02-23T14:07:06.444319Z","shell.execute_reply":"2022-02-23T14:07:06.436976Z"},"papermill":{"duration":0.925242,"end_time":"2022-02-23T14:07:06.446617","exception":false,"start_time":"2022-02-23T14:07:05.521375","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"cube_water_wo_clouds.B04.sel(time='2018-07-19 12:00:00', method='nearest').plot.imshow(vmin=0, vmax=.2, figsize=(14, 10))","visibility":"show","key":"HYtMPJPb2l"},{"type":"output","id":"3RVQ86ysbQvpfRLBqPNBs","data":[{"output_type":"display_data","metadata":{"needs_background":"light"},"data":{"image/png":{"content_type":"image/png","hash":"fae2f3439557ada85955aaf1c8a38959","path":"/build/fae2f3439557ada85955aaf1c8a38959.png"},"text/plain":{"content":"<Figure size 1008x720 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"ciyZtXrJMw"}],"visibility":"show","key":"zTWq3XpoSJ"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.121041,"end_time":"2022-02-23T14:07:06.685598","exception":false,"start_time":"2022-02-23T14:07:06.564557","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2) Using the xcube-geodb","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KwHSGGaXk1"}],"identifier":"id-2-using-the-xcube-geodb","label":"2) Using the xcube-geodb","html_id":"id-2-using-the-xcube-geodb","implicit":true,"key":"wofoLPbtog"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The xcube-geodb consists of a Restful service and a Python client. Let’s import the Python dependencies to access the geodb service.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JvjXMzuvFr"}],"key":"pdujC8adGc"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Step 1","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"zD2X8br1ru"}],"key":"BbtoPhUOCO"},{"type":"text","value":": Import the geodb client","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"H8Y5E6cvtS"}],"key":"oPAO62bhUf"}],"visibility":"show","key":"MZAorIqXDT"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:06.925943Z","iopub.status.busy":"2022-02-23T14:07:06.925408Z","iopub.status.idle":"2022-02-23T14:07:06.934107Z","shell.execute_reply":"2022-02-23T14:07:06.933345Z"},"papermill":{"duration":0.132876,"end_time":"2022-02-23T14:07:06.936410","exception":false,"start_time":"2022-02-23T14:07:06.803534","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from xcube_geodb.core.geodb import GeoDBClient","visibility":"show","key":"CminHgjw4P"},{"type":"output","id":"U-8oyKQ0rdyYquloQctzF","data":[],"visibility":"show","key":"gli4HbSd1p"}],"visibility":"show","key":"HIjG6FKwP9"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.123629,"end_time":"2022-02-23T14:07:07.182526","exception":false,"start_time":"2022-02-23T14:07:07.058897","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 2","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZeotPG6u76"}],"key":"rFyiV4Qj3v"},{"type":"text","value":": Instantiate the client","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"l1TE5T5bpX"}],"key":"aqf48u90LN"}],"visibility":"show","key":"fSYOH2diyQ"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:07.417578Z","iopub.status.busy":"2022-02-23T14:07:07.417166Z","iopub.status.idle":"2022-02-23T14:07:07.421713Z","shell.execute_reply":"2022-02-23T14:07:07.420803Z"},"papermill":{"duration":0.124374,"end_time":"2022-02-23T14:07:07.423459","exception":false,"start_time":"2022-02-23T14:07:07.299085","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"geodb = GeoDBClient()","visibility":"show","key":"F5atCXoBxP"},{"type":"output","id":"Eosk4iFJ9A5lT1FP5-ZDF","data":[],"visibility":"show","key":"bKiiRaDtGw"}],"visibility":"show","key":"E4n5u1OxHy"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.118935,"end_time":"2022-02-23T14:07:07.665472","exception":false,"start_time":"2022-02-23T14:07:07.546537","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 3","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SfI8MXTKQV"}],"key":"mbCtc2UIKE"},{"type":"text","value":": As a subscriber a user name is associated with you. Check your user name.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"faLogZ9OAL"}],"key":"mV2nwy19Ry"}],"visibility":"show","key":"YRAf52feDP"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:07.927887Z","iopub.status.busy":"2022-02-23T14:07:07.927592Z","iopub.status.idle":"2022-02-23T14:07:10.327377Z","shell.execute_reply":"2022-02-23T14:07:10.326540Z"},"papermill":{"duration":2.542316,"end_time":"2022-02-23T14:07:10.329632","exception":false,"start_time":"2022-02-23T14:07:07.787316","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"geodb.whoami","visibility":"show","key":"QEDBAYMSCB"},{"type":"output","id":"G-hNfqQ48osPLfR0BW1uT","data":[{"output_type":"execute_result","execution_count":27,"metadata":{},"data":{"text/plain":{"content":"'geodb_418dfeac-15f0-4606-9edb-fd9eb722bf04'","content_type":"text/plain"}}}],"visibility":"show","key":"MeDfUMEznk"}],"visibility":"show","key":"YHu025QjlW"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.120136,"end_time":"2022-02-23T14:07:10.569980","exception":false,"start_time":"2022-02-23T14:07:10.449844","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 4","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TW1AxH0VTS"}],"key":"bgY6qKvMCm"},{"type":"text","value":": Let’s see what collections you have access to","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"L6F1Vo8NLr"}],"key":"ebPONYz5Kd"}],"visibility":"show","key":"ffsIe55iA7"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:10.809167Z","iopub.status.busy":"2022-02-23T14:07:10.808888Z","iopub.status.idle":"2022-02-23T14:07:12.060548Z","shell.execute_reply":"2022-02-23T14:07:12.059506Z"},"papermill":{"duration":1.374575,"end_time":"2022-02-23T14:07:12.062754","exception":false,"start_time":"2022-02-23T14:07:10.688179","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"ds = geodb.get_my_collections()\nds","visibility":"show","key":"xgLUKGchgy"},{"type":"output","id":"6DKrAanQUW5Yve5hRm_aN","data":[{"output_type":"execute_result","execution_count":28,"metadata":{},"data":{"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>owner</th>\n      <th>database</th>\n      <th>collection</th>\n      <th>table_name</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>geodb_0b01bfcd-2d09-46f8-84e8-cb5720fba14c</td>\n      <td>geodb_0b01bfcd-2d09-46f8-84e8-cb5720fba14c</td>\n      <td>delineated_parcels_s</td>\n      <td>delineated_parcels_s</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>geodb_0b01bfcd-2d09-46f8-84e8-cb5720fba14c</td>\n      <td>geodb_0b01bfcd-2d09-46f8-84e8-cb5720fba14c</td>\n      <td>test_batic</td>\n      <td>test_batic</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>geodb_0d6df427-8c09-41b9-abc9-64ce13a68125</td>\n      <td>geodb_0d6df427-8c09-41b9-abc9-64ce13a68125</td>\n      <td>land_use</td>\n      <td>land_use</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>geodb_0d6df427-8c09-41b9-abc9-64ce13a68125</td>\n      <td>geodb_0d6df427-8c09-41b9-abc9-64ce13a68125</td>\n      <td>lpis_aut</td>\n      <td>lpis_aut</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>geodb_0e5d743f-2134-4561-8946-a073b039176f</td>\n      <td>geodb_0e5d743f-2134-4561-8946-a073b039176f</td>\n      <td>ai4eo_bboxes</td>\n      <td>ai4eo_bboxes</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>882</th>\n      <td>geodb_geodb_ci</td>\n      <td>geodb_geodb_ci</td>\n      <td>land_use</td>\n      <td>land_use</td>\n    </tr>\n    <tr>\n      <th>883</th>\n      <td>geodb_lpis_iacs_admin</td>\n      <td>lpis_iacs</td>\n      <td>land_use_slo</td>\n      <td>land_use_slo</td>\n    </tr>\n    <tr>\n      <th>884</th>\n      <td>geodb_lpis_iacs_admin</td>\n      <td>lpis_iacs</td>\n      <td>lpis_aut</td>\n      <td>lpis_aut</td>\n    </tr>\n    <tr>\n      <th>885</th>\n      <td>geodb_lpis_iacs_admin</td>\n      <td>lpis_iacs</td>\n      <td>lpis_slo</td>\n      <td>lpis_slo</td>\n    </tr>\n    <tr>\n      <th>886</th>\n      <td>geodb_lpis_iacs_admin</td>\n      <td>lpis_iacs</td>\n      <td>metadata</td>\n      <td>metadata</td>\n    </tr>\n  </tbody>\n</table>\n<p>887 rows × 4 columns</p>\n</div>","content_type":"text/html"},"text/plain":{"content":"                                          owner  \\\n0    geodb_0b01bfcd-2d09-46f8-84e8-cb5720fba14c   \n1    geodb_0b01bfcd-2d09-46f8-84e8-cb5720fba14c   \n2    geodb_0d6df427-8c09-41b9-abc9-64ce13a68125   \n3    geodb_0d6df427-8c09-41b9-abc9-64ce13a68125   \n4    geodb_0e5d743f-2134-4561-8946-a073b039176f   \n..                                          ...   \n882                              geodb_geodb_ci   \n883                       geodb_lpis_iacs_admin   \n884                       geodb_lpis_iacs_admin   \n885                       geodb_lpis_iacs_admin   \n886                       geodb_lpis_iacs_admin   \n\n                                       database            collection  \\\n0    geodb_0b01bfcd-2d09-46f8-84e8-cb5720fba14c  delineated_parcels_s   \n1    geodb_0b01bfcd-2d09-46f8-84e8-cb5720fba14c            test_batic   \n2    geodb_0d6df427-8c09-41b9-abc9-64ce13a68125              land_use   \n3    geodb_0d6df427-8c09-41b9-abc9-64ce13a68125              lpis_aut   \n4    geodb_0e5d743f-2134-4561-8946-a073b039176f          ai4eo_bboxes   \n..                                          ...                   ...   \n882                              geodb_geodb_ci              land_use   \n883                                   lpis_iacs          land_use_slo   \n884                                   lpis_iacs              lpis_aut   \n885                                   lpis_iacs              lpis_slo   \n886                                   lpis_iacs              metadata   \n\n               table_name  \n0    delineated_parcels_s  \n1              test_batic  \n2                land_use  \n3                lpis_aut  \n4            ai4eo_bboxes  \n..                    ...  \n882              land_use  \n883          land_use_slo  \n884              lpis_aut  \n885              lpis_slo  \n886              metadata  \n\n[887 rows x 4 columns]","content_type":"text/plain"}}}],"visibility":"show","key":"FqGnthyGEc"}],"visibility":"show","key":"YWtVP2DtIH"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.121531,"end_time":"2022-02-23T14:07:12.307142","exception":false,"start_time":"2022-02-23T14:07:12.185611","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 5","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RhHrd27Ke4"}],"key":"e6z9xFeqx1"},{"type":"text","value":": In the next step you will create a collection. The properties are defined using OGC standards for properties. However, types are given using postgresql types.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rLJcRfIG5y"}],"key":"a0uGk5PnHa"}],"visibility":"show","key":"TPUiW8R0fL"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:12.548683Z","iopub.status.busy":"2022-02-23T14:07:12.548398Z","iopub.status.idle":"2022-02-23T14:07:20.781879Z","shell.execute_reply":"2022-02-23T14:07:20.781089Z"},"papermill":{"duration":8.355966,"end_time":"2022-02-23T14:07:20.783600","exception":false,"start_time":"2022-02-23T14:07:12.427634","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"geodb.drop_collection(\"alster\")\n\ncollections = {\n        \"alster\": \n        {\n            \"crs\": 4326,\n            \"properties\": \n            {\n                \"date\": \"date\", \n                \"chl\": \"float\",\n                \"chl_min\": \"float\",\n                \"chl_max\": \"float\",\n                \"status\": \"text\"\n            }\n        }\n    }\n\n\ngeodb.create_collections(collections)","visibility":"show","key":"AHATZza2ga"},{"type":"output","id":"N8SjRTlWMNXSVLibCNcCi","data":[{"output_type":"execute_result","execution_count":29,"metadata":{},"data":{"application/json":{"content":"{\"collections\":{\"geodb_418dfeac-15f0-4606-9edb-fd9eb722bf04_alster\":{\"crs\":4326,\"properties\":{\"chl\":\"float\",\"chl_max\":\"float\",\"chl_min\":\"float\",\"date\":\"date\",\"status\":\"text\"}}}}","content_type":"application/json"},"text/plain":{"content":"<xcube_geodb.core.message.Message at 0x7f5e397148b0>","content_type":"text/plain"}}}],"visibility":"show","key":"okGVOasrmu"}],"visibility":"show","key":"y1dRXlU9Kr"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.121351,"end_time":"2022-02-23T14:07:21.024801","exception":false,"start_time":"2022-02-23T14:07:20.903450","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 6","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"owAP1XX6Es"}],"key":"fDkHl7gFri"},{"type":"text","value":": Let’s check whether the collection has been created","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sKFWdY0KMX"}],"key":"aXj5qXkgId"}],"visibility":"show","key":"AHUz4tRC0H"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:21.270832Z","iopub.status.busy":"2022-02-23T14:07:21.269847Z","iopub.status.idle":"2022-02-23T14:07:22.312288Z","shell.execute_reply":"2022-02-23T14:07:22.311380Z"},"papermill":{"duration":1.170348,"end_time":"2022-02-23T14:07:22.314272","exception":false,"start_time":"2022-02-23T14:07:21.143924","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"ds = geodb.get_my_collections()\nds","visibility":"show","key":"OovPV4Tkml"},{"type":"output","id":"4QU9pIz203Bwcw3q-IZ87","data":[{"output_type":"execute_result","execution_count":30,"metadata":{},"data":{"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>owner</th>\n      <th>database</th>\n      <th>collection</th>\n      <th>table_name</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>geodb_0b01bfcd-2d09-46f8-84e8-cb5720fba14c</td>\n      <td>geodb_0b01bfcd-2d09-46f8-84e8-cb5720fba14c</td>\n      <td>delineated_parcels_s</td>\n      <td>delineated_parcels_s</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>geodb_0b01bfcd-2d09-46f8-84e8-cb5720fba14c</td>\n      <td>geodb_0b01bfcd-2d09-46f8-84e8-cb5720fba14c</td>\n      <td>test_batic</td>\n      <td>test_batic</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>geodb_0d6df427-8c09-41b9-abc9-64ce13a68125</td>\n      <td>geodb_0d6df427-8c09-41b9-abc9-64ce13a68125</td>\n      <td>land_use</td>\n      <td>land_use</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>geodb_0d6df427-8c09-41b9-abc9-64ce13a68125</td>\n      <td>geodb_0d6df427-8c09-41b9-abc9-64ce13a68125</td>\n      <td>lpis_aut</td>\n      <td>lpis_aut</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>geodb_0e5d743f-2134-4561-8946-a073b039176f</td>\n      <td>geodb_0e5d743f-2134-4561-8946-a073b039176f</td>\n      <td>ai4eo_bboxes</td>\n      <td>ai4eo_bboxes</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>882</th>\n      <td>geodb_geodb_ci</td>\n      <td>geodb_geodb_ci</td>\n      <td>land_use</td>\n      <td>land_use</td>\n    </tr>\n    <tr>\n      <th>883</th>\n      <td>geodb_lpis_iacs_admin</td>\n      <td>lpis_iacs</td>\n      <td>land_use_slo</td>\n      <td>land_use_slo</td>\n    </tr>\n    <tr>\n      <th>884</th>\n      <td>geodb_lpis_iacs_admin</td>\n      <td>lpis_iacs</td>\n      <td>lpis_aut</td>\n      <td>lpis_aut</td>\n    </tr>\n    <tr>\n      <th>885</th>\n      <td>geodb_lpis_iacs_admin</td>\n      <td>lpis_iacs</td>\n      <td>lpis_slo</td>\n      <td>lpis_slo</td>\n    </tr>\n    <tr>\n      <th>886</th>\n      <td>geodb_lpis_iacs_admin</td>\n      <td>lpis_iacs</td>\n      <td>metadata</td>\n      <td>metadata</td>\n    </tr>\n  </tbody>\n</table>\n<p>887 rows × 4 columns</p>\n</div>","content_type":"text/html"},"text/plain":{"content":"                                          owner  \\\n0    geodb_0b01bfcd-2d09-46f8-84e8-cb5720fba14c   \n1    geodb_0b01bfcd-2d09-46f8-84e8-cb5720fba14c   \n2    geodb_0d6df427-8c09-41b9-abc9-64ce13a68125   \n3    geodb_0d6df427-8c09-41b9-abc9-64ce13a68125   \n4    geodb_0e5d743f-2134-4561-8946-a073b039176f   \n..                                          ...   \n882                              geodb_geodb_ci   \n883                       geodb_lpis_iacs_admin   \n884                       geodb_lpis_iacs_admin   \n885                       geodb_lpis_iacs_admin   \n886                       geodb_lpis_iacs_admin   \n\n                                       database            collection  \\\n0    geodb_0b01bfcd-2d09-46f8-84e8-cb5720fba14c  delineated_parcels_s   \n1    geodb_0b01bfcd-2d09-46f8-84e8-cb5720fba14c            test_batic   \n2    geodb_0d6df427-8c09-41b9-abc9-64ce13a68125              land_use   \n3    geodb_0d6df427-8c09-41b9-abc9-64ce13a68125              lpis_aut   \n4    geodb_0e5d743f-2134-4561-8946-a073b039176f          ai4eo_bboxes   \n..                                          ...                   ...   \n882                              geodb_geodb_ci              land_use   \n883                                   lpis_iacs          land_use_slo   \n884                                   lpis_iacs              lpis_aut   \n885                                   lpis_iacs              lpis_slo   \n886                                   lpis_iacs              metadata   \n\n               table_name  \n0    delineated_parcels_s  \n1              test_batic  \n2                land_use  \n3                lpis_aut  \n4            ai4eo_bboxes  \n..                    ...  \n882              land_use  \n883          land_use_slo  \n884              lpis_aut  \n885              lpis_slo  \n886              metadata  \n\n[887 rows x 4 columns]","content_type":"text/plain"}}}],"visibility":"show","key":"BK3wXelMeP"}],"visibility":"show","key":"FFTwRjw8r9"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.124281,"end_time":"2022-02-23T14:07:22.564426","exception":false,"start_time":"2022-02-23T14:07:22.440145","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 7","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qTaYEAaYml"}],"key":"nqKxNZy1l1"},{"type":"text","value":": No collection is useful without data. We have created a sample dataset for you which you no load from an S3 AWS object store and open it into a GeoDataFrame. The data is obtained from a local water authority (HU).","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AWNMNe0m4s"}],"key":"e6UxXjvg6p"}],"visibility":"show","key":"I1kuo4t4ue"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:22.814567Z","iopub.status.busy":"2022-02-23T14:07:22.814124Z","iopub.status.idle":"2022-02-23T14:07:22.978459Z","shell.execute_reply":"2022-02-23T14:07:22.977661Z"},"papermill":{"duration":0.290423,"end_time":"2022-02-23T14:07:22.981012","exception":false,"start_time":"2022-02-23T14:07:22.690589","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import geopandas\nimport pandas\ngdf = geopandas.read_file('https://edc-phi-week-2020.s3.eu-central-1.amazonaws.com/hands-on/alster.geojson')\ngdf = gdf.where(pandas.notnull(gdf), None)\ngdf","visibility":"show","key":"zY7MIkLSVU"},{"type":"output","id":"OhEeXcGlnHCRBqd1AyBRU","data":[{"output_type":"execute_result","execution_count":31,"metadata":{},"data":{"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>date</th>\n      <th>chl</th>\n      <th>status</th>\n      <th>chl_min</th>\n      <th>chl_max</th>\n      <th>geometry</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>2018-01-05T00:00:00</td>\n      <td>10.79</td>\n      <td>I%   34,0</td>\n      <td>5.50</td>\n      <td>15.59</td>\n      <td>POINT (9.88617 53.54041)</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>2018-02-05T00:00:00</td>\n      <td>9.35</td>\n      <td>I%   34,0</td>\n      <td>5.82</td>\n      <td>13.66</td>\n      <td>POINT (9.88617 53.54041)</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>2018-03-05T00:00:00</td>\n      <td>11.25</td>\n      <td>I%   34,0</td>\n      <td>7.10</td>\n      <td>15.43</td>\n      <td>POINT (9.88617 53.54041)</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>2018-04-05T00:00:00</td>\n      <td>9.59</td>\n      <td>I%   37,0</td>\n      <td>5.24</td>\n      <td>17.42</td>\n      <td>POINT (9.88617 53.54041)</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>2018-05-05T00:00:00</td>\n      <td>18.88</td>\n      <td>I%   34,0</td>\n      <td>11.55</td>\n      <td>33.88</td>\n      <td>POINT (9.88617 53.54041)</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>118</th>\n      <td>2018-08-27T00:00:00</td>\n      <td>18.43</td>\n      <td>I%   34,0</td>\n      <td>13.32</td>\n      <td>27.83</td>\n      <td>POINT (9.88617 53.54041)</td>\n    </tr>\n    <tr>\n      <th>119</th>\n      <td>2018-08-28T00:00:00</td>\n      <td>19.14</td>\n      <td>I%   41,0</td>\n      <td>12.81</td>\n      <td>27.03</td>\n      <td>POINT (9.88617 53.54041)</td>\n    </tr>\n    <tr>\n      <th>120</th>\n      <td>2018-08-29T00:00:00</td>\n      <td>30.35</td>\n      <td>I%   39,0</td>\n      <td>9.72</td>\n      <td>63.58</td>\n      <td>POINT (9.88617 53.54041)</td>\n    </tr>\n    <tr>\n      <th>121</th>\n      <td>2018-08-30T00:00:00</td>\n      <td>28.01</td>\n      <td>I%   34,0</td>\n      <td>17.63</td>\n      <td>46.47</td>\n      <td>POINT (9.88617 53.54041)</td>\n    </tr>\n    <tr>\n      <th>122</th>\n      <td>2018-08-31T00:00:00</td>\n      <td>35.62</td>\n      <td>I%   33,0</td>\n      <td>13.91</td>\n      <td>55.24</td>\n      <td>POINT (9.88617 53.54041)</td>\n    </tr>\n  </tbody>\n</table>\n<p>123 rows × 6 columns</p>\n</div>","content_type":"text/html"},"text/plain":{"content":"                    date    chl     status  chl_min  chl_max  \\\n0    2018-01-05T00:00:00  10.79  I%   34,0     5.50    15.59   \n1    2018-02-05T00:00:00   9.35  I%   34,0     5.82    13.66   \n2    2018-03-05T00:00:00  11.25  I%   34,0     7.10    15.43   \n3    2018-04-05T00:00:00   9.59  I%   37,0     5.24    17.42   \n4    2018-05-05T00:00:00  18.88  I%   34,0    11.55    33.88   \n..                   ...    ...        ...      ...      ...   \n118  2018-08-27T00:00:00  18.43  I%   34,0    13.32    27.83   \n119  2018-08-28T00:00:00  19.14  I%   41,0    12.81    27.03   \n120  2018-08-29T00:00:00  30.35  I%   39,0     9.72    63.58   \n121  2018-08-30T00:00:00  28.01  I%   34,0    17.63    46.47   \n122  2018-08-31T00:00:00  35.62  I%   33,0    13.91    55.24   \n\n                     geometry  \n0    POINT (9.88617 53.54041)  \n1    POINT (9.88617 53.54041)  \n2    POINT (9.88617 53.54041)  \n3    POINT (9.88617 53.54041)  \n4    POINT (9.88617 53.54041)  \n..                        ...  \n118  POINT (9.88617 53.54041)  \n119  POINT (9.88617 53.54041)  \n120  POINT (9.88617 53.54041)  \n121  POINT (9.88617 53.54041)  \n122  POINT (9.88617 53.54041)  \n\n[123 rows x 6 columns]","content_type":"text/plain"}}}],"visibility":"show","key":"HcOSyddne9"}],"visibility":"show","key":"I1xxNwHv2n"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:23.236326Z","iopub.status.busy":"2022-02-23T14:07:23.235468Z","iopub.status.idle":"2022-02-23T14:07:23.244918Z","shell.execute_reply":"2022-02-23T14:07:23.243372Z"},"papermill":{"duration":0.143115,"end_time":"2022-02-23T14:07:23.247563","exception":false,"start_time":"2022-02-23T14:07:23.104448","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"gdf=gdf.dropna()","visibility":"show","key":"uQYgEFyES4"},{"type":"output","id":"GYxpOR3FuRCy43u36_JE9","data":[],"visibility":"show","key":"yYqSYB2h7T"}],"visibility":"show","key":"K2DRCBnqWc"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:23.490890Z","iopub.status.busy":"2022-02-23T14:07:23.490075Z","iopub.status.idle":"2022-02-23T14:07:28.972564Z","shell.execute_reply":"2022-02-23T14:07:28.971596Z"},"papermill":{"duration":5.607132,"end_time":"2022-02-23T14:07:28.974778","exception":false,"start_time":"2022-02-23T14:07:23.367646","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"geodb.insert_into_collection('alster', gdf)","visibility":"show","key":"o6pyXVppgA"},{"type":"output","id":"_e916hDGjR3R-uX6vQWnN","data":[{"name":"stdout","output_type":"stream","text":"Processing rows from 0 to 104\n"},{"output_type":"execute_result","execution_count":33,"metadata":{},"data":{"application/json":{"content":"{\"Message\":\"104 rows inserted into alster\"}","content_type":"application/json"},"text/plain":{"content":"<xcube_geodb.core.message.Message at 0x7f5e396f0340>","content_type":"text/plain"}}}],"visibility":"show","key":"QBZos7JOOo"}],"visibility":"show","key":"ZAphhrWuYS"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.132936,"end_time":"2022-02-23T14:07:29.231530","exception":false,"start_time":"2022-02-23T14:07:29.098594","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 8","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AqBXnWKfNu"}],"key":"g6DMnNA8n4"},{"type":"text","value":": Load the inserted data from the geoDB","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hHUcHPLcmK"}],"key":"CzpiSoZ0LD"}],"visibility":"show","key":"Xnpe0PxyRZ"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:29.478754Z","iopub.status.busy":"2022-02-23T14:07:29.478505Z","iopub.status.idle":"2022-02-23T14:07:29.482731Z","shell.execute_reply":"2022-02-23T14:07:29.481970Z"},"papermill":{"duration":0.129412,"end_time":"2022-02-23T14:07:29.485058","exception":false,"start_time":"2022-02-23T14:07:29.355646","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# geodb.get_collection('alster', database='phi_week')","visibility":"show","key":"wIPj2kbmzd"},{"type":"output","id":"1I4Ju90Bf7DAeEVX8ppLq","data":[],"visibility":"show","key":"TBwIBqgRA1"}],"visibility":"show","key":"C7cP4jjVJz"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:29.736378Z","iopub.status.busy":"2022-02-23T14:07:29.735636Z","iopub.status.idle":"2022-02-23T14:07:36.218045Z","shell.execute_reply":"2022-02-23T14:07:36.217340Z"},"papermill":{"duration":6.607222,"end_time":"2022-02-23T14:07:36.220169","exception":false,"start_time":"2022-02-23T14:07:29.612947","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"gdf = geodb.get_collection('alster')\ngdf['date'] = pandas.to_datetime(gdf['date'])\ngdf","visibility":"show","key":"Z8Ra8G4kMo"},{"type":"output","id":"heVVRh6UC79QwvwfBegje","data":[{"output_type":"execute_result","execution_count":35,"metadata":{},"data":{"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>id</th>\n      <th>created_at</th>\n      <th>modified_at</th>\n      <th>geometry</th>\n      <th>date</th>\n      <th>chl</th>\n      <th>chl_min</th>\n      <th>chl_max</th>\n      <th>status</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>1</td>\n      <td>2022-02-23T14:07:28.947908+00:00</td>\n      <td>None</td>\n      <td>POINT (9.88617 53.54041)</td>\n      <td>2018-01-05</td>\n      <td>10.79</td>\n      <td>5.50</td>\n      <td>15.59</td>\n      <td>I%   34,0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>2</td>\n      <td>2022-02-23T14:07:28.947908+00:00</td>\n      <td>None</td>\n      <td>POINT (9.88617 53.54041)</td>\n      <td>2018-02-05</td>\n      <td>9.35</td>\n      <td>5.82</td>\n      <td>13.66</td>\n      <td>I%   34,0</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>3</td>\n      <td>2022-02-23T14:07:28.947908+00:00</td>\n      <td>None</td>\n      <td>POINT (9.88617 53.54041)</td>\n      <td>2018-03-05</td>\n      <td>11.25</td>\n      <td>7.10</td>\n      <td>15.43</td>\n      <td>I%   34,0</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>4</td>\n      <td>2022-02-23T14:07:28.947908+00:00</td>\n      <td>None</td>\n      <td>POINT (9.88617 53.54041)</td>\n      <td>2018-04-05</td>\n      <td>9.59</td>\n      <td>5.24</td>\n      <td>17.42</td>\n      <td>I%   37,0</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>5</td>\n      <td>2022-02-23T14:07:28.947908+00:00</td>\n      <td>None</td>\n      <td>POINT (9.88617 53.54041)</td>\n      <td>2018-05-05</td>\n      <td>18.88</td>\n      <td>11.55</td>\n      <td>33.88</td>\n      <td>I%   34,0</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>99</th>\n      <td>100</td>\n      <td>2022-02-23T14:07:28.947908+00:00</td>\n      <td>None</td>\n      <td>POINT (9.88617 53.54041)</td>\n      <td>2018-08-27</td>\n      <td>18.43</td>\n      <td>13.32</td>\n      <td>27.83</td>\n      <td>I%   34,0</td>\n    </tr>\n    <tr>\n      <th>100</th>\n      <td>101</td>\n      <td>2022-02-23T14:07:28.947908+00:00</td>\n      <td>None</td>\n      <td>POINT (9.88617 53.54041)</td>\n      <td>2018-08-28</td>\n      <td>19.14</td>\n      <td>12.81</td>\n      <td>27.03</td>\n      <td>I%   41,0</td>\n    </tr>\n    <tr>\n      <th>101</th>\n      <td>102</td>\n      <td>2022-02-23T14:07:28.947908+00:00</td>\n      <td>None</td>\n      <td>POINT (9.88617 53.54041)</td>\n      <td>2018-08-29</td>\n      <td>30.35</td>\n      <td>9.72</td>\n      <td>63.58</td>\n      <td>I%   39,0</td>\n    </tr>\n    <tr>\n      <th>102</th>\n      <td>103</td>\n      <td>2022-02-23T14:07:28.947908+00:00</td>\n      <td>None</td>\n      <td>POINT (9.88617 53.54041)</td>\n      <td>2018-08-30</td>\n      <td>28.01</td>\n      <td>17.63</td>\n      <td>46.47</td>\n      <td>I%   34,0</td>\n    </tr>\n    <tr>\n      <th>103</th>\n      <td>104</td>\n      <td>2022-02-23T14:07:28.947908+00:00</td>\n      <td>None</td>\n      <td>POINT (9.88617 53.54041)</td>\n      <td>2018-08-31</td>\n      <td>35.62</td>\n      <td>13.91</td>\n      <td>55.24</td>\n      <td>I%   33,0</td>\n    </tr>\n  </tbody>\n</table>\n<p>104 rows × 9 columns</p>\n</div>","content_type":"text/html"},"text/plain":{"content":"      id                        created_at modified_at  \\\n0      1  2022-02-23T14:07:28.947908+00:00        None   \n1      2  2022-02-23T14:07:28.947908+00:00        None   \n2      3  2022-02-23T14:07:28.947908+00:00        None   \n3      4  2022-02-23T14:07:28.947908+00:00        None   \n4      5  2022-02-23T14:07:28.947908+00:00        None   \n..   ...                               ...         ...   \n99   100  2022-02-23T14:07:28.947908+00:00        None   \n100  101  2022-02-23T14:07:28.947908+00:00        None   \n101  102  2022-02-23T14:07:28.947908+00:00        None   \n102  103  2022-02-23T14:07:28.947908+00:00        None   \n103  104  2022-02-23T14:07:28.947908+00:00        None   \n\n                     geometry       date    chl  chl_min  chl_max     status  \n0    POINT (9.88617 53.54041) 2018-01-05  10.79     5.50    15.59  I%   34,0  \n1    POINT (9.88617 53.54041) 2018-02-05   9.35     5.82    13.66  I%   34,0  \n2    POINT (9.88617 53.54041) 2018-03-05  11.25     7.10    15.43  I%   34,0  \n3    POINT (9.88617 53.54041) 2018-04-05   9.59     5.24    17.42  I%   37,0  \n4    POINT (9.88617 53.54041) 2018-05-05  18.88    11.55    33.88  I%   34,0  \n..                        ...        ...    ...      ...      ...        ...  \n99   POINT (9.88617 53.54041) 2018-08-27  18.43    13.32    27.83  I%   34,0  \n100  POINT (9.88617 53.54041) 2018-08-28  19.14    12.81    27.03  I%   41,0  \n101  POINT (9.88617 53.54041) 2018-08-29  30.35     9.72    63.58  I%   39,0  \n102  POINT (9.88617 53.54041) 2018-08-30  28.01    17.63    46.47  I%   34,0  \n103  POINT (9.88617 53.54041) 2018-08-31  35.62    13.91    55.24  I%   33,0  \n\n[104 rows x 9 columns]","content_type":"text/plain"}}}],"visibility":"show","key":"NVYxePfdwC"}],"visibility":"show","key":"OF4zmrUfhE"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:36.478990Z","iopub.status.busy":"2022-02-23T14:07:36.478306Z","iopub.status.idle":"2022-02-23T14:07:36.482890Z","shell.execute_reply":"2022-02-23T14:07:36.482114Z"},"papermill":{"duration":0.140203,"end_time":"2022-02-23T14:07:36.484894","exception":false,"start_time":"2022-02-23T14:07:36.344691","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"feat = gdf['geometry'][0]","visibility":"show","key":"vaXtIp9aJF"},{"type":"output","id":"PYtcd2BVXXvci777wd9H6","data":[],"visibility":"show","key":"POKJFo1fh8"}],"visibility":"show","key":"EvGTrB7PVb"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.130577,"end_time":"2022-02-23T14:07:36.751079","exception":false,"start_time":"2022-02-23T14:07:36.620502","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 9","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SiOMZ8Vkev"}],"key":"MOMOmVzvYv"},{"type":"text","value":": Combine data from Sentinel","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wGfvopF7QC"}],"key":"m6J8dpBSAv"}],"visibility":"show","key":"mfyftJF86j"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:37.006499Z","iopub.status.busy":"2022-02-23T14:07:37.005956Z","iopub.status.idle":"2022-02-23T14:07:37.104286Z","shell.execute_reply":"2022-02-23T14:07:37.103492Z"},"papermill":{"duration":0.227331,"end_time":"2022-02-23T14:07:37.108597","exception":false,"start_time":"2022-02-23T14:07:36.881266","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"cube_S2_2018['B3o1'] = cube_S2_2018.B03/ cube_S2_2018.B01\ncube_S2_2018['B3o2'] = cube_S2_2018.B03/ cube_S2_2018.B02\ncube_S2_2018","visibility":"show","key":"VAf4G2MwRx"},{"type":"output","id":"pe5FdrWN18N4zEtXfxkAB","data":[{"output_type":"execute_result","execution_count":37,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"5903e9580555db312f6b9b0dcbb85286","path":"/build/5903e9580555db312f6b9b0dcbb85286.html"},"text/plain":{"content":"<xarray.Dataset>\nDimensions:    (time: 48, lat: 1000, lon: 2000, bnds: 2)\nCoordinates:\n  * lat        (lat) float64 53.63 53.63 53.63 53.63 ... 53.45 53.45 53.45 53.45\n  * lon        (lon) float64 9.86 9.86 9.86 9.861 ... 10.22 10.22 10.22 10.22\n  * time       (time) datetime64[ns] 2018-05-03T10:42:09 ... 2018-08-28T10:30:13\n    time_bnds  (time, bnds) datetime64[ns] dask.array<chunksize=(48, 2), meta=np.ndarray>\nDimensions without coordinates: bnds\nData variables:\n    B01        (time, lat, lon) float32 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\n    B02        (time, lat, lon) float32 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\n    B03        (time, lat, lon) float32 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\n    B04        (time, lat, lon) float32 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\n    B05        (time, lat, lon) float32 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\n    B06        (time, lat, lon) float32 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\n    B08        (time, lat, lon) float32 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\n    CLD        (time, lat, lon) uint8 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\n    SCL        (time, lat, lon) uint8 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\n    B3o1       (time, lat, lon) float32 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\n    B3o2       (time, lat, lon) float32 dask.array<chunksize=(1, 500, 500), meta=np.ndarray>\nAttributes: (12/17)\n    Conventions:                CF-1.7\n    title:                      S2L2A Data Cube Subset\n    history:                    [{'program': 'xcube_sh.chunkstore.SentinelHub...\n    date_created:               2022-02-23T14:06:16.689569\n    time_coverage_start:        2018-05-03T10:42:09+00:00\n    time_coverage_end:          2018-08-28T10:30:13+00:00\n    ...                         ...\n    processing_level:           L2A\n    geospatial_lon_units:       degrees_east\n    geospatial_lon_resolution:  0.00018000000000000017\n    geospatial_lat_units:       degrees_north\n    geospatial_lat_resolution:  0.00018000000000000844\n    date_modified:              2022-02-23T14:06:55.872526","content_type":"text/plain"}}}],"visibility":"show","key":"EuHdoGcsaa"}],"visibility":"show","key":"aSZEqRMkSf"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:37.393327Z","iopub.status.busy":"2022-02-23T14:07:37.393046Z","iopub.status.idle":"2022-02-23T14:07:37.462805Z","shell.execute_reply":"2022-02-23T14:07:37.462120Z"},"papermill":{"duration":0.208429,"end_time":"2022-02-23T14:07:37.465221","exception":false,"start_time":"2022-02-23T14:07:37.256792","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"cube_S2_2018_point_low = cube_S2_2018.where((cube_S2_2018.B3o1 < 10) & (cube_S2_2018.SCL==6)).sel(lat=feat.y, lon=feat.x, method='nearest')\ncube_S2_2018_point_high = cube_S2_2018.where((cube_S2_2018.B3o2 < 10) & (cube_S2_2018.SCL==6)).sel(lat=feat.y, lon=feat.x, method='nearest')","visibility":"show","key":"l9LGecjUh4"},{"type":"output","id":"rWodbrS6DlbBfkJrv8lqF","data":[],"visibility":"show","key":"hf35CWtMmT"}],"visibility":"show","key":"WcsDHGz2JS"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.128969,"end_time":"2022-02-23T14:07:37.724887","exception":false,"start_time":"2022-02-23T14:07:37.595918","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 10","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"B2VluCiXv6"}],"key":"QUxKmKWewM"},{"type":"text","value":": Group point time series data by date","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FcGVxe3pz0"}],"key":"NLK8EHmOVQ"}],"visibility":"show","key":"ucQofwmo0C"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:38.011644Z","iopub.status.busy":"2022-02-23T14:07:38.010939Z","iopub.status.idle":"2022-02-23T14:07:38.052981Z","shell.execute_reply":"2022-02-23T14:07:38.051931Z"},"papermill":{"duration":0.193249,"end_time":"2022-02-23T14:07:38.055291","exception":false,"start_time":"2022-02-23T14:07:37.862042","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"agg = gdf.query(\"date >= '2018-05-01' and date <= '2018-09-01'\").groupby(['date']).mean()\nagg","visibility":"show","key":"elyUG0xxM0"},{"type":"output","id":"0aj9OEHxWI3INlNkjpw3q","data":[{"output_type":"execute_result","execution_count":39,"metadata":{},"data":{"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>id</th>\n      <th>chl</th>\n      <th>chl_min</th>\n      <th>chl_max</th>\n    </tr>\n    <tr>\n      <th>date</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>2018-05-05</th>\n      <td>5.0</td>\n      <td>18.88</td>\n      <td>11.55</td>\n      <td>33.88</td>\n    </tr>\n    <tr>\n      <th>2018-05-06</th>\n      <td>31.0</td>\n      <td>3.06</td>\n      <td>1.51</td>\n      <td>6.73</td>\n    </tr>\n    <tr>\n      <th>2018-05-08</th>\n      <td>80.0</td>\n      <td>19.07</td>\n      <td>7.40</td>\n      <td>50.17</td>\n    </tr>\n    <tr>\n      <th>2018-05-13</th>\n      <td>11.0</td>\n      <td>69.92</td>\n      <td>45.83</td>\n      <td>91.92</td>\n    </tr>\n    <tr>\n      <th>2018-05-15</th>\n      <td>12.0</td>\n      <td>55.27</td>\n      <td>45.75</td>\n      <td>67.19</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>2018-08-27</th>\n      <td>100.0</td>\n      <td>18.43</td>\n      <td>13.32</td>\n      <td>27.83</td>\n    </tr>\n    <tr>\n      <th>2018-08-28</th>\n      <td>101.0</td>\n      <td>19.14</td>\n      <td>12.81</td>\n      <td>27.03</td>\n    </tr>\n    <tr>\n      <th>2018-08-29</th>\n      <td>102.0</td>\n      <td>30.35</td>\n      <td>9.72</td>\n      <td>63.58</td>\n    </tr>\n    <tr>\n      <th>2018-08-30</th>\n      <td>103.0</td>\n      <td>28.01</td>\n      <td>17.63</td>\n      <td>46.47</td>\n    </tr>\n    <tr>\n      <th>2018-08-31</th>\n      <td>104.0</td>\n      <td>35.62</td>\n      <td>13.91</td>\n      <td>55.24</td>\n    </tr>\n  </tbody>\n</table>\n<p>80 rows × 4 columns</p>\n</div>","content_type":"text/html"},"text/plain":{"content":"               id    chl  chl_min  chl_max\ndate                                      \n2018-05-05    5.0  18.88    11.55    33.88\n2018-05-06   31.0   3.06     1.51     6.73\n2018-05-08   80.0  19.07     7.40    50.17\n2018-05-13   11.0  69.92    45.83    91.92\n2018-05-15   12.0  55.27    45.75    67.19\n...           ...    ...      ...      ...\n2018-08-27  100.0  18.43    13.32    27.83\n2018-08-28  101.0  19.14    12.81    27.03\n2018-08-29  102.0  30.35     9.72    63.58\n2018-08-30  103.0  28.01    17.63    46.47\n2018-08-31  104.0  35.62    13.91    55.24\n\n[80 rows x 4 columns]","content_type":"text/plain"}}}],"visibility":"show","key":"iuAXV6O0Ni"}],"visibility":"show","key":"uZuvvj2RGf"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.130601,"end_time":"2022-02-23T14:07:38.316840","exception":false,"start_time":"2022-02-23T14:07:38.186239","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 11","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SMbnAqYkGf"}],"key":"yJCbilcxQf"},{"type":"text","value":": Plot result","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dQrlvwvX6b"}],"key":"r8XmWNGAoA"}],"visibility":"show","key":"bV76HBVYFB"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:38.587206Z","iopub.status.busy":"2022-02-23T14:07:38.586623Z","iopub.status.idle":"2022-02-23T14:07:38.590937Z","shell.execute_reply":"2022-02-23T14:07:38.590077Z"},"papermill":{"duration":0.139727,"end_time":"2022-02-23T14:07:38.592959","exception":false,"start_time":"2022-02-23T14:07:38.453232","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt","visibility":"show","key":"tTXLGAHpXc"},{"type":"output","id":"bgy1WdHoZFyz9EM1tkejr","data":[],"visibility":"show","key":"X2ffnbbM9E"}],"visibility":"show","key":"AIfruUmsMb"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2022-02-23T14:07:38.860235Z","iopub.status.busy":"2022-02-23T14:07:38.859444Z","iopub.status.idle":"2022-02-23T14:09:58.824236Z","shell.execute_reply":"2022-02-23T14:09:58.823379Z"},"papermill":{"duration":140.099364,"end_time":"2022-02-23T14:09:58.826351","exception":false,"start_time":"2022-02-23T14:07:38.726987","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, ax1 = plt.subplots(constrained_layout=True, figsize=(10, 10))\nax1.set_ylabel('Sentinel 2 colour ratio', color='red')  \nax1.plot(cube_S2_2018_point_low.time, cube_S2_2018_point_low.B3o1.values, label = \"B3o1\", color='red', marker='.', linestyle = 'None', markersize=10)\nax1.plot(cube_S2_2018_point_high.time, cube_S2_2018_point_high.B3o2.values, label = \"B3o2\", color='red', marker='.', linestyle = 'None', markersize=10)\n\nax2 = ax1.twinx()  \nax2.plot(agg.index, agg.chl_max, label = \"Chlorophyll max. (tot) [µg/l]\", color='green', marker='.', linestyle = 'None',  markersize=10)\nax2.set_ylabel('in-situ chl max', color='green')  \n\n\nfig.legend()\n\n","visibility":"show","key":"dQTWR6JymI"},{"type":"output","id":"Bi1R_1E762msMHq8Jk_bQ","data":[{"output_type":"display_data","metadata":{"needs_background":"light"},"data":{"image/png":{"content_type":"image/png","hash":"1554dfa755fb4b1b5138b21b18bae922","path":"/build/1554dfa755fb4b1b5138b21b18bae922.png"},"text/plain":{"content":"<Figure size 720x720 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"UW7YXpusF2"}],"visibility":"show","key":"rW8wwDvPm0"}],"key":"NSvqBdupS1"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"How to bring your own data to EDC: Using Sentinel Hub Python package","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/edc-byoc-tutorial","group":"Contributions"},"next":{"title":"Demonstration of Eurocrops data use in geoDB","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/edc-geodb-4-eurocrops-demo","group":"Contributions"}}},"domain":"http://localhost:3000"}