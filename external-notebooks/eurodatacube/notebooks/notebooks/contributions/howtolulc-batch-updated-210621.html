<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>How To: Land-Use-Land-Cover Prediction for Slovenia - using the Batch Processing API - Location for eodashboard notebooks</title><meta property="og:title" content="How To: Land-Use-Land-Cover Prediction for Slovenia - using the Batch Processing API - Location for eodashboard notebooks"/><meta name="generator" content="mystmd"/><meta name="keywords" content=""/><link rel="stylesheet" href="/build/_assets/app-HG4THSM4.css"/><link rel="stylesheet" href="/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/favicon.ico"/><link rel="stylesheet" href="/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="block px-2 py-1 text-black underline">Skip to article content</a></div><div class="bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><a class="flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/"><span class="text-md sm:text-xl tracking-tight sm:mr-5">Made with MyST</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R3iop:" data-state="closed" class="flex items-center h-10 aspect-square sm:w-64 text-left text-gray-400 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="hidden sm:block grow">Search</span><div aria-hidden="true" class="items-center hidden mx-1 font-mono text-sm text-gray-400 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-8 h-8 mx-3" title="Toggle theme between light and dark mode." aria-label="Toggle theme between light and dark mode."><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><article class="article content article-grid grid-gap"><main class="article-grid subgrid-gap col-screen"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="mb-8 pt-9"><div class="flex items-center h-6 mb-5 text-sm font-light"><div class="flex-grow"></div><a href="https://github.com/eoxhub-workspaces/documentation/" title="GitHub Repository: eoxhub-workspaces/documentation/" target="_blank" rel="noopener noreferrer" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a><div class="inline-block mr-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block"><title>Jupyter Notebook</title><path d="M20.2 1.7c0 .8-.5 1.4-1.3 1.5-.8 0-1.4-.5-1.5-1.3 0-.8.5-1.4 1.3-1.5.8-.1 1.5.5 1.5 1.3zM12 17.9c-3.7 0-7-1.3-8.7-3.3 1.8 4.8 7.1 7.3 11.9 5.5 2.5-.9 4.5-2.9 5.5-5.5-1.7 2-4.9 3.3-8.7 3.3zM12 5.1c3.7 0 7 1.3 8.7 3.3-1.8-4.8-7.1-7.3-11.9-5.5-2.5.9-4.5 2.9-5.5 5.5 1.7-2 5-3.3 8.7-3.3zM6.9 21.8c.1 1-.7 1.8-1.7 1.9-1 .1-1.8-.7-1.9-1.7 0-1 .7-1.8 1.7-1.9 1-.1 1.8.7 1.9 1.7zM3.7 4.6c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1c0 .5-.4 1-1 1z"></path></svg></div><div class="relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="relative ml-2 -mr-1" id="headlessui-menu-button-:Rd4fop:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="mb-0">How To: Land-Use-Land-Cover Prediction for Slovenia - using the Batch Processing API</h1></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><div id="xNbsVIRcX9" class="relative group/block"><p>This notebook is based on the <a target="_blank" rel="noreferrer" href="https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html" class="">Land-User-Land-Cover Prediction example</a> described in the <a target="_blank" rel="noreferrer" href="https://eo-learn.readthedocs.io/en/latest/index.html" class="">EOLearn documentation</a>. The example workflow uses <code>EOLearn</code> to construct a machine learning pipeline for predicting the land use / land cover for the region of the Republic of Slovenia. The import of satellite images to train a model which is then used for the predictions is performed using an <a target="_blank" rel="noreferrer" href="https://eo-learn.readthedocs.io/en/latest/eotasks.html" class="">EOTask</a> based on Sentinel Hub’s <a target="_blank" rel="noreferrer" href="https://docs.sentinel-hub.com/api/latest/api/process/" class="">process API</a>. While this approach is efficient for most applications, querying large volumes of data and performing the processing steps locally can complicate scaling to larger areas (country or continent-wide analysis for example).</p><p>In this notebook, we present an alternative workflow, where the acquisition of the satellite data, processing of derived products and resampling over a fixed timestep is performed with Sentinel Hub services. The process allows for much faster processing times over large areas, reduced costs and the user needs less computational resources to process the data.</p></div><div id="GZ4oVNE4KJ" class="relative group/block"><h3 id="before-you-start" class="relative group"><span class="heading-text">Before you start</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#before-you-start" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><h5 id="requirements" class="relative group"><span class="heading-text">Requirements</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#requirements" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p>In order to run the example you will need an EDC Sentinel Hub API access (Enterprise plan) to access satellite data and an <a target="_blank" rel="noreferrer" href="https://aws.amazon.com/s3/" class="">Amazon Bucket</a> to save the outputs to.</p><p>To configure the notebook to work with your Sentinel Hub account you can use the <code>edc</code> configurator as shown below. You will also need to specify your Amazon Bucket access credentials (user id and secret for <a target="_blank" rel="noreferrer" href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys" class="">programmatic access</a>).</p><p><strong>Note: You may need to update the <code>eolearn</code> and <code>sentinelhub</code> package to the latest version.</strong></p></div><div id="wMawO381OA" class="relative group/block"><h5 id="input-data" class="relative group"><span class="heading-text">Input data</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#input-data" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p>You can access the example input data from the <a target="_blank" rel="noreferrer" href="https://github.com/sentinel-hub/eo-learn/tree/master/examples/batch-processing/data" class="">Github repository</a></p></div><div id="jVYQCaZWO2" class="relative group/block"><h3 id="overview" class="relative group"><span class="heading-text">Overview</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#overview" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>This notebook is organised in 2 main sections:</p><ul><li><p><strong>Part 1</strong> is dedicated to creating and running the Batch Process with <a target="_blank" rel="noreferrer" href="https://sentinelhub-py.readthedocs.io/en/latest/" class="">Sentinel Hub Python package</a>.</p></li><li><p><strong>Part 2</strong> focusses on converting the results obtained in <em>Part 1</em> to <a target="_blank" rel="noreferrer" href="https://eo-learn.readthedocs.io/en/latest/examples/core/CoreOverview.html#EOPatch" class="">EOPatches</a>, the format used in <a target="_blank" rel="noreferrer" href="https://eo-learn.readthedocs.io/en/latest/index.html" class="">EOLearn</a>.</p></li><li><p><strong>Part 3</strong> shows how to integrate the workflow into the <a href="https://github.com/sentinel-hub/eo-learn/blob/master/examples/land-cover-map/SI_LULC_pipeline.ipynb" class="italic" target="_blank" rel="noreferrer" data-state="closed">LULC pipeline</a> to predict LULC using machine learning algorithms.</p></li></ul><p>Let’s start!</p></div><div id="P3b9b9jGEH" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Basics of Python data handling and visualization
import numpy as np
import geopandas as gpd
from shapely.geometry import Polygon
from shapely.wkt import loads
import rasterio

# Sentinel Hub
from sentinelhub import (SentinelHubBatch, SentinelHubRequest, Geometry, CRS, BBox, DataCollection, MimeType, SHConfig,
                         BatchSplitter)

# EOLearn
from eolearn.core import (EOPatch, EONode, EOWorkflow, EOExecutor, OverwritePermission, FeatureType, SaveTask, LoadTask,
                          linearly_connect_tasks)
from eolearn.geometry import VectorToRasterTask, ErosionTask
from eolearn.ml_tools import FractionSamplingTask

# Amazon
import boto3

# Utilities
from pathlib import Path, PosixPath
import datetime
from tqdm.auto import tqdm
from fs_s3fs import S3FS
from fs import open_fs
from aenum import MultiValueEnum
from time import sleep

# Visualisation
import matplotlib.pyplot as plt
from matplotlib.colors import ListedColormap, BoundaryNorm
from matplotlib.patches import Patch

import os
import warnings
warnings.filterwarnings(&#x27;ignore&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="qZIeqctkmUFpq_S-69IIq" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="UXODYUjaW6" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">%matplotlib inline</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="XswSGdaEYURFA7QWnEDGG" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="NDG9zkNxzM" class="relative group/block"><h2 id="part-1-create-and-run-the-batch-process" class="relative group"><span class="heading-text">Part 1: create and run the Batch process</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#part-1-create-and-run-the-batch-process" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Run <code>Sentinel Hub Batch Processing</code> to request data for an area of interest, and download the satellite products (bands and derived products) to an Amazon S3 Bucket.</p></div><div id="rja7TSVDUW" class="relative group/block"><p>First specify Amazon S3 bucket client ID and secret (See <strong>Requirements</strong> above)</p></div><div id="c09ck1DNkw" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">AWS_ID = &quot;aws-client-id&quot;
AWS_SECRET = &quot;aws-client-secret&quot;</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="vdIu3-gvULwOMEsX3Op8V" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="sB4fm82vpr" class="relative group/block"><h4 id="sentinel-hub-authentification" class="relative group"><span class="heading-text">Sentinel Hub authentification</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#sentinel-hub-authentification" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>In the following cell, we will create an instance of <code>sentinelhub.SHConfig</code> for the Sentinel Hub services. The token is only valid for 1 hour. If you get an message of type <code> accessToken signature expired</code> later in the workflow, just re-run the next cell. See more <a target="_blank" rel="noreferrer" href="https://docs.sentinel-hub.com/api/latest/api/overview/authentication/" class="">information here</a></p></div><div id="zjoLkkZGcT" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Set up credentials for use with batch
config = SHConfig()
config.sh_client_id = os.environ[&quot;SH_CLIENT_ID&quot;]
config.sh_client_secret = os.environ[&quot;SH_CLIENT_SECRET&quot;]

if config.sh_client_id == &#x27;&#x27; or config.sh_client_secret == &#x27;&#x27;:
    print(&quot;Warning! To use Sentinel Hub services, please provide the credentials (client ID and client secret).&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="C7rHXAxA5GKG7ILC8mE_M" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="qu4068wZSl" class="relative group/block"><h3 id="id-1-1-define-the-area-of-interest-aoi" class="relative group"><span class="heading-text">1.1 Define the Area-of-Interest (AOI):</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-1-1-define-the-area-of-interest-aoi" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Although the Sentinel Hub Batch processing is designed for large areas, running this example Notebook for the entire Republic of Slovenia would be costly (in terms of storage and processing units used). To make the example reproducible, we will run the example for a smaller region: the administrative boundaries of the capital, Ljubljana.</p><ul><li><p>A geographical shape of Slovenia was taken from <a target="_blank" rel="noreferrer" href="http://alas.matf.bg.ac.rs/~mi09109/svn.html" class="">this webpage</a>. The region of Ljubljana was extracted using QGIS and saved as a new geojson. In the following cell the <code>geojson</code> is imported and a buffer of 500 m is applied to it (to make sure to cover the entire extent). The shape <code>svn_border.geojson</code> is available <a href="https://github.com/sentinel-hub/eo-learn/blob/master/examples/batch-processing/data/ljubljana.geojson" class="italic" target="_blank" rel="noreferrer" data-state="closed">here</a>.</p></li><li><p>Because the Batch Processing API can’t process shapes with too many coordinates (up to 1500 points are supported), a simplified polygon covering the extent of the geographical shape is created (using <code>simplify</code>), and the coordinates extracted. In the current example, this step is optional, but was included for demonstration purposes.</p></li><li><p>The shape is split into smaller tiles by the batch process (see further down).</p></li></ul></div><div id="tPv4mOdMi5" class="relative group/block"><h5 id="id-1-1-1-import-data-plot-aoi-and-check-the-points-count" class="relative group"><span class="heading-text">1.1.1 Import data, plot AOI, and check the points count</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-1-1-1-import-data-plot-aoi-and-check-the-points-count" title="Link to this Section" aria-label="Link to this Section">¶</a></h5></div><div id="LzBbvHQS4G" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">ljubljana_data = {
    &quot;adm1_code&quot;: &quot;SVN-962&quot;,
    &quot;Shape_Leng&quot;: 1.01284310866,
    &quot;Shape_Area&quot;: 0.0321361298149,
    &quot;diss_me&quot;: 962,
    &quot;adm1_code_&quot;: &quot;SVN-962&quot;,
    &quot;iso_3166_2&quot;: &quot;SI-&quot;,
    &quot;wikipedia&quot;: None,
    &quot;sr_sov_a3&quot;: &quot;SVN&quot;,
    &quot;sr_adm0_a3&quot;: &quot;SVN&quot;,
    &quot;iso_a2&quot;: &quot;SI&quot;,
    &quot;adm0_sr&quot;: 1,
    &quot;admin0_lab&quot;: 2,
    &quot;name&quot;: &quot;Osrednjeslovenska&quot;,
    &quot;name_alt&quot;: &quot;Ljubljana&quot;,
    &quot;name_local&quot;: None,
    &quot;type&quot;: &quot;Statisticna Regije&quot;,
    &quot;type_en&quot;: &quot;Statistical Region&quot;,
    &quot;code_local&quot;: None,
    &quot;code_hasc&quot;: &quot;SI.LJ&quot;,
    &quot;note&quot;: None,
    &quot;hasc_maybe&quot;: None,
    &quot;region&quot;: None,
    &quot;region_cod&quot;: None,
    &quot;region_big&quot;: None,
    &quot;big_code&quot;: None,
    &quot;provnum_ne&quot;: 111,
    &quot;gadm_level&quot;: 2,
    &quot;check_me&quot;: 0,
    &quot;scalerank&quot;: 10,
    &quot;datarank&quot;: 8,
    &quot;abbrev&quot;: None,
    &quot;postal&quot;: &quot;LJ&quot;,
    &quot;area_sqkm&quot;: 0.0,
    &quot;sameascity&quot;: -99,
    &quot;labelrank&quot;: 10,
    &quot;featurecla&quot;: &quot;Admin-1 scale rank&quot;,
    &quot;admin&quot;: &quot;Slovenia&quot;,
    &quot;name_len&quot;: 17,
    &quot;mapcolor9&quot;: 2,
    &quot;mapcolor13&quot;: 12,
    &quot;geometry&quot;: loads(&quot;POLYGON ((926425.6431983189 5123589.170469966, 928023.7898916167 5121898.015502713, 930381.3263176056 5121120.044066284, 932172.4018085758 5120986.554265775, 932397.4164062712 5120015.896563099, 932581.6593906969 5119111.593260468, 934172.9482895343 5118295.244651059, 935552.5077836656 5118035.394490954, 937426.0230920448 5118284.182013701, 938974.6457346278 5118919.953589984, 939436.4214525614 5118863.607289625, 940115.1034137213 5118470.883597136, 941661.5894687981 5118743.682363604, 942560.1680774961 5118144.887344502, 942735.089611518 5117724.728520735, 943609.3171581865 5117355.118745014, 943441.7280510126 5116506.263347512, 943476.1717744432 5116029.795751704, 943357.5915462442 5115669.221437243, 943883.7408222458 5115060.955142928, 944401.2580603813 5114573.278955945, 944833.0906094413 5113938.04334936, 945085.8948330702 5113278.305480363, 944854.481928225 5112644.071482883, 945156.6899264865 5110470.215581522, 944463.2053827948 5109883.358539728, 943213.6218703112 5110424.993391757, 942450.1435025067 5110975.866591577, 942002.8597709246 5111157.176478082, 941344.5252792852 5111086.772156567, 940250.6079617536 5110362.048641361, 939987.9768291702 5109818.169601077, 939577.3549704123 5109318.540062902, 938375.9969106899 5108514.419667248, 936051.6183637844 5108285.692598732, 934876.7259672079 5109033.28003256, 932469.7213315063 5110954.777737652, 930583.1400775139 5111205.907107501, 928967.0312091864 5110810.191967965, 928500.3034628865 5110414.20558999, 928620.5574546311 5109381.365577888, 928509.1394418445 5107865.126862759, 926900.3871498384 5108624.263870159, 926099.3870347773 5108522.555558871, 924410.7564367288 5107768.401844963, 923998.0565383206 5106756.500797831, 921805.3913033886 5105602.201608885, 921016.5103012786 5106199.915835703, 921000.6721904315 5106960.150802306, 921510.2298354742 5107796.748059389, 922130.4894534599 5108482.394295073, 922543.3747806235 5109142.328402843, 922331.4077197406 5109594.952222921, 921330.1897642646 5110247.196747772, 920127.357732374 5111618.263417895, 920919.0829407133 5112200.206929425, 920960.7590644892 5112471.259680815, 920960.1393605953 5113007.610408505, 920817.7315732187 5114030.260011839, 920568.43797675 5114679.336590691, 920342.5783931809 5115162.761556501, 920144.6578527923 5115414.51555307, 919381.6598506232 5117060.85083882, 919108.5832219544 5117356.510004638, 918652.2145139208 5117515.658383243, 918148.0906285422 5117492.790082054, 919763.7540312987 5118866.304184149, 920148.1329041517 5119054.139046485, 920302.0922611563 5119266.565990494, 920048.0836169412 5119635.582898952, 919720.6514727444 5120022.646377376, 919448.8270490387 5120476.973462088, 919145.8071278529 5121211.784814458, 918820.2671607826 5121397.144247358, 918838.9195219886 5121652.192733762, 918920.7809071594 5122038.452927704, 919230.1471832383 5122440.292463314, 919706.9407822394 5122680.600692804, 920717.1690435053 5122744.185280813, 921763.7085836534 5123444.913719906, 922373.4495737455 5124545.402263708, 922960.0301947873 5124063.914497981, 923791.9073106179 5124210.8840452, 925808.8960918575 5125017.186416848, 926425.6431983189 5123589.170469966))&quot;)
}</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="txZjaKKoGX6tNLWpwnSzt" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="bcMtUeI7mt" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Folder where data for running the notebook is stored
INPUT_DATA = Path(&quot;./data/&quot;) 

# Load geojson file
# country = gpd.read_file(INPUT_DATA.joinpath(&#x27;ljubljana.geojson&#x27;))
country = gpd.GeoDataFrame(ljubljana_data, crs=&quot;EPSG:32632&quot;, index=[0])

# Apply a 500m buffer to the shape (indicate a specific feature with [i])
country_buffer = country[country.geometry.name][0].buffer(500)

# Get the country&#x27;s shape in polygon format
country_shape = country.geometry.values[-1]

# Plot country
country.plot()
plt.axis(&#x27;off&#x27;)

# Print size and points count
print(&#x27;Dimension of the area is {0:.0f} x {1:.0f} m2&#x27;.format(country_shape.bounds[2] - country_shape.bounds[0],
                                                             country_shape.bounds[3] - country_shape.bounds[1]))
print(&#x27;Points count after buffer: &#x27;, len(list(country_buffer.exterior.coords)))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="IqMGyaN0f2iVjSa5ZWtDA" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>Dimension of the area is 27009 x 19415 m2
Points count after buffer:  362
</span></code></pre></div><img src="/build/655ccbe901a08c7d831bcb813e8ed402.png" alt="&lt;Figure size 432x288 with 1 Axes&gt;"/></div></div><div id="HWzXbTJcJL" class="relative group/block"><h5 id="id-1-1-2-get-simplified-bands-and-plot-geographical-extent-that-will-be-used-in-requests" class="relative group"><span class="heading-text">1.1.2 Get simplified bands and plot geographical extent  that will be used in requests</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-1-1-2-get-simplified-bands-and-plot-geographical-extent-that-will-be-used-in-requests" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p><strong>Note</strong>: Make sure the points count does not exceed 1500 points after simplification.</p></div><div id="k8kVOhwk0I" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Get the simplified shape of the country
country_sim = country_buffer.simplify(100) #unit in meter

# Check the amount of points forming the polygon
print(&#x27;Points count: &#x27;,len(list(country_sim.exterior.coords)))

# Plot shape
plt.figure()
plt.axis(&#x27;off&#x27;)
plt.plot(*country_sim.exterior.xy)
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="1KLR_quuliJkE8wzYBI9V" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>Points count:  72
</span></code></pre></div><img src="/build/0fcfc48474171a698b9850a2871dd71e.png" alt="&lt;Figure size 432x288 with 1 Axes&gt;"/></div></div><div id="C4QRH2L3xc" class="relative group/block"><h3 id="id-1-2-use-batch-to-fetch-sentinel-2-data-and-resample-to-even-timesteps" class="relative group"><span class="heading-text">1.2 Use Batch to fetch Sentinel-2 data and resample to even timesteps</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-1-2-use-batch-to-fetch-sentinel-2-data-and-resample-to-even-timesteps" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Now that the area of interest is defined, we will set up the parameters necessary to run the <code>Batch</code> process, and go through the different steps to acquire the data.</p><p>We will collect Sentinel-2 data and retrieve the following products:</p><ul><li><p>L1C custom list of bands [B02, B03, B04, B08, B11, B12], which corresponds to [B, G, R, NIR, SWIR1, SWIR2] wavelengths.</p></li><li><p>Calculated NDVI, NDWI, and NDBI information</p></li><li><p>A mask of validity, based on acquired data from Sentinel and cloud coverage. Valid pixel is if:</p><ul><li>IS_DATA == True</li><li>CLOUD_MASK == 0 (1 indicates cloudy pixels and 255 indicates <code>NO_DATA</code>)</li></ul></li></ul><p>All returned products will be returned for specific time intervals between 2 dates. If no data is present on the interval date, the service returns a linear interpolation between the previous and following valid data. The <code>Batch</code> request merges the <a target="_blank" rel="noreferrer" href="https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#Define-the-workflow" class="">EOLearn data download step</a> and <a target="_blank" rel="noreferrer" href="https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#5.-Prepare-the-training-data" class="">training data preparation step</a> into one.</p></div><div id="AQIhCM792T" class="relative group/block"><h5 id="id-1-2-1-prepare-batch-input-parameters" class="relative group"><span class="heading-text">1.2.1 Prepare Batch input parameters</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-1-2-1-prepare-batch-input-parameters" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p>Here we set the start and end date of the time interval that we want to query, as well as a time step in days for which data will be returned.</p><p>We also specify the name of the Amazon S3 Bucket that was created and parameterised as shown earlier.</p></div><div id="rGjxlNGLfZ" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Date parameters: for this example, we will get data from early April to late October.
START = datetime.date(2019, 4, 1)
END = datetime.date(2019, 10, 31)

INTERVAL = 15  # Interval for date resampling in days

# Calculate list of dates for the resampling
date_iterator = START
timestamps = []
while date_iterator &lt; END:
    timestamps.append(date_iterator)
    date_iterator = date_iterator + datetime.timedelta(days=INTERVAL)
    
# Amazon bucket name
aws_bucket_name = &quot;my-amazon-bucket&quot;</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="SYS5pMjT2GXoyyC6D4H5G" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="RI7NXA9D9A" class="relative group/block"><p>Below, we define the evalscript that will perform all the work on Sentinel Hub servers. The script fetches the images, calculates the indices (NDVI, NDWI, and NDBI), and resamples the data to the defined interval.</p></div><div id="LDLLEpB4az" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">evalscript = &quot;&quot;&quot;
//VERSION=3

// Calculate number of bands needed for all intervals
// Initialise dates and interval
// Beware: in JS months are 0 indexed
var start_date = new Date(2019, 3, 1, 0, 0, 0);
var end_date = new Date(2019, 9, 31, 0, 0, 0);
var sampled_dates = sample_timestamps(start_date, end_date, 15, &#x27;day&#x27;).map(d =&gt; withoutTime(d));
var nb_bands = sampled_dates.length;
var n_valid = 0;
var n_all = 0;

function interval_search(x, arr) {
  let start_idx = 0,  end_idx = arr.length - 2;

  // Iterate while start not meets end
  while (start_idx &lt;= end_idx) {
    // Find the mid index
    let mid_idx = (start_idx + end_idx) &gt;&gt; 1;

    // If element is present at mid, return True
    if (arr[mid_idx] &lt;= x &amp;&amp; x &lt; arr[mid_idx + 1]) {
      return mid_idx;
    }
    // Else look in left or right half accordingly
    else if (arr[mid_idx + 1] &lt;= x) start_idx = mid_idx + 1;
    else end_idx = mid_idx - 1;
  }
  if (x == arr[arr.length-1]){
    return arr.length-2;
  }

  return undefined;
}

function linearInterpolation(x, x0, y0, x1, y1, no_data_value=NaN) {
  if (x &lt; x0 || x &gt; x1) {
    return no_data_value;
  }
  var a = (y1 - y0) / (x1 - x0);
  var b = -a * x0 + y0;
  return a * x + b;
}

function lininterp(x_arr, xp_arr, fp_arr, no_data_value=NaN) {
  results = [];
  data_mask = [];
  xp_arr_idx = 0;
  for(var i=0; i&lt;x_arr.length; i++){
    var x = x_arr[i];
    n_all+=1;
    interval = interval_search(x, xp_arr);
    if (interval === undefined) {
      data_mask.push(0);
      results.push(no_data_value);
      continue;
    }
    data_mask.push(1);
    n_valid+=1;
    results.push(
      linearInterpolation(
        x,
        xp_arr[interval],
        fp_arr[interval],
        xp_arr[interval+1],
        fp_arr[interval+1], 
        no_data_value
      )
    );
  }

  return [results, data_mask];
}


function interpolated_index(index_a, index_b){
  // Calculates the index for all bands in array
  var index_data = [];
  for (var i = 0; i &lt; index_a.length; i++){
     // UINT index returned
     let ind = (index_a[i] - index_b[i]) / (index_a[i] + index_b[i]);
     index_data.push(ind * 10000 + 10000);
  }
  
  return index_data
}


function increase(original_date, period, period_unit){
    date = new Date(original_date)
    switch(period_unit){
        case &#x27;millisecond&#x27;:
            return new Date(date.setMilliseconds(date.getMilliseconds()+period));
        case &#x27;second&#x27;:
            return new Date(date.setSeconds(date.getSeconds()+period));
        case &#x27;minute&#x27;:
            return new Date(date.setMinutes(date.getMinutes()+period));
        case &#x27;hour&#x27;:
            return new Date(date.setHours(date.getHours()+period));
        case &#x27;day&#x27;:
            return new Date(date.setDate(date.getDate()+period));
        case &#x27;month&#x27;:
            return new Date(date.setMonth(date.getMonth()+period));
        default:
            return undefined
    }
}

function sample_timestamps(start, end, period, period_unit) {
    var cDate = new Date(start);
    var sampled_dates = []
    while (cDate &lt; end) {
        sampled_dates.push(cDate);
        cDate = increase(cDate, period, period_unit);
    }
    return sampled_dates;
}

function is_valid(smp){
  // Check if the sample is valid (i.e. contains no clouds or snow)
  let clm = smp.CLM;
  let dm = smp.dataMask;

  if (clm === 1 || clm === 255) {
        return false;
  } else if (dm !=1 ) {
        return false;
  } else {
  return true;
  }
}

function withoutTime(intime){
  // Return date without time
  intime.setHours(0, 0, 0, 0);
  return intime;
}


// Sentinel Hub functions
function setup() {
  // Setup input/output parameters
    return {
        input: [{
            bands: [&quot;B02&quot;, &quot;B03&quot;, &quot;B04&quot;, &quot;B08&quot;, &quot;B11&quot;, &quot;B12&quot;, &quot;CLM&quot;, &quot;dataMask&quot;],
            units: &quot;DN&quot;
        }],
      output: [
          {id: &quot;B02&quot;, bands: nb_bands, sampleType: SampleType.UINT16},
          {id: &quot;B03&quot;, bands: nb_bands, sampleType: SampleType.UINT16},
          {id: &quot;B04&quot;, bands: nb_bands, sampleType: SampleType.UINT16},
          {id: &quot;B08&quot;, bands: nb_bands, sampleType: SampleType.UINT16},
          {id: &quot;B11&quot;, bands: nb_bands, sampleType: SampleType.UINT16},
          {id: &quot;B12&quot;, bands: nb_bands, sampleType: SampleType.UINT16},
          {id: &quot;NDVI&quot;, bands: nb_bands, sampleType: SampleType.UINT16},
          {id: &quot;NDWI&quot;, bands: nb_bands, sampleType: SampleType.UINT16},
          {id: &quot;NDBI&quot;, bands: nb_bands, sampleType: SampleType.UINT16},
          {id: &quot;data_mask&quot;, bands: nb_bands, sampleType: SampleType.UINT8}
      ],
    mosaicking: &quot;ORBIT&quot;
    }
}


// Evaluate pixels in the bands
function evaluatePixel(samples, scenes) {
  
  // Initialise arrays
  var valid_samples = {&#x27;B02&#x27;:[], &#x27;B03&#x27;:[], &#x27;B04&#x27;:[], &#x27;B08&#x27;:[], &#x27;B11&#x27;:[], &#x27;B12&#x27;:[]}; 
  
  var valid_dates = []
  // Loop over samples. 
  for (var i = samples.length-1; i &gt;= 0; i--){
      if (is_valid(samples[i])) {
        valid_dates.push(withoutTime(new Date(scenes[i].date)));
        valid_samples[&#x27;B02&#x27;].push(samples[i].B02);
        valid_samples[&#x27;B03&#x27;].push(samples[i].B03);
        valid_samples[&#x27;B04&#x27;].push(samples[i].B04);
        valid_samples[&#x27;B08&#x27;].push(samples[i].B08);
        valid_samples[&#x27;B11&#x27;].push(samples[i].B11);
        valid_samples[&#x27;B12&#x27;].push(samples[i].B12);
      }
  }
  
  var [b02_interpolated, b02_dm] = lininterp(sampled_dates, valid_dates, valid_samples[&#x27;B02&#x27;], 0);
  var [b03_interpolated, b03_dm] = lininterp(sampled_dates, valid_dates, valid_samples[&#x27;B03&#x27;], 0);
  var [b04_interpolated, b04_dm] = lininterp(sampled_dates, valid_dates, valid_samples[&#x27;B04&#x27;], 0);
  var [b08_interpolated, b08_dm] = lininterp(sampled_dates, valid_dates, valid_samples[&#x27;B08&#x27;], 0);
  var [b11_interpolated, b11_dm] = lininterp(sampled_dates, valid_dates, valid_samples[&#x27;B11&#x27;], 0);
  var [b12_interpolated, b12_dm] = lininterp(sampled_dates, valid_dates, valid_samples[&#x27;B12&#x27;], 0);

  // Calculate indices and return optimised for UINT16 format (will need unpacking)
  var ndvi = interpolated_index(b08_interpolated, b04_interpolated);
  var ndwi = interpolated_index(b03_interpolated, b08_interpolated);
  var ndbi = interpolated_index(b11_interpolated, b08_interpolated);
  
  // Return all arrays
  return {
            B02: b02_interpolated,
            B03: b03_interpolated,
            B04: b04_interpolated,
            B08: b08_interpolated,
            B11: b11_interpolated,
            B12: b12_interpolated,
            NDVI: ndvi,
            NDWI: ndwi,
            NDBI: ndbi,
            data_mask: b02_dm
  }
}
&quot;&quot;&quot;</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="wynBl8beU0SEVEcodiE6z" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="bgTgDxll0u" class="relative group/block"><p>Next, we set the parameters passed to the <code>SentinelHubRequest()</code> and the <code>SentinelHubBatch()</code> to run the batch processing request.</p><p>The following parameters are specified:</p><ul><li><p><strong>evalscript</strong>: the evalscript that was written above.</p></li><li><p><strong>geometry</strong>: the geometry parameters representing the area of interest.</p><p>The input type should be <code>class &#x27;shapely.geometry.polygon.Polygon&#x27;</code> returned from <a target="_blank" rel="noreferrer" href="https://geopandas.org/data_structures.html" class="">the “geometry” column</a> (<code>gdf[gdf.geometry.name][i]</code>).</p></li><li><p><strong>crs</strong>: the code corresponding to the projection parameters of the input data.</p><p>See the <a target="_blank" rel="noreferrer" href="https://sentinelhub-py.readthedocs.io/en/latest/constants.html?highlight=SentinelHub.CRS#sentinelhub.constants.CRS" class="">input format</a> of the <code>CRS</code> helper for constant or enter in the following format: <code>&quot;EPSG: 3035&quot;</code>.</p></li><li><p><strong>datasource</strong>: the parameters for the data to query.</p><p>See the most commonly used <a target="_blank" rel="noreferrer" href="https://sentinelhub-py.readthedocs.io/en/latest/_modules/sentinelhub/data_collections.html#DataCollection" class="">predefined datacollections</a> or <a target="_blank" rel="noreferrer" href="https://sentinelhub-py.readthedocs.io/en/latest/examples/data_collections.html?highlight=DataCollection.define#Define-a-new-data-collection" class="">define a new data collection</a></p></li><li><p><strong>time_interval</strong>: the start and end dates set the time period over which to fetch the data.</p></li><li><p><strong>mosaickingOrder</strong>: Choose from <code>&quot;mostRecent&quot;</code>, <code>&quot;leastRecent&quot;</code>, and <code>&quot;leastCC&quot;</code> (more <a target="_blank" rel="noreferrer" href="https://docs.sentinel-hub.com/api/latest/data/sentinel-2-l1c/#mosaickingorder" class="">info</a>).</p></li><li><p><strong>upsampling/downsampling</strong>: Choose from <code>&quot;NEAREST&quot;</code>, <code>&quot;BILINEAR&quot;</code>, and <code>&quot;BICUBIC&quot;</code> (<a target="_blank" rel="noreferrer" href="https://docs.sentinel-hub.com/api/latest/data/sentinel-2-l1c/#processing-options" class="">examples for Sentinel-2</a>).</p></li><li><p><strong>output_type</strong>: Use <code>MimeType</code> to select a data type of the output response returned by the evalscript (more <a target="_blank" rel="noreferrer" href="https://sentinelhub-py.readthedocs.io/en/latest/_modules/sentinelhub/constants.html#MimeType" class="">info</a>).</p></li><li><p><strong>tilingGridId</strong> and <strong>resolution</strong>: these parameters parameters allow to set the grid and resolution of the images returned. To know which paramters to set, refer to the <a target="_blank" rel="noreferrer" href="https://docs.sentinel-hub.com/api/latest/api/batch/#tiling-grids" class="">dedicated documentation</a>. Here we return:</p><p><code>tilingGridId</code> = 1, since less computation power is required for 10km grid. Larger tiling grids require more computational ressources.</p><p><code>resolution</code> = 10, which means our images will have a 10m resolution</p></li><li><p><strong>buffer</strong>: (Optional) A <a target="_blank" rel="noreferrer" href="https://sentinelhub-py.readthedocs.io/en/latest/sentinelhub_batch.html?highlight=SentinelHubBatch.tiling_grid#sentinelhub.sentinelhub_batch.SentinelHubBatch.tiling_grid" class="">buffer</a> around each tile can be defined.</p><p>Set in the following format: <code>(int,int)</code> or <code>None</code>.</p></li><li><p><strong>bucketName</strong>: the <a target="_blank" rel="noreferrer" href="https://docs.sentinel-hub.com/api/latest/api/batch/#aws-s3-bucket-settings" class="">configured</a> Amazon S3 Bucket</p></li><li><p><strong>description</strong>: A personalised description for the request.</p></li></ul></div><div id="yVKFhfKYCP" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">Evalscript = evalscript
geometry = country_sim
crs = CRS.UTM_32N
datasource = DataCollection.SENTINEL2_L1C
time_interval = (START, END)
mosaickingOrder = &quot;mostRecent&quot;
maxCloudCoverage = 1.0
upsampling = &quot;NEAREST&quot;
downsampling = &quot;NEAREST&quot;
output_type = MimeType.TIFF 
tilingGridId = 1 
resolution = 10 
buffer = (0, 0)
bucketName = aws_bucket_name 
description = &quot;Slovenia LULC data example&quot; </code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="a4QkTwhwjZFpo5W-7Qh19" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="kRbSRTlKvK" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">request_shp = SentinelHubRequest(
    evalscript=Evalscript,
    input_data=[
        SentinelHubRequest.input_data(
            data_collection=datasource,
            time_interval=time_interval,
            mosaicking_order=mosaickingOrder,
            maxcc=maxCloudCoverage,
            upsampling=upsampling,
            downsampling=downsampling,
        )
    ],
    responses=[
        SentinelHubRequest.output_response(&quot;B02&quot;, output_type),
        SentinelHubRequest.output_response(&quot;B03&quot;, output_type),
        SentinelHubRequest.output_response(&quot;B04&quot;, output_type),
        SentinelHubRequest.output_response(&quot;B08&quot;, output_type),
        SentinelHubRequest.output_response(&quot;B11&quot;, output_type),
        SentinelHubRequest.output_response(&quot;B12&quot;, output_type),
        SentinelHubRequest.output_response(&quot;NDVI&quot;, output_type),
        SentinelHubRequest.output_response(&quot;NDWI&quot;, output_type),
        SentinelHubRequest.output_response(&quot;NDBI&quot;, output_type),
        SentinelHubRequest.output_response(&quot;data_mask&quot;, output_type)
    ],
    geometry=Geometry(geometry, crs=crs),
    config=config
)

batch = SentinelHubBatch(config=config)

batch_request = batch.create(
    request_shp,
    tiling_grid=SentinelHubBatch.tiling_grid(
        grid_id=tilingGridId,
        resolution=resolution,
        buffer=buffer
    ),
    bucket_name=bucketName,
    description=description
)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="1teQGSm1EfBtnpX-AUOQV" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="Rahkvrz2KT" class="relative group/block"><h5 id="id-1-2-2-run-the-batch-request" class="relative group"><span class="heading-text">1.2.2 Run the Batch request</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-1-2-2-run-the-batch-request" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p>Once all the parameters are set we are ready to run the <code>Batch</code> process. The batch processing API comes with the set of REST APIs which support the execution of various workflows. A diagram of the statuses of a batch processing request is located <a target="_blank" rel="noreferrer" href="https://docs.sentinel-hub.com/api/latest/api/batch/#workflow" class="">here</a>.</p></div><div id="Y0U4EVUmNE" class="relative group/block"><h5 id="start-the-request-and-return-status" class="relative group"><span class="heading-text">Start the request and return status</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#start-the-request-and-return-status" title="Link to this Section" aria-label="Link to this Section">¶</a></h5></div><div id="Gboojs8on2" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">batch_request.to_dict()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="_wkOL0RSnBdUh6CQxblfr" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>{&#x27;id&#x27;: &#x27;789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4&#x27;,
 &#x27;processRequest&#x27;: {&#x27;input&#x27;: {&#x27;bounds&#x27;: {&#x27;geometry&#x27;: {&#x27;type&#x27;: &#x27;Polygon&#x27;,
     &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;,
      &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::32632&#x27;}},
     &#x27;coordinates&#x27;: [[[919628.9108834544, 5119356.917076456],
       [918749.0781451423, 5120862.307909182],
       [918333.910070902, 5121281.140880498],
       [918457.8990774148, 5122227.504274412],
       [918894.6468967017, 5122811.020878375],
       [919576.0567221006, 5123163.166090239],
       [920551.1006553276, 5123234.722209015],
       [921384.9902743214, 5123793.067258271],
       [922186.3912854855, 5125009.093105534],
       [922565.9886279197, 5125006.844256398],
       [923099.5064763993, 5124596.299383719],
       [925954.2380414003, 5125495.59598793],
       [926246.687521957, 5125258.720397337],
       [926849.6681557371, 5123868.441863545],
       [928300.4334644956, 5122333.2455211105],
       [930479.711624069, 5121614.0981342485],
       [932438.9770145733, 5121409.564501522],
       [932646.1667139526, 5121146.387974464],
       [933023.6338520547, 5119446.811981134],
       [934336.7047884844, 5118773.192229376],
       [935566.2184357158, 5118541.604306243],
       [937296.0250913996, 5118771.308494287],
       [938933.2076325824, 5119418.233515025],
       [939595.1275298094, 5119337.751129662],
       [940207.7555634322, 5118994.946923946],
       [941717.1245460573, 5119240.58864772],
       [942876.8477811634, 5118531.816233686],
       [943118.1057037627, 5118105.645787608],
       [943928.6058421925, 5117739.897559745],
       [944109.31714999, 5117355.209279513],
       [943921.0563007102, 5115782.096776407],
       [944814.7599488231, 5114854.377138535],
       [945568.6142047391, 5113408.6205148585],
       [945366.8593595305, 5112589.626113559],
       [945623.720304364, 5110291.6585146235],
       [944746.0548243101, 5109471.052593331],
       [944410.343643281, 5109386.160755647],
       [942966.4762767798, 5109990.345194248],
       [942206.4564265149, 5110535.1299080085],
       [941518.983230133, 5110602.578150821],
       [940641.1774913804, 5110021.029206983],
       [939894.6685551882, 5108932.130838223],
       [938611.971331144, 5108073.606699095],
       [936053.1783967619, 5107785.695032441],
       [934608.3064589618, 5108611.437683343],
       [932266.2133111083, 5110477.457048082],
       [930610.5501451959, 5110697.848110835],
       [929027.9075271739, 5110206.128843298],
       [929007.7949406862, 5107828.484080727],
       [928761.1606812896, 5107433.287430946],
       [928340.5202479315, 5107394.417220363],
       [926818.8025522218, 5108109.889881261],
       [926235.7449728065, 5108035.855183048],
       [924797.9282862529, 5107393.716638754],
       [924273.9167598567, 5106339.48624392],
       [921995.5588678899, 5105139.777239488],
       [921626.8454615258, 5105135.1669395575],
       [920583.0245687524, 5105950.73694475],
       [920502.0339262019, 5106997.027372728],
       [921109.5468206694, 5108095.835206634],
       [921975.1309665262, 5109176.774922407],
       [920985.882632233, 5109884.632823985],
       [919694.7407430336, 5111367.579272935],
       [919727.6633128797, 5111918.670426843],
       [920456.3193563694, 5112480.5993394125],
       [920330.4177488316, 5113904.5125860125],
       [918961.0486138583, 5116779.320521747],
       [918578.5853978395, 5117011.804211284],
       [917930.0946484923, 5117042.814801975],
       [917652.0992996809, 5117429.603044663],
       [917788.0705027658, 5117839.756231751],
       [919628.9108834544, 5119356.917076456]]]},
    &#x27;properties&#x27;: {&#x27;crs&#x27;: &#x27;http://www.opengis.net/def/crs/EPSG/0/32632&#x27;}},
   &#x27;data&#x27;: [{&#x27;dataFilter&#x27;: {&#x27;timeRange&#x27;: {&#x27;from&#x27;: &#x27;2019-04-01T00:00:00Z&#x27;,
       &#x27;to&#x27;: &#x27;2019-10-31T23:59:59Z&#x27;},
      &#x27;mosaickingOrder&#x27;: &#x27;mostRecent&#x27;,
      &#x27;maxCloudCoverage&#x27;: 100.0,
      &#x27;previewMode&#x27;: &#x27;DETAIL&#x27;},
     &#x27;processing&#x27;: {&#x27;upsampling&#x27;: &#x27;NEAREST&#x27;,
      &#x27;downsampling&#x27;: &#x27;NEAREST&#x27;,
      &#x27;harmonizeValues&#x27;: True},
     &#x27;type&#x27;: &#x27;S2L1C&#x27;}]},
  &#x27;output&#x27;: {&#x27;responses&#x27;: [{&#x27;identifier&#x27;: &#x27;B02&#x27;,
     &#x27;format&#x27;: {&#x27;type&#x27;: &#x27;image/tiff&#x27;},
     &#x27;logo&#x27;: False},
    {&#x27;identifier&#x27;: &#x27;B03&#x27;, &#x27;format&#x27;: {&#x27;type&#x27;: &#x27;image/tiff&#x27;}, &#x27;logo&#x27;: False},
    {&#x27;identifier&#x27;: &#x27;B04&#x27;, &#x27;format&#x27;: {&#x27;type&#x27;: &#x27;image/tiff&#x27;}, &#x27;logo&#x27;: False},
    {&#x27;identifier&#x27;: &#x27;B08&#x27;, &#x27;format&#x27;: {&#x27;type&#x27;: &#x27;image/tiff&#x27;}, &#x27;logo&#x27;: False},
    {&#x27;identifier&#x27;: &#x27;B11&#x27;, &#x27;format&#x27;: {&#x27;type&#x27;: &#x27;image/tiff&#x27;}, &#x27;logo&#x27;: False},
    {&#x27;identifier&#x27;: &#x27;B12&#x27;, &#x27;format&#x27;: {&#x27;type&#x27;: &#x27;image/tiff&#x27;}, &#x27;logo&#x27;: False},
    {&#x27;identifier&#x27;: &#x27;NDVI&#x27;, &#x27;format&#x27;: {&#x27;type&#x27;: &#x27;image/tiff&#x27;}, &#x27;logo&#x27;: False},
    {&#x27;identifier&#x27;: &#x27;NDWI&#x27;, &#x27;format&#x27;: {&#x27;type&#x27;: &#x27;image/tiff&#x27;}, &#x27;logo&#x27;: False},
    {&#x27;identifier&#x27;: &#x27;NDBI&#x27;, &#x27;format&#x27;: {&#x27;type&#x27;: &#x27;image/tiff&#x27;}, &#x27;logo&#x27;: False},
    {&#x27;identifier&#x27;: &#x27;data_mask&#x27;,
     &#x27;format&#x27;: {&#x27;type&#x27;: &#x27;image/tiff&#x27;},
     &#x27;logo&#x27;: False}]},
  &#x27;evalscript&#x27;: &#x27;\n//VERSION=3\n\n// Calculate number of bands needed for all intervals\n// Initialise dates and interval\n// Beware: in JS months are 0 indexed\nvar start_date = new Date(2019, 3, 1, 0, 0, 0);\nvar end_date = new Date(2019, 9, 31, 0, 0, 0);\nvar sampled_dates = sample_timestamps(start_date, end_date, 15, \&#x27;day\&#x27;).map(d =&gt; withoutTime(d));\nvar nb_bands = sampled_dates.length;\nvar n_valid = 0;\nvar n_all = 0;\n\nfunction interval_search(x, arr) {\n  let start_idx = 0,  end_idx = arr.length - 2;\n\n  // Iterate while start not meets end\n  while (start_idx &lt;= end_idx) {\n    // Find the mid index\n    let mid_idx = (start_idx + end_idx) &gt;&gt; 1;\n\n    // If element is present at mid, return True\n    if (arr[mid_idx] &lt;= x &amp;&amp; x &lt; arr[mid_idx + 1]) {\n      return mid_idx;\n    }\n    // Else look in left or right half accordingly\n    else if (arr[mid_idx + 1] &lt;= x) start_idx = mid_idx + 1;\n    else end_idx = mid_idx - 1;\n  }\n  if (x == arr[arr.length-1]){\n    return arr.length-2;\n  }\n\n  return undefined;\n}\n\nfunction linearInterpolation(x, x0, y0, x1, y1, no_data_value=NaN) {\n  if (x &lt; x0 || x &gt; x1) {\n    return no_data_value;\n  }\n  var a = (y1 - y0) / (x1 - x0);\n  var b = -a * x0 + y0;\n  return a * x + b;\n}\n\nfunction lininterp(x_arr, xp_arr, fp_arr, no_data_value=NaN) {\n  results = [];\n  data_mask = [];\n  xp_arr_idx = 0;\n  for(var i=0; i&lt;x_arr.length; i++){\n    var x = x_arr[i];\n    n_all+=1;\n    interval = interval_search(x, xp_arr);\n    if (interval === undefined) {\n      data_mask.push(0);\n      results.push(no_data_value);\n      continue;\n    }\n    data_mask.push(1);\n    n_valid+=1;\n    results.push(\n      linearInterpolation(\n        x,\n        xp_arr[interval],\n        fp_arr[interval],\n        xp_arr[interval+1],\n        fp_arr[interval+1], \n        no_data_value\n      )\n    );\n  }\n\n  return [results, data_mask];\n}\n\n\nfunction interpolated_index(index_a, index_b){\n  // Calculates the index for all bands in array\n  var index_data = [];\n  for (var i = 0; i &lt; index_a.length; i++){\n     // UINT index returned\n     let ind = (index_a[i] - index_b[i]) / (index_a[i] + index_b[i]);\n     index_data.push(ind * 10000 + 10000);\n  }\n  \n  return index_data\n}\n\n\nfunction increase(original_date, period, period_unit){\n    date = new Date(original_date)\n    switch(period_unit){\n        case \&#x27;millisecond\&#x27;:\n            return new Date(date.setMilliseconds(date.getMilliseconds()+period));\n        case \&#x27;second\&#x27;:\n            return new Date(date.setSeconds(date.getSeconds()+period));\n        case \&#x27;minute\&#x27;:\n            return new Date(date.setMinutes(date.getMinutes()+period));\n        case \&#x27;hour\&#x27;:\n            return new Date(date.setHours(date.getHours()+period));\n        case \&#x27;day\&#x27;:\n            return new Date(date.setDate(date.getDate()+period));\n        case \&#x27;month\&#x27;:\n            return new Date(date.setMonth(date.getMonth()+period));\n        default:\n            return undefined\n    }\n}\n\nfunction sample_timestamps(start, end, period, period_unit) {\n    var cDate = new Date(start);\n    var sampled_dates = []\n    while (cDate &lt; end) {\n        sampled_dates.push(cDate);\n        cDate = increase(cDate, period, period_unit);\n    }\n    return sampled_dates;\n}\n\nfunction is_valid(smp){\n  // Check if the sample is valid (i.e. contains no clouds or snow)\n  let clm = smp.CLM;\n  let dm = smp.dataMask;\n\n  if (clm === 1 || clm === 255) {\n        return false;\n  } else if (dm !=1 ) {\n        return false;\n  } else {\n  return true;\n  }\n}\n\nfunction withoutTime(intime){\n  // Return date without time\n  intime.setHours(0, 0, 0, 0);\n  return intime;\n}\n\n\n// Sentinel Hub functions\nfunction setup() {\n  // Setup input/output parameters\n    return {\n        input: [{\n            bands: [&quot;B02&quot;, &quot;B03&quot;, &quot;B04&quot;, &quot;B08&quot;, &quot;B11&quot;, &quot;B12&quot;, &quot;CLM&quot;, &quot;dataMask&quot;],\n            units: &quot;DN&quot;\n        }],\n      output: [\n          {id: &quot;B02&quot;, bands: nb_bands, sampleType: SampleType.UINT16},\n          {id: &quot;B03&quot;, bands: nb_bands, sampleType: SampleType.UINT16},\n          {id: &quot;B04&quot;, bands: nb_bands, sampleType: SampleType.UINT16},\n          {id: &quot;B08&quot;, bands: nb_bands, sampleType: SampleType.UINT16},\n          {id: &quot;B11&quot;, bands: nb_bands, sampleType: SampleType.UINT16},\n          {id: &quot;B12&quot;, bands: nb_bands, sampleType: SampleType.UINT16},\n          {id: &quot;NDVI&quot;, bands: nb_bands, sampleType: SampleType.UINT16},\n          {id: &quot;NDWI&quot;, bands: nb_bands, sampleType: SampleType.UINT16},\n          {id: &quot;NDBI&quot;, bands: nb_bands, sampleType: SampleType.UINT16},\n          {id: &quot;data_mask&quot;, bands: nb_bands, sampleType: SampleType.UINT8}\n      ],\n    mosaicking: &quot;ORBIT&quot;\n    }\n}\n\n\n// Evaluate pixels in the bands\nfunction evaluatePixel(samples, scenes) {\n  \n  // Initialise arrays\n  var valid_samples = {\&#x27;B02\&#x27;:[], \&#x27;B03\&#x27;:[], \&#x27;B04\&#x27;:[], \&#x27;B08\&#x27;:[], \&#x27;B11\&#x27;:[], \&#x27;B12\&#x27;:[]}; \n  \n  var valid_dates = []\n  // Loop over samples. \n  for (var i = samples.length-1; i &gt;= 0; i--){\n      if (is_valid(samples[i])) {\n        valid_dates.push(withoutTime(new Date(scenes[i].date)));\n        valid_samples[\&#x27;B02\&#x27;].push(samples[i].B02);\n        valid_samples[\&#x27;B03\&#x27;].push(samples[i].B03);\n        valid_samples[\&#x27;B04\&#x27;].push(samples[i].B04);\n        valid_samples[\&#x27;B08\&#x27;].push(samples[i].B08);\n        valid_samples[\&#x27;B11\&#x27;].push(samples[i].B11);\n        valid_samples[\&#x27;B12\&#x27;].push(samples[i].B12);\n      }\n  }\n  \n  var [b02_interpolated, b02_dm] = lininterp(sampled_dates, valid_dates, valid_samples[\&#x27;B02\&#x27;], 0);\n  var [b03_interpolated, b03_dm] = lininterp(sampled_dates, valid_dates, valid_samples[\&#x27;B03\&#x27;], 0);\n  var [b04_interpolated, b04_dm] = lininterp(sampled_dates, valid_dates, valid_samples[\&#x27;B04\&#x27;], 0);\n  var [b08_interpolated, b08_dm] = lininterp(sampled_dates, valid_dates, valid_samples[\&#x27;B08\&#x27;], 0);\n  var [b11_interpolated, b11_dm] = lininterp(sampled_dates, valid_dates, valid_samples[\&#x27;B11\&#x27;], 0);\n  var [b12_interpolated, b12_dm] = lininterp(sampled_dates, valid_dates, valid_samples[\&#x27;B12\&#x27;], 0);\n\n  // Calculate indices and return optimised for UINT16 format (will need unpacking)\n  var ndvi = interpolated_index(b08_interpolated, b04_interpolated);\n  var ndwi = interpolated_index(b03_interpolated, b08_interpolated);\n  var ndbi = interpolated_index(b11_interpolated, b08_interpolated);\n  \n  // Return all arrays\n  return {\n            B02: b02_interpolated,\n            B03: b03_interpolated,\n            B04: b04_interpolated,\n            B08: b08_interpolated,\n            B11: b11_interpolated,\n            B12: b12_interpolated,\n            NDVI: ndvi,\n            NDWI: ndwi,\n            NDBI: ndbi,\n            data_mask: b02_dm\n  }\n}\n&#x27;},
 &#x27;tileCount&#x27;: 7,
 &#x27;status&#x27;: &#x27;CREATED&#x27;,
 &#x27;userId&#x27;: &#x27;cb04dca1-c8f2-400e-8719-e24fced98fd6&#x27;,
 &#x27;created&#x27;: &#x27;2022-06-21T16:16:09.756515Z&#x27;,
 &#x27;tilingGrid&#x27;: {&#x27;id&#x27;: 1, &#x27;bufferY&#x27;: 0, &#x27;bufferX&#x27;: 0, &#x27;resolution&#x27;: 10.0},
 &#x27;output&#x27;: {},
 &#x27;bucketName&#x27;: &#x27;edc-marketplace-test&#x27;,
 &#x27;description&#x27;: &#x27;Slovenia LULC data example&#x27;,
 &#x27;valueEstimate&#x27;: None,
 &#x27;tileWidthPx&#x27;: 1000,
 &#x27;tileHeightPx&#x27;: 1000,
 &#x27;userAction&#x27;: &#x27;NONE&#x27;,
 &#x27;userActionUpdated&#x27;: &#x27;2022-06-21T16:16:09.833676Z&#x27;,
 &#x27;error&#x27;: None}</span></code></div></div></div><div id="A1s1EOEsfh" class="relative group/block"><p><strong>Extract request id</strong></p></div><div id="hn0t331zKA" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">request_id = batch_request.to_dict()[&#x27;id&#x27;]</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="IA1S1HvTrR7wfwqRe7BSY" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="ZaOQmej6rx" class="relative group/block"><p><strong>Re-initialize the request with its request id (Optional)</strong></p></div><div id="D2Ce8CIhs6" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># batch = SentinelHubBatch(config=config)

# reinit_request = batch.get_request(request_id)

# reinit_request.to_dict()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="_BKPLsiPaPcsxxiEHBLEq" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="AJNtNe1ugf" class="relative group/block"><h5 id="show-request-status" class="relative group"><span class="heading-text">Show request status</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#show-request-status" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p>In the cell below, we will check the status of the batch processing request. Because Batch Processing API is an asynchronous REST service, we can execute this cell all along the process to verify the progress of the request.</p></div><div id="YS9jLuynX5" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">batch_request = batch.get_request(batch_request)

batch_request.status</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="u0w7ZggwqCQap6cT_bMmA" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>&lt;BatchRequestStatus.CREATED: &#x27;CREATED&#x27;&gt;</span></code></div></div></div><div id="QTBDXl1lWX" class="relative group/block"><h5 id="additional-analysis" class="relative group"><span class="heading-text">Additional analysis</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#additional-analysis" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p>When executing the following cell:</p><ul><li>the status of the request changes to ANALYSING,</li><li>the evalscript is validated,</li><li>a list of required tiles is created, and</li><li>the request’s cost is estimated (i.e. the estimated number of processing units (PU) needed for the requested processing).</li><li>After the analysis is finished the status of the request changes to ANALYSIS_DONE.</li></ul></div><div id="S07LfjXumu" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">batch.start_analysis(batch_request)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="SDE0QHzedTNii71kILd3W" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>&#x27;&#x27;</span></code></div></div></div><div id="G1d6OZqpSB" class="relative group/block"><p>Note: At this point you can run the <strong>Show request status</strong> cell again to check the status of the request.</p></div><div id="Qao8iSby2t" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">while batch_request.status.value != &#x27;ANALYSIS_DONE&#x27;:
    batch_request = batch.get_request(batch_request)
    sleep(10)
    
batch_request.status</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="8FHvH2gCDhb-Uo24j8QXb" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>&lt;BatchRequestStatus.ANALYSIS_DONE: &#x27;ANALYSIS_DONE&#x27;&gt;</span></code></div></div></div><div id="drjSlXrZhC" class="relative group/block"><p><strong>Estimate number of processing units</strong></p><p>Once analysis is completed the valueEstimate tells us an estimated number of processing units the batch job will cost.</p></div><div id="MiNLit0leR" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">print(f&#x27;Running this batch job will require approximately {batch_request.value_estimate:.4f} processing units&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="w62zH4wqSR7vxzrdPiZGM" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>Running this batch job will require approximately 6319.6816 processing units
</span></code></pre></div></div></div><div id="ITGYxMzf8A" class="relative group/block"><p><strong>Check tile definitions</strong></p><p>we can check information about all tiles.</p></div><div id="jxmyOzDGDl" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">for tile_info in batch.iter_tiles(batch_request):
    print(tile_info)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="FdNnWej9l9juA3MmKA8rP" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>{&#x27;id&#x27;: 2558707, &#x27;requestId&#x27;: &#x27;789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4&#x27;, &#x27;geometry&#x27;: {&#x27;type&#x27;: &#x27;Polygon&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::4326&#x27;}}, &#x27;coordinates&#x27;: [[[14.352619160260875, 46.141743080954406], [14.351561800658885, 46.23173780922709], [14.481243368706025, 46.23239979824391], [14.482089292227679, 46.14240300576524], [14.352619160260875, 46.141743080954406]]]}, &#x27;origin&#x27;: {&#x27;type&#x27;: &#x27;Point&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::32633&#x27;}}, &#x27;coordinates&#x27;: [450000.0, 5120000.0]}, &#x27;name&#x27;: &#x27;33TVM_5_8&#x27;, &#x27;status&#x27;: &#x27;PENDING&#x27;}
{&#x27;id&#x27;: 2558708, &#x27;requestId&#x27;: &#x27;789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4&#x27;, &#x27;geometry&#x27;: {&#x27;type&#x27;: &#x27;Polygon&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::4326&#x27;}}, &#x27;coordinates&#x27;: [[[14.353671490381176, 46.051746910714016], [14.352619160260875, 46.141743080954406], [14.482089292227679, 46.14240300576524], [14.482931191867412, 46.05240477798336], [14.353671490381176, 46.051746910714016]]]}, &#x27;origin&#x27;: {&#x27;type&#x27;: &#x27;Point&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::32633&#x27;}}, &#x27;coordinates&#x27;: [450000.0, 5110000.0]}, &#x27;name&#x27;: &#x27;33TVM_5_9&#x27;, &#x27;status&#x27;: &#x27;PENDING&#x27;}
{&#x27;id&#x27;: 2558599, &#x27;requestId&#x27;: &#x27;789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4&#x27;, &#x27;geometry&#x27;: {&#x27;type&#x27;: &#x27;Polygon&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::4326&#x27;}}, &#x27;coordinates&#x27;: [[[14.354718820634279, 45.96174929842303], [14.353671490381176, 46.051746910714016], [14.482931191867412, 46.05240477798336], [14.483769091319814, 45.96240511477266], [14.354718820634279, 45.96174929842303]]]}, &#x27;origin&#x27;: {&#x27;type&#x27;: &#x27;Point&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::32633&#x27;}}, &#x27;coordinates&#x27;: [450000.0, 5100000.0]}, &#x27;name&#x27;: &#x27;33TVL_5_0&#x27;, &#x27;status&#x27;: &#x27;PENDING&#x27;}
{&#x27;id&#x27;: 2558738, &#x27;requestId&#x27;: &#x27;789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4&#x27;, &#x27;geometry&#x27;: {&#x27;type&#x27;: &#x27;Polygon&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::4326&#x27;}}, &#x27;coordinates&#x27;: [[[14.74146159543647, 46.053281965203496], [14.741040621918842, 46.14328293654669], [14.870519807916505, 46.143502924784066], [14.870730297637728, 46.0535012675197], [14.74146159543647, 46.053281965203496]]]}, &#x27;origin&#x27;: {&#x27;type&#x27;: &#x27;Point&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::32633&#x27;}}, &#x27;coordinates&#x27;: [480000.0, 5110000.0]}, &#x27;name&#x27;: &#x27;33TVM_8_9&#x27;, &#x27;status&#x27;: &#x27;PENDING&#x27;}
{&#x27;id&#x27;: 2558728, &#x27;requestId&#x27;: &#x27;789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4&#x27;, &#x27;geometry&#x27;: {&#x27;type&#x27;: &#x27;Polygon&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::4326&#x27;}}, &#x27;coordinates&#x27;: [[[14.612194893508299, 46.052916466242046], [14.611563448043396, 46.1429162944107], [14.741040621918842, 46.14328293654669], [14.74146159543647, 46.053281965203496], [14.612194893508299, 46.052916466242046]]]}, &#x27;origin&#x27;: {&#x27;type&#x27;: &#x27;Point&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::32633&#x27;}}, &#x27;coordinates&#x27;: [470000.0, 5110000.0]}, &#x27;name&#x27;: &#x27;33TVM_7_9&#x27;, &#x27;status&#x27;: &#x27;PENDING&#x27;}
{&#x27;id&#x27;: 2558717, &#x27;requestId&#x27;: &#x27;789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4&#x27;, &#x27;geometry&#x27;: {&#x27;type&#x27;: &#x27;Polygon&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::4326&#x27;}}, &#x27;coordinates&#x27;: [[[14.482089292227679, 46.14240300576524], [14.481243368706025, 46.23239979824391], [14.610928984494034, 46.23291469246024], [14.611563448043396, 46.1429162944107], [14.482089292227679, 46.14240300576524]]]}, &#x27;origin&#x27;: {&#x27;type&#x27;: &#x27;Point&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::32633&#x27;}}, &#x27;coordinates&#x27;: [460000.0, 5120000.0]}, &#x27;name&#x27;: &#x27;33TVM_6_8&#x27;, &#x27;status&#x27;: &#x27;PENDING&#x27;}
{&#x27;id&#x27;: 2558609, &#x27;requestId&#x27;: &#x27;789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4&#x27;, &#x27;geometry&#x27;: {&#x27;type&#x27;: &#x27;Polygon&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::4326&#x27;}}, &#x27;coordinates&#x27;: [[[14.483769091319814, 45.96240511477266], [14.482931191867412, 46.05240477798336], [14.612194893508299, 46.052916466242046], [14.612823338661443, 45.962915207795376], [14.483769091319814, 45.96240511477266]]]}, &#x27;origin&#x27;: {&#x27;type&#x27;: &#x27;Point&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::32633&#x27;}}, &#x27;coordinates&#x27;: [460000.0, 5100000.0]}, &#x27;name&#x27;: &#x27;33TVL_6_0&#x27;, &#x27;status&#x27;: &#x27;PENDING&#x27;}
{&#x27;id&#x27;: 2558629, &#x27;requestId&#x27;: &#x27;789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4&#x27;, &#x27;geometry&#x27;: {&#x27;type&#x27;: &#x27;Polygon&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::4326&#x27;}}, &#x27;coordinates&#x27;: [[[14.741880568664696, 45.96327956726176], [14.74146159543647, 46.053281965203496], [14.870730297637728, 46.0535012675197], [14.87093978718978, 45.963498185864594], [14.741880568664696, 45.96327956726176]]]}, &#x27;origin&#x27;: {&#x27;type&#x27;: &#x27;Point&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::32633&#x27;}}, &#x27;coordinates&#x27;: [480000.0, 5100000.0]}, &#x27;name&#x27;: &#x27;33TVL_8_0&#x27;, &#x27;status&#x27;: &#x27;PENDING&#x27;}
{&#x27;id&#x27;: 2558718, &#x27;requestId&#x27;: &#x27;789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4&#x27;, &#x27;geometry&#x27;: {&#x27;type&#x27;: &#x27;Polygon&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::4326&#x27;}}, &#x27;coordinates&#x27;: [[[14.482931191867412, 46.05240477798336], [14.482089292227679, 46.14240300576524], [14.611563448043396, 46.1429162944107], [14.612194893508299, 46.052916466242046], [14.482931191867412, 46.05240477798336]]]}, &#x27;origin&#x27;: {&#x27;type&#x27;: &#x27;Point&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::32633&#x27;}}, &#x27;coordinates&#x27;: [460000.0, 5110000.0]}, &#x27;name&#x27;: &#x27;33TVM_6_9&#x27;, &#x27;status&#x27;: &#x27;PENDING&#x27;}
{&#x27;id&#x27;: 2558619, &#x27;requestId&#x27;: &#x27;789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4&#x27;, &#x27;geometry&#x27;: {&#x27;type&#x27;: &#x27;Polygon&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::4326&#x27;}}, &#x27;coordinates&#x27;: [[[14.612823338661443, 45.962915207795376], [14.612194893508299, 46.052916466242046], [14.74146159543647, 46.053281965203496], [14.741880568664696, 45.96327956726176], [14.612823338661443, 45.962915207795376]]]}, &#x27;origin&#x27;: {&#x27;type&#x27;: &#x27;Point&#x27;, &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;, &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::32633&#x27;}}, &#x27;coordinates&#x27;: [470000.0, 5100000.0]}, &#x27;name&#x27;: &#x27;33TVL_7_0&#x27;, &#x27;status&#x27;: &#x27;PENDING&#x27;}
</span></code></pre></div></div></div><div id="OUypcsLQ8T" class="relative group/block"><p>Optionally, we can request information about a single tile.</p></div><div id="kkVVyHRbyV" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Specify a tile ID
TILE_ID = &#x27;2558718&#x27;

batch.get_tile(batch_request, TILE_ID)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="tGBhi-zxsOPNGdadfM_z2" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>{&#x27;id&#x27;: 2558718,
 &#x27;requestId&#x27;: &#x27;789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4&#x27;,
 &#x27;geometry&#x27;: {&#x27;type&#x27;: &#x27;Polygon&#x27;,
  &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;,
   &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::4326&#x27;}},
  &#x27;coordinates&#x27;: [[[14.482931191867412, 46.05240477798336],
    [14.482089292227679, 46.14240300576524],
    [14.611563448043396, 46.1429162944107],
    [14.612194893508299, 46.052916466242046],
    [14.482931191867412, 46.05240477798336]]]},
 &#x27;origin&#x27;: {&#x27;type&#x27;: &#x27;Point&#x27;,
  &#x27;crs&#x27;: {&#x27;type&#x27;: &#x27;name&#x27;,
   &#x27;properties&#x27;: {&#x27;name&#x27;: &#x27;urn:ogc:def:crs:EPSG::32633&#x27;}},
  &#x27;coordinates&#x27;: [460000.0, 5110000.0]},
 &#x27;name&#x27;: &#x27;33TVM_6_9&#x27;,
 &#x27;status&#x27;: &#x27;PENDING&#x27;}</span></code></div></div></div><div id="ojrD68oZwc" class="relative group/block"><h5 id="start" class="relative group"><span class="heading-text">START</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#start" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p>Once you happy with the request parameters and have noted the number of PU consumed (by checking the <em>Show request status</em>), you can launch the processing.</p><p><strong>Note</strong>: The processing time for this step could be up to an hour or more depending on the amount of data.</p></div><div id="AS2jhx79l0" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">batch.start_job(batch_request)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="3mD7PFyQ-GOZmyOvSFjg-" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>&#x27;&#x27;</span></code></div></div></div><div id="C5pGeOUgGC" class="relative group/block"><h5 id="cancel-the-request" class="relative group"><span class="heading-text">Cancel the request</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#cancel-the-request" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><ul><li>When the job is running we can decide at any time to cancel it. Results that have already been produced will remain on the bucket.</li></ul></div><div id="lpoPfOOHsG" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">#batch.cancel_job()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="QAKXqbusnBfXOOQuQThh8" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="NR8NMu403M" class="relative group/block"><p>Note: At this point you can run the <strong>Show request status</strong> cell again to check the status of the request.</p></div><div id="GhaHBhg7wR" class="relative group/block"><h5 id="show-request-status-1" class="relative group"><span class="heading-text">Show request status</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#show-request-status-1" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p>In the cell below, we will check the status of the batch processing request. Because Batch Processing API is an asynchronous REST service, we can execute this cell all along the process to verify the progress of the request.</p></div><div id="y8wlMYpBXJ" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">while batch_request.status.value != &#x27;DONE&#x27;:
    batch_request = batch.get_request(batch_request)
    sleep(10)

batch_request.status</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="P0R972WV6Ifxd01Z6HUKm" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>&lt;BatchRequestStatus.DONE: &#x27;DONE&#x27;&gt;</span></code></div></div></div><div id="Fl3VqRIbSH" class="relative group/block"><h5 id="visual-tracking-of-the-batch-request" class="relative group"><span class="heading-text">Visual tracking of the Batch request</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#visual-tracking-of-the-batch-request" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p>The following cells allow us to track the progress of the Batch request by plotting the status of the tiles. To visually track the progress of the Batch request, we can keep executing the Plotting command.</p></div><div id="mAHvwsAFez" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">def plot_batch_splitter(splitter):
    &quot;&quot;&quot; Plots tiles and area geometry from a splitter class
    &quot;&quot;&quot;
    tile_geometries = [Geometry(bbox.geometry, bbox.crs) for bbox in splitter.get_bbox_list()]
    tile_geometries = [geometry.transform(splitter.crs) for geometry in tile_geometries]

    gdf = gpd.GeoDataFrame(
        {&#x27;status&#x27;: [info[&#x27;status&#x27;] for info in splitter.get_info_list()]},
        geometry=[geometry.geometry for geometry in tile_geometries],
        crs=splitter.crs.pyproj_crs()
    )
    ax = gdf.plot(column=&#x27;status&#x27;, legend=True, figsize=(10, 10))

    area_series = gpd.GeoSeries(
        [splitter.get_area_shape()],
        crs=splitter.crs.pyproj_crs()
    )
    area_series.plot(ax=ax, facecolor=&#x27;none&#x27;, edgecolor=&#x27;black&#x27;)
</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="EE98e4Ql8BH8Rf5w43LIJ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="h5krSzavAB" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">splitter = BatchSplitter(batch_request=batch_request, config=config)
plot_batch_splitter(splitter)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="k2T-cqs4aS1R14tvVwF5G" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><img src="/build/d456a6c1e535c70a4f425995d11cb111.png" alt="&lt;Figure size 720x720 with 1 Axes&gt;"/></div></div><div id="Zl62KOASWt" class="relative group/block"><h5 id="what-if-some-of-my-tiles-fail" class="relative group"><span class="heading-text">What if some of my tiles fail?</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#what-if-some-of-my-tiles-fail" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p>It can happen that some of the tiles are not processed, and appear with the status <code>FAILED</code> in the plot above. We can use the function defined below to restart the processing for those specific tiles.</p></div><div id="DjEe3BISF4" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># #Re-run the processing for all the tiles that failed
# batch.restart_job(batch_request)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="X7jTXdXPMr7XgTAJ5yWGf" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="aLUU9gUNKR" class="relative group/block"><p>Alternatively, we can re-run processing only for a single tile.</p></div><div id="AMk4nDQM9Y" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># # Specify an ID of a tile that failed
# FAILED_TILE_ID = &#x27;&#x27;

# batch.reprocess_tile(batch_request, FAILED_TILE_ID)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="HCF4kn6LsxiSzoD6oqTpn" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="h8guC05C11" class="relative group/block"><h2 id="part-2-convert-batch-process-outputs-to-eopatches" class="relative group"><span class="heading-text">Part 2: convert Batch process outputs to EOPatches</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#part-2-convert-batch-process-outputs-to-eopatches" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>When the Batch request in <strong>Part 1</strong> has finished running, we should now have the data located in the specified Bucket. In <strong>Part 2</strong> we will focus on converting the results to EoPatches and download the data.</p></div><div id="oYErieCk3z" class="relative group/block"><h4 id="id-2-1-set-parameters-for-conversion" class="relative group"><span class="heading-text">2.1 Set parameters for conversion</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-2-1-set-parameters-for-conversion" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>First we specify a few parameters for converting the Batch results to EOLearn Patches.</p><p>If you want to pick up the Notebook after having run the Batch request in an other session, you will need to specify a few parameters that were already defined in <strong>Part 1</strong>: for that uncomment and run the next cell. If you have just executed the cells in <strong>Part 1</strong>, you can skip the next cell.</p></div><div id="XLQuqylDpS" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># # Date parameters
# START = datetime.date(2019, 4, 1)
# END = datetime.date(2019, 10, 31)

# INTERVAL = 15  # Interval for date resampling in days

# # Calculate list of dates for the resampling
# date_iterator = START
# timestamps = []
# while date_iterator &lt; END:
#     timestamps.append(date_iterator)
#     date_iterator = date_iterator + datetime.timedelta(days=INTERVAL)
    
# #Amazon client ID and secret
# AWS_ID = &quot;aws-client-id&quot;
# AWS_SECRET = &quot;aws-client-secret&quot;
    
# # Amazon bucket name
# aws_bucket_name = &quot;your-bucket-name&quot;

# # Request ID (from the Batch processing)
# request_id = &quot;&quot;

# #Configuration
# config = SHConfig()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="04ljJwD1uhUJiSkW8R-EY" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="UlD8N5rJDv" class="relative group/block"><p>Next, we will set the bands that we want to import into the <code>EOPatches</code>.</p><p>In this example we use:</p><ul><li><p>B02, B03, B04, B08, B11, B12 bands from Sentinel-2</p></li><li><p>NDVI, NDWI, NDBI indices</p></li><li><p>Valid data band</p></li></ul></div><div id="rbmzXYdJgQ" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">band_names = [&#x27;B02.tif&#x27;, &#x27;B03.tif&#x27;, &#x27;B04.tif&#x27;, &#x27;B08.tif&#x27;, &#x27;B11.tif&#x27;,&#x27;B12.tif&#x27;,
              &#x27;NDVI.tif&#x27;, &#x27;NDWI.tif&#x27;, &#x27;NDBI.tif&#x27;]
is_data_band = &#x27;data_mask.tif&#x27;</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="kRWSafsI_sJFyo69RU5ys" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="B0D1LRlNMI" class="relative group/block"><p>Finally, let’s specify the folder to which we will save the data.</p></div><div id="ByxFJ7T4pA" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Output path
save_folder = &quot;./results&quot;</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="ioFwPIBq9bOtnxS8h6dpi" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="PuCoFMo8Q0" class="relative group/block"><p>We have defined a class to convert the Batch Request to <code>EOPatches</code> for ease of use below.</p></div><div id="AjNfaQNsfA" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">class ImportFromAWS:
    &quot;&quot;&quot;Import EoPatches from a Batch request.
    
    This class regroups all the methods to transform the saved results of a batch request
    located in an Amazon Bucket to EOPatches locally.
    
    :param aws_key: Amazon client ID
    :type aws_key: str
    :param aws_secret: Amazon secret
    :type aws_secret: str
    :param aws_bucket: Amazon bucket name where the batch results were written
    :type aws_bucket: str
    :param request_id: Batch request id
    :type request_id: str 
    param bands: List of bands that should be considered in the import
    :type bands: list 
    param timestamps: List of timestamps for resampled data
    :type timestamps: list
    param is_data: Name of the IS_DATA band from Batch
    :type is_data: str, optional
    :param out_path: Path to folder where EOPatches will be saved
    :type out_path: str, optional 
    &quot;&quot;&quot;
    
    def __init__(self, aws_key, aws_secret, aws_bucket, request_id, bands, timestamps,
                 is_data=None, out_path=&quot;./&quot;):
        &quot;&quot;&quot;Constructor method.        
        &quot;&quot;&quot;
        # Path to save the EoPatches
        self.out_path = Path(out_path)
            
        # Make directory
        self.out_path.mkdir(parents=True, exist_ok=True)

        # AWS credentials
        if (aws_key == None or aws_secret == None):
            raise ValueError(&quot;No Amazon credential provided!&quot;)
            
        # Create Amazon session and settings
        self.session = boto3.Session(aws_access_key_id=aws_key, 
                                     aws_secret_access_key=aws_secret,
                                    ) 
        self.s3_resource = self.session.resource(&#x27;s3&#x27;)
        self.s3_client = self.session.client(&#x27;s3&#x27;)
        self.bucket_name = aws_bucket
        self.bucket = self.s3_resource.Bucket(aws_bucket)
        
        # Set up filesytem for Amazon Bucket
        self.s3fs = S3FS(aws_bucket,
                         dir_path=request_id,
                         aws_access_key_id=aws_key,
                         aws_secret_access_key=aws_secret)
           
        # Request id
        self.request_id = request_id
        
        # Information about data and metadata
        self.is_data = is_data
        self.bands = bands
        self.timestamps = [x.isoformat() for x in timestamps]


    @staticmethod   
    def _open_band(AWS_session, bucket, request_id, folder, bandname):
        &quot;&quot;&quot;Open Band.
        
        Using Rasterio, open a band in an Amazon S3 Bucket, and return bbox and data.
        
        :param session: Amazon boto session
        :type session: boto3.Session 
        :param bucket: Amazon bucket name
        :type bucket: str
        :param request_id: Name of the Batch request ID
        :type request_id: str
        :param folder: Name of the folder in which to query data
        :type folder: str
        :param bandname: Filename
        :type bandname: str 
        &quot;&quot;&quot;
        # Open with Rasterio
        with rasterio.Env(rasterio.session.AWSSession(AWS_session)) as env:
            s3_url = f&#x27;s3://{bucket}/{request_id}/{folder}/{bandname}&#x27;
            with rasterio.open(s3_url) as source:

                    bbox = BBox(source.bounds, CRS(source.crs.to_epsg()))
                    data = source.read()
        return data, bbox
    
    
    @staticmethod   
    def _open_local_band(band_path):
        &quot;&quot;&quot;Open Local Band.
        
        Using Rasterio, open a band in an Amazon S3 Bucket, and return bbox and data.
        
        :param session: Amazon boto session
        :type session: boto3.Session 
        :param bucket: Amazon bucket name
        :type bucket: str
        :param request_id: Name of the Batch request ID
        :type request_id: str
        :param folder: Name of the folder in which to query data
        :type folder: str
        :param bandname: Filename
        :type bandname: str 
        &quot;&quot;&quot;
        # Open with Rasterio
        with rasterio.open(band_path) as source:
            bbox = BBox(source.bounds, CRS(source.crs.to_epsg()))
            data = source.read()

        return (data, bbox)

    
    @staticmethod
    def _convert_DN(band, in_band):
        &quot;&quot;&quot;Convert DN to values.
        
        It is cheaper to return INT data from SH Hub. In the evalscript a coefficient is applied
        to the data to return it as INT, and here it needs to be unpacked. This function (for now)
        considers only 2 ways of saving data: bands starting with B or indices not starting with B.
        
        :param band: Band name to convert
        :type band: str 
        :param in_band: Numpy array to convert
        :type in_band: np.array 
        :return: The input numpy array converted depending on band name
        :rtype: np.array
        &quot;&quot;&quot;
        if band.startswith(&quot;B&quot;):
            outband = in_band / 10000.
        else:
            outband = (in_band - 10000.) / 10000.

        return outband


    @staticmethod
    def _eopatch_import(folder_system, folders, bucket, bands, timestamps, out_path, local=False,
                        save_local=True, is_data=None, request_id=None, bucket_name=None, session=None):
        &quot;&quot;&quot;Import EOPatches from local data.
        
        After having downloaded the bucket contents to a local folder, extract the EOPatches.
        
        :param folder_system: a fs sytem object containing base directory (S3 or local)
        :type folder_system: s3fs.S3FS or s3fs.core.S3FileSystem
        :param folders: List of folders to search through
        :type folders: list 
        :param bucket: boto3 resource Bucket bucket, see :class:`ImportFromAWS`
        :type bucket: boto3.S3.Bucket(name)
        :param bands: List of bands to process
        :type bands: list
        :param timestamps: List of timestamps corresponding to the bands
        :type timestamps: list
        :param out_path: Output folder where the EOPatches are saved
        :type out_path: str
        :param local: Set whether the folders are local or on Amazon S3
        :type local: bool, optional
        :param save_local: Set whether the EOPatches are saved to local or on Amazon S3
        :type save_local: bool, optional
        :param is_data: Name of band containing information of validity of data
        :type is_data: str, optional
        :param request_id: When importing from a Amazon bucket, folder name (from Batch)
        :type request_id: str, optional
        :param bucket_name: When importing from a Amazon bucket, bucket name
        :type bucket_name: str, optional
        :param session: When importing from a Amazon bucket, boto3 S3 session
        :type session: boto3.S3.session, optional

        &quot;&quot;&quot;
        # Initialise counter
        nb_patch = 0
        
        # Ignore json file
        folders = [x for x in folders if not x.endswith(&quot;json&quot;)]
        
        # Loop over the folders which will become patches
        for fold in tqdm(folders):
          
            # Export switch (in case the bands are missing in a patch)
            export = True

            # Empty EOPatch to be filled
            eo_patch = EOPatch()

            # List bands in folder
            current_bands = folder_system.listdir(fold)
            
            # Check if the bands in the folder correspond to the bands wanted
            if any(elem in current_bands for elem in bands):
                all_bands = {}
                # Loop through bands
                for band in bands:
                    # Different opening method depending on local or not
                    if local:
                        band_data, data_bbox = ImportFromAWS._open_local_band(Path(
                            folder_system.getsyspath(&quot;&quot;)).joinpath(fold, band))
                    else:
                        band_data, data_bbox = ImportFromAWS._open_band(session, 
                                                                        bucket_name, 
                                                                        request_id,
                                                                        fold, band)
                    # Convert band to reflectance or index and save
                    all_bands[band] = ImportFromAWS._convert_DN(band, band_data)

                     # Get IS_DATA
                if is_data != None and is_data in current_bands:
                    # Different opening method depending on local or not
                    if local:
                        is_data_array, _ = ImportFromAWS._open_local_band(Path(
                                folder_system.getsyspath(&quot;&quot;)).joinpath(fold, is_data))
                    else:
                        is_data_array, _ = ImportFromAWS._open_band(session, 
                                                                    bucket_name, 
                                                                    request_id,
                                                                    fold, is_data)
            # If the bands don&#x27;t match, skip the patch
            else:
                print(f&quot;Bands don&#x27;t match for Patch {fold}... skipping...&quot;)
                export = False

            # if not flag to skip the band, continue
            if export:
                # Add bbox to patch
                eo_patch.bbox = data_bbox

                # Add bands to patch
                eo_patch.data[&#x27;FEATURES&#x27;] = np.stack([all_bands[x] for x in all_bands.keys()], axis=-1)
                
                # Add is data mask to patch
                eo_patch.mask[&quot;IS_DATA&quot;] = np.expand_dims(is_data_array, axis=-1)

                # Add metadata
                eo_patch.meta_info[&quot;time_interval&quot;] = (START.isoformat(), END.isoformat())
                eo_patch.meta_info[&quot;band_list&quot;] = [x.split(&#x27;.&#x27;)[0] for x in bands]

                # Add timestamps
                eo_patch.timestamp = timestamps

                # Save EOPatch (either on local or on Bucket)
                if save_local:
                    save_path = str(Path(out_path).joinpath(&quot;EOPatches&quot;))
                else:
                    save_path = f&quot;s3://{bucket_name}/EOPatches&quot;

                eo_patch.save(f&quot;{save_path}/eopatch_{nb_patch}&quot;,
                              overwrite_permission=OverwritePermission.OVERWRITE_PATCH)

                # Increase counter
                nb_patch += 1


    def convert_to_EOPatches(self, local_bucket=None, save_locally=True):
        &quot;&quot;&quot;Import of EOPatches.
        
        This function converts the contents of an Amazon bucket that is
        stored locally (after download using e.g. `download_S3_bucket`) or 
        stored on Amazon S3 to EOPatches.
        
        :param local_bucket: A local folder containing contents of a Bucket
        :type local_bucket: str, optional
        &quot;&quot;&quot;
        
        if local_bucket is None:
            # Open Bucket as folder system
            folder_sys = self.s3fs
            # Set local flag to False
            local = False
        else:
            # Open local folder system
            folder_sys = open_fs(local_bucket)
            #Set local flag to True
            local = True

        # Get subfolders in the local folder
        folders = folder_sys.listdir(&quot;/&quot;)
        
        # Run the import
        self._eopatch_import(folder_sys, folders, self.bucket, self.bands, self.timestamps,
                             self.out_path, local=local, save_local=save_locally, is_data=self.is_data,
                             request_id=self.request_id, bucket_name=self.bucket_name, session=self.session)


    def download_from_bucket(self, obj_id=&quot;S3&quot;):
        &quot;&quot;&quot;Download S3 Bucket.
        
        Downloads the results of a batch request stored in an Amazon
        bucket, based on the request ID of the class.

        &quot;&quot;&quot;
        # Check type
        if obj_id not in [&quot;S3&quot;, &quot;EO&quot;]:
            raise ValueError(&quot;Not a correct object ID to download: choose S3 or EO&quot;)

        # Check if a folder named after the reques ID already exists in the output folder
        if obj_id == &quot;S3&quot;:
            path = self.request_id
        else:
            path = &quot;EOPatches&quot;

        if self.out_path.joinpath(path).is_dir():
                raise ValueError(&quot;Bucket folder already exists on local path! Delete and try again.&quot;)
        
        # Download S3/EO bucket
        print(&quot;Downloading bucket contents&quot;)
        
        keys = []
        dirs = []
        next_token = &#x27;&#x27;
        base_kwargs = {
            &#x27;Bucket&#x27;:self.bucket_name,
            &#x27;Prefix&#x27;:path,
        }
        while next_token is not None:
            kwargs = base_kwargs.copy()
            if next_token != &#x27;&#x27;:
                kwargs.update({&#x27;ContinuationToken&#x27;: next_token})
            results = self.s3_client.list_objects_v2(**kwargs)
            contents = results.get(&#x27;Contents&#x27;)
            for i in contents:
                k = i.get(&#x27;Key&#x27;)
                if k[-1] != &#x27;/&#x27;:
                    keys.append(k)
                else:
                    dirs.append(k)
                
            next_token = results.get(&#x27;NextContinuationToken&#x27;)

        for d in dirs:
            dest_pathname = self.out_path.joinpath(d)
            dest_pathname.mkdir(parents=True, exist_ok=True)

        for k in tqdm(keys):
            dest_pathname = self.out_path.joinpath(k)
            dest_pathname.parent.mkdir(parents=True, exist_ok=True)
            self.s3_client.download_file(self.bucket_name, k, str(dest_pathname))   
</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="qerG-8oM2yHy8hmU_u1WE" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="zX3xmERZuf" class="relative group/block"><h4 id="id-2-2-run-conversion-from-batch-results-to-eopatches" class="relative group"><span class="heading-text">2.2 Run conversion from Batch results to EOPatches</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-2-2-run-conversion-from-batch-results-to-eopatches" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>Now all the parameters are set, we can run the conversion. For this step there are 2 available options:</p><ol start="1"><li>Download the contents of the Amazon S3 Bucket to a local file and convert locally to <code>EOPatches</code></li><li>Convert the data from the Amazon S3 Bucket and download the <code>EOPatches</code></li></ol></div><div id="yRIZpI38ih" class="relative group/block"><p>First, we make an object, initialising it with the necessary parameters to perform the conversion.</p></div><div id="Tj5vcmCX0p" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Make class to convert Batch to EOPatches
batch2eolearn = ImportFromAWS(AWS_ID, AWS_SECRET, aws_bucket_name,
                              request_id, band_names, timestamps, is_data=is_data_band, 
                              out_path=save_folder)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="_-RjLJ1mjuujFq1W18N60" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="ovwpuERh8j" class="relative group/block"><h5 id="option-1-dowload-bucket-and-convert-locally" class="relative group"><span class="heading-text">Option 1: Dowload Bucket and convert locally</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#option-1-dowload-bucket-and-convert-locally" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p>You can use the in-build function below to download your Amazon Bucket contents, or skip the cell and sync the Bucket using the aws cli tool.</p></div><div id="MXNLMrCpYY" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Download Batch results from Bucket
batch2eolearn.download_from_bucket(obj_id=&quot;S3&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="Bl9bXSQCXecLoEm1r0wnf" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="WW6xiw8Jo0" class="relative group/block"><p>If you specify the folder name containing the Batch request data in the <code>convert_to_EOPatches</code> function, the conversion will be performed locally.</p></div><div id="efoid5TxBl" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Convert local data to EOPatches
batch2eolearn.convert_to_EOPatches(local_bucket=f&quot;{save_folder}/{request_id}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="YOak908lpXvnTs_rgL4ul" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="MBkx0ndEF3" class="relative group/block"><h5 id="option-2-convert-in-bucket-and-download-eopatches" class="relative group"><span class="heading-text">Option 2: Convert in Bucket and download EOPatches</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#option-2-convert-in-bucket-and-download-eopatches" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p>The following cell allows you to convert the data that is stored on the Amazon S3 Bucket. Using the <code>save_locally</code> True/False flag you can either directly save the EOPatches on your computer or store them on the Amazon S3 Bucket.</p></div><div id="wwPsmvFUXB" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Convert Batch results in the Amazon Bucket to EoPatches
# batch2eolearn.convert_to_EOPatches(save_locally=False)
batch2eolearn.convert_to_EOPatches(save_locally=False)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="4msikjUbScB3vD5urZEGk" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="p1buHUKl0U" class="relative group/block"><p>If you save the EOPatches to your Amazon Bucket, you can either download them by using the inbuilt command below or using an other method of your choice (e.g. <code>aws cli</code>).</p></div><div id="jWwKxDLQTE" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Rename the folder created in option 1
os.rename(&quot;./results/EOPatches&quot;, &quot;./results/EOPatches_opt1&quot;)

# Download EOPatches from Bucket
batch2eolearn.download_from_bucket(obj_id=&quot;EO&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="x4yGDJmGiiWZYUgL4iTHm" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="T3ZpB0EAqL" class="relative group/block"><h3 id="step-3-continue-processing-data-using-eopatches" class="relative group"><span class="heading-text">Step 3: continue processing data using EOPatches</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step-3-continue-processing-data-using-eopatches" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Now we have the EOPatches saved locally, we can continue the process as shown in the <a target="_blank" rel="noreferrer" href="https://eo-learn.readthedocs.io/en/latest/examples.html#land-use-and-land-cover" class="">example EOLearn Notebook</a>.</p><p>Before continuing with <strong>Model construction and training</strong> (see <a target="_blank" rel="noreferrer" href="https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#6.-Model-construction-and-training" class="">here</a>) we will need to import the reference data for Slovenia first. Since we are querying data over Slovenia, we need to fetch the reference data for the whole country <a target="_blank" rel="noreferrer" href="http://eo-learn.sentinel-hub.com/" class="">here</a>.</p><p>For this example, the reference data prepared for Ljubljana can be downloaded <a href="https://github.com/sentinel-hub/eo-learn/blob/master/examples/batch-processing/data/ljubljana_ref.gpkg" class="italic" target="_blank" rel="noreferrer" data-state="closed">here</a>.</p></div><div id="agInAbb8SD" class="relative group/block"><h4 id="id-3-1-prepare-the-data-to-train-the-lulc-prediction-model" class="relative group"><span class="heading-text">3.1 Prepare the data to train the LULC prediction model</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-3-1-prepare-the-data-to-train-the-lulc-prediction-model" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><h5 id="id-3-1-1-setup-reference-data" class="relative group"><span class="heading-text">3.1.1 Setup reference data</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-3-1-1-setup-reference-data" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p>For this example, a subset of the country-wide reference for land-use-land-cover is provided. It is available in the form of a geopackage, which contains polygons and their corresponding labels. The labels represent the following 10 classes:</p></div><div id="KJZJZpw1JQ" class="relative group/block"><ul><li>lulcid = 0, name = no data</li><li>lulcid = 1, name = cultivated land</li><li>lulcid = 2, name = forest</li><li>lulcid = 3, name = grassland</li><li>lulcid = 4, name = shrubland</li><li>lulcid = 5, name = water</li><li>lulcid = 6, name = wetlands</li><li>lulcid = 7, name = tundra</li><li>lulcid = 8, name = artificial surface</li><li>lulcid = 9, name = bareland</li><li>lulcid = 10, name = snow and ice</li></ul></div><div id="qr2S8l7nKC" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">class LULC(MultiValueEnum):
    &quot;&quot;&quot; Enum class containing basic LULC types
    &quot;&quot;&quot;
    NO_DATA            = &#x27;No Data&#x27;,            0,  &#x27;#ffffff&#x27;
    CULTIVATED_LAND    = &#x27;Cultivated Land&#x27;,    1,  &#x27;#ffff00&#x27;
    FOREST             = &#x27;Forest&#x27;,             2,  &#x27;#054907&#x27;
    GRASSLAND          = &#x27;Grassland&#x27;,          3,  &#x27;#ffa500&#x27;
    SHRUBLAND          = &#x27;Shrubland&#x27;,          4,  &#x27;#806000&#x27;
    WATER              = &#x27;Water&#x27;,              5,  &#x27;#069af3&#x27;
    WETLAND            = &#x27;Wetlands&#x27;,           6,  &#x27;#95d0fc&#x27;
    TUNDRA             = &#x27;Tundra&#x27;,             7,  &#x27;#967bb6&#x27;
    ARTIFICIAL_SURFACE = &#x27;Artificial Surface&#x27;, 8,  &#x27;#dc143c&#x27;
    BARELAND           = &#x27;Bareland&#x27;,           9,  &#x27;#a6a6a6&#x27;
    SNOW_AND_ICE       = &#x27;Snow and Ice&#x27;,       10, &#x27;#000000&#x27;

    @property
    def id(self):
        &quot;&quot;&quot; Returns an ID of an enum type

        :return: An ID
        :rtype: int
        &quot;&quot;&quot;
        return self.values[1]

    @property
    def color(self):
        &quot;&quot;&quot; Returns class color

        :return: A color in hexadecimal representation
        :rtype: str
        &quot;&quot;&quot;
        return self.values[2]


def get_bounds_from_ids(ids):
    bounds = []
    for i in range(len(ids)):
        if i &lt; len(ids) - 1:
            if i == 0:
                diff = (ids[i + 1] - ids[i]) / 2
                bounds.append(ids[i] - diff)
            diff = (ids[i + 1] - ids[i]) / 2
            bounds.append(ids[i] + diff)
        else:
            diff = (ids[i] - ids[i - 1]) / 2
            bounds.append(ids[i] + diff)
    return bounds


# Reference colormap things
lulc_bounds = get_bounds_from_ids([x.id for x in LULC])
lulc_cmap = ListedColormap([x.color for x in LULC], name=&quot;lulc_cmap&quot;)
lulc_norm = BoundaryNorm(lulc_bounds, lulc_cmap.N)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="_bdmdDqgw03fGHP6cIB37" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="TqlxnIeeFN" class="relative group/block"><p>The main point of this task is to create a raster mask from the vector polygons and add it to the eopatch. With this procedure, any kind of a labeled shapefile can be transformed into a raster reference map. This result is achieved with the existing task <code>VectorToRaster</code> from the <code>eolearn.geometry package</code>. All polygons belonging to the each of the classes are separately burned to the raster mask.</p></div><div id="Q1mDcEr2kh" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># This step takes some time due to the large size of the reference data (https://github.com/sentinel-hub/eo-learn/blob/master/examples/batch-processing/data/ljubljana_ref.gpkg)
land_use_ref_path = INPUT_DATA.joinpath(&#x27;ljubljana_ref.gpkg&#x27;)

land_use_ref = gpd.read_file(land_use_ref_path)

rasterization_task = VectorToRasterTask(land_use_ref, (FeatureType.MASK_TIMELESS, &#x27;LULC&#x27;),
                                    values_column=&#x27;lulcid&#x27;, raster_shape=(FeatureType.MASK, &#x27;IS_DATA&#x27;),
                                    raster_dtype=np.uint8)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="u06yok92xnJgXqqNA3JWS" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="DHbTidWSNf" class="relative group/block"><h5 id="id-3-1-2-define-the-workflow" class="relative group"><span class="heading-text">3.1.2 Define the workflow</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-3-1-2-define-the-workflow" title="Link to this Section" aria-label="Link to this Section">¶</a></h5><p>Now we want to incorporate the reference data to the EOPatches, we need to load and update the existing patches with the reference data (see <a target="_blank" rel="noreferrer" href="https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#Reference-map-task" class="">here</a>). We also want to perform the erosion step shown in the <a target="_blank" rel="noreferrer" href="https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#5.-Prepare-the-training-data" class="">EOLearn LULC example</a> in order to “clean” the data, as described in this <a target="_blank" rel="noreferrer" href="https://medium.com/sentinel-hub/land-cover-classification-with-eo-learn-part-2-bd9aa86f8500" class="">blog post</a>.</p><p>We will also prepare the model training data (see <a target="_blank" rel="noreferrer" href="https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#5.-Prepare-the-training-data" class="">here</a>) by performing random spatial sampling of the EOPatches, and finally split patches for training/validation.</p><p>The following workflow is created and executed:</p><ol start="1"><li>Load the existing EOPatches containing satellite data</li><li>Add rasterised reference data</li><li>Perform erosion task on reference data</li><li>Random spatial sampling of the EOPatches</li><li>Split patches for training/validation</li><li>Save updated EOPatches</li></ol></div><div id="O8BpMEyU4G" class="relative group/block"><p>First we set up the tasks:</p></div><div id="m0gtVlDmjF" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Task for LOAD
load = LoadTask(f&quot;{save_folder}/EOPatches&quot;)

# TASK FOR EROSION
# erode each class of the reference map
erosion = ErosionTask(mask_feature=(FeatureType.MASK_TIMELESS,&#x27;LULC&#x27;,&#x27;LULC_ERODED&#x27;), disk_radius=1)

# TASK FOR SPATIAL SAMPLING
# Uniformly sample about pixels from patches
n_samples = 500000 # half of pixels (1000*1000 patches here)
ref_labels = list(range(11)) # reference labels to take into account when sampling
spatial_sampling = FractionSamplingTask(
    features_to_sample=[  # tag fields to sample
        (FeatureType.DATA, &#x27;FEATURES&#x27;, &#x27;FEATURES_SAMPLED&#x27;),
        (FeatureType.MASK_TIMELESS, &#x27;LULC_ERODED&#x27;, &#x27;LULC_ERODED_SAMPLED&#x27;)],
    sampling_feature=(FeatureType.MASK_TIMELESS, &#x27;LULC_ERODED&#x27;),
    fraction=0.5
)

# TASK FOR SAVING
save = SaveTask(f&quot;{save_folder}/EOPatches&quot;, overwrite_permission=OverwritePermission.OVERWRITE_PATCH)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="xzwuLP64ZkdA46IindA4O" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="bOcIQydvs7" class="relative group/block"><p>Then we wrap tasks into nodes:</p></div><div id="KnwysTZ6hA" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># load_node = EONode(load, inputs=[], name=&quot;Load Task&quot;)
# erosion_node = EONode(erosion, inputs=[load_node], name=&quot;Erode Task&quot;)
# sampling_node = EONode(spatial_sampling, inputs=[erosion_node], name=&quot;Spatial Sampling Task&quot;)
# save_node = EONode(save, inputs=[sampling_node], name=&quot;Save Task&quot;)
linked_nodes = linearly_connect_tasks(
    (load, &quot;Load Task&quot;),
    (rasterization_task, &quot;Rasterize Task&quot;),
    (erosion, &quot;Erode Task&quot;), 
    (spatial_sampling, &quot;Spatial Sampling Task&quot;),
    (save, &quot;Save Task&quot;)
)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="V_MKCe8fbY37AaXq1DLAh" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="NrFlY1oBjL" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Define the workflow
workflow = EOWorkflow(linked_nodes)

# Let&#x27;s visualize it
workflow.dependency_graph()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="xb70Lrdw7kHlnRqfKu1cu" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="odVIU7QMnt" class="relative group/block"><h5 id="id-3-1-3-run-the-eoworkflow-over-all-eopatches" class="relative group"><span class="heading-text">3.1.3 Run the EOWorkflow over all EOPatches</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-3-1-3-run-the-eoworkflow-over-all-eopatches" title="Link to this Section" aria-label="Link to this Section">¶</a></h5></div><div id="n6TFZPOMXj" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">%%time
   
execution_args = []
for patch in Path(save_folder).joinpath(&quot;EOPatches&quot;).iterdir():
     execution_args.append({
         linked_nodes[0]: {&#x27;eopatch_folder&#x27;: patch.name},
         linked_nodes[3]: {&#x27;seed&#x27;: 42},
         linked_nodes[-1]: {&#x27;eopatch_folder&#x27;: patch.name}
    })

executor = EOExecutor(workflow, execution_args, save_logs=True)
executor.run(workers=1, multiprocess=False)

executor.make_report()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="40Ex6U5O-Ds1kT1VI0HjD" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="c7ws9gMGQl" class="relative group/block"><h4 id="id-3-2-visualize-the-patches" class="relative group"><span class="heading-text">3.2 Visualize the patches</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#id-3-2-visualize-the-patches" title="Link to this Section" aria-label="Link to this Section">¶</a></h4><p>Now we have EOPatches ready for analysis, we can visualise them before continuing.</p></div><div id="BWxjW4QuCU" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Load a random patch
patch_ID = 5</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="U9i7u43zEROES-vaorrT9" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="pm99N6aJGc" class="relative group/block"><p><strong>RGB True Color of a Patch</strong></p></div><div id="YqvXzfdMd0" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">fig, ax = plt.subplots(1,figsize=(12,12))
eopatch = EOPatch.load(f&#x27;{save_folder}/EOPatches/eopatch_{patch_ID}&#x27;, lazy_loading=True)
eopatch
ax.imshow(np.clip(eopatch.data[&#x27;FEATURES&#x27;][1][..., [2, 1, 0]] * 3.5, 0, 1))
ax.set_xticks([])
ax.set_yticks([])
ax.set_aspect(1)
plt.show()
eopatch = None</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="zwpkviM_sLqdzU1MfSUJL" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><img src="/build/a5658cbe4881fe710ac599d8f3ad4d7c.png" alt="&lt;Figure size 864x864 with 1 Axes&gt;"/></div></div><div id="kbWWYtAHem" class="relative group/block"><p><strong>Temporal mean of NDVI of a patch</strong></p></div><div id="woX8DHAKgl" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">fig, ax = plt.subplots(figsize=(12,12))
eopatch = EOPatch.load(f&#x27;{save_folder}/EOPatches/eopatch_{patch_ID}&#x27;, lazy_loading=True)
ndvi = eopatch.data[&#x27;FEATURES&#x27;][:, :, :, 6]
mask = eopatch.mask[&#x27;IS_DATA&#x27;].squeeze()
ndvi[mask==0] = np.nan
ndvi_mean = np.nanmean(ndvi, axis=0).squeeze()
im = ax.imshow(ndvi_mean, vmin=0, vmax=0.8, cmap=plt.get_cmap(&#x27;YlGn&#x27;))
ax.set_xticks([])
ax.set_yticks([])
ax.set_aspect(1)
eopatch = None

cb = fig.colorbar(im, ax=ax, orientation=&#x27;horizontal&#x27;, pad=0.01, aspect=100)
cb.ax.tick_params(labelsize=20) 
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="yq8TRGq45vyRiqKfoHj8w" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><img src="/build/31c46b8f9fce4aa18c9cae12a9e6fa25.png" alt="&lt;Figure size 864x864 with 2 Axes&gt;"/></div></div><div id="QhqfeuKxaU" class="relative group/block"><p><strong>Reference data example of a Patch</strong></p></div><div id="s1eWblqd6K" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">fig, ax = plt.subplots(figsize=(12,12))
eopatch = EOPatch.load(f&#x27;{save_folder}/EOPatches/eopatch_{patch_ID}&#x27;, lazy_loading=True)

ax.imshow(eopatch.mask_timeless[&#x27;LULC&#x27;].squeeze(), cmap=lulc_cmap, norm=lulc_norm)
ax.set_xticks([])
ax.set_yticks([])
ax.set_aspect(1)
eopatch = None</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="4vJfBE7icLNHQlI4071zJ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><img src="/build/42d5f651e938d4c0b5eeb5b0c435201d.png" alt="&lt;Figure size 864x864 with 1 Axes&gt;"/></div></div><div id="MByvUnESnc" class="relative group/block"><h3 id="note" class="relative group"><span class="heading-text">Note:</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#note" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>At this point, we have a setup similar to what we would have at <a target="_blank" rel="noreferrer" href="https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#6.-Model-construction-and-training" class="">Section 6</a> of the eo-learn LULC tutorial. If you are familiar with the process you can stop here, or you can continue the steps described in the <a href="https://github.com/sentinel-hub/eo-learn/blob/master/examples/land-cover-map/SI_LULC_pipeline.ipynb" class="italic" target="_blank" rel="noreferrer" data-state="closed">the eo-learn example</a> Notebook from here on.</p></div><div></div></main></article><script>((a,d)=>{if(!window.history.state||!window.history.state.key){let h=Math.random().toString(32).slice(2);window.history.replaceState({key:h},"")}try{let f=JSON.parse(sessionStorage.getItem(a)||"{}")[d||window.history.state.key];typeof f=="number"&&window.scrollTo(0,f)}catch(h){console.error(h),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/build/entry.client-UNPC4GT3.js"/><link rel="modulepreload" href="/build/_shared/chunk-OCTKKCIL.js"/><link rel="modulepreload" href="/build/_shared/chunk-UAI5KRM7.js"/><link rel="modulepreload" href="/build/_shared/chunk-2NH4LW52.js"/><link rel="modulepreload" href="/build/_shared/chunk-IZFMW3M4.js"/><link rel="modulepreload" href="/build/_shared/chunk-HBJK6BW3.js"/><link rel="modulepreload" href="/build/_shared/chunk-HYMQ7M2K.js"/><link rel="modulepreload" href="/build/_shared/chunk-OHOXABTA.js"/><link rel="modulepreload" href="/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/build/_shared/chunk-CPTH56EW.js"/><link rel="modulepreload" href="/build/_shared/chunk-3CVK3PYF.js"/><link rel="modulepreload" href="/build/_shared/chunk-J6FHCSRC.js"/><link rel="modulepreload" href="/build/_shared/chunk-S4SWV34C.js"/><link rel="modulepreload" href="/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/build/root-QGLRP2PL.js"/><link rel="modulepreload" href="/build/_shared/chunk-CB3BH7WY.js"/><link rel="modulepreload" href="/build/routes/$-7JYT5576.js"/><script>window.__remixContext = {"url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/howtolulc-batch-updated-210621","state":{"loaderData":{"root":{"config":{"version":1,"myst":"1.3.25","options":{"hide_toc":true,"hide_footer_links":true,"folders":true},"nav":[],"actions":[],"projects":[{"github":"https://github.com/eoxhub-workspaces/documentation/","id":"5aa0318b-5bc1-41e2-b1d4-053e8b61961b","exports":[],"bibliography":[],"title":"Location for eodashboard notebooks","index":"readme","pages":[{"title":"External Notebooks","level":1},{"title":"Eurodatacube","level":2},{"title":"Notebooks","level":3},{"slug":"external-notebooks.eurodatacube.notebooks.readme","title":"Jupyter notebooks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Notebooks","level":4},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.readme","title":"Euro Data Cube Notebooks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":5},{"title":"Contributions","level":5},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-ai4arctic-sea-ice","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-biomass-forest-observation-sys","title":"AIREO pilot dataset - Biomass (Forest Observation System)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-cap","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-spacenet7","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aot-covid19","title":"Aerosol Optical Thickness (AOT) Anomaly Detection Using Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.batch-zarr-output","title":"Generating Zarr data cubes with Sentinel Hub Batch API","description":"","date":"","thumbnail":"/build/68dffbf744fa42f4bf3d35e55684984e.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.client-side-processing-using-mass-sh","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.cmems-data-download","title":"Cmems Data Download","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.detect-trucks-sentinel2","title":"Detect Trucks using Sentinel-2 data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.drought-monitoring","title":"Drought impact monitoring platform","description":"","date":"","thumbnail":"/build/ad5c19782b006f72352ae57794305840.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-africa-cube-africa-custom-contest","title":"Custom Script Contest – Urban Growth in Africa","description":"","date":"","thumbnail":"/build/e9275f3fe80a704e2f5aa1ec1220e48a.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-byoc-tutorial","title":"How to bring your own data to EDC: Using Sentinel Hub Python package","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-demo-phi-week-v2","title":"xcube-gen and xcube-geodb Hands-On Workshop Φ-Week 2020","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-geodb-4-eurocrops-demo","title":"Demonstration of Eurocrops data use in geoDB","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-notebook-lstm","title":"South Africa Crop Type Classification on Euro Data Cube (EDC)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-usecase-lpis-crop-type-classification","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.eurocrops-crop-classification-example","title":"Crop-classification using Sentinel-2 time-series","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ghsl-urban-delineation","title":"\u003cb\u003eUrban delineation\u003cb\u003e","description":"","date":"","thumbnail":"/build/7bbf545a5eae1d9ebdb91ae42b261063.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.globalearthmonitor-example","title":"Pre-requisites","description":"","date":"","thumbnail":"/build/205c1ded6bd59771975a9fbd3753fd3b.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.gpu-support-eoxhub","title":"GPU-Support on EOxHub","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.gran-chaco-phiweek","title":"ESA EO \\phi- week 2020","description":"","date":"","thumbnail":"/build/80cee7db6cdc7002ceedda5689f889fa.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.howtolulc-batch-updated-210621","title":"How To: Land-Use-Land-Cover Prediction for Slovenia - using the Batch Processing API","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.lpis-lulc-slo","title":"LPIS Use Case for Land Use / Land Cover Classification","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.lps2022-leverage-euro-data-cube-services","title":"Living Planet Symposium 2022 Training Session","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.no2-analysis-covid19-lockdowns","title":"Impact of Covid19 induced lockdown on NO2 levels","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.no2-so2-trend-veda-api-igarss-2023","title":"Using the NASA VEDA EOAPI","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ogc-edc","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.openeo-client-demo","title":"openEO Client Demo","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.race-finishedgoodsinventory-inidcator","title":"Finished Goods Inventory indicator for RACE","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.third-party-planetscope","title":"Third Party Data Import - PlanetScope","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.xcube-access-datasets","title":"Using xcube to access non-commercial and commercial data sets","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.xcube-viewer-as-a-service-in-edc1","title":"Visualizing data with xcube viewer in EuroDataCube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-evaluation-workshop","title":"DAPA Evaluation Workshop: Introduction \u0026 Documentation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-1-cube-sentinel-2","title":"DAPA Tutorial #1: Cube - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-2-area-sentinel-2","title":"DAPA Tutorial #2: Area - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-3-timeseries-sentinel-2","title":"DAPA Tutorial #3: Timeseries - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-4-value-sentinel-2","title":"DAPA Tutorial #4: Value - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-5-dem","title":"DAPA Tutorial #5: DEM","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.fairicube.fairicube-data-access-demonstration","title":"EDC Sentinel Hub - data access using xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-australian-bushfires","title":"Australian Bushfires","description":"","date":"","thumbnail":"/build/ab194b4f8c40a2b9d64d8a85e37ce1fd.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["IGARSS-22","EO Dashboard"],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-data-access","title":"Data Access","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-detect-trucks-sentinel2","title":"Truck Detection Exercise","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-lockdown-in-venice","title":"Environmental Impacts of Lockdown in Venice, Italy during 2020","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-nasa-api-lockdown-in-venice","title":"Lockdown in Venice","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-no2-timeseries-analysis","title":"NO2 timeseries analysis","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-timeseries-stac-api-single-vs-multi","title":"Time series using STAC API statistics endpoints","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"Curated","level":5},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.access-iacs-data","title":"How to access IACS Spatial Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-access-cci-data","title":"Access CCI data with xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-first-steps","title":"First steps on the Euro Data Cube platform","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-1-manage-datasets-v11","title":"Manage Collections in your GeoDB","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-2-explore-datasets-2","title":"Exploring Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-3-share-datasets1","title":"Sharing Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-access-urban-atlas-data-v1","title":"[xcube-geodb] How to accesss EEA Urban Atlas Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-data-access","title":"EDC Sentinel Hub - data access using xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinelhub-datafusion-basic","title":"EDC Sentinel Hub: Data Fusion","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinelhub-datafusion-ndvi","title":"EDC Sentinel Hub: Data Fusion","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-datasets","title":"EDC Sentinel Hub - using xcube to access different data sets in Sentinel Hub","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-setup","title":"Setup for EDC core API access using xcube client library","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-xcube-integration","title":"EDC Sentinel Hub - XCUBE integration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-usecase-ndvi-timeline","title":"NDVI timeline","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.eo-learn","title":"Using eo-learn in EDC: a starter’s guide.","description":"","date":"","thumbnail":"/build/5a1f8475f0c3652f4630d03d72891b98.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.esdl-edc-v0-2","title":"Earth System Data Lab Tutorial @ Euro Data Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.exploring-time-and-space-with-edc","title":"Exploring Time and Space: A guide to accessing, analysing and visualising data in the Euro Data Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.how-to-access-dem-data-through-sentinel-hub-api","title":"How to access DEM data through Sentinel Hub API","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.sentinelhub-py","title":"Using Sentinel Hub Process API in EDC: a starter’s guide.","description":"","date":"","thumbnail":"/build/01e22903839391bc356ac886ec2b2fa7.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"Notebooks","level":1},{"slug":"notebooks.example1","title":"📘 Example Notebook 1","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.example2","title":"📘 Example Notebook 2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static"},"routes/$":{"config":{"version":1,"myst":"1.3.25","options":{"hide_toc":true,"hide_footer_links":true,"folders":true},"nav":[],"actions":[],"projects":[{"github":"https://github.com/eoxhub-workspaces/documentation/","id":"5aa0318b-5bc1-41e2-b1d4-053e8b61961b","exports":[],"bibliography":[],"title":"Location for eodashboard notebooks","index":"readme","pages":[{"title":"External Notebooks","level":1},{"title":"Eurodatacube","level":2},{"title":"Notebooks","level":3},{"slug":"external-notebooks.eurodatacube.notebooks.readme","title":"Jupyter notebooks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Notebooks","level":4},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.readme","title":"Euro Data Cube Notebooks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":5},{"title":"Contributions","level":5},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-ai4arctic-sea-ice","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-biomass-forest-observation-sys","title":"AIREO pilot dataset - Biomass (Forest Observation System)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-cap","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-spacenet7","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aot-covid19","title":"Aerosol Optical Thickness (AOT) Anomaly Detection Using Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.batch-zarr-output","title":"Generating Zarr data cubes with Sentinel Hub Batch API","description":"","date":"","thumbnail":"/build/68dffbf744fa42f4bf3d35e55684984e.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.client-side-processing-using-mass-sh","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.cmems-data-download","title":"Cmems Data Download","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.detect-trucks-sentinel2","title":"Detect Trucks using Sentinel-2 data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.drought-monitoring","title":"Drought impact monitoring platform","description":"","date":"","thumbnail":"/build/ad5c19782b006f72352ae57794305840.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-africa-cube-africa-custom-contest","title":"Custom Script Contest – Urban Growth in Africa","description":"","date":"","thumbnail":"/build/e9275f3fe80a704e2f5aa1ec1220e48a.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-byoc-tutorial","title":"How to bring your own data to EDC: Using Sentinel Hub Python package","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-demo-phi-week-v2","title":"xcube-gen and xcube-geodb Hands-On Workshop Φ-Week 2020","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-geodb-4-eurocrops-demo","title":"Demonstration of Eurocrops data use in geoDB","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-notebook-lstm","title":"South Africa Crop Type Classification on Euro Data Cube (EDC)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-usecase-lpis-crop-type-classification","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.eurocrops-crop-classification-example","title":"Crop-classification using Sentinel-2 time-series","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ghsl-urban-delineation","title":"\u003cb\u003eUrban delineation\u003cb\u003e","description":"","date":"","thumbnail":"/build/7bbf545a5eae1d9ebdb91ae42b261063.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.globalearthmonitor-example","title":"Pre-requisites","description":"","date":"","thumbnail":"/build/205c1ded6bd59771975a9fbd3753fd3b.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.gpu-support-eoxhub","title":"GPU-Support on EOxHub","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.gran-chaco-phiweek","title":"ESA EO \\phi- week 2020","description":"","date":"","thumbnail":"/build/80cee7db6cdc7002ceedda5689f889fa.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.howtolulc-batch-updated-210621","title":"How To: Land-Use-Land-Cover Prediction for Slovenia - using the Batch Processing API","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.lpis-lulc-slo","title":"LPIS Use Case for Land Use / Land Cover Classification","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.lps2022-leverage-euro-data-cube-services","title":"Living Planet Symposium 2022 Training Session","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.no2-analysis-covid19-lockdowns","title":"Impact of Covid19 induced lockdown on NO2 levels","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.no2-so2-trend-veda-api-igarss-2023","title":"Using the NASA VEDA EOAPI","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ogc-edc","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.openeo-client-demo","title":"openEO Client Demo","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.race-finishedgoodsinventory-inidcator","title":"Finished Goods Inventory indicator for RACE","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.third-party-planetscope","title":"Third Party Data Import - PlanetScope","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.xcube-access-datasets","title":"Using xcube to access non-commercial and commercial data sets","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.xcube-viewer-as-a-service-in-edc1","title":"Visualizing data with xcube viewer in EuroDataCube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-evaluation-workshop","title":"DAPA Evaluation Workshop: Introduction \u0026 Documentation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-1-cube-sentinel-2","title":"DAPA Tutorial #1: Cube - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-2-area-sentinel-2","title":"DAPA Tutorial #2: Area - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-3-timeseries-sentinel-2","title":"DAPA Tutorial #3: Timeseries - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-4-value-sentinel-2","title":"DAPA Tutorial #4: Value - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-5-dem","title":"DAPA Tutorial #5: DEM","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.fairicube.fairicube-data-access-demonstration","title":"EDC Sentinel Hub - data access using xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-australian-bushfires","title":"Australian Bushfires","description":"","date":"","thumbnail":"/build/ab194b4f8c40a2b9d64d8a85e37ce1fd.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["IGARSS-22","EO Dashboard"],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-data-access","title":"Data Access","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-detect-trucks-sentinel2","title":"Truck Detection Exercise","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-lockdown-in-venice","title":"Environmental Impacts of Lockdown in Venice, Italy during 2020","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-nasa-api-lockdown-in-venice","title":"Lockdown in Venice","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-no2-timeseries-analysis","title":"NO2 timeseries analysis","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-timeseries-stac-api-single-vs-multi","title":"Time series using STAC API statistics endpoints","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"Curated","level":5},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.access-iacs-data","title":"How to access IACS Spatial Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-access-cci-data","title":"Access CCI data with xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-first-steps","title":"First steps on the Euro Data Cube platform","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-1-manage-datasets-v11","title":"Manage Collections in your GeoDB","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-2-explore-datasets-2","title":"Exploring Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-3-share-datasets1","title":"Sharing Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-access-urban-atlas-data-v1","title":"[xcube-geodb] How to accesss EEA Urban Atlas Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-data-access","title":"EDC Sentinel Hub - data access using xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinelhub-datafusion-basic","title":"EDC Sentinel Hub: Data Fusion","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinelhub-datafusion-ndvi","title":"EDC Sentinel Hub: Data Fusion","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-datasets","title":"EDC Sentinel Hub - using xcube to access different data sets in Sentinel Hub","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-setup","title":"Setup for EDC core API access using xcube client library","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-xcube-integration","title":"EDC Sentinel Hub - XCUBE integration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-usecase-ndvi-timeline","title":"NDVI timeline","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.eo-learn","title":"Using eo-learn in EDC: a starter’s guide.","description":"","date":"","thumbnail":"/build/5a1f8475f0c3652f4630d03d72891b98.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.esdl-edc-v0-2","title":"Earth System Data Lab Tutorial @ Euro Data Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.exploring-time-and-space-with-edc","title":"Exploring Time and Space: A guide to accessing, analysing and visualising data in the Euro Data Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.how-to-access-dem-data-through-sentinel-hub-api","title":"How to access DEM data through Sentinel Hub API","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.sentinelhub-py","title":"Using Sentinel Hub Process API in EDC: a starter’s guide.","description":"","date":"","thumbnail":"/build/01e22903839391bc356ac886ec2b2fa7.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"Notebooks","level":1},{"slug":"notebooks.example1","title":"📘 Example Notebook 1","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.example2","title":"📘 Example Notebook 2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"page":{"version":1,"kind":"Notebook","sha256":"a4605ec1fea4c6b16f74b28f8c517b86cf3abd201291ec177e65408b66995259","slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.howtolulc-batch-updated-210621","location":"/external_notebooks/eurodatacube/notebooks/notebooks/contributions/HowToLULC_batch_updated_210621.ipynb","dependencies":[],"frontmatter":{"title":"How To: Land-Use-Land-Cover Prediction for Slovenia - using the Batch Processing API","content_includes_title":false,"kernelspec":{"name":"edc","display_name":"EDC 2022.02 (Python3)","language":"python"},"github":"https://github.com/eoxhub-workspaces/documentation/","numbering":{"title":{"offset":5}},"edit_url":"https://github.com/eoxhub-workspaces/documentation//blob/main/external_notebooks/eurodatacube/notebooks/notebooks/contributions/HowToLULC_batch_updated_210621.ipynb","exports":[{"format":"ipynb","filename":"HowToLULC_batch_updated_210621.ipynb","url":"/build/HowToLULC_batch_upda-3533d22d987ea755a2005baff38c4b4b.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"This notebook is based on the ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"mCcOF3AP37"},{"type":"link","url":"https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Land-User-Land-Cover Prediction example","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"VtxtIoHDLS"}],"urlSource":"https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html","key":"LCfJl0Kr5K"},{"type":"text","value":" described in the ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"tifIiXN7K7"},{"type":"link","url":"https://eo-learn.readthedocs.io/en/latest/index.html","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"EOLearn documentation","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"XgVQbVhEEu"}],"urlSource":"https://eo-learn.readthedocs.io/en/latest/index.html","key":"qWBQWJeebo"},{"type":"text","value":". The example workflow uses ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"dZGcVCo5bU"},{"type":"inlineCode","value":"EOLearn","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"nFdgqbHsjc"},{"type":"text","value":" to construct a machine learning pipeline for predicting the land use / land cover for the region of the Republic of Slovenia. The import of satellite images to train a model which is then used for the predictions is performed using an ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"MzryWeO5Lx"},{"type":"link","url":"https://eo-learn.readthedocs.io/en/latest/eotasks.html","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"EOTask","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"BfeGMbFl2F"}],"urlSource":"https://eo-learn.readthedocs.io/en/latest/eotasks.html","key":"UrsEhMVOrc"},{"type":"text","value":" based on Sentinel Hub’s ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"jxjN8AkRMM"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/api/process/","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"process API","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"OmyP9j1GWh"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/api/process/","key":"EDDyItmuid"},{"type":"text","value":". While this approach is efficient for most applications, querying large volumes of data and performing the processing steps locally can complicate scaling to larger areas (country or continent-wide analysis for example).","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"VufqC6Kdwa"}],"key":"a0oY6Gqolt"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"In this notebook, we present an alternative workflow, where the acquisition of the satellite data, processing of derived products and resampling over a fixed timestep is performed with Sentinel Hub services. The process allows for much faster processing times over large areas, reduced costs and the user needs less computational resources to process the data.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"a6WZ1ai6kZ"}],"key":"MbqH1yidrD"}],"key":"xNbsVIRcX9"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Before you start","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LyRGn2UGio"}],"identifier":"before-you-start","label":"Before you start","html_id":"before-you-start","implicit":true,"key":"ZyIDVjELFQ"},{"type":"heading","depth":5,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Requirements","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Rmpp6KqDz9"}],"identifier":"requirements","label":"Requirements","html_id":"requirements","implicit":true,"key":"usyndXx94t"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"In order to run the example you will need an EDC Sentinel Hub API access (Enterprise plan) to access satellite data and an ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Z5GcRX9tS5"},{"type":"link","url":"https://aws.amazon.com/s3/","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Amazon Bucket","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"a666QeLUEV"}],"urlSource":"https://aws.amazon.com/s3/","key":"FMiaUWVLO0"},{"type":"text","value":" to save the outputs to.","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"QMis3YgciU"}],"key":"qIn1FOxPyP"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"To configure the notebook to work with your Sentinel Hub account you can use the ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"RyaVe38iSC"},{"type":"inlineCode","value":"edc","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"r6Hx2zpiVB"},{"type":"text","value":" configurator as shown below. You will also need to specify your Amazon Bucket access credentials (user id and secret for ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"p7jgwXZo9v"},{"type":"link","url":"https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"programmatic access","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"wButNPYvwW"}],"urlSource":"https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys","key":"ks7BAgHSU3"},{"type":"text","value":").","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Mua3mSdbuH"}],"key":"LydhnvP4wW"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Note: You may need to update the ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"FQiiLYMk9m"},{"type":"inlineCode","value":"eolearn","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"I9WUgiLZnk"},{"type":"text","value":" and ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"BEyLx1sUuR"},{"type":"inlineCode","value":"sentinelhub","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"PM4oV1WA0E"},{"type":"text","value":" package to the latest version.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"qVBE52iU80"}],"key":"ttPUf0amCH"}],"key":"VASfXpWjWK"}],"key":"GZ4oVNE4KJ"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Input data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Tu4mXciczj"}],"identifier":"input-data","label":"Input data","html_id":"input-data","implicit":true,"key":"ZiG9ai9IPU"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"You can access the example input data from the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"etlxrK5iZc"},{"type":"link","url":"https://github.com/sentinel-hub/eo-learn/tree/master/examples/batch-processing/data","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Github repository","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qOfCxk2dht"}],"urlSource":"https://github.com/sentinel-hub/eo-learn/tree/master/examples/batch-processing/data","error":true,"key":"b5liY2ufmc"}],"key":"VLFPtAniYN"}],"key":"wMawO381OA"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jYeFa7VbNr"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"hJ3QfUs5gC"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This notebook is organised in 2 main sections:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"aNEPcDDZmb"}],"key":"Ri87ysk0wS"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Part 1","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"W25PJ0NSK0"}],"key":"TFq023HPlQ"},{"type":"text","value":" is dedicated to creating and running the Batch Process with ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"am8BbGks04"},{"type":"link","url":"https://sentinelhub-py.readthedocs.io/en/latest/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Sentinel Hub Python package","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"UADK0Ro8tw"}],"urlSource":"https://sentinelhub-py.readthedocs.io/en/latest/","key":"CNwFyKTzb2"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"hCcaZB6LsJ"}],"key":"UsHr2nyN28"}],"key":"CGjKZzF8y5"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Part 2","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"dT7rQ303Na"}],"key":"rnXVsXbxac"},{"type":"text","value":" focusses on converting the results obtained in ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"LVo8Z0Mr72"},{"type":"emphasis","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Part 1","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"eE4MtnzG2I"}],"key":"lSzvOaxMrU"},{"type":"text","value":" to ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"iJozEQRuMM"},{"type":"link","url":"https://eo-learn.readthedocs.io/en/latest/examples/core/CoreOverview.html#EOPatch","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"EOPatches","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"tu0b1gaCzU"}],"urlSource":"https://eo-learn.readthedocs.io/en/latest/examples/core/CoreOverview.html#EOPatch","key":"vNuHKSgFRl"},{"type":"text","value":", the format used in ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"UnwkWBv0V8"},{"type":"link","url":"https://eo-learn.readthedocs.io/en/latest/index.html","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"EOLearn","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"qAldCCA3Oh"}],"urlSource":"https://eo-learn.readthedocs.io/en/latest/index.html","key":"TGUUyoXcee"},{"type":"text","value":".","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"gZhLRidKw0"}],"key":"Z7pH1obBHl"}],"key":"VuoWSQj6JG"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Part 3","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"JUbTlTbAwV"}],"key":"UVec7HKB6L"},{"type":"text","value":" shows how to integrate the workflow into the ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"cdeICfVVu5"},{"type":"link","url":"https://github.com/sentinel-hub/eo-learn/blob/master/examples/land-cover-map/SI_LULC_pipeline.ipynb","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"LULC pipeline","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"eOgaZa7d2K"}],"urlSource":"https://github.com/sentinel-hub/eo-learn/blob/master/examples/land-cover-map/SI_LULC_pipeline.ipynb","data":{"kind":"file","org":"sentinel-hub","repo":"eo-learn","reference":"master","file":"examples/land-cover-map/SI_LULC_pipeline.ipynb","raw":"https://raw.githubusercontent.com/sentinel-hub/eo-learn/master/examples/land-cover-map/SI_LULC_pipeline.ipynb"},"internal":false,"protocol":"github","key":"voCkcvE0xk"},{"type":"text","value":" to predict LULC using machine learning algorithms.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"xSfD16Mdom"}],"key":"AkGnvaMXYl"}],"key":"Uyv9CARBnF"}],"key":"dSyfkAutQ7"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Let’s start!","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"FuSE4kx61E"}],"key":"U1ahefwYBD"}],"key":"jVYQCaZWO2"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Basics of Python data handling and visualization\nimport numpy as np\nimport geopandas as gpd\nfrom shapely.geometry import Polygon\nfrom shapely.wkt import loads\nimport rasterio\n\n# Sentinel Hub\nfrom sentinelhub import (SentinelHubBatch, SentinelHubRequest, Geometry, CRS, BBox, DataCollection, MimeType, SHConfig,\n                         BatchSplitter)\n\n# EOLearn\nfrom eolearn.core import (EOPatch, EONode, EOWorkflow, EOExecutor, OverwritePermission, FeatureType, SaveTask, LoadTask,\n                          linearly_connect_tasks)\nfrom eolearn.geometry import VectorToRasterTask, ErosionTask\nfrom eolearn.ml_tools import FractionSamplingTask\n\n# Amazon\nimport boto3\n\n# Utilities\nfrom pathlib import Path, PosixPath\nimport datetime\nfrom tqdm.auto import tqdm\nfrom fs_s3fs import S3FS\nfrom fs import open_fs\nfrom aenum import MultiValueEnum\nfrom time import sleep\n\n# Visualisation\nimport matplotlib.pyplot as plt\nfrom matplotlib.colors import ListedColormap, BoundaryNorm\nfrom matplotlib.patches import Patch\n\nimport os\nimport warnings\nwarnings.filterwarnings('ignore')","key":"nmg6yTZ4Y0"},{"type":"output","id":"qZIeqctkmUFpq_S-69IIq","data":[],"key":"ifpfNZhdmV"}],"key":"P3b9b9jGEH"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"%matplotlib inline","key":"dVYmXPcoxI"},{"type":"output","id":"XswSGdaEYURFA7QWnEDGG","data":[],"key":"rTyaAh2l8Q"}],"key":"UXODYUjaW6"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Part 1: create and run the Batch process","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rEJD6x7jRp"}],"identifier":"part-1-create-and-run-the-batch-process","label":"Part 1: create and run the Batch process","html_id":"part-1-create-and-run-the-batch-process","implicit":true,"key":"oMOxAXdE9u"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Run ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qRBsI2BgRn"},{"type":"inlineCode","value":"Sentinel Hub Batch Processing","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Eh3eivkq7y"},{"type":"text","value":" to request data for an area of interest, and download the satellite products (bands and derived products) to an Amazon S3 Bucket.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kIZxf2r0Vu"}],"key":"kvurtyrLM1"}],"key":"NDG9zkNxzM"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"First specify Amazon S3 bucket client ID and secret (See ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sbyUjuHBdu"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Requirements","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"I336gFNuE3"}],"key":"JqTqtY7zmc"},{"type":"text","value":" above)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZhKW3KmpMC"}],"key":"cn5cKmDrCl"}],"key":"rja7TSVDUW"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"AWS_ID = \"aws-client-id\"\nAWS_SECRET = \"aws-client-secret\"","key":"AeeKw2zoSd"},{"type":"output","id":"vdIu3-gvULwOMEsX3Op8V","data":[],"key":"JT9eOFCDji"}],"key":"c09ck1DNkw"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Sentinel Hub authentification","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"coU9SspIsc"}],"identifier":"sentinel-hub-authentification","label":"Sentinel Hub authentification","html_id":"sentinel-hub-authentification","implicit":true,"key":"zU4DRWe9O5"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the following cell, we will create an instance of ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dOqYHzOdkp"},{"type":"inlineCode","value":"sentinelhub.SHConfig","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"H0pIJbfUMv"},{"type":"text","value":" for the Sentinel Hub services. The token is only valid for 1 hour. If you get an message of type ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tHWDDBNpag"},{"type":"inlineCode","value":" accessToken signature expired","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"b3lmGwVII9"},{"type":"text","value":" later in the workflow, just re-run the next cell. See more ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"p7kLjyKxoF"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/api/overview/authentication/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"information here","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YbNL5esD4V"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/api/overview/authentication/","key":"UaabT4lsjN"}],"key":"LgnoQKpaQb"}],"key":"sB4fm82vpr"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Set up credentials for use with batch\nconfig = SHConfig()\nconfig.sh_client_id = os.environ[\"SH_CLIENT_ID\"]\nconfig.sh_client_secret = os.environ[\"SH_CLIENT_SECRET\"]\n\nif config.sh_client_id == '' or config.sh_client_secret == '':\n    print(\"Warning! To use Sentinel Hub services, please provide the credentials (client ID and client secret).\")","key":"H5yG4nKQ4D"},{"type":"output","id":"C7rHXAxA5GKG7ILC8mE_M","data":[],"key":"GaVVYgBGgQ"}],"key":"zjoLkkZGcT"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1.1 Define the Area-of-Interest (AOI):","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EmCXYf2n5O"}],"identifier":"id-1-1-define-the-area-of-interest-aoi","label":"1.1 Define the Area-of-Interest (AOI):","html_id":"id-1-1-define-the-area-of-interest-aoi","implicit":true,"key":"LoPksgF1Nr"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Although the Sentinel Hub Batch processing is designed for large areas, running this example Notebook for the entire Republic of Slovenia would be costly (in terms of storage and processing units used). To make the example reproducible, we will run the example for a smaller region: the administrative boundaries of the capital, Ljubljana.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"h2dS3Uhkwu"}],"key":"Zv9T3Z3DCs"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"A geographical shape of Slovenia was taken from ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"OTTB2ztuVj"},{"type":"link","url":"http://alas.matf.bg.ac.rs/~mi09109/svn.html","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"this webpage","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"sUxmshsY0J"}],"urlSource":"http://alas.matf.bg.ac.rs/~mi09109/svn.html","key":"Zjcb6w3hvk"},{"type":"text","value":". The region of Ljubljana was extracted using QGIS and saved as a new geojson. In the following cell the ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"tuQX80blE0"},{"type":"inlineCode","value":"geojson","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"WUbkAGools"},{"type":"text","value":" is imported and a buffer of 500 m is applied to it (to make sure to cover the entire extent). The shape ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"yvpskTcgYB"},{"type":"inlineCode","value":"svn_border.geojson","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"NuDf33dU1f"},{"type":"text","value":" is available ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"bK6KeE2Arr"},{"type":"link","url":"https://github.com/sentinel-hub/eo-learn/blob/master/examples/batch-processing/data/ljubljana.geojson","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"pGZQgyMK6T"}],"urlSource":"https://github.com/sentinel-hub/eo-learn/blob/master/examples/batch-processing/data/ljubljana.geojson","data":{"kind":"file","org":"sentinel-hub","repo":"eo-learn","reference":"master","file":"examples/batch-processing/data/ljubljana.geojson","raw":"https://raw.githubusercontent.com/sentinel-hub/eo-learn/master/examples/batch-processing/data/ljubljana.geojson"},"internal":false,"protocol":"github","key":"sBhkC043EF"},{"type":"text","value":".","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"xelOboQszw"}],"key":"AiPXlclpRS"}],"key":"ZyfmrLPrNu"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Because the Batch Processing API can’t process shapes with too many coordinates (up to 1500 points are supported), a simplified polygon covering the extent of the geographical shape is created (using ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"eUO3dqT96t"},{"type":"inlineCode","value":"simplify","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"ItkPU6LW9D"},{"type":"text","value":"), and the coordinates extracted. In the current example, this step is optional, but was included for demonstration purposes.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"DET0GXQWXV"}],"key":"VQZrRT7JFU"}],"key":"lhHTru783g"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"The shape is split into smaller tiles by the batch process (see further down).","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"MgKcxT3kje"}],"key":"AKQcmqdQKA"}],"key":"KDa7Uvwjre"}],"key":"vwaI9z1Ez4"}],"key":"qu4068wZSl"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1.1.1 Import data, plot AOI, and check the points count","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"X1OCdXylTA"}],"identifier":"id-1-1-1-import-data-plot-aoi-and-check-the-points-count","label":"1.1.1 Import data, plot AOI, and check the points count","html_id":"id-1-1-1-import-data-plot-aoi-and-check-the-points-count","implicit":true,"key":"ELbjYJDIOM"}],"key":"tPv4mOdMi5"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"ljubljana_data = {\n    \"adm1_code\": \"SVN-962\",\n    \"Shape_Leng\": 1.01284310866,\n    \"Shape_Area\": 0.0321361298149,\n    \"diss_me\": 962,\n    \"adm1_code_\": \"SVN-962\",\n    \"iso_3166_2\": \"SI-\",\n    \"wikipedia\": None,\n    \"sr_sov_a3\": \"SVN\",\n    \"sr_adm0_a3\": \"SVN\",\n    \"iso_a2\": \"SI\",\n    \"adm0_sr\": 1,\n    \"admin0_lab\": 2,\n    \"name\": \"Osrednjeslovenska\",\n    \"name_alt\": \"Ljubljana\",\n    \"name_local\": None,\n    \"type\": \"Statisticna Regije\",\n    \"type_en\": \"Statistical Region\",\n    \"code_local\": None,\n    \"code_hasc\": \"SI.LJ\",\n    \"note\": None,\n    \"hasc_maybe\": None,\n    \"region\": None,\n    \"region_cod\": None,\n    \"region_big\": None,\n    \"big_code\": None,\n    \"provnum_ne\": 111,\n    \"gadm_level\": 2,\n    \"check_me\": 0,\n    \"scalerank\": 10,\n    \"datarank\": 8,\n    \"abbrev\": None,\n    \"postal\": \"LJ\",\n    \"area_sqkm\": 0.0,\n    \"sameascity\": -99,\n    \"labelrank\": 10,\n    \"featurecla\": \"Admin-1 scale rank\",\n    \"admin\": \"Slovenia\",\n    \"name_len\": 17,\n    \"mapcolor9\": 2,\n    \"mapcolor13\": 12,\n    \"geometry\": loads(\"POLYGON ((926425.6431983189 5123589.170469966, 928023.7898916167 5121898.015502713, 930381.3263176056 5121120.044066284, 932172.4018085758 5120986.554265775, 932397.4164062712 5120015.896563099, 932581.6593906969 5119111.593260468, 934172.9482895343 5118295.244651059, 935552.5077836656 5118035.394490954, 937426.0230920448 5118284.182013701, 938974.6457346278 5118919.953589984, 939436.4214525614 5118863.607289625, 940115.1034137213 5118470.883597136, 941661.5894687981 5118743.682363604, 942560.1680774961 5118144.887344502, 942735.089611518 5117724.728520735, 943609.3171581865 5117355.118745014, 943441.7280510126 5116506.263347512, 943476.1717744432 5116029.795751704, 943357.5915462442 5115669.221437243, 943883.7408222458 5115060.955142928, 944401.2580603813 5114573.278955945, 944833.0906094413 5113938.04334936, 945085.8948330702 5113278.305480363, 944854.481928225 5112644.071482883, 945156.6899264865 5110470.215581522, 944463.2053827948 5109883.358539728, 943213.6218703112 5110424.993391757, 942450.1435025067 5110975.866591577, 942002.8597709246 5111157.176478082, 941344.5252792852 5111086.772156567, 940250.6079617536 5110362.048641361, 939987.9768291702 5109818.169601077, 939577.3549704123 5109318.540062902, 938375.9969106899 5108514.419667248, 936051.6183637844 5108285.692598732, 934876.7259672079 5109033.28003256, 932469.7213315063 5110954.777737652, 930583.1400775139 5111205.907107501, 928967.0312091864 5110810.191967965, 928500.3034628865 5110414.20558999, 928620.5574546311 5109381.365577888, 928509.1394418445 5107865.126862759, 926900.3871498384 5108624.263870159, 926099.3870347773 5108522.555558871, 924410.7564367288 5107768.401844963, 923998.0565383206 5106756.500797831, 921805.3913033886 5105602.201608885, 921016.5103012786 5106199.915835703, 921000.6721904315 5106960.150802306, 921510.2298354742 5107796.748059389, 922130.4894534599 5108482.394295073, 922543.3747806235 5109142.328402843, 922331.4077197406 5109594.952222921, 921330.1897642646 5110247.196747772, 920127.357732374 5111618.263417895, 920919.0829407133 5112200.206929425, 920960.7590644892 5112471.259680815, 920960.1393605953 5113007.610408505, 920817.7315732187 5114030.260011839, 920568.43797675 5114679.336590691, 920342.5783931809 5115162.761556501, 920144.6578527923 5115414.51555307, 919381.6598506232 5117060.85083882, 919108.5832219544 5117356.510004638, 918652.2145139208 5117515.658383243, 918148.0906285422 5117492.790082054, 919763.7540312987 5118866.304184149, 920148.1329041517 5119054.139046485, 920302.0922611563 5119266.565990494, 920048.0836169412 5119635.582898952, 919720.6514727444 5120022.646377376, 919448.8270490387 5120476.973462088, 919145.8071278529 5121211.784814458, 918820.2671607826 5121397.144247358, 918838.9195219886 5121652.192733762, 918920.7809071594 5122038.452927704, 919230.1471832383 5122440.292463314, 919706.9407822394 5122680.600692804, 920717.1690435053 5122744.185280813, 921763.7085836534 5123444.913719906, 922373.4495737455 5124545.402263708, 922960.0301947873 5124063.914497981, 923791.9073106179 5124210.8840452, 925808.8960918575 5125017.186416848, 926425.6431983189 5123589.170469966))\")\n}","key":"xRGlDS7WVL"},{"type":"output","id":"txZjaKKoGX6tNLWpwnSzt","data":[],"key":"C5ElLlhpuz"}],"key":"LzBbvHQS4G"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Folder where data for running the notebook is stored\nINPUT_DATA = Path(\"./data/\") \n\n# Load geojson file\n# country = gpd.read_file(INPUT_DATA.joinpath('ljubljana.geojson'))\ncountry = gpd.GeoDataFrame(ljubljana_data, crs=\"EPSG:32632\", index=[0])\n\n# Apply a 500m buffer to the shape (indicate a specific feature with [i])\ncountry_buffer = country[country.geometry.name][0].buffer(500)\n\n# Get the country's shape in polygon format\ncountry_shape = country.geometry.values[-1]\n\n# Plot country\ncountry.plot()\nplt.axis('off')\n\n# Print size and points count\nprint('Dimension of the area is {0:.0f} x {1:.0f} m2'.format(country_shape.bounds[2] - country_shape.bounds[0],\n                                                             country_shape.bounds[3] - country_shape.bounds[1]))\nprint('Points count after buffer: ', len(list(country_buffer.exterior.coords)))","key":"QdoIdrGwSC"},{"type":"output","id":"IqMGyaN0f2iVjSa5ZWtDA","data":[{"name":"stdout","output_type":"stream","text":"Dimension of the area is 27009 x 19415 m2\nPoints count after buffer:  362\n"},{"output_type":"display_data","metadata":{"needs_background":"light"},"data":{"image/png":{"content_type":"image/png","hash":"655ccbe901a08c7d831bcb813e8ed402","path":"/build/655ccbe901a08c7d831bcb813e8ed402.png"},"text/plain":{"content":"\u003cFigure size 432x288 with 1 Axes\u003e","content_type":"text/plain"}}}],"key":"q7IvGT51gV"}],"key":"bcMtUeI7mt"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1.1.2 Get simplified bands and plot geographical extent  that will be used in requests","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eFfemGUBWT"}],"identifier":"id-1-1-2-get-simplified-bands-and-plot-geographical-extent-that-will-be-used-in-requests","label":"1.1.2 Get simplified bands and plot geographical extent  that will be used in requests","html_id":"id-1-1-2-get-simplified-bands-and-plot-geographical-extent-that-will-be-used-in-requests","implicit":true,"key":"chSqOBR8Vj"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Note","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"fTe13czEex"}],"key":"EXOge7QkuB"},{"type":"text","value":": Make sure the points count does not exceed 1500 points after simplification.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"otzuoLzldK"}],"key":"vPBsdPUhYe"}],"key":"HWzXbTJcJL"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Get the simplified shape of the country\ncountry_sim = country_buffer.simplify(100) #unit in meter\n\n# Check the amount of points forming the polygon\nprint('Points count: ',len(list(country_sim.exterior.coords)))\n\n# Plot shape\nplt.figure()\nplt.axis('off')\nplt.plot(*country_sim.exterior.xy)\nplt.show()","key":"wiLc1LD3tx"},{"type":"output","id":"1KLR_quuliJkE8wzYBI9V","data":[{"name":"stdout","output_type":"stream","text":"Points count:  72\n"},{"output_type":"display_data","metadata":{"needs_background":"light"},"data":{"image/png":{"content_type":"image/png","hash":"0fcfc48474171a698b9850a2871dd71e","path":"/build/0fcfc48474171a698b9850a2871dd71e.png"},"text/plain":{"content":"\u003cFigure size 432x288 with 1 Axes\u003e","content_type":"text/plain"}}}],"key":"em8ikGNbt2"}],"key":"k8kVOhwk0I"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1.2 Use Batch to fetch Sentinel-2 data and resample to even timesteps","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"n6J843PKEe"}],"identifier":"id-1-2-use-batch-to-fetch-sentinel-2-data-and-resample-to-even-timesteps","label":"1.2 Use Batch to fetch Sentinel-2 data and resample to even timesteps","html_id":"id-1-2-use-batch-to-fetch-sentinel-2-data-and-resample-to-even-timesteps","implicit":true,"key":"IHje0JRmUC"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Now that the area of interest is defined, we will set up the parameters necessary to run the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"L47KQD9lUk"},{"type":"inlineCode","value":"Batch","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tO5kR5fYXH"},{"type":"text","value":" process, and go through the different steps to acquire the data.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"H428Li3W6Z"}],"key":"gFrncicoZs"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We will collect Sentinel-2 data and retrieve the following products:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"AvdeDUQoY8"}],"key":"E6AUbZ132g"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":7,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"L1C custom list of bands [B02, B03, B04, B08, B11, B12], which corresponds to [B, G, R, NIR, SWIR1, SWIR2] wavelengths.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"WbM8kUxFCK"}],"key":"fd8VyiBYRg"}],"key":"xjmjiBlzYS"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Calculated NDVI, NDWI, and NDBI information","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"wYd07klU7e"}],"key":"SmkAvaSALs"}],"key":"RRbreXyIwy"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"A mask of validity, based on acquired data from Sentinel and cloud coverage. Valid pixel is if:","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"MoylM1QuDp"}],"key":"LGNHq9YzhR"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"IS_DATA == True","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"ObyoDkEodo"}],"key":"wdz7n7Lzmh"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"CLOUD_MASK == 0 (1 indicates cloudy pixels and 255 indicates ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"RAEBJkqpG2"},{"type":"inlineCode","value":"NO_DATA","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"xuNOHUiFej"},{"type":"text","value":")","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"Z2TXxyJZ7Z"}],"key":"uqr7Ejn1l1"}],"key":"RKekYmI60n"}],"key":"cHttc3YGdB"}],"key":"qoma5YEByS"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"All returned products will be returned for specific time intervals between 2 dates. If no data is present on the interval date, the service returns a linear interpolation between the previous and following valid data. The ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"oDLgIi2ij2"},{"type":"inlineCode","value":"Batch","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"FdBacjEfvP"},{"type":"text","value":" request merges the ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"VUMtQVY5ZP"},{"type":"link","url":"https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#Define-the-workflow","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"EOLearn data download step","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"Xlb8ojduiw"}],"urlSource":"https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#Define-the-workflow","key":"Do9tYvweFt"},{"type":"text","value":" and ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"Csf9LXDESY"},{"type":"link","url":"https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#5.-Prepare-the-training-data","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"training data preparation step","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"cVPxgX2q9i"}],"urlSource":"https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#5.-Prepare-the-training-data","key":"NePyMHZx59"},{"type":"text","value":" into one.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"xGCffVnekC"}],"key":"deEIC7xGrC"}],"key":"C4QRH2L3xc"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1.2.1 Prepare Batch input parameters","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"q50TzAbZ2p"}],"identifier":"id-1-2-1-prepare-batch-input-parameters","label":"1.2.1 Prepare Batch input parameters","html_id":"id-1-2-1-prepare-batch-input-parameters","implicit":true,"key":"bObnxM4xbj"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Here we set the start and end date of the time interval that we want to query, as well as a time step in days for which data will be returned.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kphCRIDpLf"}],"key":"eeyhV8oKHR"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We also specify the name of the Amazon S3 Bucket that was created and parameterised as shown earlier.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"C2yLAP7DMu"}],"key":"E9zwPrYN0K"}],"key":"AQIhCM792T"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Date parameters: for this example, we will get data from early April to late October.\nSTART = datetime.date(2019, 4, 1)\nEND = datetime.date(2019, 10, 31)\n\nINTERVAL = 15  # Interval for date resampling in days\n\n# Calculate list of dates for the resampling\ndate_iterator = START\ntimestamps = []\nwhile date_iterator \u003c END:\n    timestamps.append(date_iterator)\n    date_iterator = date_iterator + datetime.timedelta(days=INTERVAL)\n    \n# Amazon bucket name\naws_bucket_name = \"my-amazon-bucket\"","key":"UixORZjzkr"},{"type":"output","id":"SYS5pMjT2GXoyyC6D4H5G","data":[],"key":"nAtbbVCdfU"}],"key":"rGjxlNGLfZ"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Below, we define the evalscript that will perform all the work on Sentinel Hub servers. The script fetches the images, calculates the indices (NDVI, NDWI, and NDBI), and resamples the data to the defined interval.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mq2m7lbjIS"}],"key":"edAyJagOIO"}],"key":"RI7NXA9D9A"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"evalscript = \"\"\"\n//VERSION=3\n\n// Calculate number of bands needed for all intervals\n// Initialise dates and interval\n// Beware: in JS months are 0 indexed\nvar start_date = new Date(2019, 3, 1, 0, 0, 0);\nvar end_date = new Date(2019, 9, 31, 0, 0, 0);\nvar sampled_dates = sample_timestamps(start_date, end_date, 15, 'day').map(d =\u003e withoutTime(d));\nvar nb_bands = sampled_dates.length;\nvar n_valid = 0;\nvar n_all = 0;\n\nfunction interval_search(x, arr) {\n  let start_idx = 0,  end_idx = arr.length - 2;\n\n  // Iterate while start not meets end\n  while (start_idx \u003c= end_idx) {\n    // Find the mid index\n    let mid_idx = (start_idx + end_idx) \u003e\u003e 1;\n\n    // If element is present at mid, return True\n    if (arr[mid_idx] \u003c= x \u0026\u0026 x \u003c arr[mid_idx + 1]) {\n      return mid_idx;\n    }\n    // Else look in left or right half accordingly\n    else if (arr[mid_idx + 1] \u003c= x) start_idx = mid_idx + 1;\n    else end_idx = mid_idx - 1;\n  }\n  if (x == arr[arr.length-1]){\n    return arr.length-2;\n  }\n\n  return undefined;\n}\n\nfunction linearInterpolation(x, x0, y0, x1, y1, no_data_value=NaN) {\n  if (x \u003c x0 || x \u003e x1) {\n    return no_data_value;\n  }\n  var a = (y1 - y0) / (x1 - x0);\n  var b = -a * x0 + y0;\n  return a * x + b;\n}\n\nfunction lininterp(x_arr, xp_arr, fp_arr, no_data_value=NaN) {\n  results = [];\n  data_mask = [];\n  xp_arr_idx = 0;\n  for(var i=0; i\u003cx_arr.length; i++){\n    var x = x_arr[i];\n    n_all+=1;\n    interval = interval_search(x, xp_arr);\n    if (interval === undefined) {\n      data_mask.push(0);\n      results.push(no_data_value);\n      continue;\n    }\n    data_mask.push(1);\n    n_valid+=1;\n    results.push(\n      linearInterpolation(\n        x,\n        xp_arr[interval],\n        fp_arr[interval],\n        xp_arr[interval+1],\n        fp_arr[interval+1], \n        no_data_value\n      )\n    );\n  }\n\n  return [results, data_mask];\n}\n\n\nfunction interpolated_index(index_a, index_b){\n  // Calculates the index for all bands in array\n  var index_data = [];\n  for (var i = 0; i \u003c index_a.length; i++){\n     // UINT index returned\n     let ind = (index_a[i] - index_b[i]) / (index_a[i] + index_b[i]);\n     index_data.push(ind * 10000 + 10000);\n  }\n  \n  return index_data\n}\n\n\nfunction increase(original_date, period, period_unit){\n    date = new Date(original_date)\n    switch(period_unit){\n        case 'millisecond':\n            return new Date(date.setMilliseconds(date.getMilliseconds()+period));\n        case 'second':\n            return new Date(date.setSeconds(date.getSeconds()+period));\n        case 'minute':\n            return new Date(date.setMinutes(date.getMinutes()+period));\n        case 'hour':\n            return new Date(date.setHours(date.getHours()+period));\n        case 'day':\n            return new Date(date.setDate(date.getDate()+period));\n        case 'month':\n            return new Date(date.setMonth(date.getMonth()+period));\n        default:\n            return undefined\n    }\n}\n\nfunction sample_timestamps(start, end, period, period_unit) {\n    var cDate = new Date(start);\n    var sampled_dates = []\n    while (cDate \u003c end) {\n        sampled_dates.push(cDate);\n        cDate = increase(cDate, period, period_unit);\n    }\n    return sampled_dates;\n}\n\nfunction is_valid(smp){\n  // Check if the sample is valid (i.e. contains no clouds or snow)\n  let clm = smp.CLM;\n  let dm = smp.dataMask;\n\n  if (clm === 1 || clm === 255) {\n        return false;\n  } else if (dm !=1 ) {\n        return false;\n  } else {\n  return true;\n  }\n}\n\nfunction withoutTime(intime){\n  // Return date without time\n  intime.setHours(0, 0, 0, 0);\n  return intime;\n}\n\n\n// Sentinel Hub functions\nfunction setup() {\n  // Setup input/output parameters\n    return {\n        input: [{\n            bands: [\"B02\", \"B03\", \"B04\", \"B08\", \"B11\", \"B12\", \"CLM\", \"dataMask\"],\n            units: \"DN\"\n        }],\n      output: [\n          {id: \"B02\", bands: nb_bands, sampleType: SampleType.UINT16},\n          {id: \"B03\", bands: nb_bands, sampleType: SampleType.UINT16},\n          {id: \"B04\", bands: nb_bands, sampleType: SampleType.UINT16},\n          {id: \"B08\", bands: nb_bands, sampleType: SampleType.UINT16},\n          {id: \"B11\", bands: nb_bands, sampleType: SampleType.UINT16},\n          {id: \"B12\", bands: nb_bands, sampleType: SampleType.UINT16},\n          {id: \"NDVI\", bands: nb_bands, sampleType: SampleType.UINT16},\n          {id: \"NDWI\", bands: nb_bands, sampleType: SampleType.UINT16},\n          {id: \"NDBI\", bands: nb_bands, sampleType: SampleType.UINT16},\n          {id: \"data_mask\", bands: nb_bands, sampleType: SampleType.UINT8}\n      ],\n    mosaicking: \"ORBIT\"\n    }\n}\n\n\n// Evaluate pixels in the bands\nfunction evaluatePixel(samples, scenes) {\n  \n  // Initialise arrays\n  var valid_samples = {'B02':[], 'B03':[], 'B04':[], 'B08':[], 'B11':[], 'B12':[]}; \n  \n  var valid_dates = []\n  // Loop over samples. \n  for (var i = samples.length-1; i \u003e= 0; i--){\n      if (is_valid(samples[i])) {\n        valid_dates.push(withoutTime(new Date(scenes[i].date)));\n        valid_samples['B02'].push(samples[i].B02);\n        valid_samples['B03'].push(samples[i].B03);\n        valid_samples['B04'].push(samples[i].B04);\n        valid_samples['B08'].push(samples[i].B08);\n        valid_samples['B11'].push(samples[i].B11);\n        valid_samples['B12'].push(samples[i].B12);\n      }\n  }\n  \n  var [b02_interpolated, b02_dm] = lininterp(sampled_dates, valid_dates, valid_samples['B02'], 0);\n  var [b03_interpolated, b03_dm] = lininterp(sampled_dates, valid_dates, valid_samples['B03'], 0);\n  var [b04_interpolated, b04_dm] = lininterp(sampled_dates, valid_dates, valid_samples['B04'], 0);\n  var [b08_interpolated, b08_dm] = lininterp(sampled_dates, valid_dates, valid_samples['B08'], 0);\n  var [b11_interpolated, b11_dm] = lininterp(sampled_dates, valid_dates, valid_samples['B11'], 0);\n  var [b12_interpolated, b12_dm] = lininterp(sampled_dates, valid_dates, valid_samples['B12'], 0);\n\n  // Calculate indices and return optimised for UINT16 format (will need unpacking)\n  var ndvi = interpolated_index(b08_interpolated, b04_interpolated);\n  var ndwi = interpolated_index(b03_interpolated, b08_interpolated);\n  var ndbi = interpolated_index(b11_interpolated, b08_interpolated);\n  \n  // Return all arrays\n  return {\n            B02: b02_interpolated,\n            B03: b03_interpolated,\n            B04: b04_interpolated,\n            B08: b08_interpolated,\n            B11: b11_interpolated,\n            B12: b12_interpolated,\n            NDVI: ndvi,\n            NDWI: ndwi,\n            NDBI: ndbi,\n            data_mask: b02_dm\n  }\n}\n\"\"\"","key":"ujfKB4IP2M"},{"type":"output","id":"wynBl8beU0SEVEcodiE6z","data":[],"key":"KUNVzDq9JL"}],"key":"LDLLEpB4az"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Next, we set the parameters passed to the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eovXVzh6av"},{"type":"inlineCode","value":"SentinelHubRequest()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dV4iCHNUic"},{"type":"text","value":" and the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bER9F2zajs"},{"type":"inlineCode","value":"SentinelHubBatch()","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KbBQcb8DJo"},{"type":"text","value":" to run the batch processing request.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HBcS5CEKtn"}],"key":"nh17JXfU6f"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The following parameters are specified:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uy99b2pw8k"}],"key":"PeKiu0vYJt"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"evalscript","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"YZp12UgoLQ"}],"key":"RtFy3wgOZe"},{"type":"text","value":": the evalscript that was written above.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"pSaoazffC3"}],"key":"j3YFAuycH1"}],"key":"Yc20CdMAgy"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"strong","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"geometry","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"JdO9ZsmSZ6"}],"key":"YVvrljP3lM"},{"type":"text","value":": the geometry parameters representing the area of interest.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"IXTB5Mq0H0"}],"key":"F31J0S1XsT"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"The input type should be ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"j7VTxU9EZW"},{"type":"inlineCode","value":"class 'shapely.geometry.polygon.Polygon'","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"I1wSg3N31a"},{"type":"text","value":" returned from ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"NRV9xLzMNT"},{"type":"link","url":"https://geopandas.org/data_structures.html","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"the “geometry” column","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"RIChfYceoj"}],"urlSource":"https://geopandas.org/data_structures.html","key":"F4BrTFy16L"},{"type":"text","value":" (","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"WMVGPuVCQz"},{"type":"inlineCode","value":"gdf[gdf.geometry.name][i]","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"jXj5P7WkHq"},{"type":"text","value":").","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"QQ7LWgNNpV"}],"key":"IdweUudpfG"}],"key":"X6mrIK5k3h"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"crs","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"BpZrkesssf"}],"key":"ckzPITAXIl"},{"type":"text","value":": the code corresponding to the projection parameters of the input data.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"WLFAplSX3S"}],"key":"sUbE7Jw9VZ"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"See the ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"fyqsvxJxet"},{"type":"link","url":"https://sentinelhub-py.readthedocs.io/en/latest/constants.html?highlight=SentinelHub.CRS#sentinelhub.constants.CRS","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"input format","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"zxX5xvj1MB"}],"urlSource":"https://sentinelhub-py.readthedocs.io/en/latest/constants.html?highlight=SentinelHub.CRS#sentinelhub.constants.CRS","key":"xni0rhg1QY"},{"type":"text","value":" of the ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"HKfabYmiaO"},{"type":"inlineCode","value":"CRS","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"xRVhWwgivR"},{"type":"text","value":" helper for constant or enter in the following format: ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"pm2MjJPCzE"},{"type":"inlineCode","value":"\"EPSG: 3035\"","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"aXRKZUlhd9"},{"type":"text","value":".","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"QOGIpbCQtq"}],"key":"trpiTUjiHs"}],"key":"meFMWpK6IP"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"datasource","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"YNX3q5YLSc"}],"key":"QWI0xLGmxP"},{"type":"text","value":": the parameters for the data to query.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"YB8MMweVro"}],"key":"dTb5SMUUFJ"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"See the most commonly used ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"RTwfX8HKeD"},{"type":"link","url":"https://sentinelhub-py.readthedocs.io/en/latest/_modules/sentinelhub/data_collections.html#DataCollection","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"predefined datacollections","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"lRUnwIhyMS"}],"urlSource":"https://sentinelhub-py.readthedocs.io/en/latest/_modules/sentinelhub/data_collections.html#DataCollection","key":"v4WHH943Mv"},{"type":"text","value":" or ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"bdKZzxnjG2"},{"type":"link","url":"https://sentinelhub-py.readthedocs.io/en/latest/examples/data_collections.html?highlight=DataCollection.define#Define-a-new-data-collection","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"define a new data collection","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"zoHXjFxU3S"}],"urlSource":"https://sentinelhub-py.readthedocs.io/en/latest/examples/data_collections.html?highlight=DataCollection.define#Define-a-new-data-collection","key":"kAYaz9xOnp"}],"key":"zi0K8d51yx"}],"key":"aGizZxZC6n"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"strong","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"time_interval","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"CrsQlLAVbB"}],"key":"PcGcrfGZjO"},{"type":"text","value":": the start and end dates set the time period over which to fetch the data.","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"gk1kpEPz6z"}],"key":"Q45RHZO34m"}],"key":"whDnHz1wEa"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"strong","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"mosaickingOrder","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"tMHADDzcsS"}],"key":"jclElF7vIF"},{"type":"text","value":": Choose from ","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"ny31E67CXY"},{"type":"inlineCode","value":"\"mostRecent\"","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"kxsqTa1c7M"},{"type":"text","value":", ","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"F7gdDLdWAk"},{"type":"inlineCode","value":"\"leastRecent\"","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"bNtX2hVajl"},{"type":"text","value":", and ","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"ZZ6KSH3biv"},{"type":"inlineCode","value":"\"leastCC\"","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"xTLEbmaJZ0"},{"type":"text","value":" (more ","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"gc5hFOT0sP"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/data/sentinel-2-l1c/#mosaickingorder","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"info","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"YREY4eeFdo"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/data/sentinel-2-l1c/#mosaickingorder","key":"aLdOam9Sin"},{"type":"text","value":").","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"Msy4QxL4in"}],"key":"XjU9K7XfTk"}],"key":"uzuGghzALQ"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"strong","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"upsampling/downsampling","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"U58rIB2Lqq"}],"key":"SHpqLCreay"},{"type":"text","value":": Choose from ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"WdXOpSXMZt"},{"type":"inlineCode","value":"\"NEAREST\"","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"pND8lDMMfl"},{"type":"text","value":", ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"DjKmrFiWOl"},{"type":"inlineCode","value":"\"BILINEAR\"","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"J0OsaQ8Tx2"},{"type":"text","value":", and ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"SixQSksAFA"},{"type":"inlineCode","value":"\"BICUBIC\"","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"peWIr2yYEE"},{"type":"text","value":" (","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"nHd8FPeOHX"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/data/sentinel-2-l1c/#processing-options","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"examples for Sentinel-2","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"CXrcYW49T4"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/data/sentinel-2-l1c/#processing-options","key":"dmTBQb8CJL"},{"type":"text","value":").","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"Z1fJif21Bj"}],"key":"EVcFnHbdPV"}],"key":"TuxN5iSCUm"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"strong","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"output_type","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"uDrfEC3jIu"}],"key":"IJ3xP0Opk5"},{"type":"text","value":": Use ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"TyK0t8rHVh"},{"type":"inlineCode","value":"MimeType","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"S8PKaGNT7O"},{"type":"text","value":" to select a data type of the output response returned by the evalscript (more ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"rcdfDm1Q2v"},{"type":"link","url":"https://sentinelhub-py.readthedocs.io/en/latest/_modules/sentinelhub/constants.html#MimeType","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"info","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"lFO8WQwpJe"}],"urlSource":"https://sentinelhub-py.readthedocs.io/en/latest/_modules/sentinelhub/constants.html#MimeType","key":"cFNR5ruJjc"},{"type":"text","value":").","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"eDWSbI7als"}],"key":"MMdmE2g2KL"}],"key":"Qg3169Gx5h"},{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":32,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"strong","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"tilingGridId","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"zRhotamKe8"}],"key":"rwPnh4onbk"},{"type":"text","value":" and ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"UOp7LitlVR"},{"type":"strong","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"resolution","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"tsyyqbAarr"}],"key":"EOkoLeU7UF"},{"type":"text","value":": these parameters parameters allow to set the grid and resolution of the images returned. To know which paramters to set, refer to the ","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"hK6IcMpBz3"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/api/batch/#tiling-grids","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"dedicated documentation","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"re1SJQURIl"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/api/batch/#tiling-grids","key":"pA9eq2NXR3"},{"type":"text","value":". Here we return:","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"XwQ8wL3VTL"}],"key":"Cpl3IIN3UN"},{"type":"paragraph","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"inlineCode","value":"tilingGridId","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"MFVJq37eJ6"},{"type":"text","value":" = 1, since less computation power is required for 10km grid. Larger tiling grids require more computational ressources.","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"gUIBqYpGCl"}],"key":"pWEAJO4cFs"},{"type":"paragraph","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"inlineCode","value":"resolution","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"RzvJU8VzHX"},{"type":"text","value":" = 10, which means our images will have a 10m resolution","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"UMCEgrSELj"}],"key":"yHs9amgWuU"}],"key":"OpF9h0ZBKp"},{"type":"listItem","spread":true,"position":{"start":{"line":33,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"strong","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"buffer","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"Gsxepb3WZa"}],"key":"R1nvqsRWTi"},{"type":"text","value":": (Optional) A ","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"xzgXoHMVLK"},{"type":"link","url":"https://sentinelhub-py.readthedocs.io/en/latest/sentinelhub_batch.html?highlight=SentinelHubBatch.tiling_grid#sentinelhub.sentinelhub_batch.SentinelHubBatch.tiling_grid","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"buffer","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"Yq63GaVNC9"}],"urlSource":"https://sentinelhub-py.readthedocs.io/en/latest/sentinelhub_batch.html?highlight=SentinelHubBatch.tiling_grid#sentinelhub.sentinelhub_batch.SentinelHubBatch.tiling_grid","key":"QAMcxx7TVF"},{"type":"text","value":" around each tile can be defined.","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"FpyvSgjWxO"}],"key":"h44liAbonY"},{"type":"paragraph","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"children":[{"type":"text","value":"Set in the following format: ","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"LEHytiMZgz"},{"type":"inlineCode","value":"(int,int)","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"H00XnN0Te2"},{"type":"text","value":" or ","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"trS7zudIII"},{"type":"inlineCode","value":"None","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"rmU2HOT4ZL"},{"type":"text","value":".","position":{"start":{"line":35,"column":1},"end":{"line":35,"column":1}},"key":"Dy10q2d8U9"}],"key":"OMASXyMKy9"}],"key":"fP1iCZo8oo"},{"type":"listItem","spread":true,"position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"strong","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"bucketName","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"nPwFPh4q2F"}],"key":"EuCBmWS56o"},{"type":"text","value":": the ","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"p6HueMQZ63"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/api/batch/#aws-s3-bucket-settings","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"configured","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"El8EQuCIFj"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/api/batch/#aws-s3-bucket-settings","key":"eZqIOv19nL"},{"type":"text","value":" Amazon S3 Bucket","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"OskIlIKJCT"}],"key":"HvEnyNvGBB"}],"key":"vk2pauH4Un"},{"type":"listItem","spread":true,"position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"strong","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"text","value":"description","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"VihEvsuzph"}],"key":"CDmcISTZ5G"},{"type":"text","value":": A personalised description for the request.","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"vnOQfhMN2r"}],"key":"iwspVsH3FU"}],"key":"F1I8oPF72o"}],"key":"wcul3ubtRA"}],"key":"bgTgDxll0u"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"Evalscript = evalscript\ngeometry = country_sim\ncrs = CRS.UTM_32N\ndatasource = DataCollection.SENTINEL2_L1C\ntime_interval = (START, END)\nmosaickingOrder = \"mostRecent\"\nmaxCloudCoverage = 1.0\nupsampling = \"NEAREST\"\ndownsampling = \"NEAREST\"\noutput_type = MimeType.TIFF \ntilingGridId = 1 \nresolution = 10 \nbuffer = (0, 0)\nbucketName = aws_bucket_name \ndescription = \"Slovenia LULC data example\" ","key":"HcQEr2bSjG"},{"type":"output","id":"a4QkTwhwjZFpo5W-7Qh19","data":[],"key":"Ff4VmEEPUV"}],"key":"yVKFhfKYCP"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"request_shp = SentinelHubRequest(\n    evalscript=Evalscript,\n    input_data=[\n        SentinelHubRequest.input_data(\n            data_collection=datasource,\n            time_interval=time_interval,\n            mosaicking_order=mosaickingOrder,\n            maxcc=maxCloudCoverage,\n            upsampling=upsampling,\n            downsampling=downsampling,\n        )\n    ],\n    responses=[\n        SentinelHubRequest.output_response(\"B02\", output_type),\n        SentinelHubRequest.output_response(\"B03\", output_type),\n        SentinelHubRequest.output_response(\"B04\", output_type),\n        SentinelHubRequest.output_response(\"B08\", output_type),\n        SentinelHubRequest.output_response(\"B11\", output_type),\n        SentinelHubRequest.output_response(\"B12\", output_type),\n        SentinelHubRequest.output_response(\"NDVI\", output_type),\n        SentinelHubRequest.output_response(\"NDWI\", output_type),\n        SentinelHubRequest.output_response(\"NDBI\", output_type),\n        SentinelHubRequest.output_response(\"data_mask\", output_type)\n    ],\n    geometry=Geometry(geometry, crs=crs),\n    config=config\n)\n\nbatch = SentinelHubBatch(config=config)\n\nbatch_request = batch.create(\n    request_shp,\n    tiling_grid=SentinelHubBatch.tiling_grid(\n        grid_id=tilingGridId,\n        resolution=resolution,\n        buffer=buffer\n    ),\n    bucket_name=bucketName,\n    description=description\n)","key":"P9ZCyGQLcs"},{"type":"output","id":"1teQGSm1EfBtnpX-AUOQV","data":[],"key":"DZ0FCqhqbZ"}],"key":"kRbSRTlKvK"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"1.2.2 Run the Batch request","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gpBrqLhFzF"}],"identifier":"id-1-2-2-run-the-batch-request","label":"1.2.2 Run the Batch request","html_id":"id-1-2-2-run-the-batch-request","implicit":true,"key":"Ew2EJ5VHdG"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Once all the parameters are set we are ready to run the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"eTWcipESQt"},{"type":"inlineCode","value":"Batch","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Pofh0PNtaS"},{"type":"text","value":" process. The batch processing API comes with the set of REST APIs which support the execution of various workflows. A diagram of the statuses of a batch processing request is located ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"gldeEuKpTj"},{"type":"link","url":"https://docs.sentinel-hub.com/api/latest/api/batch/#workflow","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Nk0NLbw5TT"}],"urlSource":"https://docs.sentinel-hub.com/api/latest/api/batch/#workflow","key":"qzsJg1szEa"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"EJrdhysMC8"}],"key":"HC2bZMGvX8"}],"key":"Rahkvrz2KT"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Start the request and return status","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qOYdajxk0h"}],"identifier":"start-the-request-and-return-status","label":"Start the request and return status","html_id":"start-the-request-and-return-status","implicit":true,"key":"ZOZsKVDCdj"}],"key":"Y0U4EVUmNE"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"batch_request.to_dict()","key":"wVmD0Cn4Mr"},{"type":"output","id":"_wkOL0RSnBdUh6CQxblfr","data":[{"output_type":"execute_result","execution_count":13,"metadata":{},"data":{"text/plain":{"content":"{'id': '789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4',\n 'processRequest': {'input': {'bounds': {'geometry': {'type': 'Polygon',\n     'crs': {'type': 'name',\n      'properties': {'name': 'urn:ogc:def:crs:EPSG::32632'}},\n     'coordinates': [[[919628.9108834544, 5119356.917076456],\n       [918749.0781451423, 5120862.307909182],\n       [918333.910070902, 5121281.140880498],\n       [918457.8990774148, 5122227.504274412],\n       [918894.6468967017, 5122811.020878375],\n       [919576.0567221006, 5123163.166090239],\n       [920551.1006553276, 5123234.722209015],\n       [921384.9902743214, 5123793.067258271],\n       [922186.3912854855, 5125009.093105534],\n       [922565.9886279197, 5125006.844256398],\n       [923099.5064763993, 5124596.299383719],\n       [925954.2380414003, 5125495.59598793],\n       [926246.687521957, 5125258.720397337],\n       [926849.6681557371, 5123868.441863545],\n       [928300.4334644956, 5122333.2455211105],\n       [930479.711624069, 5121614.0981342485],\n       [932438.9770145733, 5121409.564501522],\n       [932646.1667139526, 5121146.387974464],\n       [933023.6338520547, 5119446.811981134],\n       [934336.7047884844, 5118773.192229376],\n       [935566.2184357158, 5118541.604306243],\n       [937296.0250913996, 5118771.308494287],\n       [938933.2076325824, 5119418.233515025],\n       [939595.1275298094, 5119337.751129662],\n       [940207.7555634322, 5118994.946923946],\n       [941717.1245460573, 5119240.58864772],\n       [942876.8477811634, 5118531.816233686],\n       [943118.1057037627, 5118105.645787608],\n       [943928.6058421925, 5117739.897559745],\n       [944109.31714999, 5117355.209279513],\n       [943921.0563007102, 5115782.096776407],\n       [944814.7599488231, 5114854.377138535],\n       [945568.6142047391, 5113408.6205148585],\n       [945366.8593595305, 5112589.626113559],\n       [945623.720304364, 5110291.6585146235],\n       [944746.0548243101, 5109471.052593331],\n       [944410.343643281, 5109386.160755647],\n       [942966.4762767798, 5109990.345194248],\n       [942206.4564265149, 5110535.1299080085],\n       [941518.983230133, 5110602.578150821],\n       [940641.1774913804, 5110021.029206983],\n       [939894.6685551882, 5108932.130838223],\n       [938611.971331144, 5108073.606699095],\n       [936053.1783967619, 5107785.695032441],\n       [934608.3064589618, 5108611.437683343],\n       [932266.2133111083, 5110477.457048082],\n       [930610.5501451959, 5110697.848110835],\n       [929027.9075271739, 5110206.128843298],\n       [929007.7949406862, 5107828.484080727],\n       [928761.1606812896, 5107433.287430946],\n       [928340.5202479315, 5107394.417220363],\n       [926818.8025522218, 5108109.889881261],\n       [926235.7449728065, 5108035.855183048],\n       [924797.9282862529, 5107393.716638754],\n       [924273.9167598567, 5106339.48624392],\n       [921995.5588678899, 5105139.777239488],\n       [921626.8454615258, 5105135.1669395575],\n       [920583.0245687524, 5105950.73694475],\n       [920502.0339262019, 5106997.027372728],\n       [921109.5468206694, 5108095.835206634],\n       [921975.1309665262, 5109176.774922407],\n       [920985.882632233, 5109884.632823985],\n       [919694.7407430336, 5111367.579272935],\n       [919727.6633128797, 5111918.670426843],\n       [920456.3193563694, 5112480.5993394125],\n       [920330.4177488316, 5113904.5125860125],\n       [918961.0486138583, 5116779.320521747],\n       [918578.5853978395, 5117011.804211284],\n       [917930.0946484923, 5117042.814801975],\n       [917652.0992996809, 5117429.603044663],\n       [917788.0705027658, 5117839.756231751],\n       [919628.9108834544, 5119356.917076456]]]},\n    'properties': {'crs': 'http://www.opengis.net/def/crs/EPSG/0/32632'}},\n   'data': [{'dataFilter': {'timeRange': {'from': '2019-04-01T00:00:00Z',\n       'to': '2019-10-31T23:59:59Z'},\n      'mosaickingOrder': 'mostRecent',\n      'maxCloudCoverage': 100.0,\n      'previewMode': 'DETAIL'},\n     'processing': {'upsampling': 'NEAREST',\n      'downsampling': 'NEAREST',\n      'harmonizeValues': True},\n     'type': 'S2L1C'}]},\n  'output': {'responses': [{'identifier': 'B02',\n     'format': {'type': 'image/tiff'},\n     'logo': False},\n    {'identifier': 'B03', 'format': {'type': 'image/tiff'}, 'logo': False},\n    {'identifier': 'B04', 'format': {'type': 'image/tiff'}, 'logo': False},\n    {'identifier': 'B08', 'format': {'type': 'image/tiff'}, 'logo': False},\n    {'identifier': 'B11', 'format': {'type': 'image/tiff'}, 'logo': False},\n    {'identifier': 'B12', 'format': {'type': 'image/tiff'}, 'logo': False},\n    {'identifier': 'NDVI', 'format': {'type': 'image/tiff'}, 'logo': False},\n    {'identifier': 'NDWI', 'format': {'type': 'image/tiff'}, 'logo': False},\n    {'identifier': 'NDBI', 'format': {'type': 'image/tiff'}, 'logo': False},\n    {'identifier': 'data_mask',\n     'format': {'type': 'image/tiff'},\n     'logo': False}]},\n  'evalscript': '\\n//VERSION=3\\n\\n// Calculate number of bands needed for all intervals\\n// Initialise dates and interval\\n// Beware: in JS months are 0 indexed\\nvar start_date = new Date(2019, 3, 1, 0, 0, 0);\\nvar end_date = new Date(2019, 9, 31, 0, 0, 0);\\nvar sampled_dates = sample_timestamps(start_date, end_date, 15, \\'day\\').map(d =\u003e withoutTime(d));\\nvar nb_bands = sampled_dates.length;\\nvar n_valid = 0;\\nvar n_all = 0;\\n\\nfunction interval_search(x, arr) {\\n  let start_idx = 0,  end_idx = arr.length - 2;\\n\\n  // Iterate while start not meets end\\n  while (start_idx \u003c= end_idx) {\\n    // Find the mid index\\n    let mid_idx = (start_idx + end_idx) \u003e\u003e 1;\\n\\n    // If element is present at mid, return True\\n    if (arr[mid_idx] \u003c= x \u0026\u0026 x \u003c arr[mid_idx + 1]) {\\n      return mid_idx;\\n    }\\n    // Else look in left or right half accordingly\\n    else if (arr[mid_idx + 1] \u003c= x) start_idx = mid_idx + 1;\\n    else end_idx = mid_idx - 1;\\n  }\\n  if (x == arr[arr.length-1]){\\n    return arr.length-2;\\n  }\\n\\n  return undefined;\\n}\\n\\nfunction linearInterpolation(x, x0, y0, x1, y1, no_data_value=NaN) {\\n  if (x \u003c x0 || x \u003e x1) {\\n    return no_data_value;\\n  }\\n  var a = (y1 - y0) / (x1 - x0);\\n  var b = -a * x0 + y0;\\n  return a * x + b;\\n}\\n\\nfunction lininterp(x_arr, xp_arr, fp_arr, no_data_value=NaN) {\\n  results = [];\\n  data_mask = [];\\n  xp_arr_idx = 0;\\n  for(var i=0; i\u003cx_arr.length; i++){\\n    var x = x_arr[i];\\n    n_all+=1;\\n    interval = interval_search(x, xp_arr);\\n    if (interval === undefined) {\\n      data_mask.push(0);\\n      results.push(no_data_value);\\n      continue;\\n    }\\n    data_mask.push(1);\\n    n_valid+=1;\\n    results.push(\\n      linearInterpolation(\\n        x,\\n        xp_arr[interval],\\n        fp_arr[interval],\\n        xp_arr[interval+1],\\n        fp_arr[interval+1], \\n        no_data_value\\n      )\\n    );\\n  }\\n\\n  return [results, data_mask];\\n}\\n\\n\\nfunction interpolated_index(index_a, index_b){\\n  // Calculates the index for all bands in array\\n  var index_data = [];\\n  for (var i = 0; i \u003c index_a.length; i++){\\n     // UINT index returned\\n     let ind = (index_a[i] - index_b[i]) / (index_a[i] + index_b[i]);\\n     index_data.push(ind * 10000 + 10000);\\n  }\\n  \\n  return index_data\\n}\\n\\n\\nfunction increase(original_date, period, period_unit){\\n    date = new Date(original_date)\\n    switch(period_unit){\\n        case \\'millisecond\\':\\n            return new Date(date.setMilliseconds(date.getMilliseconds()+period));\\n        case \\'second\\':\\n            return new Date(date.setSeconds(date.getSeconds()+period));\\n        case \\'minute\\':\\n            return new Date(date.setMinutes(date.getMinutes()+period));\\n        case \\'hour\\':\\n            return new Date(date.setHours(date.getHours()+period));\\n        case \\'day\\':\\n            return new Date(date.setDate(date.getDate()+period));\\n        case \\'month\\':\\n            return new Date(date.setMonth(date.getMonth()+period));\\n        default:\\n            return undefined\\n    }\\n}\\n\\nfunction sample_timestamps(start, end, period, period_unit) {\\n    var cDate = new Date(start);\\n    var sampled_dates = []\\n    while (cDate \u003c end) {\\n        sampled_dates.push(cDate);\\n        cDate = increase(cDate, period, period_unit);\\n    }\\n    return sampled_dates;\\n}\\n\\nfunction is_valid(smp){\\n  // Check if the sample is valid (i.e. contains no clouds or snow)\\n  let clm = smp.CLM;\\n  let dm = smp.dataMask;\\n\\n  if (clm === 1 || clm === 255) {\\n        return false;\\n  } else if (dm !=1 ) {\\n        return false;\\n  } else {\\n  return true;\\n  }\\n}\\n\\nfunction withoutTime(intime){\\n  // Return date without time\\n  intime.setHours(0, 0, 0, 0);\\n  return intime;\\n}\\n\\n\\n// Sentinel Hub functions\\nfunction setup() {\\n  // Setup input/output parameters\\n    return {\\n        input: [{\\n            bands: [\"B02\", \"B03\", \"B04\", \"B08\", \"B11\", \"B12\", \"CLM\", \"dataMask\"],\\n            units: \"DN\"\\n        }],\\n      output: [\\n          {id: \"B02\", bands: nb_bands, sampleType: SampleType.UINT16},\\n          {id: \"B03\", bands: nb_bands, sampleType: SampleType.UINT16},\\n          {id: \"B04\", bands: nb_bands, sampleType: SampleType.UINT16},\\n          {id: \"B08\", bands: nb_bands, sampleType: SampleType.UINT16},\\n          {id: \"B11\", bands: nb_bands, sampleType: SampleType.UINT16},\\n          {id: \"B12\", bands: nb_bands, sampleType: SampleType.UINT16},\\n          {id: \"NDVI\", bands: nb_bands, sampleType: SampleType.UINT16},\\n          {id: \"NDWI\", bands: nb_bands, sampleType: SampleType.UINT16},\\n          {id: \"NDBI\", bands: nb_bands, sampleType: SampleType.UINT16},\\n          {id: \"data_mask\", bands: nb_bands, sampleType: SampleType.UINT8}\\n      ],\\n    mosaicking: \"ORBIT\"\\n    }\\n}\\n\\n\\n// Evaluate pixels in the bands\\nfunction evaluatePixel(samples, scenes) {\\n  \\n  // Initialise arrays\\n  var valid_samples = {\\'B02\\':[], \\'B03\\':[], \\'B04\\':[], \\'B08\\':[], \\'B11\\':[], \\'B12\\':[]}; \\n  \\n  var valid_dates = []\\n  // Loop over samples. \\n  for (var i = samples.length-1; i \u003e= 0; i--){\\n      if (is_valid(samples[i])) {\\n        valid_dates.push(withoutTime(new Date(scenes[i].date)));\\n        valid_samples[\\'B02\\'].push(samples[i].B02);\\n        valid_samples[\\'B03\\'].push(samples[i].B03);\\n        valid_samples[\\'B04\\'].push(samples[i].B04);\\n        valid_samples[\\'B08\\'].push(samples[i].B08);\\n        valid_samples[\\'B11\\'].push(samples[i].B11);\\n        valid_samples[\\'B12\\'].push(samples[i].B12);\\n      }\\n  }\\n  \\n  var [b02_interpolated, b02_dm] = lininterp(sampled_dates, valid_dates, valid_samples[\\'B02\\'], 0);\\n  var [b03_interpolated, b03_dm] = lininterp(sampled_dates, valid_dates, valid_samples[\\'B03\\'], 0);\\n  var [b04_interpolated, b04_dm] = lininterp(sampled_dates, valid_dates, valid_samples[\\'B04\\'], 0);\\n  var [b08_interpolated, b08_dm] = lininterp(sampled_dates, valid_dates, valid_samples[\\'B08\\'], 0);\\n  var [b11_interpolated, b11_dm] = lininterp(sampled_dates, valid_dates, valid_samples[\\'B11\\'], 0);\\n  var [b12_interpolated, b12_dm] = lininterp(sampled_dates, valid_dates, valid_samples[\\'B12\\'], 0);\\n\\n  // Calculate indices and return optimised for UINT16 format (will need unpacking)\\n  var ndvi = interpolated_index(b08_interpolated, b04_interpolated);\\n  var ndwi = interpolated_index(b03_interpolated, b08_interpolated);\\n  var ndbi = interpolated_index(b11_interpolated, b08_interpolated);\\n  \\n  // Return all arrays\\n  return {\\n            B02: b02_interpolated,\\n            B03: b03_interpolated,\\n            B04: b04_interpolated,\\n            B08: b08_interpolated,\\n            B11: b11_interpolated,\\n            B12: b12_interpolated,\\n            NDVI: ndvi,\\n            NDWI: ndwi,\\n            NDBI: ndbi,\\n            data_mask: b02_dm\\n  }\\n}\\n'},\n 'tileCount': 7,\n 'status': 'CREATED',\n 'userId': 'cb04dca1-c8f2-400e-8719-e24fced98fd6',\n 'created': '2022-06-21T16:16:09.756515Z',\n 'tilingGrid': {'id': 1, 'bufferY': 0, 'bufferX': 0, 'resolution': 10.0},\n 'output': {},\n 'bucketName': 'edc-marketplace-test',\n 'description': 'Slovenia LULC data example',\n 'valueEstimate': None,\n 'tileWidthPx': 1000,\n 'tileHeightPx': 1000,\n 'userAction': 'NONE',\n 'userActionUpdated': '2022-06-21T16:16:09.833676Z',\n 'error': None}","content_type":"text/plain"}}}],"key":"dlH0bUhaK2"}],"key":"Gboojs8on2"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Extract request id","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"q5KMQrJa6m"}],"key":"bbE3Fxz18Q"}],"key":"UVZoYzHbZe"}],"key":"A1s1EOEsfh"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"request_id = batch_request.to_dict()['id']","key":"GrN3PaaKvO"},{"type":"output","id":"IA1S1HvTrR7wfwqRe7BSY","data":[],"key":"Rr4Ye444as"}],"key":"hn0t331zKA"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Re-initialize the request with its request id (Optional)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FActRE2v8F"}],"key":"y2Eqgo7uyS"}],"key":"JBye0HL1LD"}],"key":"ZaOQmej6rx"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# batch = SentinelHubBatch(config=config)\n\n# reinit_request = batch.get_request(request_id)\n\n# reinit_request.to_dict()","key":"AzAGNapbos"},{"type":"output","id":"_BKPLsiPaPcsxxiEHBLEq","data":[],"key":"SiydnZl5YQ"}],"key":"D2Ce8CIhs6"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Show request status","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BMcQfFbz7H"}],"identifier":"show-request-status","label":"Show request status","html_id":"show-request-status","implicit":true,"key":"YeNmGOB334"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the cell below, we will check the status of the batch processing request. Because Batch Processing API is an asynchronous REST service, we can execute this cell all along the process to verify the progress of the request.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tzxwYp9dni"}],"key":"JCZxq945jK"}],"key":"AJNtNe1ugf"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"batch_request = batch.get_request(batch_request)\n\nbatch_request.status","key":"XdqyNN5Lh7"},{"type":"output","id":"u0w7ZggwqCQap6cT_bMmA","data":[{"output_type":"execute_result","execution_count":16,"metadata":{},"data":{"text/plain":{"content":"\u003cBatchRequestStatus.CREATED: 'CREATED'\u003e","content_type":"text/plain"}}}],"key":"gzgtvxUHp2"}],"key":"YS9jLuynX5"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Additional analysis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UqHJm2cl9V"}],"identifier":"additional-analysis","label":"Additional analysis","html_id":"additional-analysis","implicit":true,"key":"pcT5k1BF79"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"When executing the following cell:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"xiFyBCu8dz"}],"key":"FoV8sUNGsd"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"the status of the request changes to ANALYSING,","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"MIcU5LAJkm"}],"key":"EVWXypafcU"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"the evalscript is validated,","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"QR1Wg4nv74"}],"key":"w9qoy6coWG"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"a list of required tiles is created, and","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"NMmoqtVj7w"}],"key":"tGNXE1lCkV"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"the request’s cost is estimated (i.e. the estimated number of processing units (PU) needed for the requested processing).","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"lltXF5SBMo"}],"key":"YL7w2yedds"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"After the analysis is finished the status of the request changes to ANALYSIS_DONE.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"QfjVRODfcs"}],"key":"V6nGoYVSw7"}],"key":"JAY8vR7qEQ"}],"key":"QTBDXl1lWX"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"batch.start_analysis(batch_request)","key":"YEl3dFisss"},{"type":"output","id":"SDE0QHzedTNii71kILd3W","data":[{"output_type":"execute_result","execution_count":17,"metadata":{},"data":{"text/plain":{"content":"''","content_type":"text/plain"}}}],"key":"xRbPaypRHo"}],"key":"S07LfjXumu"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Note: At this point you can run the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Vhqe0pfy57"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Show request status","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"X4Tz1eHlnZ"}],"key":"DCCeaKODej"},{"type":"text","value":" cell again to check the status of the request.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qMwR54kpMl"}],"key":"LsOftf0uqW"}],"key":"G1d6OZqpSB"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"while batch_request.status.value != 'ANALYSIS_DONE':\n    batch_request = batch.get_request(batch_request)\n    sleep(10)\n    \nbatch_request.status","key":"RjN785ojt2"},{"type":"output","id":"8FHvH2gCDhb-Uo24j8QXb","data":[{"output_type":"execute_result","execution_count":18,"metadata":{},"data":{"text/plain":{"content":"\u003cBatchRequestStatus.ANALYSIS_DONE: 'ANALYSIS_DONE'\u003e","content_type":"text/plain"}}}],"key":"dq5E96EpE6"}],"key":"Qao8iSby2t"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Estimate number of processing units","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qJENLEJIrJ"}],"key":"DQbHOJqS9p"}],"key":"TgkGONBnma"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Once analysis is completed the valueEstimate tells us an estimated number of processing units the batch job will cost.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"TEYjqV2FxE"}],"key":"laphtrRtU6"}],"key":"drjSlXrZhC"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"print(f'Running this batch job will require approximately {batch_request.value_estimate:.4f} processing units')","key":"Al6tH6CcWU"},{"type":"output","id":"w62zH4wqSR7vxzrdPiZGM","data":[{"name":"stdout","output_type":"stream","text":"Running this batch job will require approximately 6319.6816 processing units\n"}],"key":"NHqKLCndXr"}],"key":"MiNLit0leR"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Check tile definitions","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cItNWLhBZ4"}],"key":"E1jeO8pQio"}],"key":"xQIxfwZkVK"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"we can check information about all tiles.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"oUDW21f490"}],"key":"LVVyqgbTfc"}],"key":"ITGYxMzf8A"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"for tile_info in batch.iter_tiles(batch_request):\n    print(tile_info)","key":"oo2YVTMe0j"},{"type":"output","id":"FdNnWej9l9juA3MmKA8rP","data":[{"name":"stdout","output_type":"stream","text":"{'id': 2558707, 'requestId': '789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4', 'geometry': {'type': 'Polygon', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::4326'}}, 'coordinates': [[[14.352619160260875, 46.141743080954406], [14.351561800658885, 46.23173780922709], [14.481243368706025, 46.23239979824391], [14.482089292227679, 46.14240300576524], [14.352619160260875, 46.141743080954406]]]}, 'origin': {'type': 'Point', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::32633'}}, 'coordinates': [450000.0, 5120000.0]}, 'name': '33TVM_5_8', 'status': 'PENDING'}\n{'id': 2558708, 'requestId': '789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4', 'geometry': {'type': 'Polygon', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::4326'}}, 'coordinates': [[[14.353671490381176, 46.051746910714016], [14.352619160260875, 46.141743080954406], [14.482089292227679, 46.14240300576524], [14.482931191867412, 46.05240477798336], [14.353671490381176, 46.051746910714016]]]}, 'origin': {'type': 'Point', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::32633'}}, 'coordinates': [450000.0, 5110000.0]}, 'name': '33TVM_5_9', 'status': 'PENDING'}\n{'id': 2558599, 'requestId': '789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4', 'geometry': {'type': 'Polygon', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::4326'}}, 'coordinates': [[[14.354718820634279, 45.96174929842303], [14.353671490381176, 46.051746910714016], [14.482931191867412, 46.05240477798336], [14.483769091319814, 45.96240511477266], [14.354718820634279, 45.96174929842303]]]}, 'origin': {'type': 'Point', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::32633'}}, 'coordinates': [450000.0, 5100000.0]}, 'name': '33TVL_5_0', 'status': 'PENDING'}\n{'id': 2558738, 'requestId': '789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4', 'geometry': {'type': 'Polygon', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::4326'}}, 'coordinates': [[[14.74146159543647, 46.053281965203496], [14.741040621918842, 46.14328293654669], [14.870519807916505, 46.143502924784066], [14.870730297637728, 46.0535012675197], [14.74146159543647, 46.053281965203496]]]}, 'origin': {'type': 'Point', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::32633'}}, 'coordinates': [480000.0, 5110000.0]}, 'name': '33TVM_8_9', 'status': 'PENDING'}\n{'id': 2558728, 'requestId': '789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4', 'geometry': {'type': 'Polygon', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::4326'}}, 'coordinates': [[[14.612194893508299, 46.052916466242046], [14.611563448043396, 46.1429162944107], [14.741040621918842, 46.14328293654669], [14.74146159543647, 46.053281965203496], [14.612194893508299, 46.052916466242046]]]}, 'origin': {'type': 'Point', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::32633'}}, 'coordinates': [470000.0, 5110000.0]}, 'name': '33TVM_7_9', 'status': 'PENDING'}\n{'id': 2558717, 'requestId': '789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4', 'geometry': {'type': 'Polygon', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::4326'}}, 'coordinates': [[[14.482089292227679, 46.14240300576524], [14.481243368706025, 46.23239979824391], [14.610928984494034, 46.23291469246024], [14.611563448043396, 46.1429162944107], [14.482089292227679, 46.14240300576524]]]}, 'origin': {'type': 'Point', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::32633'}}, 'coordinates': [460000.0, 5120000.0]}, 'name': '33TVM_6_8', 'status': 'PENDING'}\n{'id': 2558609, 'requestId': '789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4', 'geometry': {'type': 'Polygon', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::4326'}}, 'coordinates': [[[14.483769091319814, 45.96240511477266], [14.482931191867412, 46.05240477798336], [14.612194893508299, 46.052916466242046], [14.612823338661443, 45.962915207795376], [14.483769091319814, 45.96240511477266]]]}, 'origin': {'type': 'Point', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::32633'}}, 'coordinates': [460000.0, 5100000.0]}, 'name': '33TVL_6_0', 'status': 'PENDING'}\n{'id': 2558629, 'requestId': '789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4', 'geometry': {'type': 'Polygon', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::4326'}}, 'coordinates': [[[14.741880568664696, 45.96327956726176], [14.74146159543647, 46.053281965203496], [14.870730297637728, 46.0535012675197], [14.87093978718978, 45.963498185864594], [14.741880568664696, 45.96327956726176]]]}, 'origin': {'type': 'Point', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::32633'}}, 'coordinates': [480000.0, 5100000.0]}, 'name': '33TVL_8_0', 'status': 'PENDING'}\n{'id': 2558718, 'requestId': '789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4', 'geometry': {'type': 'Polygon', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::4326'}}, 'coordinates': [[[14.482931191867412, 46.05240477798336], [14.482089292227679, 46.14240300576524], [14.611563448043396, 46.1429162944107], [14.612194893508299, 46.052916466242046], [14.482931191867412, 46.05240477798336]]]}, 'origin': {'type': 'Point', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::32633'}}, 'coordinates': [460000.0, 5110000.0]}, 'name': '33TVM_6_9', 'status': 'PENDING'}\n{'id': 2558619, 'requestId': '789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4', 'geometry': {'type': 'Polygon', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::4326'}}, 'coordinates': [[[14.612823338661443, 45.962915207795376], [14.612194893508299, 46.052916466242046], [14.74146159543647, 46.053281965203496], [14.741880568664696, 45.96327956726176], [14.612823338661443, 45.962915207795376]]]}, 'origin': {'type': 'Point', 'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::32633'}}, 'coordinates': [470000.0, 5100000.0]}, 'name': '33TVL_7_0', 'status': 'PENDING'}\n"}],"key":"XHrKu4WrzP"}],"key":"jxmyOzDGDl"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Optionally, we can request information about a single tile.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ecX9JaWGsS"}],"key":"bUv56QpkQT"}],"key":"OUypcsLQ8T"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Specify a tile ID\nTILE_ID = '2558718'\n\nbatch.get_tile(batch_request, TILE_ID)","key":"zqRcQf0ICu"},{"type":"output","id":"tGBhi-zxsOPNGdadfM_z2","data":[{"output_type":"execute_result","execution_count":21,"metadata":{},"data":{"text/plain":{"content":"{'id': 2558718,\n 'requestId': '789fd6b7-7d4b-4cbf-9abc-67a1d9cc95e4',\n 'geometry': {'type': 'Polygon',\n  'crs': {'type': 'name',\n   'properties': {'name': 'urn:ogc:def:crs:EPSG::4326'}},\n  'coordinates': [[[14.482931191867412, 46.05240477798336],\n    [14.482089292227679, 46.14240300576524],\n    [14.611563448043396, 46.1429162944107],\n    [14.612194893508299, 46.052916466242046],\n    [14.482931191867412, 46.05240477798336]]]},\n 'origin': {'type': 'Point',\n  'crs': {'type': 'name',\n   'properties': {'name': 'urn:ogc:def:crs:EPSG::32633'}},\n  'coordinates': [460000.0, 5110000.0]},\n 'name': '33TVM_6_9',\n 'status': 'PENDING'}","content_type":"text/plain"}}}],"key":"dutYR9Y7Em"}],"key":"kkVVyHRbyV"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"START","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nCV8aP7k8D"}],"identifier":"start","label":"START","html_id":"start","implicit":true,"key":"OQuYZLpQjx"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Once you happy with the request parameters and have noted the number of PU consumed (by checking the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wnmfKMYKJZ"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Show request status","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zeNiXpQD5q"}],"key":"oSEUNZQ7mq"},{"type":"text","value":"), you can launch the processing.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Pkozd2A2Qt"}],"key":"uVWtC87JZi"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Note","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"yzRgnwrXuw"}],"key":"E6QllImc0x"},{"type":"text","value":": The processing time for this step could be up to an hour or more depending on the amount of data.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"oINWaxjYb7"}],"key":"E773Yb6Aol"}],"key":"ojrD68oZwc"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"batch.start_job(batch_request)","key":"jNDKofZTNv"},{"type":"output","id":"3mD7PFyQ-GOZmyOvSFjg-","data":[{"output_type":"execute_result","execution_count":22,"metadata":{},"data":{"text/plain":{"content":"''","content_type":"text/plain"}}}],"key":"WRcrytXndJ"}],"key":"AS2jhx79l0"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Cancel the request","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"O8MqPjht8l"}],"identifier":"cancel-the-request","label":"Cancel the request","html_id":"cancel-the-request","implicit":true,"key":"fyyjXrIXTc"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"When the job is running we can decide at any time to cancel it. Results that have already been produced will remain on the bucket.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"vOKC4hpWLD"}],"key":"hC2bGypBcr"}],"key":"BZwSsy9k81"}],"key":"C5pGeOUgGC"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"#batch.cancel_job()","key":"FMkkdpZ1lT"},{"type":"output","id":"QAKXqbusnBfXOOQuQThh8","data":[],"key":"emZrBT33Nu"}],"key":"lpoPfOOHsG"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Note: At this point you can run the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Yt6uLhN2Dr"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Show request status","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QeAl23gMyI"}],"key":"fpE9tHEJ64"},{"type":"text","value":" cell again to check the status of the request.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ni3m0YeDyv"}],"key":"tUvRy5apGc"}],"key":"NR8NMu403M"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Show request status","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"x42Tpt8sAr"}],"identifier":"show-request-status","label":"Show request status","html_id":"show-request-status-1","implicit":true,"key":"k9AMVHpewb"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the cell below, we will check the status of the batch processing request. Because Batch Processing API is an asynchronous REST service, we can execute this cell all along the process to verify the progress of the request.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tlmjfjIZk0"}],"key":"W7uiQ3PlDn"}],"key":"GhaHBhg7wR"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"while batch_request.status.value != 'DONE':\n    batch_request = batch.get_request(batch_request)\n    sleep(10)\n\nbatch_request.status","key":"c4uBE42wdB"},{"type":"output","id":"P0R972WV6Ifxd01Z6HUKm","data":[{"output_type":"execute_result","execution_count":24,"metadata":{},"data":{"text/plain":{"content":"\u003cBatchRequestStatus.DONE: 'DONE'\u003e","content_type":"text/plain"}}}],"key":"DlhqffOoE2"}],"key":"y8wlMYpBXJ"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Visual tracking of the Batch request","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Tid23SXOMr"}],"identifier":"visual-tracking-of-the-batch-request","label":"Visual tracking of the Batch request","html_id":"visual-tracking-of-the-batch-request","implicit":true,"key":"fD8OZxFLG5"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The following cells allow us to track the progress of the Batch request by plotting the status of the tiles. To visually track the progress of the Batch request, we can keep executing the Plotting command.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Z4tVJH8Ht5"}],"key":"gdcGGlnWLZ"}],"key":"Fl3VqRIbSH"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"def plot_batch_splitter(splitter):\n    \"\"\" Plots tiles and area geometry from a splitter class\n    \"\"\"\n    tile_geometries = [Geometry(bbox.geometry, bbox.crs) for bbox in splitter.get_bbox_list()]\n    tile_geometries = [geometry.transform(splitter.crs) for geometry in tile_geometries]\n\n    gdf = gpd.GeoDataFrame(\n        {'status': [info['status'] for info in splitter.get_info_list()]},\n        geometry=[geometry.geometry for geometry in tile_geometries],\n        crs=splitter.crs.pyproj_crs()\n    )\n    ax = gdf.plot(column='status', legend=True, figsize=(10, 10))\n\n    area_series = gpd.GeoSeries(\n        [splitter.get_area_shape()],\n        crs=splitter.crs.pyproj_crs()\n    )\n    area_series.plot(ax=ax, facecolor='none', edgecolor='black')\n","key":"s1WZ5nG17c"},{"type":"output","id":"EE98e4Ql8BH8Rf5w43LIJ","data":[],"key":"zS67RpKDOF"}],"key":"mAHvwsAFez"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"splitter = BatchSplitter(batch_request=batch_request, config=config)\nplot_batch_splitter(splitter)","key":"TtqdUnsqhg"},{"type":"output","id":"k2T-cqs4aS1R14tvVwF5G","data":[{"output_type":"display_data","metadata":{"needs_background":"light"},"data":{"image/png":{"content_type":"image/png","hash":"d456a6c1e535c70a4f425995d11cb111","path":"/build/d456a6c1e535c70a4f425995d11cb111.png"},"text/plain":{"content":"\u003cFigure size 720x720 with 1 Axes\u003e","content_type":"text/plain"}}}],"key":"suGKtI2v9K"}],"key":"h5krSzavAB"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"What if some of my tiles fail?","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"S8krdO4zRL"}],"identifier":"what-if-some-of-my-tiles-fail","label":"What if some of my tiles fail?","html_id":"what-if-some-of-my-tiles-fail","implicit":true,"key":"O7gwsxCrUh"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"It can happen that some of the tiles are not processed, and appear with the status ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Y5TNHvR79P"},{"type":"inlineCode","value":"FAILED","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"SKWVTbHogf"},{"type":"text","value":" in the plot above. We can use the function defined below to restart the processing for those specific tiles.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cCqBm3quta"}],"key":"YYE5qmxzYW"}],"key":"Zl62KOASWt"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# #Re-run the processing for all the tiles that failed\n# batch.restart_job(batch_request)","key":"rWT7ea3BKI"},{"type":"output","id":"X7jTXdXPMr7XgTAJ5yWGf","data":[],"key":"BFN7dMn4xa"}],"key":"DjEe3BISF4"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Alternatively, we can re-run processing only for a single tile.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tnductzNWJ"}],"key":"I2bFzM0HCQ"}],"key":"aLUU9gUNKR"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# # Specify an ID of a tile that failed\n# FAILED_TILE_ID = ''\n\n# batch.reprocess_tile(batch_request, FAILED_TILE_ID)","key":"rhzrtQyJLH"},{"type":"output","id":"HCF4kn6LsxiSzoD6oqTpn","data":[],"key":"ONBmDmV1qm"}],"key":"AMk4nDQM9Y"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Part 2: convert Batch process outputs to EOPatches","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WJ3MtYAOl1"}],"identifier":"part-2-convert-batch-process-outputs-to-eopatches","label":"Part 2: convert Batch process outputs to EOPatches","html_id":"part-2-convert-batch-process-outputs-to-eopatches","implicit":true,"key":"P5DKedBGpM"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"When the Batch request in ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qS8E1p9SY3"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Part 1","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zY1NrxFg4j"}],"key":"y4f9G4gphS"},{"type":"text","value":" has finished running, we should now have the data located in the specified Bucket. In ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nZQaSdmf1x"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Part 2","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZY7ReRuShX"}],"key":"VSLeyQAnWF"},{"type":"text","value":" we will focus on converting the results to EoPatches and download the data.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vADhs9RlXF"}],"key":"g067GDWijm"}],"key":"h8guC05C11"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2.1 Set parameters for conversion","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mQL96UmCim"}],"identifier":"id-2-1-set-parameters-for-conversion","label":"2.1 Set parameters for conversion","html_id":"id-2-1-set-parameters-for-conversion","implicit":true,"key":"SWwP92Q3Ao"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"First we specify a few parameters for converting the Batch results to EOLearn Patches.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vNgwlS1fdH"}],"key":"VtoYsdrYqz"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"If you want to pick up the Notebook after having run the Batch request in an other session, you will need to specify a few parameters that were already defined in ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Cfnu5TyVar"},{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Part 1","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"zcRJmEfCls"}],"key":"KEArAHOhho"},{"type":"text","value":": for that uncomment and run the next cell. If you have just executed the cells in ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"kBvoa9Xgbv"},{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Part 1","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"m6cCUFTlvW"}],"key":"wCZOIydC6G"},{"type":"text","value":", you can skip the next cell.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"UWUXzK3F2o"}],"key":"IOOr4XjIiH"}],"key":"oYErieCk3z"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# # Date parameters\n# START = datetime.date(2019, 4, 1)\n# END = datetime.date(2019, 10, 31)\n\n# INTERVAL = 15  # Interval for date resampling in days\n\n# # Calculate list of dates for the resampling\n# date_iterator = START\n# timestamps = []\n# while date_iterator \u003c END:\n#     timestamps.append(date_iterator)\n#     date_iterator = date_iterator + datetime.timedelta(days=INTERVAL)\n    \n# #Amazon client ID and secret\n# AWS_ID = \"aws-client-id\"\n# AWS_SECRET = \"aws-client-secret\"\n    \n# # Amazon bucket name\n# aws_bucket_name = \"your-bucket-name\"\n\n# # Request ID (from the Batch processing)\n# request_id = \"\"\n\n# #Configuration\n# config = SHConfig()","key":"UJ17Rw6YRl"},{"type":"output","id":"04ljJwD1uhUJiSkW8R-EY","data":[],"key":"cjBV5smaNG"}],"key":"XLQuqylDpS"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Next, we will set the bands that we want to import into the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tqCn8L11gG"},{"type":"inlineCode","value":"EOPatches","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Em2uBl71cx"},{"type":"text","value":".","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DFhUgTrzSJ"}],"key":"tf6ychoWuS"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In this example we use:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OvdRqfXvON"}],"key":"zbO2Ra2Uar"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"B02, B03, B04, B08, B11, B12 bands from Sentinel-2","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"qnOpLkCa8A"}],"key":"quc3DAg0ZD"}],"key":"Ep6LFmRdRu"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"NDVI, NDWI, NDBI indices","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"zDtnp5oQRr"}],"key":"jb6eu4WuWQ"}],"key":"xWctGhmbO0"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Valid data band","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"CQRgVS1jhZ"}],"key":"Ca4hM8UQye"}],"key":"bRBvqXEhMQ"}],"key":"OYJHccrkfM"}],"key":"UlD8N5rJDv"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"band_names = ['B02.tif', 'B03.tif', 'B04.tif', 'B08.tif', 'B11.tif','B12.tif',\n              'NDVI.tif', 'NDWI.tif', 'NDBI.tif']\nis_data_band = 'data_mask.tif'","key":"IGzn2ZRLPU"},{"type":"output","id":"kRWSafsI_sJFyo69RU5ys","data":[],"key":"wDI1R9cM2W"}],"key":"rbmzXYdJgQ"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Finally, let’s specify the folder to which we will save the data.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DjfqmNuWlQ"}],"key":"wsFAoeM3pT"}],"key":"B0D1LRlNMI"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Output path\nsave_folder = \"./results\"","key":"Y4kMWUKIQb"},{"type":"output","id":"ioFwPIBq9bOtnxS8h6dpi","data":[],"key":"bbHFWonMve"}],"key":"ByxFJ7T4pA"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We have defined a class to convert the Batch Request to ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MLPYIqLfID"},{"type":"inlineCode","value":"EOPatches","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"NKnf2agf4s"},{"type":"text","value":" for ease of use below.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Wxvg0adwXD"}],"key":"qy2GcAOz5k"}],"key":"PuCoFMo8Q0"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"class ImportFromAWS:\n    \"\"\"Import EoPatches from a Batch request.\n    \n    This class regroups all the methods to transform the saved results of a batch request\n    located in an Amazon Bucket to EOPatches locally.\n    \n    :param aws_key: Amazon client ID\n    :type aws_key: str\n    :param aws_secret: Amazon secret\n    :type aws_secret: str\n    :param aws_bucket: Amazon bucket name where the batch results were written\n    :type aws_bucket: str\n    :param request_id: Batch request id\n    :type request_id: str \n    param bands: List of bands that should be considered in the import\n    :type bands: list \n    param timestamps: List of timestamps for resampled data\n    :type timestamps: list\n    param is_data: Name of the IS_DATA band from Batch\n    :type is_data: str, optional\n    :param out_path: Path to folder where EOPatches will be saved\n    :type out_path: str, optional \n    \"\"\"\n    \n    def __init__(self, aws_key, aws_secret, aws_bucket, request_id, bands, timestamps,\n                 is_data=None, out_path=\"./\"):\n        \"\"\"Constructor method.        \n        \"\"\"\n        # Path to save the EoPatches\n        self.out_path = Path(out_path)\n            \n        # Make directory\n        self.out_path.mkdir(parents=True, exist_ok=True)\n\n        # AWS credentials\n        if (aws_key == None or aws_secret == None):\n            raise ValueError(\"No Amazon credential provided!\")\n            \n        # Create Amazon session and settings\n        self.session = boto3.Session(aws_access_key_id=aws_key, \n                                     aws_secret_access_key=aws_secret,\n                                    ) \n        self.s3_resource = self.session.resource('s3')\n        self.s3_client = self.session.client('s3')\n        self.bucket_name = aws_bucket\n        self.bucket = self.s3_resource.Bucket(aws_bucket)\n        \n        # Set up filesytem for Amazon Bucket\n        self.s3fs = S3FS(aws_bucket,\n                         dir_path=request_id,\n                         aws_access_key_id=aws_key,\n                         aws_secret_access_key=aws_secret)\n           \n        # Request id\n        self.request_id = request_id\n        \n        # Information about data and metadata\n        self.is_data = is_data\n        self.bands = bands\n        self.timestamps = [x.isoformat() for x in timestamps]\n\n\n    @staticmethod   \n    def _open_band(AWS_session, bucket, request_id, folder, bandname):\n        \"\"\"Open Band.\n        \n        Using Rasterio, open a band in an Amazon S3 Bucket, and return bbox and data.\n        \n        :param session: Amazon boto session\n        :type session: boto3.Session \n        :param bucket: Amazon bucket name\n        :type bucket: str\n        :param request_id: Name of the Batch request ID\n        :type request_id: str\n        :param folder: Name of the folder in which to query data\n        :type folder: str\n        :param bandname: Filename\n        :type bandname: str \n        \"\"\"\n        # Open with Rasterio\n        with rasterio.Env(rasterio.session.AWSSession(AWS_session)) as env:\n            s3_url = f's3://{bucket}/{request_id}/{folder}/{bandname}'\n            with rasterio.open(s3_url) as source:\n\n                    bbox = BBox(source.bounds, CRS(source.crs.to_epsg()))\n                    data = source.read()\n        return data, bbox\n    \n    \n    @staticmethod   \n    def _open_local_band(band_path):\n        \"\"\"Open Local Band.\n        \n        Using Rasterio, open a band in an Amazon S3 Bucket, and return bbox and data.\n        \n        :param session: Amazon boto session\n        :type session: boto3.Session \n        :param bucket: Amazon bucket name\n        :type bucket: str\n        :param request_id: Name of the Batch request ID\n        :type request_id: str\n        :param folder: Name of the folder in which to query data\n        :type folder: str\n        :param bandname: Filename\n        :type bandname: str \n        \"\"\"\n        # Open with Rasterio\n        with rasterio.open(band_path) as source:\n            bbox = BBox(source.bounds, CRS(source.crs.to_epsg()))\n            data = source.read()\n\n        return (data, bbox)\n\n    \n    @staticmethod\n    def _convert_DN(band, in_band):\n        \"\"\"Convert DN to values.\n        \n        It is cheaper to return INT data from SH Hub. In the evalscript a coefficient is applied\n        to the data to return it as INT, and here it needs to be unpacked. This function (for now)\n        considers only 2 ways of saving data: bands starting with B or indices not starting with B.\n        \n        :param band: Band name to convert\n        :type band: str \n        :param in_band: Numpy array to convert\n        :type in_band: np.array \n        :return: The input numpy array converted depending on band name\n        :rtype: np.array\n        \"\"\"\n        if band.startswith(\"B\"):\n            outband = in_band / 10000.\n        else:\n            outband = (in_band - 10000.) / 10000.\n\n        return outband\n\n\n    @staticmethod\n    def _eopatch_import(folder_system, folders, bucket, bands, timestamps, out_path, local=False,\n                        save_local=True, is_data=None, request_id=None, bucket_name=None, session=None):\n        \"\"\"Import EOPatches from local data.\n        \n        After having downloaded the bucket contents to a local folder, extract the EOPatches.\n        \n        :param folder_system: a fs sytem object containing base directory (S3 or local)\n        :type folder_system: s3fs.S3FS or s3fs.core.S3FileSystem\n        :param folders: List of folders to search through\n        :type folders: list \n        :param bucket: boto3 resource Bucket bucket, see :class:`ImportFromAWS`\n        :type bucket: boto3.S3.Bucket(name)\n        :param bands: List of bands to process\n        :type bands: list\n        :param timestamps: List of timestamps corresponding to the bands\n        :type timestamps: list\n        :param out_path: Output folder where the EOPatches are saved\n        :type out_path: str\n        :param local: Set whether the folders are local or on Amazon S3\n        :type local: bool, optional\n        :param save_local: Set whether the EOPatches are saved to local or on Amazon S3\n        :type save_local: bool, optional\n        :param is_data: Name of band containing information of validity of data\n        :type is_data: str, optional\n        :param request_id: When importing from a Amazon bucket, folder name (from Batch)\n        :type request_id: str, optional\n        :param bucket_name: When importing from a Amazon bucket, bucket name\n        :type bucket_name: str, optional\n        :param session: When importing from a Amazon bucket, boto3 S3 session\n        :type session: boto3.S3.session, optional\n\n        \"\"\"\n        # Initialise counter\n        nb_patch = 0\n        \n        # Ignore json file\n        folders = [x for x in folders if not x.endswith(\"json\")]\n        \n        # Loop over the folders which will become patches\n        for fold in tqdm(folders):\n          \n            # Export switch (in case the bands are missing in a patch)\n            export = True\n\n            # Empty EOPatch to be filled\n            eo_patch = EOPatch()\n\n            # List bands in folder\n            current_bands = folder_system.listdir(fold)\n            \n            # Check if the bands in the folder correspond to the bands wanted\n            if any(elem in current_bands for elem in bands):\n                all_bands = {}\n                # Loop through bands\n                for band in bands:\n                    # Different opening method depending on local or not\n                    if local:\n                        band_data, data_bbox = ImportFromAWS._open_local_band(Path(\n                            folder_system.getsyspath(\"\")).joinpath(fold, band))\n                    else:\n                        band_data, data_bbox = ImportFromAWS._open_band(session, \n                                                                        bucket_name, \n                                                                        request_id,\n                                                                        fold, band)\n                    # Convert band to reflectance or index and save\n                    all_bands[band] = ImportFromAWS._convert_DN(band, band_data)\n\n                     # Get IS_DATA\n                if is_data != None and is_data in current_bands:\n                    # Different opening method depending on local or not\n                    if local:\n                        is_data_array, _ = ImportFromAWS._open_local_band(Path(\n                                folder_system.getsyspath(\"\")).joinpath(fold, is_data))\n                    else:\n                        is_data_array, _ = ImportFromAWS._open_band(session, \n                                                                    bucket_name, \n                                                                    request_id,\n                                                                    fold, is_data)\n            # If the bands don't match, skip the patch\n            else:\n                print(f\"Bands don't match for Patch {fold}... skipping...\")\n                export = False\n\n            # if not flag to skip the band, continue\n            if export:\n                # Add bbox to patch\n                eo_patch.bbox = data_bbox\n\n                # Add bands to patch\n                eo_patch.data['FEATURES'] = np.stack([all_bands[x] for x in all_bands.keys()], axis=-1)\n                \n                # Add is data mask to patch\n                eo_patch.mask[\"IS_DATA\"] = np.expand_dims(is_data_array, axis=-1)\n\n                # Add metadata\n                eo_patch.meta_info[\"time_interval\"] = (START.isoformat(), END.isoformat())\n                eo_patch.meta_info[\"band_list\"] = [x.split('.')[0] for x in bands]\n\n                # Add timestamps\n                eo_patch.timestamp = timestamps\n\n                # Save EOPatch (either on local or on Bucket)\n                if save_local:\n                    save_path = str(Path(out_path).joinpath(\"EOPatches\"))\n                else:\n                    save_path = f\"s3://{bucket_name}/EOPatches\"\n\n                eo_patch.save(f\"{save_path}/eopatch_{nb_patch}\",\n                              overwrite_permission=OverwritePermission.OVERWRITE_PATCH)\n\n                # Increase counter\n                nb_patch += 1\n\n\n    def convert_to_EOPatches(self, local_bucket=None, save_locally=True):\n        \"\"\"Import of EOPatches.\n        \n        This function converts the contents of an Amazon bucket that is\n        stored locally (after download using e.g. `download_S3_bucket`) or \n        stored on Amazon S3 to EOPatches.\n        \n        :param local_bucket: A local folder containing contents of a Bucket\n        :type local_bucket: str, optional\n        \"\"\"\n        \n        if local_bucket is None:\n            # Open Bucket as folder system\n            folder_sys = self.s3fs\n            # Set local flag to False\n            local = False\n        else:\n            # Open local folder system\n            folder_sys = open_fs(local_bucket)\n            #Set local flag to True\n            local = True\n\n        # Get subfolders in the local folder\n        folders = folder_sys.listdir(\"/\")\n        \n        # Run the import\n        self._eopatch_import(folder_sys, folders, self.bucket, self.bands, self.timestamps,\n                             self.out_path, local=local, save_local=save_locally, is_data=self.is_data,\n                             request_id=self.request_id, bucket_name=self.bucket_name, session=self.session)\n\n\n    def download_from_bucket(self, obj_id=\"S3\"):\n        \"\"\"Download S3 Bucket.\n        \n        Downloads the results of a batch request stored in an Amazon\n        bucket, based on the request ID of the class.\n\n        \"\"\"\n        # Check type\n        if obj_id not in [\"S3\", \"EO\"]:\n            raise ValueError(\"Not a correct object ID to download: choose S3 or EO\")\n\n        # Check if a folder named after the reques ID already exists in the output folder\n        if obj_id == \"S3\":\n            path = self.request_id\n        else:\n            path = \"EOPatches\"\n\n        if self.out_path.joinpath(path).is_dir():\n                raise ValueError(\"Bucket folder already exists on local path! Delete and try again.\")\n        \n        # Download S3/EO bucket\n        print(\"Downloading bucket contents\")\n        \n        keys = []\n        dirs = []\n        next_token = ''\n        base_kwargs = {\n            'Bucket':self.bucket_name,\n            'Prefix':path,\n        }\n        while next_token is not None:\n            kwargs = base_kwargs.copy()\n            if next_token != '':\n                kwargs.update({'ContinuationToken': next_token})\n            results = self.s3_client.list_objects_v2(**kwargs)\n            contents = results.get('Contents')\n            for i in contents:\n                k = i.get('Key')\n                if k[-1] != '/':\n                    keys.append(k)\n                else:\n                    dirs.append(k)\n                \n            next_token = results.get('NextContinuationToken')\n\n        for d in dirs:\n            dest_pathname = self.out_path.joinpath(d)\n            dest_pathname.mkdir(parents=True, exist_ok=True)\n\n        for k in tqdm(keys):\n            dest_pathname = self.out_path.joinpath(k)\n            dest_pathname.parent.mkdir(parents=True, exist_ok=True)\n            self.s3_client.download_file(self.bucket_name, k, str(dest_pathname))   \n","key":"BwvoCDaIQv"},{"type":"output","id":"qerG-8oM2yHy8hmU_u1WE","data":[],"key":"S2exk4H8tU"}],"key":"AjNfaQNsfA"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"2.2 Run conversion from Batch results to EOPatches","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cuVegDImRn"}],"identifier":"id-2-2-run-conversion-from-batch-results-to-eopatches","label":"2.2 Run conversion from Batch results to EOPatches","html_id":"id-2-2-run-conversion-from-batch-results-to-eopatches","implicit":true,"key":"h5Dqx7z8xg"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Now all the parameters are set, we can run the conversion. For this step there are 2 available options:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"h02OWm1wvc"}],"key":"LrjBZsFHdR"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Download the contents of the Amazon S3 Bucket to a local file and convert locally to ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"eoFLGdYOpU"},{"type":"inlineCode","value":"EOPatches","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ms60MCJQ9E"}],"key":"F0arzP1PU7"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Convert the data from the Amazon S3 Bucket and download the ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"v1GcNsIlnq"},{"type":"inlineCode","value":"EOPatches","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"comUQOa3Fo"}],"key":"d91Zis0jM4"}],"key":"xDFhDgM6E2"}],"key":"zX3xmERZuf"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"First, we make an object, initialising it with the necessary parameters to perform the conversion.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pkD8Z4ysh4"}],"key":"WF9ynlwLJr"}],"key":"yRIZpI38ih"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Make class to convert Batch to EOPatches\nbatch2eolearn = ImportFromAWS(AWS_ID, AWS_SECRET, aws_bucket_name,\n                              request_id, band_names, timestamps, is_data=is_data_band, \n                              out_path=save_folder)","key":"u7sdAJGazh"},{"type":"output","id":"_-RjLJ1mjuujFq1W18N60","data":[],"key":"WdP2TQjuLx"}],"key":"Tj5vcmCX0p"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Option 1: Dowload Bucket and convert locally","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZLmXXeZbPw"}],"identifier":"option-1-dowload-bucket-and-convert-locally","label":"Option 1: Dowload Bucket and convert locally","html_id":"option-1-dowload-bucket-and-convert-locally","implicit":true,"key":"UX6Se3DN4L"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"You can use the in-build function below to download your Amazon Bucket contents, or skip the cell and sync the Bucket using the aws cli tool.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"pm48Co6dEg"}],"key":"iQgXUUecuT"}],"key":"ovwpuERh8j"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Download Batch results from Bucket\nbatch2eolearn.download_from_bucket(obj_id=\"S3\")","key":"oLyy127omD"},{"type":"output","id":"Bl9bXSQCXecLoEm1r0wnf","data":[{"name":"stdout","output_type":"stream","text":"Downloading bucket contents\n"},{"output_type":"display_data","metadata":{},"data":{"application/vnd.jupyter.widget-view+json":{"content":"{\"model_id\":\"624b5a377ad3430c8ed51f6561f03918\",\"version_major\":2,\"version_minor\":0}","content_type":"application/vnd.jupyter.widget-view+json"},"text/plain":{"content":"  0%|          | 0/101 [00:00\u003c?, ?it/s]","content_type":"text/plain"}}}],"key":"XuRgHhE7PG"}],"key":"MXNLMrCpYY"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If you specify the folder name containing the Batch request data in the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"X3y8G5Gsg6"},{"type":"inlineCode","value":"convert_to_EOPatches","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GLsjBmhimz"},{"type":"text","value":" function, the conversion will be performed locally.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ppr9nXycw2"}],"key":"Xqs4VOqGON"}],"key":"WW6xiw8Jo0"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Convert local data to EOPatches\nbatch2eolearn.convert_to_EOPatches(local_bucket=f\"{save_folder}/{request_id}\")","key":"mSzE9nCegu"},{"type":"output","id":"YOak908lpXvnTs_rgL4ul","data":[{"output_type":"display_data","metadata":{},"data":{"application/vnd.jupyter.widget-view+json":{"content":"{\"model_id\":\"82982a95d6414c61b08130f9360a7d7d\",\"version_major\":2,\"version_minor\":0}","content_type":"application/vnd.jupyter.widget-view+json"},"text/plain":{"content":"  0%|          | 0/10 [00:00\u003c?, ?it/s]","content_type":"text/plain"}}}],"key":"MiI4BTjMZW"}],"key":"efoid5TxBl"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Option 2: Convert in Bucket and download EOPatches","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"edw9eVzUTS"}],"identifier":"option-2-convert-in-bucket-and-download-eopatches","label":"Option 2: Convert in Bucket and download EOPatches","html_id":"option-2-convert-in-bucket-and-download-eopatches","implicit":true,"key":"WS39waeDD7"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The following cell allows you to convert the data that is stored on the Amazon S3 Bucket. Using the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cR7psfuvlg"},{"type":"inlineCode","value":"save_locally","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"AdHzJsxf5d"},{"type":"text","value":" True/False flag you can either directly save the EOPatches on your computer or store them on the Amazon S3 Bucket.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YBOxBkJJcQ"}],"key":"dq6f5FxanK"}],"key":"MBkx0ndEF3"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Convert Batch results in the Amazon Bucket to EoPatches\n# batch2eolearn.convert_to_EOPatches(save_locally=False)\nbatch2eolearn.convert_to_EOPatches(save_locally=False)","key":"LnRvuCHNN6"},{"type":"output","id":"4msikjUbScB3vD5urZEGk","data":[{"output_type":"display_data","metadata":{},"data":{"application/vnd.jupyter.widget-view+json":{"content":"{\"model_id\":\"7d28b618f80b4341a38b54cc292ede3a\",\"version_major\":2,\"version_minor\":0}","content_type":"application/vnd.jupyter.widget-view+json"},"text/plain":{"content":"  0%|          | 0/10 [00:00\u003c?, ?it/s]","content_type":"text/plain"}}}],"key":"R0fnTni9jm"}],"key":"wwPsmvFUXB"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"If you save the EOPatches to your Amazon Bucket, you can either download them by using the inbuilt command below or using an other method of your choice (e.g. ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mZISmjDUhz"},{"type":"inlineCode","value":"aws cli","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"da4NkgetaE"},{"type":"text","value":").","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ARLHVpnk7Q"}],"key":"kiHosVSmFh"}],"key":"p1buHUKl0U"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Rename the folder created in option 1\nos.rename(\"./results/EOPatches\", \"./results/EOPatches_opt1\")\n\n# Download EOPatches from Bucket\nbatch2eolearn.download_from_bucket(obj_id=\"EO\")","key":"JCrtbNiDQ7"},{"type":"output","id":"x4yGDJmGiiWZYUgL4iTHm","data":[{"name":"stdout","output_type":"stream","text":"Downloading bucket contents\n"},{"output_type":"display_data","metadata":{},"data":{"application/vnd.jupyter.widget-view+json":{"content":"{\"model_id\":\"3e603a897a0b4d07b1debe73ebe6ffd4\",\"version_major\":2,\"version_minor\":0}","content_type":"application/vnd.jupyter.widget-view+json"},"text/plain":{"content":"  0%|          | 0/50 [00:00\u003c?, ?it/s]","content_type":"text/plain"}}}],"key":"frgRilZsQo"}],"key":"jWwKxDLQTE"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Step 3: continue processing data using EOPatches","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AK7R0nO3mR"}],"identifier":"step-3-continue-processing-data-using-eopatches","label":"Step 3: continue processing data using EOPatches","html_id":"step-3-continue-processing-data-using-eopatches","implicit":true,"key":"Tznou9a3rm"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Now we have the EOPatches saved locally, we can continue the process as shown in the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Rl6datlnJO"},{"type":"link","url":"https://eo-learn.readthedocs.io/en/latest/examples.html#land-use-and-land-cover","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"example EOLearn Notebook","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nM3zlkdJBs"}],"urlSource":"https://eo-learn.readthedocs.io/en/latest/examples.html#land-use-and-land-cover","key":"k3yNTygYte"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NRXj9W7cTt"}],"key":"gXKVqlld8K"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Before continuing with ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"epf67Y8MzC"},{"type":"strong","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Model construction and training","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"aT3c1nRs6g"}],"key":"s11zWnx2Lu"},{"type":"text","value":" (see ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"JBJm9H4vNT"},{"type":"link","url":"https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#6.-Model-construction-and-training","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"S3ihhs3byE"}],"urlSource":"https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#6.-Model-construction-and-training","key":"rPx77GprnG"},{"type":"text","value":") we will need to import the reference data for Slovenia first. Since we are querying data over Slovenia, we need to fetch the reference data for the whole country ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"kTc28wVEOz"},{"type":"link","url":"http://eo-learn.sentinel-hub.com/","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"xULwl8iwK7"}],"urlSource":"http://eo-learn.sentinel-hub.com/","key":"NiqUJgsdix"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ZtwGxsm9uZ"}],"key":"LA8pHuR6rs"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"For this example, the reference data prepared for Ljubljana can be downloaded ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"xjy4orlJnm"},{"type":"link","url":"https://github.com/sentinel-hub/eo-learn/blob/master/examples/batch-processing/data/ljubljana_ref.gpkg","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"WCoqVVWufd"}],"urlSource":"https://github.com/sentinel-hub/eo-learn/blob/master/examples/batch-processing/data/ljubljana_ref.gpkg","data":{"kind":"file","org":"sentinel-hub","repo":"eo-learn","reference":"master","file":"examples/batch-processing/data/ljubljana_ref.gpkg","raw":"https://raw.githubusercontent.com/sentinel-hub/eo-learn/master/examples/batch-processing/data/ljubljana_ref.gpkg"},"internal":false,"protocol":"github","key":"xnQgXggrPO"},{"type":"text","value":".","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"JiaSht4fGq"}],"key":"IMYBL2tmXN"}],"key":"T3ZpB0EAqL"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"3.1 Prepare the data to train the LULC prediction model","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ermCIrAyLn"}],"identifier":"id-3-1-prepare-the-data-to-train-the-lulc-prediction-model","label":"3.1 Prepare the data to train the LULC prediction model","html_id":"id-3-1-prepare-the-data-to-train-the-lulc-prediction-model","implicit":true,"key":"mTXAGBTm78"},{"type":"heading","depth":5,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"3.1.1 Setup reference data","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rWv4FidSju"}],"identifier":"id-3-1-1-setup-reference-data","label":"3.1.1 Setup reference data","html_id":"id-3-1-1-setup-reference-data","implicit":true,"key":"wjlDYZZkNy"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"For this example, a subset of the country-wide reference for land-use-land-cover is provided. It is available in the form of a geopackage, which contains polygons and their corresponding labels. The labels represent the following 10 classes:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"JW7gvXFakd"}],"key":"hgJ55SlETz"}],"key":"agInAbb8SD"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":1,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"lulcid = 0, name = no data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Vvcs5kzlBT"}],"key":"zmdheeU00b"},{"type":"listItem","spread":true,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"lulcid = 1, name = cultivated land","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"yNPrp28Ht6"}],"key":"J4qRHCyG1e"},{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"lulcid = 2, name = forest","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"XZxZFysrob"}],"key":"fI7L81By0I"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"lulcid = 3, name = grassland","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"kuJTlEA7O9"}],"key":"tMGezPj278"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"lulcid = 4, name = shrubland","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"jt9tQufrLO"}],"key":"M6YDlvLiYd"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"lulcid = 5, name = water","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"jvJVpJFGs8"}],"key":"TPbxUGlkKb"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"lulcid = 6, name = wetlands","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"u5zLkENeDK"}],"key":"se3saQQd7l"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"lulcid = 7, name = tundra","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"Qr2WR3H9EO"}],"key":"Qa1wmjkTF3"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"lulcid = 8, name = artificial surface","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"alz0tTMnpz"}],"key":"l57OJsScsm"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"lulcid = 9, name = bareland","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"NxLfNAOFrV"}],"key":"jfb92jU0MC"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"lulcid = 10, name = snow and ice","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"qUJI2qcJcv"}],"key":"PLtvoLfPRJ"}],"key":"Dnp7PTWjio"}],"key":"KJZJZpw1JQ"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"class LULC(MultiValueEnum):\n    \"\"\" Enum class containing basic LULC types\n    \"\"\"\n    NO_DATA            = 'No Data',            0,  '#ffffff'\n    CULTIVATED_LAND    = 'Cultivated Land',    1,  '#ffff00'\n    FOREST             = 'Forest',             2,  '#054907'\n    GRASSLAND          = 'Grassland',          3,  '#ffa500'\n    SHRUBLAND          = 'Shrubland',          4,  '#806000'\n    WATER              = 'Water',              5,  '#069af3'\n    WETLAND            = 'Wetlands',           6,  '#95d0fc'\n    TUNDRA             = 'Tundra',             7,  '#967bb6'\n    ARTIFICIAL_SURFACE = 'Artificial Surface', 8,  '#dc143c'\n    BARELAND           = 'Bareland',           9,  '#a6a6a6'\n    SNOW_AND_ICE       = 'Snow and Ice',       10, '#000000'\n\n    @property\n    def id(self):\n        \"\"\" Returns an ID of an enum type\n\n        :return: An ID\n        :rtype: int\n        \"\"\"\n        return self.values[1]\n\n    @property\n    def color(self):\n        \"\"\" Returns class color\n\n        :return: A color in hexadecimal representation\n        :rtype: str\n        \"\"\"\n        return self.values[2]\n\n\ndef get_bounds_from_ids(ids):\n    bounds = []\n    for i in range(len(ids)):\n        if i \u003c len(ids) - 1:\n            if i == 0:\n                diff = (ids[i + 1] - ids[i]) / 2\n                bounds.append(ids[i] - diff)\n            diff = (ids[i + 1] - ids[i]) / 2\n            bounds.append(ids[i] + diff)\n        else:\n            diff = (ids[i] - ids[i - 1]) / 2\n            bounds.append(ids[i] + diff)\n    return bounds\n\n\n# Reference colormap things\nlulc_bounds = get_bounds_from_ids([x.id for x in LULC])\nlulc_cmap = ListedColormap([x.color for x in LULC], name=\"lulc_cmap\")\nlulc_norm = BoundaryNorm(lulc_bounds, lulc_cmap.N)","key":"LaqtAM937T"},{"type":"output","id":"_bdmdDqgw03fGHP6cIB37","data":[],"key":"a4jErCWvmt"}],"key":"qr2S8l7nKC"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The main point of this task is to create a raster mask from the vector polygons and add it to the eopatch. With this procedure, any kind of a labeled shapefile can be transformed into a raster reference map. This result is achieved with the existing task ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oE5pqg60to"},{"type":"inlineCode","value":"VectorToRaster","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zPQOQOBWBO"},{"type":"text","value":" from the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"e3vEqc5rtW"},{"type":"inlineCode","value":"eolearn.geometry package","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vXIloQIIWY"},{"type":"text","value":". All polygons belonging to the each of the classes are separately burned to the raster mask.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sQagQikMUu"}],"key":"Eea267VIeo"}],"key":"TqlxnIeeFN"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# This step takes some time due to the large size of the reference data (https://github.com/sentinel-hub/eo-learn/blob/master/examples/batch-processing/data/ljubljana_ref.gpkg)\nland_use_ref_path = INPUT_DATA.joinpath('ljubljana_ref.gpkg')\n\nland_use_ref = gpd.read_file(land_use_ref_path)\n\nrasterization_task = VectorToRasterTask(land_use_ref, (FeatureType.MASK_TIMELESS, 'LULC'),\n                                    values_column='lulcid', raster_shape=(FeatureType.MASK, 'IS_DATA'),\n                                    raster_dtype=np.uint8)","key":"JAWHfLJB9I"},{"type":"output","id":"u06yok92xnJgXqqNA3JWS","data":[],"key":"s44vOjIEFs"}],"key":"Q1mDcEr2kh"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"3.1.2 Define the workflow","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AFM3xpPriV"}],"identifier":"id-3-1-2-define-the-workflow","label":"3.1.2 Define the workflow","html_id":"id-3-1-2-define-the-workflow","implicit":true,"key":"n8mpT0ghVk"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Now we want to incorporate the reference data to the EOPatches, we need to load and update the existing patches with the reference data (see ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Y2S7cmRiqk"},{"type":"link","url":"https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#Reference-map-task","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"QCjaRWAdPe"}],"urlSource":"https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#Reference-map-task","key":"m9CjTIwNw1"},{"type":"text","value":"). We also want to perform the erosion step shown in the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"MkdBinafZ5"},{"type":"link","url":"https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#5.-Prepare-the-training-data","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"EOLearn LULC example","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uZpcZzzRxM"}],"urlSource":"https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#5.-Prepare-the-training-data","key":"Lfoh7JYD4M"},{"type":"text","value":" in order to “clean” the data, as described in this ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"X8DfmLy3Bp"},{"type":"link","url":"https://medium.com/sentinel-hub/land-cover-classification-with-eo-learn-part-2-bd9aa86f8500","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"blog post","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"B6xwSL9iUe"}],"urlSource":"https://medium.com/sentinel-hub/land-cover-classification-with-eo-learn-part-2-bd9aa86f8500","key":"g6uZSnJIZu"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"pzq9yoMDM2"}],"key":"rCFvKRAaJY"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We will also prepare the model training data (see ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"xpkPXyRkMk"},{"type":"link","url":"https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#5.-Prepare-the-training-data","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"here","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"FL8oIkirqm"}],"urlSource":"https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#5.-Prepare-the-training-data","key":"hmmCWFtciq"},{"type":"text","value":") by performing random spatial sampling of the EOPatches, and finally split patches for training/validation.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"EOSjQl1PAZ"}],"key":"CuQbB8rQ7v"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"The following workflow is created and executed:","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"MtBOmYs6W1"}],"key":"CtDf5ur2bg"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Load the existing EOPatches containing satellite data","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"FoUtMrQUJS"}],"key":"LUGsn3tzwv"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Add rasterised reference data","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"ecxx4olsB7"}],"key":"FW1b0bcrae"},{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Perform erosion task on reference data","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"hKgSlTilRg"}],"key":"Dv9BmmucJc"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Random spatial sampling of the EOPatches","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"DCnAyt5own"}],"key":"HCVObn6MHw"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Split patches for training/validation","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"SGFkXfpz4E"}],"key":"qRRERIXxtZ"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Save updated EOPatches","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"EiBXsyvcyr"}],"key":"QtFyz8EUx1"}],"key":"vJwxL1J2Sz"}],"key":"DHbTidWSNf"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"First we set up the tasks:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Uhb0MjmBJP"}],"key":"mu24FgxSmN"}],"key":"O8BpMEyU4G"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Task for LOAD\nload = LoadTask(f\"{save_folder}/EOPatches\")\n\n# TASK FOR EROSION\n# erode each class of the reference map\nerosion = ErosionTask(mask_feature=(FeatureType.MASK_TIMELESS,'LULC','LULC_ERODED'), disk_radius=1)\n\n# TASK FOR SPATIAL SAMPLING\n# Uniformly sample about pixels from patches\nn_samples = 500000 # half of pixels (1000*1000 patches here)\nref_labels = list(range(11)) # reference labels to take into account when sampling\nspatial_sampling = FractionSamplingTask(\n    features_to_sample=[  # tag fields to sample\n        (FeatureType.DATA, 'FEATURES', 'FEATURES_SAMPLED'),\n        (FeatureType.MASK_TIMELESS, 'LULC_ERODED', 'LULC_ERODED_SAMPLED')],\n    sampling_feature=(FeatureType.MASK_TIMELESS, 'LULC_ERODED'),\n    fraction=0.5\n)\n\n# TASK FOR SAVING\nsave = SaveTask(f\"{save_folder}/EOPatches\", overwrite_permission=OverwritePermission.OVERWRITE_PATCH)","key":"WOyX1d6GVq"},{"type":"output","id":"xzwuLP64ZkdA46IindA4O","data":[],"key":"fS2jve2xLw"}],"key":"m0gtVlDmjF"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Then we wrap tasks into nodes:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Hhxf2AVB0A"}],"key":"wqAUedsK2l"}],"key":"bOcIQydvs7"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# load_node = EONode(load, inputs=[], name=\"Load Task\")\n# erosion_node = EONode(erosion, inputs=[load_node], name=\"Erode Task\")\n# sampling_node = EONode(spatial_sampling, inputs=[erosion_node], name=\"Spatial Sampling Task\")\n# save_node = EONode(save, inputs=[sampling_node], name=\"Save Task\")\nlinked_nodes = linearly_connect_tasks(\n    (load, \"Load Task\"),\n    (rasterization_task, \"Rasterize Task\"),\n    (erosion, \"Erode Task\"), \n    (spatial_sampling, \"Spatial Sampling Task\"),\n    (save, \"Save Task\")\n)","key":"gpvqkjIcK1"},{"type":"output","id":"V_MKCe8fbY37AaXq1DLAh","data":[],"key":"tjSIyMxDOO"}],"key":"KnwysTZ6hA"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Define the workflow\nworkflow = EOWorkflow(linked_nodes)\n\n# Let's visualize it\nworkflow.dependency_graph()","key":"lx4AyhEdOl"},{"type":"output","id":"xb70Lrdw7kHlnRqfKu1cu","data":[{"output_type":"execute_result","execution_count":44,"metadata":{},"data":{"image/svg+xml":{"content":"\u003c?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?\u003e\n\u003c!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\"\n \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"\u003e\n\u003c!-- Generated by graphviz version 2.50.0 (20220117.2223)\n --\u003e\n\u003c!-- Pages: 1 --\u003e\n\u003csvg width=\"743pt\" height=\"44pt\"\n viewBox=\"0.00 0.00 743.45 44.00\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\u003e\n\u003cg id=\"graph0\" class=\"graph\" transform=\"scale(1 1) rotate(0) translate(4 40)\"\u003e\n\u003cpolygon fill=\"white\" stroke=\"transparent\" points=\"-4,4 -4,-40 739.45,-40 739.45,4 -4,4\"/\u003e\n\u003c!-- Load Task --\u003e\n\u003cg id=\"node1\" class=\"node\"\u003e\n\u003ctitle\u003eLoad Task\u003c/title\u003e\n\u003cellipse fill=\"none\" stroke=\"black\" cx=\"47.45\" cy=\"-18\" rx=\"47.39\" ry=\"18\"/\u003e\n\u003ctext text-anchor=\"middle\" x=\"47.45\" y=\"-14.3\" font-family=\"Times,serif\" font-size=\"14.00\"\u003eLoad Task\u003c/text\u003e\n\u003c/g\u003e\n\u003c!-- Rasterize Task --\u003e\n\u003cg id=\"node2\" class=\"node\"\u003e\n\u003ctitle\u003eRasterize Task\u003c/title\u003e\n\u003cellipse fill=\"none\" stroke=\"black\" cx=\"192.64\" cy=\"-18\" rx=\"61.99\" ry=\"18\"/\u003e\n\u003ctext text-anchor=\"middle\" x=\"192.64\" y=\"-14.3\" font-family=\"Times,serif\" font-size=\"14.00\"\u003eRasterize Task\u003c/text\u003e\n\u003c/g\u003e\n\u003c!-- Load Task\u0026#45;\u0026gt;Rasterize Task --\u003e\n\u003cg id=\"edge1\" class=\"edge\"\u003e\n\u003ctitle\u003eLoad Task\u0026#45;\u0026gt;Rasterize Task\u003c/title\u003e\n\u003cpath fill=\"none\" stroke=\"black\" d=\"M94.94,-18C103.15,-18 111.88,-18 120.59,-18\"/\u003e\n\u003cpolygon fill=\"black\" stroke=\"black\" points=\"120.78,-21.5 130.78,-18 120.78,-14.5 120.78,-21.5\"/\u003e\n\u003c/g\u003e\n\u003c!-- Erode Task --\u003e\n\u003cg id=\"node3\" class=\"node\"\u003e\n\u003ctitle\u003eErode Task\u003c/title\u003e\n\u003cellipse fill=\"none\" stroke=\"black\" cx=\"340.43\" cy=\"-18\" rx=\"50.09\" ry=\"18\"/\u003e\n\u003ctext text-anchor=\"middle\" x=\"340.43\" y=\"-14.3\" font-family=\"Times,serif\" font-size=\"14.00\"\u003eErode Task\u003c/text\u003e\n\u003c/g\u003e\n\u003c!-- Rasterize Task\u0026#45;\u0026gt;Erode Task --\u003e\n\u003cg id=\"edge2\" class=\"edge\"\u003e\n\u003ctitle\u003eRasterize Task\u0026#45;\u0026gt;Erode Task\u003c/title\u003e\n\u003cpath fill=\"none\" stroke=\"black\" d=\"M254.62,-18C263.05,-18 271.7,-18 280.1,-18\"/\u003e\n\u003cpolygon fill=\"black\" stroke=\"black\" points=\"280.2,-21.5 290.2,-18 280.2,-14.5 280.2,-21.5\"/\u003e\n\u003c/g\u003e\n\u003c!-- Spatial Sampling Task --\u003e\n\u003cg id=\"node4\" class=\"node\"\u003e\n\u003ctitle\u003eSpatial Sampling Task\u003c/title\u003e\n\u003cellipse fill=\"none\" stroke=\"black\" cx=\"516.81\" cy=\"-18\" rx=\"90.18\" ry=\"18\"/\u003e\n\u003ctext text-anchor=\"middle\" x=\"516.81\" y=\"-14.3\" font-family=\"Times,serif\" font-size=\"14.00\"\u003eSpatial Sampling Task\u003c/text\u003e\n\u003c/g\u003e\n\u003c!-- Erode Task\u0026#45;\u0026gt;Spatial Sampling Task --\u003e\n\u003cg id=\"edge3\" class=\"edge\"\u003e\n\u003ctitle\u003eErode Task\u0026#45;\u0026gt;Spatial Sampling Task\u003c/title\u003e\n\u003cpath fill=\"none\" stroke=\"black\" d=\"M390.93,-18C398.89,-18 407.37,-18 416.02,-18\"/\u003e\n\u003cpolygon fill=\"black\" stroke=\"black\" points=\"416.23,-21.5 426.23,-18 416.23,-14.5 416.23,-21.5\"/\u003e\n\u003c/g\u003e\n\u003c!-- Save Task --\u003e\n\u003cg id=\"node5\" class=\"node\"\u003e\n\u003ctitle\u003eSave Task\u003c/title\u003e\n\u003cellipse fill=\"none\" stroke=\"black\" cx=\"689.3\" cy=\"-18\" rx=\"46.29\" ry=\"18\"/\u003e\n\u003ctext text-anchor=\"middle\" x=\"689.3\" y=\"-14.3\" font-family=\"Times,serif\" font-size=\"14.00\"\u003eSave Task\u003c/text\u003e\n\u003c/g\u003e\n\u003c!-- Spatial Sampling Task\u0026#45;\u0026gt;Save Task --\u003e\n\u003cg id=\"edge4\" class=\"edge\"\u003e\n\u003ctitle\u003eSpatial Sampling Task\u0026#45;\u0026gt;Save Task\u003c/title\u003e\n\u003cpath fill=\"none\" stroke=\"black\" d=\"M607.55,-18C616.12,-18 624.64,-18 632.74,-18\"/\u003e\n\u003cpolygon fill=\"black\" stroke=\"black\" points=\"632.76,-21.5 642.76,-18 632.76,-14.5 632.76,-21.5\"/\u003e\n\u003c/g\u003e\n\u003c/g\u003e\n\u003c/svg\u003e\n","content_type":"image/svg+xml"},"text/plain":{"content":"\u003cgraphviz.graphs.Digraph at 0x7f01d646dc10\u003e","content_type":"text/plain"}}}],"key":"zNc8qxu0AR"}],"key":"NrFlY1oBjL"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":5,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"3.1.3 Run the EOWorkflow over all EOPatches","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"k2VS3idkGI"}],"identifier":"id-3-1-3-run-the-eoworkflow-over-all-eopatches","label":"3.1.3 Run the EOWorkflow over all EOPatches","html_id":"id-3-1-3-run-the-eoworkflow-over-all-eopatches","implicit":true,"key":"o2BWqZsEhF"}],"key":"odVIU7QMnt"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"%%time\n   \nexecution_args = []\nfor patch in Path(save_folder).joinpath(\"EOPatches\").iterdir():\n     execution_args.append({\n         linked_nodes[0]: {'eopatch_folder': patch.name},\n         linked_nodes[3]: {'seed': 42},\n         linked_nodes[-1]: {'eopatch_folder': patch.name}\n    })\n\nexecutor = EOExecutor(workflow, execution_args, save_logs=True)\nexecutor.run(workers=1, multiprocess=False)\n\nexecutor.make_report()","key":"MdMElhzo67"},{"type":"output","id":"40Ex6U5O-Ds1kT1VI0HjD","data":[{"output_type":"display_data","metadata":{},"data":{"application/vnd.jupyter.widget-view+json":{"content":"{\"model_id\":\"02a3be6d209c4a9f867900543f9b3522\",\"version_major\":2,\"version_minor\":0}","content_type":"application/vnd.jupyter.widget-view+json"},"text/plain":{"content":"  0%|          | 0/10 [00:00\u003c?, ?it/s]","content_type":"text/plain"}}},{"name":"stdout","output_type":"stream","text":"CPU times: user 51.1 s, sys: 48.8 s, total: 1min 39s\nWall time: 8min 23s\n"}],"key":"m0kxTg2uzN"}],"key":"n6TFZPOMXj"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"3.2 Visualize the patches","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KxYU5Vgox6"}],"identifier":"id-3-2-visualize-the-patches","label":"3.2 Visualize the patches","html_id":"id-3-2-visualize-the-patches","implicit":true,"key":"szAlMUUh4t"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Now we have EOPatches ready for analysis, we can visualise them before continuing.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tCgeczOn0k"}],"key":"b4waIh1OHh"}],"key":"c7ws9gMGQl"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"# Load a random patch\npatch_ID = 5","key":"nzCi9trtwW"},{"type":"output","id":"U9i7u43zEROES-vaorrT9","data":[],"key":"SU3z2wluSF"}],"key":"BWxjW4QuCU"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"RGB True Color of a Patch","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"L7xQocrmlE"}],"key":"kCypPAuFFk"}],"key":"iza26USmWV"}],"key":"pm99N6aJGc"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, ax = plt.subplots(1,figsize=(12,12))\neopatch = EOPatch.load(f'{save_folder}/EOPatches/eopatch_{patch_ID}', lazy_loading=True)\neopatch\nax.imshow(np.clip(eopatch.data['FEATURES'][1][..., [2, 1, 0]] * 3.5, 0, 1))\nax.set_xticks([])\nax.set_yticks([])\nax.set_aspect(1)\nplt.show()\neopatch = None","key":"F6HWMcrmAT"},{"type":"output","id":"zwpkviM_sLqdzU1MfSUJL","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"a5658cbe4881fe710ac599d8f3ad4d7c","path":"/build/a5658cbe4881fe710ac599d8f3ad4d7c.png"},"text/plain":{"content":"\u003cFigure size 864x864 with 1 Axes\u003e","content_type":"text/plain"}}}],"key":"RH5HNi7VuX"}],"key":"YqvXzfdMd0"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Temporal mean of NDVI of a patch","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TiyBpTiNpF"}],"key":"SGccjtty97"}],"key":"RT9Z1qUUKN"}],"key":"kbWWYtAHem"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, ax = plt.subplots(figsize=(12,12))\neopatch = EOPatch.load(f'{save_folder}/EOPatches/eopatch_{patch_ID}', lazy_loading=True)\nndvi = eopatch.data['FEATURES'][:, :, :, 6]\nmask = eopatch.mask['IS_DATA'].squeeze()\nndvi[mask==0] = np.nan\nndvi_mean = np.nanmean(ndvi, axis=0).squeeze()\nim = ax.imshow(ndvi_mean, vmin=0, vmax=0.8, cmap=plt.get_cmap('YlGn'))\nax.set_xticks([])\nax.set_yticks([])\nax.set_aspect(1)\neopatch = None\n\ncb = fig.colorbar(im, ax=ax, orientation='horizontal', pad=0.01, aspect=100)\ncb.ax.tick_params(labelsize=20) \nplt.show()","key":"LsxMMuHi6h"},{"type":"output","id":"yq8TRGq45vyRiqKfoHj8w","data":[{"output_type":"display_data","metadata":{"needs_background":"light"},"data":{"image/png":{"content_type":"image/png","hash":"31c46b8f9fce4aa18c9cae12a9e6fa25","path":"/build/31c46b8f9fce4aa18c9cae12a9e6fa25.png"},"text/plain":{"content":"\u003cFigure size 864x864 with 2 Axes\u003e","content_type":"text/plain"}}}],"key":"DxnN0dzBF7"}],"key":"woX8DHAKgl"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Reference data example of a Patch","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CaqxgKgjdw"}],"key":"TAngQ8mMsT"}],"key":"r8K9G5keJ0"}],"key":"QhqfeuKxaU"},{"type":"block","kind":"notebook-code","data":{},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, ax = plt.subplots(figsize=(12,12))\neopatch = EOPatch.load(f'{save_folder}/EOPatches/eopatch_{patch_ID}', lazy_loading=True)\n\nax.imshow(eopatch.mask_timeless['LULC'].squeeze(), cmap=lulc_cmap, norm=lulc_norm)\nax.set_xticks([])\nax.set_yticks([])\nax.set_aspect(1)\neopatch = None","key":"tpiiCVKLOl"},{"type":"output","id":"4vJfBE7icLNHQlI4071zJ","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"42d5f651e938d4c0b5eeb5b0c435201d","path":"/build/42d5f651e938d4c0b5eeb5b0c435201d.png"},"text/plain":{"content":"\u003cFigure size 864x864 with 1 Axes\u003e","content_type":"text/plain"}}}],"key":"qNeQOUpQWn"}],"key":"s1eWblqd6K"},{"type":"block","kind":"notebook-content","data":{},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Note:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mxurS3tHf7"}],"identifier":"note","label":"Note:","html_id":"note","implicit":true,"key":"A6XXa7E6sq"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"At this point, we have a setup similar to what we would have at ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CG4GuXOnKK"},{"type":"link","url":"https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#6.-Model-construction-and-training","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Section 6","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"i2EYU9B5ow"}],"urlSource":"https://eo-learn.readthedocs.io/en/latest/examples/land-cover-map/SI_LULC_pipeline.html#6.-Model-construction-and-training","key":"YBeJBeFJAa"},{"type":"text","value":" of the eo-learn LULC tutorial. If you are familiar with the process you can stop here, or you can continue the steps described in the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hdqGEtz3xR"},{"type":"link","url":"https://github.com/sentinel-hub/eo-learn/blob/master/examples/land-cover-map/SI_LULC_pipeline.ipynb","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"the eo-learn example","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WKVndhEtrR"}],"urlSource":"https://github.com/sentinel-hub/eo-learn/blob/master/examples/land-cover-map/SI_LULC_pipeline.ipynb","data":{"kind":"file","org":"sentinel-hub","repo":"eo-learn","reference":"master","file":"examples/land-cover-map/SI_LULC_pipeline.ipynb","raw":"https://raw.githubusercontent.com/sentinel-hub/eo-learn/master/examples/land-cover-map/SI_LULC_pipeline.ipynb"},"internal":false,"protocol":"github","key":"RzVA9fe8ZY"},{"type":"text","value":" Notebook from here on.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"goIDhilFNP"}],"key":"mQwxT7sEpD"}],"key":"MByvUnESnc"}],"key":"whmqcu2UW7"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"ESA EO \\phi- week 2020","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/gran-chaco-phiweek","group":"Contributions"},"next":{"title":"LPIS Use Case for Land Use / Land Cover Classification","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/lpis-lulc-slo","group":"Contributions"}}},"domain":"http://localhost:3000"},"project":{"github":"https://github.com/eoxhub-workspaces/documentation/","id":"5aa0318b-5bc1-41e2-b1d4-053e8b61961b","exports":[],"bibliography":[],"title":"Location for eodashboard notebooks","index":"readme","pages":[{"title":"External Notebooks","level":1},{"title":"Eurodatacube","level":2},{"title":"Notebooks","level":3},{"slug":"external-notebooks.eurodatacube.notebooks.readme","title":"Jupyter notebooks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Notebooks","level":4},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.readme","title":"Euro Data Cube Notebooks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":5},{"title":"Contributions","level":5},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-ai4arctic-sea-ice","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-biomass-forest-observation-sys","title":"AIREO pilot dataset - Biomass (Forest Observation System)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-cap","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-spacenet7","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aot-covid19","title":"Aerosol Optical Thickness (AOT) Anomaly Detection Using Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.batch-zarr-output","title":"Generating Zarr data cubes with Sentinel Hub Batch API","description":"","date":"","thumbnail":"/build/68dffbf744fa42f4bf3d35e55684984e.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.client-side-processing-using-mass-sh","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.cmems-data-download","title":"Cmems Data Download","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.detect-trucks-sentinel2","title":"Detect Trucks using Sentinel-2 data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.drought-monitoring","title":"Drought impact monitoring platform","description":"","date":"","thumbnail":"/build/ad5c19782b006f72352ae57794305840.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-africa-cube-africa-custom-contest","title":"Custom Script Contest – Urban Growth in Africa","description":"","date":"","thumbnail":"/build/e9275f3fe80a704e2f5aa1ec1220e48a.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-byoc-tutorial","title":"How to bring your own data to EDC: Using Sentinel Hub Python package","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-demo-phi-week-v2","title":"xcube-gen and xcube-geodb Hands-On Workshop Φ-Week 2020","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-geodb-4-eurocrops-demo","title":"Demonstration of Eurocrops data use in geoDB","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-notebook-lstm","title":"South Africa Crop Type Classification on Euro Data Cube (EDC)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-usecase-lpis-crop-type-classification","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.eurocrops-crop-classification-example","title":"Crop-classification using Sentinel-2 time-series","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ghsl-urban-delineation","title":"\u003cb\u003eUrban delineation\u003cb\u003e","description":"","date":"","thumbnail":"/build/7bbf545a5eae1d9ebdb91ae42b261063.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.globalearthmonitor-example","title":"Pre-requisites","description":"","date":"","thumbnail":"/build/205c1ded6bd59771975a9fbd3753fd3b.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.gpu-support-eoxhub","title":"GPU-Support on EOxHub","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.gran-chaco-phiweek","title":"ESA EO \\phi- week 2020","description":"","date":"","thumbnail":"/build/80cee7db6cdc7002ceedda5689f889fa.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.howtolulc-batch-updated-210621","title":"How To: Land-Use-Land-Cover Prediction for Slovenia - using the Batch Processing API","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.lpis-lulc-slo","title":"LPIS Use Case for Land Use / Land Cover Classification","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.lps2022-leverage-euro-data-cube-services","title":"Living Planet Symposium 2022 Training Session","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.no2-analysis-covid19-lockdowns","title":"Impact of Covid19 induced lockdown on NO2 levels","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.no2-so2-trend-veda-api-igarss-2023","title":"Using the NASA VEDA EOAPI","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ogc-edc","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.openeo-client-demo","title":"openEO Client Demo","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.race-finishedgoodsinventory-inidcator","title":"Finished Goods Inventory indicator for RACE","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.third-party-planetscope","title":"Third Party Data Import - PlanetScope","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.xcube-access-datasets","title":"Using xcube to access non-commercial and commercial data sets","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.xcube-viewer-as-a-service-in-edc1","title":"Visualizing data with xcube viewer in EuroDataCube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-evaluation-workshop","title":"DAPA Evaluation Workshop: Introduction \u0026 Documentation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-1-cube-sentinel-2","title":"DAPA Tutorial #1: Cube - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-2-area-sentinel-2","title":"DAPA Tutorial #2: Area - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-3-timeseries-sentinel-2","title":"DAPA Tutorial #3: Timeseries - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-4-value-sentinel-2","title":"DAPA Tutorial #4: Value - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-5-dem","title":"DAPA Tutorial #5: DEM","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.fairicube.fairicube-data-access-demonstration","title":"EDC Sentinel Hub - data access using xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-australian-bushfires","title":"Australian Bushfires","description":"","date":"","thumbnail":"/build/ab194b4f8c40a2b9d64d8a85e37ce1fd.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["IGARSS-22","EO Dashboard"],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-data-access","title":"Data Access","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-detect-trucks-sentinel2","title":"Truck Detection Exercise","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-lockdown-in-venice","title":"Environmental Impacts of Lockdown in Venice, Italy during 2020","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-nasa-api-lockdown-in-venice","title":"Lockdown in Venice","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-no2-timeseries-analysis","title":"NO2 timeseries analysis","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-timeseries-stac-api-single-vs-multi","title":"Time series using STAC API statistics endpoints","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"Curated","level":5},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.access-iacs-data","title":"How to access IACS Spatial Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-access-cci-data","title":"Access CCI data with xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-first-steps","title":"First steps on the Euro Data Cube platform","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-1-manage-datasets-v11","title":"Manage Collections in your GeoDB","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-2-explore-datasets-2","title":"Exploring Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-3-share-datasets1","title":"Sharing Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-access-urban-atlas-data-v1","title":"[xcube-geodb] How to accesss EEA Urban Atlas Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-data-access","title":"EDC Sentinel Hub - data access using xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinelhub-datafusion-basic","title":"EDC Sentinel Hub: Data Fusion","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinelhub-datafusion-ndvi","title":"EDC Sentinel Hub: Data Fusion","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-datasets","title":"EDC Sentinel Hub - using xcube to access different data sets in Sentinel Hub","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-setup","title":"Setup for EDC core API access using xcube client library","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-xcube-integration","title":"EDC Sentinel Hub - XCUBE integration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-usecase-ndvi-timeline","title":"NDVI timeline","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.eo-learn","title":"Using eo-learn in EDC: a starter’s guide.","description":"","date":"","thumbnail":"/build/5a1f8475f0c3652f4630d03d72891b98.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.esdl-edc-v0-2","title":"Earth System Data Lab Tutorial @ Euro Data Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.exploring-time-and-space-with-edc","title":"Exploring Time and Space: A guide to accessing, analysing and visualising data in the Euro Data Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.how-to-access-dem-data-through-sentinel-hub-api","title":"How to access DEM data through Sentinel Hub API","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.sentinelhub-py","title":"Using Sentinel Hub Process API in EDC: a starter’s guide.","description":"","date":"","thumbnail":"/build/01e22903839391bc356ac886ec2b2fa7.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"Notebooks","level":1},{"slug":"notebooks.example1","title":"📘 Example Notebook 1","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.example2","title":"📘 Example Notebook 2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/build/manifest-B4831781.js";
import * as route0 from "/build/root-QGLRP2PL.js";
import * as route1 from "/build/routes/$-7JYT5576.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/build/entry.client-UNPC4GT3.js");</script></body></html>