<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>&lt;b&gt;Urban delineation&lt;b&gt; - Location for eodashboard notebooks</title><meta property="og:title" content="&lt;b&gt;Urban delineation&lt;b&gt; - Location for eodashboard notebooks"/><meta name="generator" content="mystmd"/><meta name="keywords" content=""/><meta name="image" content="/notebooks_test/build/7bbf545a5eae1d9ebdb91ae42b261063.png"/><meta property="og:image" content="/notebooks_test/build/7bbf545a5eae1d9ebdb91ae42b261063.png"/><link rel="stylesheet" href="/notebooks_test/build/_assets/app-HG4THSM4.css"/><link rel="stylesheet" href="/notebooks_test/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/notebooks_test/favicon.ico"/><link rel="stylesheet" href="/notebooks_test/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="block px-2 py-1 text-black underline">Skip to article content</a></div><div class="bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><a class="flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/notebooks_test/"><span class="text-md sm:text-xl tracking-tight sm:mr-5">Made with MyST</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R3iop:" data-state="closed" class="flex items-center h-10 aspect-square sm:w-64 text-left text-gray-400 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="hidden sm:block grow">Search</span><div aria-hidden="true" class="items-center hidden mx-1 font-mono text-sm text-gray-400 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-8 h-8 mx-3" title="Toggle theme between light and dark mode." aria-label="Toggle theme between light and dark mode."><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><article class="article content article-grid grid-gap"><main class="article-grid subgrid-gap col-screen"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="mb-8 pt-9"><div class="flex items-center h-6 mb-5 text-sm font-light"><div class="flex-grow"></div><a href="https://github.com/eoxhub-workspaces/documentation/" title="GitHub Repository: eoxhub-workspaces/documentation/" target="_blank" rel="noopener noreferrer" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a><div class="inline-block mr-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block"><title>Jupyter Notebook</title><path d="M20.2 1.7c0 .8-.5 1.4-1.3 1.5-.8 0-1.4-.5-1.5-1.3 0-.8.5-1.4 1.3-1.5.8-.1 1.5.5 1.5 1.3zM12 17.9c-3.7 0-7-1.3-8.7-3.3 1.8 4.8 7.1 7.3 11.9 5.5 2.5-.9 4.5-2.9 5.5-5.5-1.7 2-4.9 3.3-8.7 3.3zM12 5.1c3.7 0 7 1.3 8.7 3.3-1.8-4.8-7.1-7.3-11.9-5.5-2.5.9-4.5 2.9-5.5 5.5 1.7-2 5-3.3 8.7-3.3zM6.9 21.8c.1 1-.7 1.8-1.7 1.9-1 .1-1.8-.7-1.9-1.7 0-1 .7-1.8 1.7-1.9 1-.1 1.8.7 1.9 1.7zM3.7 4.6c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1c0 .5-.4 1-1 1z"></path></svg></div><div class="relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="relative ml-2 -mr-1" id="headlessui-menu-button-:Rd4fop:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="mb-0">&lt;b&gt;Urban delineation&lt;b&gt;</h1></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><div id="XPPFti6V5s" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from eoxhub import check_compatibility
check_compatibility(&quot;user-2023.03-02&quot;, dependencies=[&quot;GEODB&quot;])</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="wFKBwo5ZhfD5QyEfVGLx1" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="CffEmYzvm0" class="relative group/block"><h1 id="urban-delineation" class="relative group"><span class="heading-text"><strong></strong>Urban delineation<strong></strong></span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#urban-delineation" title="Link to this Section" aria-label="Link to this Section">¶</a></h1><p>This notebook implements a GHSL settlement model algorithm as defined by the stage I of the Degree of Urbanisation (European Commission &amp; Statistical Office of the European Union, 2021) and recommended by the UN STAT COM.
Model uses the population and built-up surface grid - European Commission, Joint Research Centre (JRC)<br/>
The method here implemented is described in detail bellow.</p></div><div id="EvIlJbpVl2" class="relative group/block"><h2 id="ghsl-settlement-model" class="relative group"><span class="heading-text"><strong></strong> GHSL - settlement model <strong></strong></span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#ghsl-settlement-model" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Delineate and classify settlement by typologies</p></div><div id="keqbzNua94" class="relative group/block"><h2 id="setlment-l1-nomenclature" class="relative group"><span class="heading-text">Setlment L1 nomenclature:</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#setlment-l1-nomenclature" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><h3 id="urban-centre-high-density-cluster-hdc" class="relative group"><span class="heading-text">Urban Centre - High Density Cluster (HDC)</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#urban-centre-high-density-cluster-hdc" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><h3 id="urban-cluster-moderate-density-cluster-mdc" class="relative group"><span class="heading-text">Urban Cluster - Moderate Density Cluster (MDC)</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#urban-cluster-moderate-density-cluster-mdc" title="Link to this Section" aria-label="Link to this Section">¶</a></h3></div><div id="hNDJfuQa6i" class="relative group/block"><img id="yzB862UzI4" style="margin:0 auto" src="/notebooks_test/build/7bbf545a5eae1d9ebdb91ae42b261063.png" alt="image.png" data-canonical-url="data:image/png;base64,iVBORw0KGg...lFTkSuQmCC"/><img id="BZ6yzkHNUl" style="margin:0 auto" src="/notebooks_test/build/5d9ed6542f287f79b0a02b8c9a7429fd.png" alt="image.png" data-canonical-url="data:image/png;base64,iVBORw0KGg...5ErkJggg=="/></div><div id="r0vm8zpalo" class="relative group/block"><h2 id="setlment-l2-nomenclature" class="relative group"><span class="heading-text">Setlment L2 nomenclature:</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#setlment-l2-nomenclature" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><h3 id="urban-centre-high-density-cluster-hdc-1" class="relative group"><span class="heading-text">Urban Centre - High Density Cluster (HDC)</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#urban-centre-high-density-cluster-hdc-1" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><h3 id="dense-urban-cluster-duc" class="relative group"><span class="heading-text">Dense Urban Cluster (DUC)</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#dense-urban-cluster-duc" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><h3 id="semidense-urban-cluster-sduc" class="relative group"><span class="heading-text">SemiDense Urban Cluster (SDUC)</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#semidense-urban-cluster-sduc" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><h3 id="peri-urban-cluster-puc" class="relative group"><span class="heading-text">Peri-Urban Cluster (PUC)</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#peri-urban-cluster-puc" title="Link to this Section" aria-label="Link to this Section">¶</a></h3></div><div id="wF95JETZGt" class="relative group/block"><p><img id="Awd5lKS2zi" style="margin:0 auto" src="/notebooks_test/build/6afbabbcb8110a51d59cc60ec6417ae0.png" alt="image.png" data-canonical-url="data:image/png;base64,iVBORw0KGg...VORK5CYII="/>
<img id="MoYEIw0sU2" style="margin:0 auto" src="/notebooks_test/build/18ac3c1dd60273849534fede6130e6ad.png" alt="image.png" data-canonical-url="data:image/png;base64,iVBORw0KGg...5ErkJggg=="/></p></div><div id="C3tyyYoTFf" class="relative group/block"><p><strong>GHSL data packages for settlement model:</strong><br/>
<br/>
built-up:
<a target="_blank" rel="noreferrer" href="https://ghsl.jrc.ec.europa.eu/download.php?ds=bu" class="">https://<wbr/>ghsl<wbr/>.jrc<wbr/>.ec<wbr/>.europa<wbr/>.eu<wbr/>/download<wbr/>.php<wbr/>?ds<wbr/>=bu</a>
<br/>
population:
<a target="_blank" rel="noreferrer" href="https://ghsl.jrc.ec.europa.eu/download.php?ds=pop" class="">https://<wbr/>ghsl<wbr/>.jrc<wbr/>.ec<wbr/>.europa<wbr/>.eu<wbr/>/download<wbr/>.php<wbr/>?ds<wbr/>=<wbr/>pop</a>
<br/>
<br/>
Reference years: from 1975 to 2020, 5 years interval<br/>
Resolution: 1km<br/>
Coord. system: Mollweide<br/>
Complete information about GHSL open data are available at:<br/>
<a target="_blank" rel="noreferrer" href="https://ghsl.jrc.ec.europa.eu/documents/GHSL_Data_Package_2022.pdf?t=1655995832" class="">https://<wbr/>ghsl<wbr/>.jrc<wbr/>.ec<wbr/>.europa<wbr/>.eu<wbr/>/documents<wbr/>/GHSL<wbr/>_Data<wbr/>_Package<wbr/>_2022<wbr/>.pdf<wbr/>?t<wbr/>=<wbr/>1655995832</a>
<br/>
<br/></p></div><div id="h3dfm4rRb9" class="relative group/block"><h2 id="parameters-by-definition-of-ghsl-settlement-model-l1-and-l2" class="relative group"><span class="heading-text"><strong></strong>Parameters by definition of GHSL settlement model L1 and L2<strong></strong></span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#parameters-by-definition-of-ghsl-settlement-model-l1-and-l2" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><ul><li><p>Threshold for total population per square kilometer : HDC_Pdens / MDC_Pdens</p></li><li><p>Threshold for population per cluster : HDC_Pmin / MDC_Pmin</p></li><li><p>Threshold for % of built-up area : HDC_Bdens</p></li><li><p>Cluster connectivity : HDC_Tcon / MDC_Tcon</p></li></ul></div><div id="bqx2wAP2vA" class="relative group/block"><h3 id="constants-pdens-bdens-pmin-tcon" class="relative group"><span class="heading-text"><strong></strong>Constants : Pdens, Bdens, Pmin, Tcon<strong></strong></span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#constants-pdens-bdens-pmin-tcon" title="Link to this Section" aria-label="Link to this Section">¶</a></h3></div><div id="rM3A7i5SPu" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># local population density (HDC: 1500 people/km2, MDC: 300 people/km2)
HDC_Pdens=1500
MDC_Pdens =300

# built-up area share &gt; then
HDC_Bdens=500000 # (share of built-up area/km2: 0.5 =&gt; 500000 m2/km2)

# cluster populatin &gt; then   (HDC: 50000 people, MDC: 5000 people)
HDC_Pmin=50000
MDC_Pmin=5000

# connectivity clusters
# Tcon=1 for 4-connectivity clusters, Tcon=2 for 8-connectivity clusters
HDC_Tcon=1 
MDC_Tcon=2 

# gap filling (&lt;15km2)
HDC_GAPfill=15</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="sZCcaodU1bGgb5Skn2w9a" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="dctdkIdZLx" class="relative group/block"><h2 id="load-libraries" class="relative group"><span class="heading-text"><strong></strong>Load libraries:<strong></strong></span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#load-libraries" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="gfZO1WPAW3" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from xcube.core.store import new_data_store

import os
from glob import glob
from pathlib import Path

import numpy as np
import pandas as pd
import geopandas as gpd
from shapely.geometry import shape, box

import xarray as xr
import rioxarray as rxr

import rasterio
import rasterio.features
from rasterio.features import shapes

from skimage import measure, morphology
from skimage.morphology import square
import scipy

import ipywidgets as widgets
import matplotlib.pyplot as plt

import folium
from folium import plugins
</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="g813id5ENuB0qoQ7rnAUL" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="GDArQtHUlA" class="relative group/block"><h1 id="select-reference-year-and-area-of-interest" class="relative group"><span class="heading-text"><strong></strong>Select reference year and area of interest: <strong></strong></span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#select-reference-year-and-area-of-interest" title="Link to this Section" aria-label="Link to this Section">¶</a></h1><p>Before starts, the reference year and the area of interest needs to be defined.</p><h2 id="reference-year" class="relative group"><span class="heading-text"><strong></strong>Reference year <strong></strong></span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#reference-year" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="EfgNZkrJZi" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Select reference year:
# from 1975 to 2020, 5 years interval:
# valid values are: 1975, 1980, 1985, 1990, 1995, 2000, 2005, 2010, 2015, 2020

REFyear=2020
</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="1Sm3Twx2WOdBobQQtP-nP" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="QN6cTzI86W" class="relative group/block"><h2 id="area-of-interest" class="relative group"><span class="heading-text"><strong></strong>Area of interest <strong></strong></span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#area-of-interest" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="ZDKOhwl8Gv" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Select AOI by lat/lon coordinates -  example for area of Poland, Czechia and Slovakia:
x1 = 10  # degree (E-W)
y1 = 47 # degree (N-S)
x2 = 25  # degree (E-W)
y2 = 55 # degree (N-S)

aoi_centre = [(y2+y1)/2,(x2+x1)/2]
print(aoi_centre)

bbox = x1, y1, x2, y2
print(bbox)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="YNU_4Ppku7yMYlzmzy1eL" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>[51.0, 17.5]
(10, 47, 25, 55)
</span></code></pre></div></div></div><div id="uxwrCHd4v3" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">geom = box(*bbox)
AOI = gpd.GeoDataFrame({&quot;id&quot;:1,&quot;geometry&quot;:[geom]})
AOI.set_crs(epsg=4326, inplace=True)  # WGS84
AOI54009 = AOI.to_crs(crs=&#x27;ESRI:54009&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="FrY1dh7xNPzvlDP87MIrY" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="mFoQslU5W6" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from branca.element import Figure
fig = Figure(width=600, height=600)

m = folium.Map(aoi_centre, zoom_start=5, tiles=&#x27;cartodbpositron&#x27;)  # ,width=500, height=500
lat_interval = 1
lon_interval = 1

# parallels:
for lat in range(-90, 91, lat_interval):
     folium.PolyLine([[lat, -180],[lat, 180]], weight=0.5).add_to(m)
# meridianss:
for lon in range(-180, 181, lon_interval):
    folium.PolyLine([[-90, lon],[90, lon]], weight=0.5).add_to(m)

AOI54009.explore(m=m,style_kwds=dict(color=&#x27;blue&#x27;,fillColor=&#x27;None&#x27;, opacity=0.7))
fig.add_child(m)
m</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="qMaXzqrLacPdwG8ap4ctS" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="xHvPoTZjgZ" class="relative group/block"><h1 id="input-data" class="relative group"><span class="heading-text"><strong></strong>Input data<strong></strong></span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#input-data" title="Link to this Section" aria-label="Link to this Section">¶</a></h1></div><div id="BLogL6zJGh" class="relative group/block"><h2 id="open-ghs-built-up-surface" class="relative group"><span class="heading-text">Open GHS built-up surface</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#open-ghs-built-up-surface" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="ojqB5QG6a6" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">BTU_data_store = new_data_store(&quot;s3&quot;, root=&quot;xcube-dcfs/GHSL/GHS-BUILT-S/&quot;,
                            storage_options=dict(anon=True) # anon=True - anonymous access (default False)
                           )</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="2zuwl9OjSQYsyWkmzSHBG" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="dbO5EqeNpk" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">BTU_data_store_info = list(BTU_data_store.get_data_ids())
BTU_data_store_info</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="NjsU8kAx0bsSvnqp2S67K" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>[&#x27;GHS_BUILT_S_E1975_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;GHS_BUILT_S_E1980_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;GHS_BUILT_S_E1985_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;GHS_BUILT_S_E1990_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;GHS_BUILT_S_E1995_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;GHS_BUILT_S_E2000_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;GHS_BUILT_S_E2005_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;GHS_BUILT_S_E2010_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;GHS_BUILT_S_E2015_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;GHS_BUILT_S_E2020_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;]</span></code></div></div></div><div id="kYhmYfICSl" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Select built-up data for Reference year
BTU_REFyear= &#x27;\n&#x27;.join(s for s in BTU_data_store_info if str(REFyear) in s)
# BTU_REFyear</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="Hjmffj3_fspMm6s-cnr2R" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="rtKZ2mMdfF" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Info about built-up data for Reference year
BTU_data_store.describe_data(BTU_REFyear).to_dict()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="z87LAGQzZHw3TI26iS9j4" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>{&#x27;data_id&#x27;: &#x27;GHS_BUILT_S_E2020_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;data_type&#x27;: &#x27;mldataset&#x27;,
 &#x27;bbox&#x27;: [-18041000.0, -9000000.0, 18041000.0, 9000000.0],
 &#x27;time_range&#x27;: [None, None],
 &#x27;dims&#x27;: {&#x27;x&#x27;: 36082, &#x27;y&#x27;: 18000},
 &#x27;spatial_res&#x27;: 1000.0,
 &#x27;coords&#x27;: {&#x27;x&#x27;: {&#x27;name&#x27;: &#x27;x&#x27;, &#x27;dtype&#x27;: &#x27;float64&#x27;, &#x27;dims&#x27;: [&#x27;x&#x27;]},
  &#x27;y&#x27;: {&#x27;name&#x27;: &#x27;y&#x27;, &#x27;dtype&#x27;: &#x27;float64&#x27;, &#x27;dims&#x27;: [&#x27;y&#x27;]},
  &#x27;spatial_ref&#x27;: {&#x27;name&#x27;: &#x27;spatial_ref&#x27;,
   &#x27;dtype&#x27;: &#x27;int64&#x27;,
   &#x27;dims&#x27;: [],
   &#x27;attrs&#x27;: {&#x27;crs_wkt&#x27;: &#x27;PROJCS[&quot;World_Mollweide&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;Degree&quot;,0.0174532925199433]],PROJECTION[&quot;Mollweide&quot;],PARAMETER[&quot;central_meridian&quot;,0],PARAMETER[&quot;false_easting&quot;,0],PARAMETER[&quot;false_northing&quot;,0],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH]]&#x27;,
    &#x27;spatial_ref&#x27;: &#x27;PROJCS[&quot;World_Mollweide&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;Degree&quot;,0.0174532925199433]],PROJECTION[&quot;Mollweide&quot;],PARAMETER[&quot;central_meridian&quot;,0],PARAMETER[&quot;false_easting&quot;,0],PARAMETER[&quot;false_northing&quot;,0],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH]]&#x27;,
    &#x27;GeoTransform&#x27;: &#x27;-18041000.0 1000.0 0.0 9000000.0 0.0 -1000.0&#x27;}}},
 &#x27;data_vars&#x27;: {&#x27;band_1&#x27;: {&#x27;name&#x27;: &#x27;band_1&#x27;,
   &#x27;dtype&#x27;: &#x27;uint32&#x27;,
   &#x27;dims&#x27;: [&#x27;y&#x27;, &#x27;x&#x27;],
   &#x27;chunks&#x27;: [512, 512],
   &#x27;attrs&#x27;: {&#x27;AREA_OR_POINT&#x27;: &#x27;Area&#x27;,
    &#x27;_FillValue&#x27;: 4294967295,
    &#x27;scale_factor&#x27;: 1.0,
    &#x27;add_offset&#x27;: 0.0,
    &#x27;grid_mapping&#x27;: &#x27;spatial_ref&#x27;}}},
 &#x27;attrs&#x27;: {&#x27;source&#x27;: &#x27;s3://xcube-dcfs/GHSL/GHS-BUILT-S/GHS_BUILT_S_E2020_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;},
 &#x27;num_levels&#x27;: 6}</span></code></div></div></div><div id="ntWAj1WSXY" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># # Info about population data for Reference year
# print(BTU_data_store.open_data(BTU_REFyear).num_levels, &#x27;\n&#x27;)
# print(BTU_data_store.open_data(BTU_REFyear).datasets, &#x27;\n&#x27;)
# BTU_data_store.open_data(BTU_REFyear).grid_mapping</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="3x_7L4kJFoJwWWB6mKAmw" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="nzZQ3IJoOA" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">level = 0   # this is the highest resolution, which corresponds to 1km

# Build-up dataset for selected Reference year - clipped by AOI
BTU_ds_0 = BTU_data_store.open_data(BTU_REFyear).get_dataset(level).rio.clip(AOI54009.geometry, AOI54009.crs)
BTU_ds_0 = BTU_ds_0.rename({&quot;band_1&quot;: &quot;built-up&quot;})
#BTU_ds_0</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="bx3sGxYr03Xdck0Mn8Xdn" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="xo8BArR9vu" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># # Info AOI coordinates in the world projection Mollweide (ESRI:54009)
# print(BTU_ds_0.x.min().values, BTU_ds_0.x.max().values)
# print(BTU_ds_0.y.min().values, BTU_ds_0.y.max().values)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="qMRlUoQBZUrhkQ-w8KZdz" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="uYHNFK7mZr" class="relative group/block"><h2 id="open-ghs-population-grid" class="relative group"><span class="heading-text">Open GHS population grid</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#open-ghs-population-grid" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="SgISGe1Koe" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">POP_data_store = new_data_store(&quot;s3&quot;, 
                            root=&quot;xcube-dcfs/GHSL/GHS-POP/&quot;,
                            storage_options=dict(anon=True)
                           )</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="ve_sjIUqwCxh60AyYKCmc" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="nqmvr4GMcG" class="relative group/block"><p>OP_data_store info:</p></div><div id="VWGix6pAjk" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">POP_data_store_info=list(POP_data_store.get_data_ids())
POP_data_store_info</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="QJVf-ZZaDtKWZa7T1Oq9k" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>[&#x27;GHS_POP_E1975_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;GHS_POP_E1980_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;GHS_POP_E1985_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;GHS_POP_E1990_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;GHS_POP_E1995_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;GHS_POP_E2000_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;GHS_POP_E2005_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;GHS_POP_E2010_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;GHS_POP_E2015_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;GHS_POP_E2020_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;]</span></code></div></div></div><div id="DjClhyDTiD" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Select population data for Reference year
POP_REFyear= &#x27;\n&#x27;.join(s for s in POP_data_store_info if str(REFyear) in s)
#POP_REFyear</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="IcfD_b-zhPSAuzZjNt13B" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="yDOwEkGocc" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Info about built-up data for Reference year
POP_data_store.describe_data(POP_REFyear).to_dict()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="0hqQ33_uPBMoyAIS24RPC" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>{&#x27;data_id&#x27;: &#x27;GHS_POP_E2020_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;,
 &#x27;data_type&#x27;: &#x27;mldataset&#x27;,
 &#x27;bbox&#x27;: [-18041000.0, -9000000.0, 18041000.0, 9000000.0],
 &#x27;time_range&#x27;: [None, None],
 &#x27;dims&#x27;: {&#x27;x&#x27;: 36082, &#x27;y&#x27;: 18000},
 &#x27;spatial_res&#x27;: 1000.0,
 &#x27;coords&#x27;: {&#x27;x&#x27;: {&#x27;name&#x27;: &#x27;x&#x27;, &#x27;dtype&#x27;: &#x27;float64&#x27;, &#x27;dims&#x27;: [&#x27;x&#x27;]},
  &#x27;y&#x27;: {&#x27;name&#x27;: &#x27;y&#x27;, &#x27;dtype&#x27;: &#x27;float64&#x27;, &#x27;dims&#x27;: [&#x27;y&#x27;]},
  &#x27;spatial_ref&#x27;: {&#x27;name&#x27;: &#x27;spatial_ref&#x27;,
   &#x27;dtype&#x27;: &#x27;int64&#x27;,
   &#x27;dims&#x27;: [],
   &#x27;attrs&#x27;: {&#x27;crs_wkt&#x27;: &#x27;PROJCS[&quot;World_Mollweide&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;Degree&quot;,0.0174532925199433]],PROJECTION[&quot;Mollweide&quot;],PARAMETER[&quot;central_meridian&quot;,0],PARAMETER[&quot;false_easting&quot;,0],PARAMETER[&quot;false_northing&quot;,0],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH]]&#x27;,
    &#x27;spatial_ref&#x27;: &#x27;PROJCS[&quot;World_Mollweide&quot;,GEOGCS[&quot;WGS 84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;Degree&quot;,0.0174532925199433]],PROJECTION[&quot;Mollweide&quot;],PARAMETER[&quot;central_meridian&quot;,0],PARAMETER[&quot;false_easting&quot;,0],PARAMETER[&quot;false_northing&quot;,0],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AXIS[&quot;Easting&quot;,EAST],AXIS[&quot;Northing&quot;,NORTH]]&#x27;,
    &#x27;GeoTransform&#x27;: &#x27;-18041000.0 1000.0 0.0 9000000.0 0.0 -1000.0&#x27;}}},
 &#x27;data_vars&#x27;: {&#x27;band_1&#x27;: {&#x27;name&#x27;: &#x27;band_1&#x27;,
   &#x27;dtype&#x27;: &#x27;float64&#x27;,
   &#x27;dims&#x27;: [&#x27;y&#x27;, &#x27;x&#x27;],
   &#x27;chunks&#x27;: [512, 512],
   &#x27;attrs&#x27;: {&#x27;AREA_OR_POINT&#x27;: &#x27;Area&#x27;,
    &#x27;STATISTICS_COVARIANCES&#x27;: 330985.3282731281,
    &#x27;STATISTICS_MAXIMUM&#x27;: 615756.8270821,
    &#x27;STATISTICS_MEAN&#x27;: 56.450798856297,
    &#x27;STATISTICS_MEDIAN&#x27;: 0.0,
    &#x27;STATISTICS_MINIMUM&#x27;: 0,
    &#x27;STATISTICS_SKIPFACTORX&#x27;: 1,
    &#x27;STATISTICS_SKIPFACTORY&#x27;: 1,
    &#x27;STATISTICS_STDDEV&#x27;: 575.31324361006,
    &#x27;STATISTICS_VALID_PERCENT&#x27;: 21.26,
    &#x27;_FillValue&#x27;: -200.0,
    &#x27;scale_factor&#x27;: 1.0,
    &#x27;add_offset&#x27;: 0.0,
    &#x27;grid_mapping&#x27;: &#x27;spatial_ref&#x27;}}},
 &#x27;attrs&#x27;: {&#x27;source&#x27;: &#x27;s3://xcube-dcfs/GHSL/GHS-POP/GHS_POP_E2020_GLOBE_R2022A_54009_1000_V1_0.tif&#x27;},
 &#x27;num_levels&#x27;: 6}</span></code></div></div></div><div id="pQoValpoZj" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># # Info about population data for Reference year
# print(POP_data_store.open_data(POP_REFyear).num_levels, &#x27;\n&#x27;)
# print(POP_data_store.open_data(POP_REFyear).datasets, &#x27;\n&#x27;)
# POP_data_store.open_data(POP_REFyear).grid_mapping</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="-aYYWY9zLF2mMm1fcBcyv" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="bRgHW2ctE1" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">level = 0   # this is the highest resolution, which corresponds to 1km

# Population dataset  for selected Reference year - clipped by AOI
POP_ds_0 = POP_data_store.open_data(POP_REFyear).get_dataset(level).rio.clip(AOI54009.geometry, AOI54009.crs)
POP_ds_0 = POP_ds_0.rename({&quot;band_1&quot;: &quot;population_grid&quot;})
#POP_ds_0</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="gudHfGrC4SlbnwHn9cL8k" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="mon5eyR2DU" class="relative group/block"><h2 id="dataset-to-dataarray" class="relative group"><span class="heading-text">Dataset to DataArray</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#dataset-to-dataarray" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="VHe3O8ZOF7" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">BTU_da=(BTU_ds_0[&#x27;built-up&#x27;]).squeeze()
BTU_da = BTU_da.load()
BTU_da=BTU_da.where(BTU_da != BTU_da.attrs[&#x27;_FillValue&#x27;]).fillna(0)
BTU_da</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="8W326lun5kHS83MK7FIxE" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="Wvz5nvwSEJ" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">POP_da=(POP_ds_0[&#x27;population_grid&#x27;]).squeeze()
POP_da = POP_da.load()
POP_da=POP_da.where(POP_da != POP_da.attrs[&#x27;_FillValue&#x27;]).fillna(0)
POP_da</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="vp7Y5LfYntpcRLFoJrOCd" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="lmvRO0TZNf" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># # Info about  DataArray
# print(type(POP_da),&#x27;\n&#x27;)
# print(type(POP_da.data))
# print(POP_da.name), print()
# print(&quot;The shape of data is:\n&quot;, POP_da.shape,&#x27;\n&#x27;)
# print(POP_da.coords), print()
# print(&quot;the minimum raster value is:\n&quot;, np.nanmin(POP_da.values))
# print(&quot;the maximum raster value is:\n&quot;, np.nanmax(POP_da.values),&#x27;\n&#x27;)
# print(&#x27;dim:&#x27;,POP_da.dims,&#x27;\n&#x27;)
# print(&#x27;attributes/metadata:\n&#x27;,POP_da.attrs,&#x27;\n&#x27;)
# print(&#x27;----------------&#x27;)
# # View generate metadata associated with the raster file
# # World Mollweide  ESRI:54009, 
# print(&quot;The crs of data is:\n&quot;, POP_da.rio.crs,&#x27;\n&#x27;)
# print(&#x27;transform:\n&#x27;,POP_da.rio.transform(),&#x27;\n&#x27;)
# print(&quot;The spatial extent is:\n&quot;, POP_da.rio.bounds(),&#x27;\n&#x27;)
# print(&quot;The nodatavalue of data is:\n&quot;, POP_da.rio.nodata,&#x27;\n&#x27;)
# print(&quot;The spatial resolution of data is:\n&quot;, POP_da.rio.resolution(),&#x27;\n&#x27;)

# print(BTU_da.data.min(), BTU_da.data.max())
# print(POP_da.data.min(), POP_da.data.max().round(0))
# POP_da.data</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="RCtaAcIOdqUddafBUFBmR" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="fo6Mcz1V7k" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"></code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="pH4dP2bfYo-_OkMNwJ47T" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="Zo4mxQQj82" class="relative group/block"><h1 id="l1-urban-centre-hdc-and-urban-cluster-mdc" class="relative group"><span class="heading-text"><strong></strong>L1: Urban Centre (HDC) and Urban Cluster (MDC)<strong></strong></span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#l1-urban-centre-hdc-and-urban-cluster-mdc" title="Link to this Section" aria-label="Link to this Section">¶</a></h1></div><div id="CA31zWCmyM" class="relative group/block"><h2 id="step1-built-up-and-population-data-binary-masks-by-model-definition" class="relative group"><span class="heading-text">step1: built-up and population data - binary masks  by model definition</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step1-built-up-and-population-data-binary-masks-by-model-definition" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="NxeRGro4Tt" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># HDC
# built-up area
HDC_BTU_mask = 1 * np.ones_like(BTU_da) * (BTU_da &gt; HDC_Bdens).astype(np.int8)  # HDC_Bdens (share of built-up area/km2: 0.5 =&gt; 500000 m2/km2)
# population
HDC_POP_mask = 1 * np.ones_like(POP_da) * (POP_da &gt; HDC_Pdens).astype(np.int8) # HDC_Pdens &gt;=1500 inh/km2
HDC_UC01_mask = HDC_BTU_mask + HDC_POP_mask

# MDC
MDC_POP_mask = 1 * np.ones_like(POP_da) * (POP_da &gt; MDC_Pdens).astype(np.int8) # MDC_Pdens &gt;=300  inh/km2</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="wSK9iH3Q3lwp9W2xMwnZs" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="C3QxVgAmLr" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># BINARY MASK:
HDC_UC01_mask = 1 * np.ones_like(HDC_UC01_mask) * (HDC_UC01_mask&gt; 0).astype(np.int8)
MDC_UC01_mask = MDC_POP_mask</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="IaSdw9P9MUlnL50-0fVux" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="HnxiLBcNVN" class="relative group/block"><h2 id="step2-cluster-connectivity" class="relative group"><span class="heading-text">step2: cluster connectivity</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step2-cluster-connectivity" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p><a target="_blank" rel="noreferrer" href="https://scikit-image.org/docs/dev/api/skimage.measure.html#skimage.measure.label" class="">https://<wbr/>scikit<wbr/>-image<wbr/>.org<wbr/>/docs<wbr/>/dev<wbr/>/api<wbr/>/skimage<wbr/>.measure<wbr/>.html<wbr/>#skimage<wbr/>.measure<wbr/>.label</a></p></div><div id="XnYUntfeTA" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># 4/8-connectivity regions:
# HDC_Tcon=1 for 4-connectivity clusters
# MDC_Tcon=2 for 8-connectivity clusters

HDC_UC02_4conn = measure.label(HDC_UC01_mask, background=0, return_num=False, connectivity=HDC_Tcon)
# print(&#x27;HDC number of regions:&#x27;, HDC_UC02_4conn.max())

MDC_UC02_8conn = measure.label(MDC_UC01_mask, background=0, return_num=False, connectivity=MDC_Tcon)
# print(&#x27;MDC number of regions:&#x27;, MDC_UC02_8conn.max())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="iU9l-JN4q6xam3jSW8YEt" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="KjOST9flxe" class="relative group/block"><h2 id="step3-total-population-in-cluster" class="relative group"><span class="heading-text">step3: total population in cluster</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step3-total-population-in-cluster" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="mdXyruFa1V" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">HDC_UC03=np.zeros_like(HDC_POP_mask).astype(&#x27;int&#x27;)

POPregionIDsum=[]
POPregionSUM=[]
for regionID in range(1, HDC_UC02_4conn.max()):
    POPregionID=((HDC_UC02_4conn == regionID).astype(&#x27;int&#x27;)) * POP_da.data    
    # threshold for population in cluster &gt; 50000
    if POPregionID.sum() &gt; HDC_Pmin:
        POPregionSUM.append(int(round(POPregionID.sum())))
        POPregionIDsum.append(regionID)
        HDC_UC03=HDC_UC03+np.where(HDC_UC02_4conn == regionID, HDC_UC02_4conn, 0)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="I9bBnSloxxetCB0SYFKO-" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="K3m4Ce9bPd" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">MDC_UC03=np.zeros_like(MDC_POP_mask).astype(&#x27;int&#x27;)

POPregionIDsum=[]
POPregionSUM=[]
for regionID in range(1, MDC_UC02_8conn.max()):
    POPregionID=((MDC_UC02_8conn == regionID).astype(&#x27;int&#x27;)) * POP_da.data    
    # threshold for population in cluster &gt; 5000
    if POPregionID.sum() &gt; MDC_Pmin:
        POPregionSUM.append(int(round(POPregionID.sum())))
        POPregionIDsum.append(regionID)
        MDC_UC03=MDC_UC03+np.where(MDC_UC02_8conn == regionID, MDC_UC02_8conn, 0)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="4xJjuRpeSeyvnJAAkJPPD" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="mF0yUQEjmZ" class="relative group/block"><h1 id="l1-urban-center-hdc" class="relative group"><span class="heading-text">L1: Urban Center (HDC)</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#l1-urban-center-hdc" title="Link to this Section" aria-label="Link to this Section">¶</a></h1></div><div id="LuXRQU26ys" class="relative group/block"><h2 id="step4-urban-centre-hdc-gaps-filling-15km2" class="relative group"><span class="heading-text">step4: Urban Centre (HDC) - gaps filling &lt; 15km2</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step4-urban-centre-hdc-gaps-filling-15km2" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="YH4qCTo1yG" class="relative group/block"><p>inverse raster / gaps</p></div><div id="u90YHPtRqU" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">HDC_UC03_BIN=np.where(HDC_UC03 &gt; 0, 1, 0)
HDC_UC03_INV=np.where(HDC_UC03_BIN == 1, 0, 1)

HDC_UC03_INV = measure.label(HDC_UC03_INV, background=0, connectivity=2) # 8-connectivity
# number of holes
# HDC_UC03_INV.max()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="vab8R3CX0ZhLDYmXaL88K" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="WB4vkXbZHr" class="relative group/block"><p>gaps filling</p></div><div id="JOl8GCO4FD" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">unique, counts = np.unique(HDC_UC03_INV, return_counts=True,)
gaps=list(zip(unique, counts)) 
#print(gaps)

for gap in gaps:
    if gap[1] &lt; HDC_GAPfill:
        gapID=(HDC_UC03_INV == gap[0]).astype(int)        
        HDC_UC03_BIN=HDC_UC03_BIN+gapID</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="eSG_8hkDgwtvg5DPfms7E" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="RT5SEL3iXJ" class="relative group/block"><p>regions where POP &gt; 50000 with filled gaps &lt; 15km2</p></div><div id="k5JvO4quU9" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">HDC_UC03_4conn = measure.label(HDC_UC03_BIN, background=0, connectivity=HDC_Tcon)  # connectivity=HDC_Tcon
print(HDC_UC03_4conn.min(),HDC_UC03_4conn.max())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="lFEkNvhxTpZw6KuWwZxjl" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>0 123
</span></code></pre></div></div></div><div id="BWPnH9KhJp" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># binary raster
HDC_UC04_BIN=np.where(HDC_UC03_4conn &gt;= 1, 1, 0)
print(HDC_UC04_BIN.sum())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="A6Jc587OB5EpGsQtnWG0M" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>8165
</span></code></pre></div></div></div><div id="xxttUAr1Xj" class="relative group/block"><h2 id="step5-urban-centre-hdc-morphology" class="relative group"><span class="heading-text">step5: Urban Centre (HDC) - morphology</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step5-urban-centre-hdc-morphology" title="Link to this Section" aria-label="Link to this Section">¶</a></h2></div><div id="SEvKPHwU56" class="relative group/block"><p>closing, erosion, dilatation</p></div><div id="EEbzhvB5Jf" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">HDC_UC04=np.zeros_like(HDC_UC03_BIN).astype(&#x27;int&#x27;)
# regiony sa vyhodnocuju sekvencne v cykle:
POPregionIDsum=[]
POPregionSUM=[]
for regionID in range(1, HDC_UC03_4conn.max()):
    # mask 0-1 for region, # POP in region
    POPregionID=((HDC_UC03_4conn == regionID).astype(&#x27;int&#x27;))  
    #print(POPregionID.min(), POPregionID.max(), POPregionID.sum())
    POPregionID = morphology.binary_closing(POPregionID, square(3))
    POPregionID= morphology.binary_dilation(POPregionID)
    POPregionID= morphology.binary_erosion(POPregionID)
    #POPregionID = skimage.morphology.binary_closing(POPregionID, square(3))
    HDC_UC04=HDC_UC04+POPregionID
    #print(HDC_UC05.sum())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="lgDtvZwUQqzlkp4H1-M2L" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="zezVpVGnYL" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># gaps filling after morphology:
HDC_UC04_INV=np.where(HDC_UC04 == 1, 0, 1)
HDC_UC04_INV = measure.label(HDC_UC04_INV, background=0, connectivity=2)
# number of holes
HDC_UC04_INV.max()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="jKm3itQLNm8p2n3W8797R" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>2</span></code></div></div></div><div id="b534BIjQfR" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">unique1, counts1 = np.unique(HDC_UC04_INV, return_counts=True,)
gaps1 = [x for x in zip(unique1, counts1) if x[1] &lt; HDC_GAPfill]
#print(gaps1)

for gap1 in gaps1:
    gapID1=(HDC_UC04_INV == gap1[0]).astype(int)
    HDC_UC04=HDC_UC04+gapID1</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="gBU170YUHgnsbsR0sQCad" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="IoHBOuswqG" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">HDC_UC04_4conn = measure.label(HDC_UC04, background=0, connectivity=HDC_Tcon)
HDC_UC04_4conn.max()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="yYZnSaKMMbivY9yl17lXE" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>121</span></code></div></div></div><div id="hvO3dXDcD5" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># binary raster
HDC_UC04_4conn_BIN=np.where(HDC_UC04_4conn &gt;= 1, 1, 0)
HDC_UC04_4conn_BIN.sum()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="46WPrMlp5I-c4dBJZ_HEC" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>9193</span></code></div></div></div><div id="ZNoo4qK3Pf" class="relative group/block"><h1 id="l1-urban-cluster-mdc" class="relative group"><span class="heading-text">L1: Urban Cluster (MDC)</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#l1-urban-cluster-mdc" title="Link to this Section" aria-label="Link to this Section">¶</a></h1></div><div id="mr85tktOZx" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># binary
MDC_UC03=np.where(MDC_UC03 &gt; 0, 1, 0)
# 
MDC_UC04=MDC_UC03-HDC_UC04
MDC_UC04=np.where(MDC_UC04 == 1, 1, 0)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="cv4NuYXFvzMx_ZjDOrdy0" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="Nz0vErmbrO" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">MDC_UC04_8conn = measure.label(MDC_UC04, background=0, connectivity=MDC_Tcon)
print(MDC_UC04_8conn.min(),MDC_UC04_8conn.max())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="0aw0QvDQfmrADdkvTsecL" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>0 1909
</span></code></pre></div></div></div><div id="BAxToHw6na" class="relative group/block"><p><br/>HDC and MDC to vector</p></div><div id="FTJhjiZYqX" class="relative group/block"><p>HDC:  numpy.ndarray to DataArray</p></div><div id="gE3815LaLf" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">HDC_UC05 = xr.DataArray(
    data=HDC_UC04_4conn,
    dims=BTU_da.dims,
    coords=BTU_da.coords,
    name=&#x27;urban_centre&#x27;,
    )

HDC_UC05=HDC_UC05.astype(np.int16)
HDC_UC05</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="ys9Qgxt0Fd9RxHqIYyCul" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="WoR29lxILU" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># # Info about HDC DataArray
# print(&#x27;type:&#x27;,type(HDC_UC05))
# print(&#x27;name:&#x27;,HDC_UC05.name)
# print(&#x27;shape:&#x27;,HDC_UC05.shape)
# #print(HDC_UC05.coords)
# print(&#x27;dim:&#x27;,HDC_UC05.dims,&#x27;\n&#x27;)
# # World Mollweide  ESRI:54009
# print(&quot;The crs is: &quot;, HDC_UC05.rio.crs)
# print(&#x27;transform: &#x27;,HDC_UC05.rio.transform())
# print(&quot;The spatial extent is: &quot;, HDC_UC05.rio.bounds())
# print(&quot;The nodatavalue of data is: &quot;, HDC_UC05.rio.nodata)
# print(&quot;The shape of data is: &quot;, HDC_UC05.shape)
# print(&quot;The spatial resolution of data is: &quot;, HDC_UC05.rio.resolution())
# print(&quot;the minimum raster value is: &quot;, np.nanmin(HDC_UC05.values))
# print(&quot;the maximum raster value is: &quot;, np.nanmax(HDC_UC05.values))
# print(&quot;The metadata of data is: &quot;, HDC_UC05.attrs)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="4LAKVrfCyeMvLB5ibnFVz" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="Y3f4rPOf5J" class="relative group/block"><p>HDC: export to vector</p></div><div id="mw42I7FtYY" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># mask=None
mask=HDC_UC05.data != 0
with HDC_UC05 as src:
    image = src.data # first band
    results = (
    {&#x27;properties&#x27;: {&#x27;raster_val&#x27;: v}, &#x27;geometry&#x27;: s}
    for i, (s, v) 
    in enumerate(
        shapes(image, mask=mask, connectivity=4, transform=HDC_UC05.rio.transform())))

geoms = list(results)
# first feature
# print(geoms[0])</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="bjHsFwXybKuxxuuWxW8CP" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="tTznJaLQ46" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">HDC_UrbanCentre  = gpd.GeoDataFrame.from_features(geoms)
HDC_UrbanCentre.crs=HDC_UC05.rio.crs
HDC_UrbanCentre.raster_val=HDC_UrbanCentre.raster_val.astype(&#x27;int&#x27;)
HDC_UrbanCentre.rename(columns={&#x27;raster_val&#x27;:&#x27;hdcid&#x27;}, inplace=True)
HDC_UrbanCentre[&#x27;area_km2&#x27;] = HDC_UrbanCentre[&#x27;geometry&#x27;].area/ 10**6
HDC_UrbanCentre[&#x27;code&#x27;]=3
HDC_UrbanCentre.sort_values([&#x27;area_km2&#x27;],ascending=False).head(3)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="TZaJiq9yBJgWxj2w8YLuX" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="AYMOUD2bbF" class="relative group/block"><p>MDC:  numpy.ndarray to DataArray</p></div><div id="y3ODlyjbk1" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">MDC_UC05 = xr.DataArray(
    data=MDC_UC04_8conn,
    dims=BTU_da.dims,
    coords=BTU_da.coords,
    name=&#x27;urban_cluster&#x27;,
    )

MDC_UC05=MDC_UC05.astype(np.int16)
MDC_UC05</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="zAF9huQ2Wg_SlScUeEsOb" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="s3ZRxlNXBv" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># # BASIC INFO
# print(&#x27;type:&#x27;,type(MDC_UC05))
# print(&#x27;name:&#x27;,MDC_UC05.name)
# print(&#x27;shape:&#x27;,MDC_UC05.shape)
# #print(MDC_UC05.coords)
# print(&#x27;dim:&#x27;,MDC_UC05.dims,&#x27;\n&#x27;)
# # View generate metadata associated with the raster file
# # World Mollweide  ESRI:54009
# print(&quot;The crs is: &quot;, MDC_UC05.rio.crs)
# print(&#x27;transform: &#x27;,MDC_UC05.rio.transform())
# print(&quot;The spatial extent is: &quot;, MDC_UC05.rio.bounds())
# print(&quot;The nodatavalue of data is: &quot;, MDC_UC05.rio.nodata)
# print(&quot;The shape of data is: &quot;, MDC_UC05.shape)
# print(&quot;The spatial resolution of data is: &quot;, MDC_UC05.rio.resolution())
# print(&quot;the minimum raster value is: &quot;, np.nanmin(MDC_UC05.values))
# print(&quot;the maximum raster value is: &quot;, np.nanmax(MDC_UC05.values))
# print(&quot;The metadata of data is: &quot;, MDC_UC05.attrs,&#x27;\n&#x27;)
# print(MDC_UC05.data.max())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="keoQL4BMnpckXVnhrwCk7" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="INEOb5kejV" class="relative group/block"><p>MDC: export to vector</p></div><div id="rjb6SyitJf" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># mask=None
mask=MDC_UC05.data != 0
with MDC_UC05 as src:
    image = src.data # first band
    results = (
    {&#x27;properties&#x27;: {&#x27;raster_val&#x27;: v}, &#x27;geometry&#x27;: s}
    for i, (s, v) 
    in enumerate(
        shapes(image, mask=mask, connectivity=8, transform=MDC_UC05.rio.transform())))

geoms = list(results)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="HyrQ1crjuABvJmm91wxzc" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="nQo1MC9vdb" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">MDC_UrbanCluster  = gpd.GeoDataFrame.from_features(geoms)
MDC_UrbanCluster.crs=MDC_UC05.rio.crs
MDC_UrbanCluster.raster_val=MDC_UrbanCluster.raster_val.astype(&#x27;int&#x27;)
MDC_UrbanCluster.rename(columns={&#x27;raster_val&#x27;:&#x27;mdcid&#x27;}, inplace=True)
MDC_UrbanCluster[&quot;area_km2&quot;] = MDC_UrbanCluster[&#x27;geometry&#x27;].area/ 10**6
MDC_UrbanCluster[&#x27;code&#x27;]=2
MDC_UrbanCluster.sort_values([&#x27;area_km2&#x27;],ascending=False).head(3)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="K7JSa9u7wo02W4zRss8iB" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="USjah9pWbr" class="relative group/block"><h1 id="hdc-and-mdc-export-to-shapefiles" class="relative group"><span class="heading-text">HDC and MDC export to shapefiles</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#hdc-and-mdc-export-to-shapefiles" title="Link to this Section" aria-label="Link to this Section">¶</a></h1></div><div id="DdYpCddyFi" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Create folder for GHSL_results, if it doesn&#x27;t exist:
Path(os.path.realpath(&#x27;GHSL_results&#x27;)).mkdir(parents=True, exist_ok=True) </code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="Tvawv7HsOBWoJ_EAeSRbh" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="kAVtjrv2RJ" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># EXPORT 2 shapefile World Mollweide (ESRI:54009)
HDC_UrbanCentre.to_file(os.path.join(os.path.realpath(&#x27;GHSL_results&#x27;),&#x27;HDC_UrbanCentre_&#x27;+str(REFyear)+&#x27;.shp&#x27;))
# Export to shapefile WGS84 (EPSG:4326 )
# HDC_UrbanCentre.to_crs(epsg=4326).to_file(os.path.join(os.path.realpath(&#x27;GHSL_results&#x27;),&#x27;HDC_UrbanCentre_4326_&#x27;+str(REFyear)+&#x27;.shp&#x27;))

# EXPORT 2 shapefile World Mollweide (ESRI:54009)
MDC_UrbanCluster.to_file(os.path.join(os.path.realpath(&#x27;GHSL_results&#x27;),&#x27;MDC_UrbanCluster_&#x27;+str(REFyear)+&#x27;.shp&#x27;))
# Export to shapefile WGS84 (EPSG:4326 )
# MDC_UrbanCentre.to_crs(epsg=4326).to_file(os.path.join(os.path.realpath(&#x27;GHSL_results&#x27;),&#x27;MDC_UrbanCluster_4326_&#x27;+str(REFyear)+&#x27;.shp&#x27;))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="teIqHtF-AREoHcLOh-B-3" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="letUri4NEW" class="relative group/block"><h1 id="l1-visualization-of-results" class="relative group"><span class="heading-text">L1: Visualization of results</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#l1-visualization-of-results" title="Link to this Section" aria-label="Link to this Section">¶</a></h1></div><div id="XqRvlGClMX" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">fig = Figure(width=600, height=600)

m = AOI54009.explore(style_kwds={&#x27;fillColor&#x27;:&#x27;None&#x27;,&#x27;color&#x27;:&#x27;blue&#x27;,&#x27;weight&#x27;: 1}, name=&#x27;aoi&#x27;)

# parallels:
for lat in range(-90, 91, lat_interval):
     folium.PolyLine([[lat, -180],[lat, 180]], weight=0.5).add_to(m)
# meridianss:
for lon in range(-180, 181, lon_interval):
    folium.PolyLine([[-90, lon],[90, lon]], weight=0.5).add_to(m)

MDC_UrbanCluster.explore(m=m,style_kwds={&#x27;fillColor&#x27;:&#x27;orange&#x27;,&#x27;color&#x27;:&#x27;orange&#x27;,&#x27;weight&#x27;: 1}, name=&#x27;MDC_UrbanCluster&#x27;)
HDC_UrbanCentre.explore(m=m,style_kwds={&#x27;fillColor&#x27;:&#x27;red&#x27;,&#x27;color&#x27;:&#x27;red&#x27;,&#x27;weight&#x27;: 1.5}, name=&#x27;HDC_UrbanCentre&#x27;)

folium.LayerControl(&#x27;topright&#x27;,collapsed=True).add_to(m)
minimap = plugins.MiniMap(height=90, width=90, zoom_level_offset=-7)
m.add_child(minimap)

fig.add_child(m)
m</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="uS7ED-58n2mV9iVztG8gh" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="dTvoS00Xe1" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"></code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="KlDTgdJMhoq8Slffa6DHz" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="gkETuhor37" class="relative group/block"><h1 id="l2-dense-urban-cluster-duc-semi-dense-urban-cluster-sduc-and-peri-urban-cluster-puc" class="relative group"><span class="heading-text"><strong></strong>L2: Dense Urban Cluster (DUC), Semi-Dense Urban Cluster (SDUC) and  Peri-Urban Cluster (PUC)<strong></strong></span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#l2-dense-urban-cluster-duc-semi-dense-urban-cluster-sduc-and-peri-urban-cluster-puc" title="Link to this Section" aria-label="Link to this Section">¶</a></h1></div><div id="U6HjSiOODs" class="relative group/block"><h1 id="step1-dense-urban-cluster-duc" class="relative group"><span class="heading-text">step1: Dense Urban Cluster (DUC)</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step1-dense-urban-cluster-duc" title="Link to this Section" aria-label="Link to this Section">¶</a></h1></div><div id="H09JTub9Hl" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># MASK
DUC_mask=HDC_UC01_mask  
#print(DUC_mask.sum())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="VlCKNQVrtRFCAsReLsO7q" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="cMy9odeqXO" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># CONNECTIVITY
DUC_4conn = measure.label(DUC_mask, background=0, return_num=False, connectivity=HDC_Tcon) #.squeeze()
print(&#x27;DUC number of regions:&#x27;, DUC_4conn.max())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="5jU74akWYsbATFmZS35BM" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>DUC number of regions: 2437
</span></code></pre></div></div></div><div id="D62gM0Chv7" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># TOTAL POPULATION IN CLUSTER
DUC_UC03=np.zeros_like(HDC_POP_mask).astype(&#x27;int&#x27;)

POPregionIDsum=[]
POPregionSUM=[]
for regionID in range(1, DUC_4conn.max()):
    POPregionID=((DUC_4conn == regionID).astype(&#x27;int&#x27;)) * POP_da.data    
    # threshold for population in cluster &gt; 5000
    if POPregionID.sum() &gt; MDC_Pmin:
        POPregionSUM.append(int(round(POPregionID.sum())))
        POPregionIDsum.append(regionID)
        DUC_UC03=DUC_UC03+np.where(DUC_4conn == regionID, DUC_4conn, 0)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="0rRW_0KrJcr3MfjV9jl7e" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="F30slR3v18" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"></code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="OLhM7R6ATKpZUG5PiVzwO" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="b2CAS7MtIQ" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># SUBTRACTION OF HDC
DUC_UC03_BIN=np.where(DUC_UC03 &gt; 0, 1, 0)
DUC_UC03_BIN=DUC_UC03_BIN-HDC_UC04_4conn_BIN
DUC_UC03_BIN=np.where(DUC_UC03_BIN &gt;0, 1, 0)
print(DUC_UC03_BIN.sum())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="QikuyMN41SU0r-YB62Q0R" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>4591
</span></code></pre></div></div></div><div id="TOrDK1yDz3" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># CONNECTIVITY
DUC_UC04_4conn = measure.label(DUC_UC03_BIN, background=0, connectivity=HDC_Tcon)  # connectivity=HDC_Tcon
print(DUC_UC04_4conn.min(),DUC_UC04_4conn.max())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="2jwINhXRY9FFalIB15gdb" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>0 756
</span></code></pre></div></div></div><div id="LcbkST5Ipk" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># BINARY MASK
DUC_UC04_4conn_BIN=np.where(DUC_UC04_4conn &gt; 0, 1, 0)
DUC_UC04_4conn_BIN.sum()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="4xAhuS8C6wDG98w5qnqH9" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>4591</span></code></div></div></div><div id="YLtNGDBit1" class="relative group/block"><p>DUC:  numpy.ndarray to DataArray</p></div><div id="RCNIehRvjH" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">DUC_UC05 = xr.DataArray(
    data=DUC_UC04_4conn,
    dims=BTU_da.dims,
    coords=BTU_da.coords,
    name=&#x27;dense_urban_cluster&#x27;,
    )

DUC_UC05=DUC_UC05.astype(np.int16)
DUC_UC05</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="JgSruElxFfiOV6DHSRQsQ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="p93lLbwrJT" class="relative group/block"><p>DUC: export to vector</p></div><div id="Fa4cql0JUB" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># mask=None
mask=DUC_UC05.data != 0
with DUC_UC05 as src:
    image = src.data # first band
    results = (
    {&#x27;properties&#x27;: {&#x27;raster_val&#x27;: v}, &#x27;geometry&#x27;: s}
    for i, (s, v) 
    in enumerate(
        shapes(image, mask=mask, connectivity=4, transform=DUC_UC05.rio.transform())))

geoms = list(results)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="alGIZpxADMkyenguuZPiT" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="BAS7Zcr8fW" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">DUC_DenseUrbanCluster  = gpd.GeoDataFrame.from_features(geoms)
DUC_DenseUrbanCluster.crs=DUC_UC05.rio.crs
DUC_DenseUrbanCluster.raster_val=DUC_DenseUrbanCluster.raster_val.astype(&#x27;int&#x27;)
DUC_DenseUrbanCluster.rename(columns={&#x27;raster_val&#x27;:&#x27;ducid&#x27;}, inplace=True)
DUC_DenseUrbanCluster[&#x27;code&#x27;]=23</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="wRYEa3ht-UUGC3oSpONgf" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="RCK7P02pbv" class="relative group/block"><h1 id="step2-semi-dense-urban-cluster-sduc" class="relative group"><span class="heading-text">step2: Semi-Dense Urban Cluster (SDUC)</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step2-semi-dense-urban-cluster-sduc" title="Link to this Section" aria-label="Link to this Section">¶</a></h1></div><div id="j5TKLi0cE1" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># MASK
SDUC_mask=MDC_UC01_mask 
print(DUC_mask.sum())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="6gVWyggXoXWP2dEhN5WTF" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>&lt;xarray.DataArray ()&gt;
array(14494.)
Coordinates:
    spatial_ref  int64 0
</span></code></pre></div></div></div><div id="jZZZ80Pc18" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># CONNECTIVITY
SDUC_8conn = measure.label(SDUC_mask, background=0, return_num=False, connectivity=MDC_Tcon) # 8-connectivity cluster
print(&#x27;SDUC number of regions:&#x27;, SDUC_8conn.max())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="w_5fUzykWbOsuyDRz8BJV" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>SDUC number of regions: 15569
</span></code></pre></div></div></div><div id="ZPMnjcnHNM" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># TOTAL POPULATION IN CLUSTER
SDUC_UC03=np.zeros_like(HDC_POP_mask).astype(&#x27;int&#x27;)

POPregionIDsum=[]
POPregionSUM=[]
for regionID in range(1, SDUC_8conn.max()):
    POPregionID=((SDUC_8conn == regionID).astype(&#x27;int&#x27;)) * POP_da.data    
    # threshold for population in cluster &gt; 5000
    if POPregionID.sum() &gt; MDC_Pmin:
        POPregionSUM.append(int(round(POPregionID.sum())))
        POPregionIDsum.append(regionID)
        SDUC_UC03=SDUC_UC03+np.where(SDUC_8conn == regionID, SDUC_8conn, 0)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="uM0lh06rc-0yG1x7HN20x" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="sJ3pJarNCF" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Minus HDC and DUC
SDUC_UC03_BIN=np.where(SDUC_UC03 &gt; 0, 1, 0)
SDUC_UC03_BIN=SDUC_UC03_BIN - HDC_UC04_4conn_BIN - DUC_UC04_4conn_BIN
SDUC_UC03_BIN=np.where(SDUC_UC03_BIN &gt;0, 1, 0)
print(SDUC_UC03_BIN.sum())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="3oFm-hVdXgqFfksI5Uu3F" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>32703
</span></code></pre></div></div></div><div id="RyK5cXvJ2p" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">SDUC_UC04_8conn = measure.label(SDUC_UC03_BIN, background=0, connectivity=MDC_Tcon)  # connectivity=HDC_Tcon
print(SDUC_UC04_8conn.min(),SDUC_UC04_8conn.max())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="II0D3A17IDuJTa_sayn5Q" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>0 2536
</span></code></pre></div></div></div><div id="zv7Wc4Tnno" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">SDUC_UC05 = xr.DataArray(
    data=SDUC_UC04_8conn,
    dims=BTU_da.dims,
    coords=BTU_da.coords,
    name=&#x27;semidense_urban_cluster&#x27;,
    )

SDUC_UC05=SDUC_UC05.astype(np.int16)
SDUC_UC05</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="83WxIheknwic-WxpOqdNX" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="hg3cD9axrh" class="relative group/block"><p>SDUC: export to vector</p></div><div id="ApeAzawOpg" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># mask=None
mask=SDUC_UC05.data != 0
with SDUC_UC05 as src:
    image = src.data # first band
    results = (
    {&#x27;properties&#x27;: {&#x27;raster_val&#x27;: v}, &#x27;geometry&#x27;: s}
    for i, (s, v) 
    in enumerate(
        shapes(image, mask=mask, connectivity=8, transform=SDUC_UC05.rio.transform())))

geoms = list(results)
# first feature
# print(geoms[0])</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="mZ6ShZFTTgEj6O7Z6kJIE" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="xVXda1meoJ" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">SDUC_SemiDenseUrbanCluster_temp  = gpd.GeoDataFrame.from_features(geoms)
SDUC_SemiDenseUrbanCluster_temp.crs=SDUC_UC05.rio.crs
SDUC_SemiDenseUrbanCluster_temp.raster_val=SDUC_SemiDenseUrbanCluster_temp.raster_val.astype(&#x27;int&#x27;)
SDUC_SemiDenseUrbanCluster_temp.rename(columns={&#x27;raster_val&#x27;:&#x27;sducid&#x27;}, inplace=True)
SDUC_SemiDenseUrbanCluster_temp[&#x27;code&#x27;]=22</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="5luZPVT00DzWdMjdMb2dw" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="WpNhw53Ji8" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># HDC &amp; DUC - BUFFER 3km 
res_union_buffer = gpd.overlay(HDC_UrbanCentre[[&#x27;geometry&#x27;]], DUC_DenseUrbanCluster[[&#x27;geometry&#x27;]], how=&#x27;union&#x27;,keep_geom_type=True).buffer(3000).unary_union

res_union_buffer =gpd.GeoSeries(res_union_buffer)
res_union_buffer = gpd.GeoDataFrame(geometry=gpd.GeoSeries(res_union_buffer))
res_union_buffer.crs=HDC_UrbanCentre.crs
res_union_buffer[[&#x27;buff3&#x27;]]=1</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="rpIDUzdEOEP0hmPaU6uhS" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="cottvCrkYm" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># sjoin with buffer
SDUC_SemiDenseUrbanCluster_temp = gpd.sjoin(SDUC_SemiDenseUrbanCluster_temp, res_union_buffer[[&#x27;buff3&#x27;, &#x27;geometry&#x27;]], how=&#x27;left&#x27;,predicate=&#x27;intersects&#x27;)
SDUC_SemiDenseUrbanCluster_temp.drop(columns =[&#x27;index_right&#x27;],inplace=True)
SDUC_SemiDenseUrbanCluster_temp[&#x27;code&#x27;] = np.where(SDUC_SemiDenseUrbanCluster_temp[&#x27;buff3&#x27;] == 1, 21, 22)
# print(SDUC_SemiDenseUrbanCluster_temp.tail(2))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="hyqdOYEMVnpV0k5D0o8we" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="NfEk4VH7H8" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># SDUC_SemiDenseUrbanCluster
SDUC_SemiDenseUrbanCluster = SDUC_SemiDenseUrbanCluster_temp[SDUC_SemiDenseUrbanCluster_temp.code == 22].drop(columns=[&#x27;buff3&#x27;])</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="gT9M5ymo9qNUGhoEuikZ4" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="BenZAb1ioJ" class="relative group/block"><h1 id="step3-peri-urban-cluster-puc" class="relative group"><span class="heading-text">step3: Peri-Urban Cluster (PUC)</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#step3-peri-urban-cluster-puc" title="Link to this Section" aria-label="Link to this Section">¶</a></h1></div><div id="eCzWjGr1aw" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># PUC_PeriUrbanCluster
PUC_PeriUrbanCluster = SDUC_SemiDenseUrbanCluster_temp[SDUC_SemiDenseUrbanCluster_temp.code == 21].drop(columns=[&#x27;buff3&#x27;])
PUC_PeriUrbanCluster.rename(columns={&#x27;sducid&#x27;:&#x27;pucid&#x27;},inplace=True)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="3tIcFejj8YGbe25ywqJQl" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="wJXzh7O5LJ" class="relative group/block"><h1 id="duc-sduc-and-puc-export-to-shapefile" class="relative group"><span class="heading-text">DUC, SDUC and PUC export to shapefile</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#duc-sduc-and-puc-export-to-shapefile" title="Link to this Section" aria-label="Link to this Section">¶</a></h1></div><div id="QTpfcAy44T" class="relative group/block"><p>DUC: export to shapefile</p></div><div id="pn5yKN67dv" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># EXPORT 2 shapefile World Mollweide (ESRI:54009)
DUC_DenseUrbanCluster.to_file(os.path.join(os.path.realpath(&#x27;GHSL_results&#x27;),&#x27;DUC_DenseUrbanCluster_&#x27;+str(REFyear)+&#x27;.shp&#x27;))

# Export to shapefile WGS84 (EPSG:4326 )
# DUC_DenseUrbanCluster.to_crs(epsg=4326).to_file(os.path.join(os.path.realpath(&#x27;GHSL_results&#x27;),&#x27;DUC_DenseUrbanCluster_4326_&#x27;+str(REFyear)+&#x27;.shp&#x27;))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="5DXHiN_8EWa__LU0vXKMl" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="A0CD1oM0Ja" class="relative group/block"><p>SDUC: export to shapefile</p></div><div id="IrdKJSehu3" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># EXPORT 2 shapefile World Mollweide (ESRI:54009)
SDUC_SemiDenseUrbanCluster.to_file(os.path.join(os.path.realpath(&#x27;GHSL_results&#x27;),&#x27;SDUC_SemiDenseUrbanCluster_&#x27;+str(REFyear)+&#x27;.shp&#x27;))

# Export to shapefile WGS84 (EPSG:4326 )
# SDUC_SemiDenseUrbanCluster.to_crs(epsg=4326).to_file(os.path.join(os.path.realpath(&#x27;GHSL_results&#x27;),&#x27;SDUC_SemiDenseUrbanCluster_4326_&#x27;+str(REFyear)+&#x27;.shp&#x27;))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="oGyU5XUw7x5ia2Xtrh8Wo" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="PauiCGkSVx" class="relative group/block"><p>PUC: export to shapefile</p></div><div id="wn3tWx5Koy" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># EXPORT 2 shapefile World Mollweide (ESRI:54009)
PUC_PeriUrbanCluster.to_file(os.path.join(os.path.realpath(&#x27;GHSL_results&#x27;),&#x27;PUC_PeriUrbanCluster_&#x27;+str(REFyear)+&#x27;.shp&#x27;))

# Export to shapefile WGS84 (EPSG:4326 )
# PUC_PeriUrbanCluster.to_crs(epsg=4326).to_file(os.path.join(os.path.realpath(&#x27;GHSL_results&#x27;),&#x27;PUC_PeriUrbanCluster_4326&#x27;+str(REFyear)+&#x27;.shp&#x27;))</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="4KLW1ivnaxaRivQPSeE2S" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="m1mwsmofB7" class="relative group/block"><h1 id="l2-visualization-of-results" class="relative group"><span class="heading-text">L2: Visualization of results</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#l2-visualization-of-results" title="Link to this Section" aria-label="Link to this Section">¶</a></h1></div><div id="IKpEO4mGn8" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">fig = Figure(width=600, height=600)

m = AOI54009.explore(style_kwds={&#x27;fillColor&#x27;:&#x27;None&#x27;,&#x27;color&#x27;:&#x27;blue&#x27;,&#x27;weight&#x27;: 1}, name=&#x27;aoi&#x27;)

# parallels:
for lat in range(-90, 91, lat_interval):
     folium.PolyLine([[lat, -180],[lat, 180]], weight=0.5).add_to(m)
# meridianss:
for lon in range(-180, 181, lon_interval):
    folium.PolyLine([[-90, lon],[90, lon]], weight=0.5).add_to(m)

PUC_PeriUrbanCluster.explore(m=m,style_kwds={&#x27;fillColor&#x27;:&#x27;yellow&#x27;,&#x27;color&#x27;:&#x27;yellow&#x27;,&#x27;weight&#x27;: 1.5}, name=&#x27;PUC_PeriUrbanCluster&#x27;)
SDUC_SemiDenseUrbanCluster.explore(m=m,style_kwds={&#x27;fillColor&#x27;:&#x27;darkgoldenrod&#x27;,&#x27;color&#x27;:&#x27;darkgoldenrod&#x27;,&#x27;weight&#x27;: 1.5}, name=&#x27;SDUC_SemiDenseUrbanCluster&#x27;)
DUC_DenseUrbanCluster.explore(m=m,style_kwds={&#x27;fillColor&#x27;:&#x27;brown&#x27;,&#x27;color&#x27;:&#x27;brown&#x27;,&#x27;weight&#x27;: 1.5}, name=&#x27;DUC_DenseUrbanCluster&#x27;)

MDC_UrbanCluster.explore(m=m,style_kwds={&#x27;fillColor&#x27;:&#x27;orange&#x27;,&#x27;color&#x27;:&#x27;orange&#x27;,&#x27;weight&#x27;: 1}, name=&#x27;MDC_UrbanCluster&#x27;, show = False)
HDC_UrbanCentre.explore(m=m,style_kwds={&#x27;fillColor&#x27;:&#x27;red&#x27;,&#x27;color&#x27;:&#x27;red&#x27;,&#x27;weight&#x27;: 1.5}, name=&#x27;HDC_UrbanCentre&#x27;)

folium.LayerControl(&#x27;topright&#x27;,collapsed=True).add_to(m)
minimap = plugins.MiniMap(height=90, width=90, zoom_level_offset=-7)
m.add_child(minimap)

fig.add_child(m)
m</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="POWfQZmgqAwPGsIZn0ctd" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="BmXT0CUiPP" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"></code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="NUtJhyH09vkuFepjj_bcF" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="BtGAClcJ7K" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"></code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="4pPjxi1u-k67IVTCfb-YD" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div></div></main></article><script>((a,d)=>{if(!window.history.state||!window.history.state.key){let h=Math.random().toString(32).slice(2);window.history.replaceState({key:h},"")}try{let f=JSON.parse(sessionStorage.getItem(a)||"{}")[d||window.history.state.key];typeof f=="number"&&window.scrollTo(0,f)}catch(h){console.error(h),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/notebooks_test/build/entry.client-UNPC4GT3.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-OCTKKCIL.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-UAI5KRM7.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-2NH4LW52.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-IZFMW3M4.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-HBJK6BW3.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-HYMQ7M2K.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-OHOXABTA.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-CPTH56EW.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-3CVK3PYF.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-J6FHCSRC.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-S4SWV34C.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/notebooks_test/build/root-QGLRP2PL.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-CB3BH7WY.js"/><link rel="modulepreload" href="/notebooks_test/build/routes/$-7JYT5576.js"/><script>window.__remixContext = {"url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/ghsl-urban-delineation","state":{"loaderData":{"root":{"config":{"version":1,"myst":"1.3.25","options":{"hide_toc":true,"hide_footer_links":true,"folders":true},"nav":[],"actions":[],"projects":[{"github":"https://github.com/eoxhub-workspaces/documentation/","id":"5aa0318b-5bc1-41e2-b1d4-053e8b61961b","exports":[],"bibliography":[],"title":"Location for eodashboard notebooks","index":"readme","pages":[{"title":"External Notebooks","level":1},{"title":"Eurodatacube","level":2},{"title":"Notebooks","level":3},{"slug":"external-notebooks.eurodatacube.notebooks.readme","title":"Jupyter notebooks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Notebooks","level":4},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.readme","title":"Euro Data Cube Notebooks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":5},{"title":"Contributions","level":5},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-ai4arctic-sea-ice","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-biomass-forest-observation-sys","title":"AIREO pilot dataset - Biomass (Forest Observation System)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-cap","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-spacenet7","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aot-covid19","title":"Aerosol Optical Thickness (AOT) Anomaly Detection Using Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.batch-zarr-output","title":"Generating Zarr data cubes with Sentinel Hub Batch API","description":"","date":"","thumbnail":"/notebooks_test/build/68dffbf744fa42f4bf3d35e55684984e.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.client-side-processing-using-mass-sh","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.cmems-data-download","title":"Cmems Data Download","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.detect-trucks-sentinel2","title":"Detect Trucks using Sentinel-2 data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.drought-monitoring","title":"Drought impact monitoring platform","description":"","date":"","thumbnail":"/notebooks_test/build/ad5c19782b006f72352ae57794305840.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-africa-cube-africa-custom-contest","title":"Custom Script Contest – Urban Growth in Africa","description":"","date":"","thumbnail":"/notebooks_test/build/e9275f3fe80a704e2f5aa1ec1220e48a.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-byoc-tutorial","title":"How to bring your own data to EDC: Using Sentinel Hub Python package","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-demo-phi-week-v2","title":"xcube-gen and xcube-geodb Hands-On Workshop Φ-Week 2020","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-geodb-4-eurocrops-demo","title":"Demonstration of Eurocrops data use in geoDB","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-notebook-lstm","title":"South Africa Crop Type Classification on Euro Data Cube (EDC)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-usecase-lpis-crop-type-classification","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.eurocrops-crop-classification-example","title":"Crop-classification using Sentinel-2 time-series","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ghsl-urban-delineation","title":"\u003cb\u003eUrban delineation\u003cb\u003e","description":"","date":"","thumbnail":"/notebooks_test/build/7bbf545a5eae1d9ebdb91ae42b261063.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.globalearthmonitor-example","title":"Pre-requisites","description":"","date":"","thumbnail":"/notebooks_test/build/205c1ded6bd59771975a9fbd3753fd3b.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.gpu-support-eoxhub","title":"GPU-Support on EOxHub","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.gran-chaco-phiweek","title":"ESA EO \\phi- week 2020","description":"","date":"","thumbnail":"/notebooks_test/build/80cee7db6cdc7002ceedda5689f889fa.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.howtolulc-batch-updated-210621","title":"How To: Land-Use-Land-Cover Prediction for Slovenia - using the Batch Processing API","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.lpis-lulc-slo","title":"LPIS Use Case for Land Use / Land Cover Classification","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.lps2022-leverage-euro-data-cube-services","title":"Living Planet Symposium 2022 Training Session","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.no2-analysis-covid19-lockdowns","title":"Impact of Covid19 induced lockdown on NO2 levels","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.no2-so2-trend-veda-api-igarss-2023","title":"Using the NASA VEDA EOAPI","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ogc-edc","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.openeo-client-demo","title":"openEO Client Demo","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.race-finishedgoodsinventory-inidcator","title":"Finished Goods Inventory indicator for RACE","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.third-party-planetscope","title":"Third Party Data Import - PlanetScope","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.xcube-access-datasets","title":"Using xcube to access non-commercial and commercial data sets","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.xcube-viewer-as-a-service-in-edc1","title":"Visualizing data with xcube viewer in EuroDataCube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-evaluation-workshop","title":"DAPA Evaluation Workshop: Introduction \u0026 Documentation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-1-cube-sentinel-2","title":"DAPA Tutorial #1: Cube - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-2-area-sentinel-2","title":"DAPA Tutorial #2: Area - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-3-timeseries-sentinel-2","title":"DAPA Tutorial #3: Timeseries - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-4-value-sentinel-2","title":"DAPA Tutorial #4: Value - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-5-dem","title":"DAPA Tutorial #5: DEM","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.fairicube.fairicube-data-access-demonstration","title":"EDC Sentinel Hub - data access using xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-australian-bushfires","title":"Australian Bushfires","description":"","date":"","thumbnail":"/notebooks_test/build/ab194b4f8c40a2b9d64d8a85e37ce1fd.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["IGARSS-22","EO Dashboard"],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-data-access","title":"Data Access","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-detect-trucks-sentinel2","title":"Truck Detection Exercise","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-lockdown-in-venice","title":"Environmental Impacts of Lockdown in Venice, Italy during 2020","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-nasa-api-lockdown-in-venice","title":"Lockdown in Venice","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-no2-timeseries-analysis","title":"NO2 timeseries analysis","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-timeseries-stac-api-single-vs-multi","title":"Time series using STAC API statistics endpoints","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"Curated","level":5},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.access-iacs-data","title":"How to access IACS Spatial Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-access-cci-data","title":"Access CCI data with xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-first-steps","title":"First steps on the Euro Data Cube platform","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-1-manage-datasets-v11","title":"Manage Collections in your GeoDB","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-2-explore-datasets-2","title":"Exploring Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-3-share-datasets1","title":"Sharing Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-access-urban-atlas-data-v1","title":"[xcube-geodb] How to accesss EEA Urban Atlas Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-data-access","title":"EDC Sentinel Hub - data access using xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinelhub-datafusion-basic","title":"EDC Sentinel Hub: Data Fusion","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinelhub-datafusion-ndvi","title":"EDC Sentinel Hub: Data Fusion","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-datasets","title":"EDC Sentinel Hub - using xcube to access different data sets in Sentinel Hub","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-setup","title":"Setup for EDC core API access using xcube client library","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-xcube-integration","title":"EDC Sentinel Hub - XCUBE integration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-usecase-ndvi-timeline","title":"NDVI timeline","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.eo-learn","title":"Using eo-learn in EDC: a starter’s guide.","description":"","date":"","thumbnail":"/notebooks_test/build/5a1f8475f0c3652f4630d03d72891b98.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.esdl-edc-v0-2","title":"Earth System Data Lab Tutorial @ Euro Data Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.exploring-time-and-space-with-edc","title":"Exploring Time and Space: A guide to accessing, analysing and visualising data in the Euro Data Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.how-to-access-dem-data-through-sentinel-hub-api","title":"How to access DEM data through Sentinel Hub API","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.sentinelhub-py","title":"Using Sentinel Hub Process API in EDC: a starter’s guide.","description":"","date":"","thumbnail":"/notebooks_test/build/01e22903839391bc356ac886ec2b2fa7.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"Notebooks","level":1},{"slug":"notebooks.example1","title":"📘 Example Notebook 1","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.example2","title":"📘 Example Notebook 2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static","BASE_URL":"/notebooks_test"},"routes/$":{"config":{"version":1,"myst":"1.3.25","options":{"hide_toc":true,"hide_footer_links":true,"folders":true},"nav":[],"actions":[],"projects":[{"github":"https://github.com/eoxhub-workspaces/documentation/","id":"5aa0318b-5bc1-41e2-b1d4-053e8b61961b","exports":[],"bibliography":[],"title":"Location for eodashboard notebooks","index":"readme","pages":[{"title":"External Notebooks","level":1},{"title":"Eurodatacube","level":2},{"title":"Notebooks","level":3},{"slug":"external-notebooks.eurodatacube.notebooks.readme","title":"Jupyter notebooks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Notebooks","level":4},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.readme","title":"Euro Data Cube Notebooks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":5},{"title":"Contributions","level":5},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-ai4arctic-sea-ice","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-biomass-forest-observation-sys","title":"AIREO pilot dataset - Biomass (Forest Observation System)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-cap","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-spacenet7","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aot-covid19","title":"Aerosol Optical Thickness (AOT) Anomaly Detection Using Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.batch-zarr-output","title":"Generating Zarr data cubes with Sentinel Hub Batch API","description":"","date":"","thumbnail":"/notebooks_test/build/68dffbf744fa42f4bf3d35e55684984e.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.client-side-processing-using-mass-sh","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.cmems-data-download","title":"Cmems Data Download","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.detect-trucks-sentinel2","title":"Detect Trucks using Sentinel-2 data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.drought-monitoring","title":"Drought impact monitoring platform","description":"","date":"","thumbnail":"/notebooks_test/build/ad5c19782b006f72352ae57794305840.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-africa-cube-africa-custom-contest","title":"Custom Script Contest – Urban Growth in Africa","description":"","date":"","thumbnail":"/notebooks_test/build/e9275f3fe80a704e2f5aa1ec1220e48a.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-byoc-tutorial","title":"How to bring your own data to EDC: Using Sentinel Hub Python package","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-demo-phi-week-v2","title":"xcube-gen and xcube-geodb Hands-On Workshop Φ-Week 2020","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-geodb-4-eurocrops-demo","title":"Demonstration of Eurocrops data use in geoDB","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-notebook-lstm","title":"South Africa Crop Type Classification on Euro Data Cube (EDC)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-usecase-lpis-crop-type-classification","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.eurocrops-crop-classification-example","title":"Crop-classification using Sentinel-2 time-series","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ghsl-urban-delineation","title":"\u003cb\u003eUrban delineation\u003cb\u003e","description":"","date":"","thumbnail":"/notebooks_test/build/7bbf545a5eae1d9ebdb91ae42b261063.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.globalearthmonitor-example","title":"Pre-requisites","description":"","date":"","thumbnail":"/notebooks_test/build/205c1ded6bd59771975a9fbd3753fd3b.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.gpu-support-eoxhub","title":"GPU-Support on EOxHub","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.gran-chaco-phiweek","title":"ESA EO \\phi- week 2020","description":"","date":"","thumbnail":"/notebooks_test/build/80cee7db6cdc7002ceedda5689f889fa.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.howtolulc-batch-updated-210621","title":"How To: Land-Use-Land-Cover Prediction for Slovenia - using the Batch Processing API","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.lpis-lulc-slo","title":"LPIS Use Case for Land Use / Land Cover Classification","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.lps2022-leverage-euro-data-cube-services","title":"Living Planet Symposium 2022 Training Session","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.no2-analysis-covid19-lockdowns","title":"Impact of Covid19 induced lockdown on NO2 levels","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.no2-so2-trend-veda-api-igarss-2023","title":"Using the NASA VEDA EOAPI","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ogc-edc","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.openeo-client-demo","title":"openEO Client Demo","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.race-finishedgoodsinventory-inidcator","title":"Finished Goods Inventory indicator for RACE","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.third-party-planetscope","title":"Third Party Data Import - PlanetScope","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.xcube-access-datasets","title":"Using xcube to access non-commercial and commercial data sets","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.xcube-viewer-as-a-service-in-edc1","title":"Visualizing data with xcube viewer in EuroDataCube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-evaluation-workshop","title":"DAPA Evaluation Workshop: Introduction \u0026 Documentation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-1-cube-sentinel-2","title":"DAPA Tutorial #1: Cube - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-2-area-sentinel-2","title":"DAPA Tutorial #2: Area - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-3-timeseries-sentinel-2","title":"DAPA Tutorial #3: Timeseries - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-4-value-sentinel-2","title":"DAPA Tutorial #4: Value - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-5-dem","title":"DAPA Tutorial #5: DEM","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.fairicube.fairicube-data-access-demonstration","title":"EDC Sentinel Hub - data access using xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-australian-bushfires","title":"Australian Bushfires","description":"","date":"","thumbnail":"/notebooks_test/build/ab194b4f8c40a2b9d64d8a85e37ce1fd.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["IGARSS-22","EO Dashboard"],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-data-access","title":"Data Access","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-detect-trucks-sentinel2","title":"Truck Detection Exercise","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-lockdown-in-venice","title":"Environmental Impacts of Lockdown in Venice, Italy during 2020","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-nasa-api-lockdown-in-venice","title":"Lockdown in Venice","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-no2-timeseries-analysis","title":"NO2 timeseries analysis","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-timeseries-stac-api-single-vs-multi","title":"Time series using STAC API statistics endpoints","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"Curated","level":5},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.access-iacs-data","title":"How to access IACS Spatial Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-access-cci-data","title":"Access CCI data with xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-first-steps","title":"First steps on the Euro Data Cube platform","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-1-manage-datasets-v11","title":"Manage Collections in your GeoDB","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-2-explore-datasets-2","title":"Exploring Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-3-share-datasets1","title":"Sharing Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-access-urban-atlas-data-v1","title":"[xcube-geodb] How to accesss EEA Urban Atlas Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-data-access","title":"EDC Sentinel Hub - data access using xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinelhub-datafusion-basic","title":"EDC Sentinel Hub: Data Fusion","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinelhub-datafusion-ndvi","title":"EDC Sentinel Hub: Data Fusion","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-datasets","title":"EDC Sentinel Hub - using xcube to access different data sets in Sentinel Hub","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-setup","title":"Setup for EDC core API access using xcube client library","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-xcube-integration","title":"EDC Sentinel Hub - XCUBE integration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-usecase-ndvi-timeline","title":"NDVI timeline","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.eo-learn","title":"Using eo-learn in EDC: a starter’s guide.","description":"","date":"","thumbnail":"/notebooks_test/build/5a1f8475f0c3652f4630d03d72891b98.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.esdl-edc-v0-2","title":"Earth System Data Lab Tutorial @ Euro Data Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.exploring-time-and-space-with-edc","title":"Exploring Time and Space: A guide to accessing, analysing and visualising data in the Euro Data Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.how-to-access-dem-data-through-sentinel-hub-api","title":"How to access DEM data through Sentinel Hub API","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.sentinelhub-py","title":"Using Sentinel Hub Process API in EDC: a starter’s guide.","description":"","date":"","thumbnail":"/notebooks_test/build/01e22903839391bc356ac886ec2b2fa7.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"Notebooks","level":1},{"slug":"notebooks.example1","title":"📘 Example Notebook 1","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.example2","title":"📘 Example Notebook 2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"page":{"version":1,"kind":"Notebook","sha256":"604c411f759f425f1fca70a9509700fdc28bc03b8085df793db343a99ecd4209","slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ghsl-urban-delineation","location":"/external_notebooks/eurodatacube/notebooks/notebooks/contributions/GHSL_Urban_Delineation.ipynb","dependencies":[],"frontmatter":{"title":"\u003cb\u003eUrban delineation\u003cb\u003e","content_includes_title":true,"kernelspec":{"name":"conda-env-edc-default-2022.10-14-py","display_name":"Python [conda env:edc-default-2022.10-14]","language":"python"},"github":"https://github.com/eoxhub-workspaces/documentation/","numbering":{"title":{"offset":5}},"edit_url":"https://github.com/eoxhub-workspaces/documentation//blob/main/external_notebooks/eurodatacube/notebooks/notebooks/contributions/GHSL_Urban_Delineation.ipynb","thumbnail":"/notebooks_test/build/7bbf545a5eae1d9ebdb91ae42b261063.png","exports":[{"format":"ipynb","filename":"GHSL_Urban_Delineation.ipynb","url":"/notebooks_test/build/GHSL_Urban_Delineati-5fdf0d48fcd7233b24bf9369f8ce4825.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:31.332732Z","iopub.status.busy":"2023-03-22T12:55:31.329186Z","iopub.status.idle":"2023-03-22T12:55:31.500649Z","shell.execute_reply":"2023-03-22T12:55:31.498627Z"},"papermill":{"duration":0.247886,"end_time":"2023-03-22T12:55:31.505769","exception":false,"start_time":"2023-03-22T12:55:31.257883","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from eoxhub import check_compatibility\ncheck_compatibility(\"user-2023.03-02\", dependencies=[\"GEODB\"])","visibility":"show","key":"I10FSZbIhB"},{"type":"output","id":"wFKBwo5ZhfD5QyEfVGLx1","data":[{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"\u003cscript type=\"text/javascript\"\u003e\n        function toggle(id) {\n            el = document.getElementById(id);\n            el.style.display = el.style.display === \"none\" ? \"block\" : \"none\";\n        }\n    \u003c/script\u003e","content_type":"text/html"},"text/plain":{"content":"\u003cIPython.core.display.HTML object\u003e","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"This notebook is compatible with this base image version (user-2023.03-02).","content_type":"text/html"},"text/plain":{"content":"\u003cIPython.core.display.HTML object\u003e","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"text/markdown":{"content":"\n\n---------\n\nThe following environment variables are available:\n\n* `GEODB_AUTH_AUD`, `GEODB_AUTH_CLIENT_ID`, `GEODB_AUTH_DOMAIN`, `GEODB_API_SERVER_URL`, `GEODB_AUTH_CLIENT_SECRET`, `GEODB_API_SERVER_PORT`\n","content_type":"text/markdown"},"text/plain":{"content":"\u003cIPython.core.display.Markdown object\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"xXExibAhoQ"}],"visibility":"show","key":"XPPFti6V5s"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.031985,"end_time":"2023-03-22T12:55:31.570269","exception":false,"start_time":"2023-03-22T12:55:31.538284","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","children":[],"key":"I9mQruAZrR"},{"type":"text","value":"Urban delineation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QXtkAbZ1d7"},{"type":"strong","children":[],"key":"FN5iOdvHDK"}],"identifier":"urban-delineation","label":"Urban delineation","html_id":"urban-delineation","implicit":true,"key":"oOMAlxvYa4"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"This notebook implements a GHSL settlement model algorithm as defined by the stage I of the Degree of Urbanisation (European Commission \u0026 Statistical Office of the European Union, 2021) and recommended by the UN STAT COM.\nModel uses the population and built-up surface grid - European Commission, Joint Research Centre (JRC)","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"cxoLxR8vs5"},{"type":"break","key":"hYln1Bq916"},{"type":"text","value":"\nThe method here implemented is described in detail bellow.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"toRcwhThOe"}],"key":"cHa03jPiDM"}],"visibility":"show","key":"CffEmYzvm0"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.03013,"end_time":"2023-03-22T12:55:31.631621","exception":false,"start_time":"2023-03-22T12:55:31.601491","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","children":[],"key":"ljlp7GkuC9"},{"type":"text","value":" GHSL - settlement model ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uw5BUEk9sB"},{"type":"strong","children":[],"key":"UsN3YxTHPS"}],"identifier":"ghsl-settlement-model","label":" GHSL - settlement model ","html_id":"ghsl-settlement-model","implicit":true,"key":"vjrJOh2v8N"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Delineate and classify settlement by typologies","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"kElk4gMGVu"}],"key":"tQdXHyFOIA"}],"visibility":"show","key":"EvIlJbpVl2"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.031901,"end_time":"2023-03-22T12:55:31.695520","exception":false,"start_time":"2023-03-22T12:55:31.663619","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Setlment L1 nomenclature:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gkOQUYVPxv"}],"identifier":"setlment-l1-nomenclature","label":"Setlment L1 nomenclature:","html_id":"setlment-l1-nomenclature","implicit":true,"key":"CiRcqDqY83"},{"type":"heading","depth":3,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Urban Centre - High Density Cluster (HDC)","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"H8c7NnVuTi"}],"identifier":"urban-centre-high-density-cluster-hdc","label":"Urban Centre - High Density Cluster (HDC)","html_id":"urban-centre-high-density-cluster-hdc","implicit":true,"key":"MJSh8vwWuN"},{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Urban Cluster - Moderate Density Cluster (MDC)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ntFO8rUnLm"}],"identifier":"urban-cluster-moderate-density-cluster-mdc","label":"Urban Cluster - Moderate Density Cluster (MDC)","html_id":"urban-cluster-moderate-density-cluster-mdc","implicit":true,"key":"reKlowpEtF"}],"visibility":"show","key":"keqbzNua94"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.032631,"end_time":"2023-03-22T12:55:31.760686","exception":false,"start_time":"2023-03-22T12:55:31.728055","status":"completed"},"tags":[]},"children":[{"type":"image","url":"/notebooks_test/build/7bbf545a5eae1d9ebdb91ae42b261063.png","alt":"image.png","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yzB862UzI4","urlSource":"data:image/png;base64,iVBORw0KGg...lFTkSuQmCC"},{"type":"image","url":"/notebooks_test/build/5d9ed6542f287f79b0a02b8c9a7429fd.png","alt":"image.png","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"BZ6yzkHNUl","urlSource":"data:image/png;base64,iVBORw0KGg...5ErkJggg=="}],"visibility":"show","key":"hNDJfuQa6i"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.035842,"end_time":"2023-03-22T12:55:31.827079","exception":false,"start_time":"2023-03-22T12:55:31.791237","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Setlment L2 nomenclature:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DgFc5sSHZ4"}],"identifier":"setlment-l2-nomenclature","label":"Setlment L2 nomenclature:","html_id":"setlment-l2-nomenclature","implicit":true,"key":"oCGXZ9PrtS"},{"type":"heading","depth":3,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Urban Centre - High Density Cluster (HDC)","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"KLCZbjLhiO"}],"identifier":"urban-centre-high-density-cluster-hdc","label":"Urban Centre - High Density Cluster (HDC)","html_id":"urban-centre-high-density-cluster-hdc-1","implicit":true,"key":"IQD4oxlRfg"},{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Dense Urban Cluster (DUC)","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"n4w8dgGd8X"}],"identifier":"dense-urban-cluster-duc","label":"Dense Urban Cluster (DUC)","html_id":"dense-urban-cluster-duc","implicit":true,"key":"q2PvUeu8Pe"},{"type":"heading","depth":3,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"SemiDense Urban Cluster (SDUC)","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"pHvNEjcS7w"}],"identifier":"semidense-urban-cluster-sduc","label":"SemiDense Urban Cluster (SDUC)","html_id":"semidense-urban-cluster-sduc","implicit":true,"key":"C2rh5hDCh3"},{"type":"heading","depth":3,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Peri-Urban Cluster (PUC)","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"O3LMaZcqFB"}],"identifier":"peri-urban-cluster-puc","label":"Peri-Urban Cluster (PUC)","html_id":"peri-urban-cluster-puc","implicit":true,"key":"i1Ho2wi2Am"}],"visibility":"show","key":"r0vm8zpalo"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.030983,"end_time":"2023-03-22T12:55:31.890402","exception":false,"start_time":"2023-03-22T12:55:31.859419","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"image","url":"/notebooks_test/build/6afbabbcb8110a51d59cc60ec6417ae0.png","alt":"image.png","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Awd5lKS2zi","urlSource":"data:image/png;base64,iVBORw0KGg...VORK5CYII="},{"type":"text","value":"\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lIeDqqGaCG"},{"type":"image","url":"/notebooks_test/build/18ac3c1dd60273849534fede6130e6ad.png","alt":"image.png","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MoYEIw0sU2","urlSource":"data:image/png;base64,iVBORw0KGg...5ErkJggg=="}],"key":"NUZNq2b6I5"}],"visibility":"show","key":"wF95JETZGt"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.029711,"end_time":"2023-03-22T12:55:31.953152","exception":false,"start_time":"2023-03-22T12:55:31.923441","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"GHSL data packages for settlement model:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UuUwQMqKYl"}],"key":"CsQvZzP3X0"},{"type":"break","key":"w76Hog5HEm"},{"type":"text","value":"\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IsDpFCxzk1"},{"type":"break","key":"GfEniEefZb"},{"type":"text","value":"\nbuilt-up:\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yNZSqIA1HR"},{"type":"link","url":"https://ghsl.jrc.ec.europa.eu/download.php?ds=bu","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"https://​ghsl​.jrc​.ec​.europa​.eu​/download​.php​?ds​=bu","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Uel91AUTkv"}],"urlSource":"https://ghsl.jrc.ec.europa.eu/download.php?ds=bu","key":"JgnxvrLH5a"},{"type":"text","value":"\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Pvk1FfL9Gv"},{"type":"break","key":"JBwMYXH5TF"},{"type":"text","value":"\npopulation:\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Rbk3IGTFfR"},{"type":"link","url":"https://ghsl.jrc.ec.europa.eu/download.php?ds=pop","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"https://​ghsl​.jrc​.ec​.europa​.eu​/download​.php​?ds​=​pop","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dxF1MW6pUi"}],"urlSource":"https://ghsl.jrc.ec.europa.eu/download.php?ds=pop","key":"zlrioU5AIT"},{"type":"text","value":"\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Yt1zbWgJy7"},{"type":"break","key":"w2tsByNhTf"},{"type":"text","value":"\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DwfUHAm0vg"},{"type":"break","key":"tEklIx3q4b"},{"type":"text","value":"\nReference years: from 1975 to 2020, 5 years interval","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"upXfcRlcRG"},{"type":"break","key":"qq6N5tWYML"},{"type":"text","value":"\nResolution: 1km","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rQNnZVB4FQ"},{"type":"break","key":"lxunIOMpuO"},{"type":"text","value":"\nCoord. system: Mollweide","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ohlMStTHWp"},{"type":"break","key":"neJrwmLI5f"},{"type":"text","value":"\nComplete information about GHSL open data are available at:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lDjni0hLhJ"},{"type":"break","key":"MPnLV9vvq6"},{"type":"text","value":"\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GIb5xaZA9B"},{"type":"link","url":"https://ghsl.jrc.ec.europa.eu/documents/GHSL_Data_Package_2022.pdf?t=1655995832","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"https://​ghsl​.jrc​.ec​.europa​.eu​/documents​/GHSL​_Data​_Package​_2022​.pdf​?t​=​1655995832","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Qk9eMDortx"}],"urlSource":"https://ghsl.jrc.ec.europa.eu/documents/GHSL_Data_Package_2022.pdf?t=1655995832","key":"eM4DyF6NiW"},{"type":"text","value":"\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qqvGUWeLVW"},{"type":"break","key":"gvNng5bgJ7"},{"type":"text","value":"\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZVeMhpWKVd"},{"type":"break","key":"PSfRIQgImK"}],"key":"y8fgrSuzAm"}],"visibility":"show","key":"C3tyyYoTFf"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.033327,"end_time":"2023-03-22T12:55:32.017728","exception":false,"start_time":"2023-03-22T12:55:31.984401","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","children":[],"key":"wEWHQgpf0U"},{"type":"text","value":"Parameters by definition of GHSL settlement model L1 and L2","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Yayujg7w1W"},{"type":"strong","children":[],"key":"pc25QqZQlo"}],"identifier":"parameters-by-definition-of-ghsl-settlement-model-l1-and-l2","label":"Parameters by definition of GHSL settlement model L1 and L2","html_id":"parameters-by-definition-of-ghsl-settlement-model-l1-and-l2","implicit":true,"key":"YOqVwIzzPN"},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Threshold for total population per square kilometer : HDC_Pdens / MDC_Pdens","key":"Ze7wSmiqu3"}],"key":"jvPA21K29Q"}],"key":"dmlWmoHX8y"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Threshold for population per cluster : HDC_Pmin / MDC_Pmin","key":"cpLrP5Q2Co"}],"key":"LJ4J7GL4vr"}],"key":"FIvJrJewOg"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Threshold for % of built-up area : HDC_Bdens","key":"dQdQw6zYJP"}],"key":"kBjXkzf6kn"}],"key":"JzL3yrTk4W"},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Cluster connectivity : HDC_Tcon / MDC_Tcon","key":"D6K8JBKABD"}],"key":"LqIJXUC3UG"}],"key":"IIGXsJ9e0A"}],"key":"CT2TZairqS"}],"visibility":"show","key":"h3dfm4rRb9"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.030457,"end_time":"2023-03-22T12:55:32.082334","exception":false,"start_time":"2023-03-22T12:55:32.051877","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","children":[],"key":"rztK9iZjOE"},{"type":"text","value":"Constants : Pdens, Bdens, Pmin, Tcon","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UrubUHdajk"},{"type":"strong","children":[],"key":"fL16tUHg6A"}],"identifier":"constants-pdens-bdens-pmin-tcon","label":"Constants : Pdens, Bdens, Pmin, Tcon","html_id":"constants-pdens-bdens-pmin-tcon","implicit":true,"key":"OmwsyC8gEU"}],"visibility":"show","key":"bqx2wAP2vA"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:32.145592Z","iopub.status.busy":"2023-03-22T12:55:32.145216Z","iopub.status.idle":"2023-03-22T12:55:32.154638Z","shell.execute_reply":"2023-03-22T12:55:32.152323Z"},"papermill":{"duration":0.046443,"end_time":"2023-03-22T12:55:32.159260","exception":false,"start_time":"2023-03-22T12:55:32.112817","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# local population density (HDC: 1500 people/km2, MDC: 300 people/km2)\nHDC_Pdens=1500\nMDC_Pdens =300\n\n# built-up area share \u003e then\nHDC_Bdens=500000 # (share of built-up area/km2: 0.5 =\u003e 500000 m2/km2)\n\n# cluster populatin \u003e then   (HDC: 50000 people, MDC: 5000 people)\nHDC_Pmin=50000\nMDC_Pmin=5000\n\n# connectivity clusters\n# Tcon=1 for 4-connectivity clusters, Tcon=2 for 8-connectivity clusters\nHDC_Tcon=1 \nMDC_Tcon=2 \n\n# gap filling (\u003c15km2)\nHDC_GAPfill=15","visibility":"show","key":"jefFTPwvoY"},{"type":"output","id":"sZCcaodU1bGgb5Skn2w9a","data":[],"visibility":"show","key":"p9xMDNOXGm"}],"visibility":"show","key":"rM3A7i5SPu"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.039058,"end_time":"2023-03-22T12:55:32.229983","exception":false,"start_time":"2023-03-22T12:55:32.190925","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","children":[],"key":"CjG8RvtPMR"},{"type":"text","value":"Load libraries:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ekMgXmCSXW"},{"type":"strong","children":[],"key":"XT6AqOtIm8"}],"identifier":"load-libraries","label":"Load libraries:","html_id":"load-libraries","implicit":true,"key":"UAQPMGJHU6"}],"visibility":"show","key":"dctdkIdZLx"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:32.297199Z","iopub.status.busy":"2023-03-22T12:55:32.296749Z","iopub.status.idle":"2023-03-22T12:55:36.688391Z","shell.execute_reply":"2023-03-22T12:55:36.686641Z"},"papermill":{"duration":4.43459,"end_time":"2023-03-22T12:55:36.697875","exception":false,"start_time":"2023-03-22T12:55:32.263285","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from xcube.core.store import new_data_store\n\nimport os\nfrom glob import glob\nfrom pathlib import Path\n\nimport numpy as np\nimport pandas as pd\nimport geopandas as gpd\nfrom shapely.geometry import shape, box\n\nimport xarray as xr\nimport rioxarray as rxr\n\nimport rasterio\nimport rasterio.features\nfrom rasterio.features import shapes\n\nfrom skimage import measure, morphology\nfrom skimage.morphology import square\nimport scipy\n\nimport ipywidgets as widgets\nimport matplotlib.pyplot as plt\n\nimport folium\nfrom folium import plugins\n","visibility":"show","key":"QelJwwaeIs"},{"type":"output","id":"g813id5ENuB0qoQ7rnAUL","data":[],"visibility":"show","key":"utZRkH8LcI"}],"visibility":"show","key":"gfZO1WPAW3"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.031684,"end_time":"2023-03-22T12:55:36.764368","exception":false,"start_time":"2023-03-22T12:55:36.732684","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","children":[],"key":"HvlzeXrIpW"},{"type":"text","value":"Select reference year and area of interest: ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vrBnNqdmIY"},{"type":"strong","children":[],"key":"rOIAGT3AvY"}],"identifier":"select-reference-year-and-area-of-interest","label":"Select reference year and area of interest: ","html_id":"select-reference-year-and-area-of-interest","implicit":true,"key":"MWOrTdgJlS"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Before starts, the reference year and the area of interest needs to be defined.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"GC00jNgb4Z"}],"key":"IIZ59roRmn"},{"type":"heading","depth":2,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","children":[],"key":"yOHUKlW4B4"},{"type":"text","value":"Reference year ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"rwkpWivgJw"},{"type":"strong","children":[],"key":"CtTEUBGd13"}],"identifier":"reference-year","label":"Reference year ","html_id":"reference-year","implicit":true,"key":"rQEIX7wmEf"}],"visibility":"show","key":"GDArQtHUlA"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:36.842726Z","iopub.status.busy":"2023-03-22T12:55:36.833738Z","iopub.status.idle":"2023-03-22T12:55:36.850692Z","shell.execute_reply":"2023-03-22T12:55:36.848816Z"},"papermill":{"duration":0.056657,"end_time":"2023-03-22T12:55:36.853704","exception":false,"start_time":"2023-03-22T12:55:36.797047","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Select reference year:\n# from 1975 to 2020, 5 years interval:\n# valid values are: 1975, 1980, 1985, 1990, 1995, 2000, 2005, 2010, 2015, 2020\n\nREFyear=2020\n","visibility":"show","key":"QgqN4M8ybY"},{"type":"output","id":"1Sm3Twx2WOdBobQQtP-nP","data":[],"visibility":"show","key":"c145HA9bVm"}],"visibility":"show","key":"EfgNZkrJZi"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.043468,"end_time":"2023-03-22T12:55:36.937837","exception":false,"start_time":"2023-03-22T12:55:36.894369","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","children":[],"key":"VH3FMouuR2"},{"type":"text","value":"Area of interest ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ysNTDvEe45"},{"type":"strong","children":[],"key":"AQ1ZTGQQOj"}],"identifier":"area-of-interest","label":"Area of interest ","html_id":"area-of-interest","implicit":true,"key":"sqLWt96vLq"}],"visibility":"show","key":"QN6cTzI86W"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:37.062315Z","iopub.status.busy":"2023-03-22T12:55:37.061930Z","iopub.status.idle":"2023-03-22T12:55:37.094755Z","shell.execute_reply":"2023-03-22T12:55:37.088127Z"},"papermill":{"duration":0.111848,"end_time":"2023-03-22T12:55:37.097467","exception":false,"start_time":"2023-03-22T12:55:36.985619","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Select AOI by lat/lon coordinates -  example for area of Poland, Czechia and Slovakia:\nx1 = 10  # degree (E-W)\ny1 = 47 # degree (N-S)\nx2 = 25  # degree (E-W)\ny2 = 55 # degree (N-S)\n\naoi_centre = [(y2+y1)/2,(x2+x1)/2]\nprint(aoi_centre)\n\nbbox = x1, y1, x2, y2\nprint(bbox)","visibility":"show","key":"gPt3XdRZ4N"},{"type":"output","id":"YNU_4Ppku7yMYlzmzy1eL","data":[{"name":"stdout","output_type":"stream","text":"[51.0, 17.5]\n(10, 47, 25, 55)\n"}],"visibility":"show","key":"l0SU1TTayG"}],"visibility":"show","key":"ZDKOhwl8Gv"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:37.166019Z","iopub.status.busy":"2023-03-22T12:55:37.165649Z","iopub.status.idle":"2023-03-22T12:55:37.219520Z","shell.execute_reply":"2023-03-22T12:55:37.217681Z"},"papermill":{"duration":0.089078,"end_time":"2023-03-22T12:55:37.222723","exception":false,"start_time":"2023-03-22T12:55:37.133645","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"geom = box(*bbox)\nAOI = gpd.GeoDataFrame({\"id\":1,\"geometry\":[geom]})\nAOI.set_crs(epsg=4326, inplace=True)  # WGS84\nAOI54009 = AOI.to_crs(crs='ESRI:54009')","visibility":"show","key":"OT7kmNDEE0"},{"type":"output","id":"FrY1dh7xNPzvlDP87MIrY","data":[],"visibility":"show","key":"UryNAPZPxc"}],"visibility":"show","key":"uxwrCHd4v3"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:37.325684Z","iopub.status.busy":"2023-03-22T12:55:37.324981Z","iopub.status.idle":"2023-03-22T12:55:40.769187Z","shell.execute_reply":"2023-03-22T12:55:40.766977Z"},"papermill":{"duration":3.507601,"end_time":"2023-03-22T12:55:40.777786","exception":false,"start_time":"2023-03-22T12:55:37.270185","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from branca.element import Figure\nfig = Figure(width=600, height=600)\n\nm = folium.Map(aoi_centre, zoom_start=5, tiles='cartodbpositron')  # ,width=500, height=500\nlat_interval = 1\nlon_interval = 1\n\n# parallels:\nfor lat in range(-90, 91, lat_interval):\n     folium.PolyLine([[lat, -180],[lat, 180]], weight=0.5).add_to(m)\n# meridianss:\nfor lon in range(-180, 181, lon_interval):\n    folium.PolyLine([[-90, lon],[90, lon]], weight=0.5).add_to(m)\n\nAOI54009.explore(m=m,style_kwds=dict(color='blue',fillColor='None', opacity=0.7))\nfig.add_child(m)\nm","visibility":"show","key":"uWEBSnxw7h"},{"type":"output","id":"qMaXzqrLacPdwG8ap4ctS","data":[{"output_type":"execute_result","execution_count":7,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"b38f3bb1aef28126004ef5840903df07","path":"/notebooks_test/build/b38f3bb1aef28126004ef5840903df07.html"},"text/plain":{"content":"\u003cfolium.folium.Map at 0x7f7e707d9910\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"Gpo5mvzspW"}],"visibility":"show","key":"mFoQslU5W6"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.039754,"end_time":"2023-03-22T12:55:40.859957","exception":false,"start_time":"2023-03-22T12:55:40.820203","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","children":[],"key":"XUmLaOdCJi"},{"type":"text","value":"Input data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QozNbfqRSQ"},{"type":"strong","children":[],"key":"znKqbD1p8i"}],"identifier":"input-data","label":"Input data","html_id":"input-data","implicit":true,"key":"eKhOxwk25O"}],"visibility":"show","key":"xHvPoTZjgZ"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.039319,"end_time":"2023-03-22T12:55:40.935282","exception":false,"start_time":"2023-03-22T12:55:40.895963","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Open GHS built-up surface","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"m5OYl2SMFP"}],"identifier":"open-ghs-built-up-surface","label":"Open GHS built-up surface","html_id":"open-ghs-built-up-surface","implicit":true,"key":"Duna7yqMvD"}],"visibility":"show","key":"BLogL6zJGh"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:41.024334Z","iopub.status.busy":"2023-03-22T12:55:41.022822Z","iopub.status.idle":"2023-03-22T12:55:41.402322Z","shell.execute_reply":"2023-03-22T12:55:41.400107Z"},"papermill":{"duration":0.430709,"end_time":"2023-03-22T12:55:41.406682","exception":false,"start_time":"2023-03-22T12:55:40.975973","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"BTU_data_store = new_data_store(\"s3\", root=\"xcube-dcfs/GHSL/GHS-BUILT-S/\",\n                            storage_options=dict(anon=True) # anon=True - anonymous access (default False)\n                           )","visibility":"show","key":"WVqzRKdrQa"},{"type":"output","id":"2zuwl9OjSQYsyWkmzSHBG","data":[],"visibility":"show","key":"XKVpJauuKE"}],"visibility":"show","key":"ojqB5QG6a6"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:41.488617Z","iopub.status.busy":"2023-03-22T12:55:41.487123Z","iopub.status.idle":"2023-03-22T12:55:41.838307Z","shell.execute_reply":"2023-03-22T12:55:41.837159Z"},"papermill":{"duration":0.397406,"end_time":"2023-03-22T12:55:41.844936","exception":false,"start_time":"2023-03-22T12:55:41.447530","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"BTU_data_store_info = list(BTU_data_store.get_data_ids())\nBTU_data_store_info","visibility":"show","key":"tmqrChM47p"},{"type":"output","id":"NjsU8kAx0bsSvnqp2S67K","data":[{"output_type":"execute_result","execution_count":9,"metadata":{},"data":{"text/plain":{"content":"['GHS_BUILT_S_E1975_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'GHS_BUILT_S_E1980_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'GHS_BUILT_S_E1985_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'GHS_BUILT_S_E1990_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'GHS_BUILT_S_E1995_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'GHS_BUILT_S_E2000_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'GHS_BUILT_S_E2005_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'GHS_BUILT_S_E2010_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'GHS_BUILT_S_E2015_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'GHS_BUILT_S_E2020_GLOBE_R2022A_54009_1000_V1_0.tif']","content_type":"text/plain"}}}],"visibility":"show","key":"OcnzXcuYvO"}],"visibility":"show","key":"dbO5EqeNpk"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:41.930912Z","iopub.status.busy":"2023-03-22T12:55:41.929548Z","iopub.status.idle":"2023-03-22T12:55:41.941520Z","shell.execute_reply":"2023-03-22T12:55:41.939541Z"},"papermill":{"duration":0.060745,"end_time":"2023-03-22T12:55:41.944367","exception":false,"start_time":"2023-03-22T12:55:41.883622","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Select built-up data for Reference year\nBTU_REFyear= '\\n'.join(s for s in BTU_data_store_info if str(REFyear) in s)\n# BTU_REFyear","visibility":"show","key":"djwtUbXcqm"},{"type":"output","id":"Hjmffj3_fspMm6s-cnr2R","data":[],"visibility":"show","key":"wfuQNatreC"}],"visibility":"show","key":"kYhmYfICSl"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:42.044858Z","iopub.status.busy":"2023-03-22T12:55:42.044377Z","iopub.status.idle":"2023-03-22T12:55:42.701981Z","shell.execute_reply":"2023-03-22T12:55:42.699589Z"},"papermill":{"duration":0.706357,"end_time":"2023-03-22T12:55:42.706102","exception":false,"start_time":"2023-03-22T12:55:41.999745","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Info about built-up data for Reference year\nBTU_data_store.describe_data(BTU_REFyear).to_dict()","visibility":"show","key":"y1i6Od05Sk"},{"type":"output","id":"z87LAGQzZHw3TI26iS9j4","data":[{"output_type":"execute_result","execution_count":11,"metadata":{},"data":{"text/plain":{"content":"{'data_id': 'GHS_BUILT_S_E2020_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'data_type': 'mldataset',\n 'bbox': [-18041000.0, -9000000.0, 18041000.0, 9000000.0],\n 'time_range': [None, None],\n 'dims': {'x': 36082, 'y': 18000},\n 'spatial_res': 1000.0,\n 'coords': {'x': {'name': 'x', 'dtype': 'float64', 'dims': ['x']},\n  'y': {'name': 'y', 'dtype': 'float64', 'dims': ['y']},\n  'spatial_ref': {'name': 'spatial_ref',\n   'dtype': 'int64',\n   'dims': [],\n   'attrs': {'crs_wkt': 'PROJCS[\"World_Mollweide\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mollweide\"],PARAMETER[\"central_meridian\",0],PARAMETER[\"false_easting\",0],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH]]',\n    'spatial_ref': 'PROJCS[\"World_Mollweide\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mollweide\"],PARAMETER[\"central_meridian\",0],PARAMETER[\"false_easting\",0],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH]]',\n    'GeoTransform': '-18041000.0 1000.0 0.0 9000000.0 0.0 -1000.0'}}},\n 'data_vars': {'band_1': {'name': 'band_1',\n   'dtype': 'uint32',\n   'dims': ['y', 'x'],\n   'chunks': [512, 512],\n   'attrs': {'AREA_OR_POINT': 'Area',\n    '_FillValue': 4294967295,\n    'scale_factor': 1.0,\n    'add_offset': 0.0,\n    'grid_mapping': 'spatial_ref'}}},\n 'attrs': {'source': 's3://xcube-dcfs/GHSL/GHS-BUILT-S/GHS_BUILT_S_E2020_GLOBE_R2022A_54009_1000_V1_0.tif'},\n 'num_levels': 6}","content_type":"text/plain"}}}],"visibility":"show","key":"Ctao9YQjnS"}],"visibility":"show","key":"rtKZ2mMdfF"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:42.815018Z","iopub.status.busy":"2023-03-22T12:55:42.814392Z","iopub.status.idle":"2023-03-22T12:55:42.823688Z","shell.execute_reply":"2023-03-22T12:55:42.821704Z"},"papermill":{"duration":0.068853,"end_time":"2023-03-22T12:55:42.827823","exception":false,"start_time":"2023-03-22T12:55:42.758970","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# # Info about population data for Reference year\n# print(BTU_data_store.open_data(BTU_REFyear).num_levels, '\\n')\n# print(BTU_data_store.open_data(BTU_REFyear).datasets, '\\n')\n# BTU_data_store.open_data(BTU_REFyear).grid_mapping","visibility":"show","key":"pnOMlJMpXs"},{"type":"output","id":"3x_7L4kJFoJwWWB6mKAmw","data":[],"visibility":"show","key":"LWr09V5y9G"}],"visibility":"show","key":"ntWAj1WSXY"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:42.915121Z","iopub.status.busy":"2023-03-22T12:55:42.914661Z","iopub.status.idle":"2023-03-22T12:55:48.043649Z","shell.execute_reply":"2023-03-22T12:55:48.041665Z"},"papermill":{"duration":5.180159,"end_time":"2023-03-22T12:55:48.052237","exception":false,"start_time":"2023-03-22T12:55:42.872078","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"level = 0   # this is the highest resolution, which corresponds to 1km\n\n# Build-up dataset for selected Reference year - clipped by AOI\nBTU_ds_0 = BTU_data_store.open_data(BTU_REFyear).get_dataset(level).rio.clip(AOI54009.geometry, AOI54009.crs)\nBTU_ds_0 = BTU_ds_0.rename({\"band_1\": \"built-up\"})\n#BTU_ds_0","visibility":"show","key":"b7uQJ9LwDQ"},{"type":"output","id":"bx3sGxYr03Xdck0Mn8Xdn","data":[],"visibility":"show","key":"swFzCvNNwP"}],"visibility":"show","key":"nzZQ3IJoOA"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:48.207328Z","iopub.status.busy":"2023-03-22T12:55:48.206881Z","iopub.status.idle":"2023-03-22T12:55:48.217138Z","shell.execute_reply":"2023-03-22T12:55:48.213869Z"},"papermill":{"duration":0.085931,"end_time":"2023-03-22T12:55:48.219856","exception":false,"start_time":"2023-03-22T12:55:48.133925","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# # Info AOI coordinates in the world projection Mollweide (ESRI:54009)\n# print(BTU_ds_0.x.min().values, BTU_ds_0.x.max().values)\n# print(BTU_ds_0.y.min().values, BTU_ds_0.y.max().values)","visibility":"show","key":"P1uuHPxaGg"},{"type":"output","id":"qMRlUoQBZUrhkQ-w8KZdz","data":[],"visibility":"show","key":"pLGirryGB5"}],"visibility":"show","key":"xo8BArR9vu"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.040653,"end_time":"2023-03-22T12:55:48.299676","exception":false,"start_time":"2023-03-22T12:55:48.259023","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Open GHS population grid","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aNuFimVlDQ"}],"identifier":"open-ghs-population-grid","label":"Open GHS population grid","html_id":"open-ghs-population-grid","implicit":true,"key":"tu3tZCCqhZ"}],"visibility":"show","key":"uYHNFK7mZr"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:48.401675Z","iopub.status.busy":"2023-03-22T12:55:48.400994Z","iopub.status.idle":"2023-03-22T12:55:48.419572Z","shell.execute_reply":"2023-03-22T12:55:48.417635Z"},"papermill":{"duration":0.062324,"end_time":"2023-03-22T12:55:48.424037","exception":false,"start_time":"2023-03-22T12:55:48.361713","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"POP_data_store = new_data_store(\"s3\", \n                            root=\"xcube-dcfs/GHSL/GHS-POP/\",\n                            storage_options=dict(anon=True)\n                           )","visibility":"show","key":"VAUmWPWR6p"},{"type":"output","id":"ve_sjIUqwCxh60AyYKCmc","data":[],"visibility":"show","key":"T7CJHB3F3S"}],"visibility":"show","key":"SgISGe1Koe"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.052493,"end_time":"2023-03-22T12:55:48.527327","exception":false,"start_time":"2023-03-22T12:55:48.474834","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"OP_data_store info:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RAVPSsqeET"}],"key":"gAalszR107"}],"visibility":"show","key":"nqmvr4GMcG"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:48.634194Z","iopub.status.busy":"2023-03-22T12:55:48.633373Z","iopub.status.idle":"2023-03-22T12:55:48.772725Z","shell.execute_reply":"2023-03-22T12:55:48.770776Z"},"papermill":{"duration":0.192847,"end_time":"2023-03-22T12:55:48.776150","exception":false,"start_time":"2023-03-22T12:55:48.583303","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"POP_data_store_info=list(POP_data_store.get_data_ids())\nPOP_data_store_info","visibility":"show","key":"HsdoxOZDOu"},{"type":"output","id":"QJVf-ZZaDtKWZa7T1Oq9k","data":[{"output_type":"execute_result","execution_count":16,"metadata":{},"data":{"text/plain":{"content":"['GHS_POP_E1975_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'GHS_POP_E1980_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'GHS_POP_E1985_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'GHS_POP_E1990_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'GHS_POP_E1995_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'GHS_POP_E2000_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'GHS_POP_E2005_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'GHS_POP_E2010_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'GHS_POP_E2015_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'GHS_POP_E2020_GLOBE_R2022A_54009_1000_V1_0.tif']","content_type":"text/plain"}}}],"visibility":"show","key":"xUQYrJN5Kr"}],"visibility":"show","key":"VWGix6pAjk"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:48.891566Z","iopub.status.busy":"2023-03-22T12:55:48.890483Z","iopub.status.idle":"2023-03-22T12:55:48.898823Z","shell.execute_reply":"2023-03-22T12:55:48.896694Z"},"papermill":{"duration":0.074402,"end_time":"2023-03-22T12:55:48.903201","exception":false,"start_time":"2023-03-22T12:55:48.828799","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Select population data for Reference year\nPOP_REFyear= '\\n'.join(s for s in POP_data_store_info if str(REFyear) in s)\n#POP_REFyear","visibility":"show","key":"CikDvKSQhb"},{"type":"output","id":"IcfD_b-zhPSAuzZjNt13B","data":[],"visibility":"show","key":"hFpnQKxAgM"}],"visibility":"show","key":"DjClhyDTiD"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:49.008900Z","iopub.status.busy":"2023-03-22T12:55:49.006617Z","iopub.status.idle":"2023-03-22T12:55:49.818464Z","shell.execute_reply":"2023-03-22T12:55:49.816978Z"},"papermill":{"duration":0.870224,"end_time":"2023-03-22T12:55:49.822565","exception":false,"start_time":"2023-03-22T12:55:48.952341","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Info about built-up data for Reference year\nPOP_data_store.describe_data(POP_REFyear).to_dict()","visibility":"show","key":"qGrvx0Sg1Z"},{"type":"output","id":"0hqQ33_uPBMoyAIS24RPC","data":[{"output_type":"execute_result","execution_count":18,"metadata":{},"data":{"text/plain":{"content":"{'data_id': 'GHS_POP_E2020_GLOBE_R2022A_54009_1000_V1_0.tif',\n 'data_type': 'mldataset',\n 'bbox': [-18041000.0, -9000000.0, 18041000.0, 9000000.0],\n 'time_range': [None, None],\n 'dims': {'x': 36082, 'y': 18000},\n 'spatial_res': 1000.0,\n 'coords': {'x': {'name': 'x', 'dtype': 'float64', 'dims': ['x']},\n  'y': {'name': 'y', 'dtype': 'float64', 'dims': ['y']},\n  'spatial_ref': {'name': 'spatial_ref',\n   'dtype': 'int64',\n   'dims': [],\n   'attrs': {'crs_wkt': 'PROJCS[\"World_Mollweide\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mollweide\"],PARAMETER[\"central_meridian\",0],PARAMETER[\"false_easting\",0],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH]]',\n    'spatial_ref': 'PROJCS[\"World_Mollweide\",GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0],UNIT[\"Degree\",0.0174532925199433]],PROJECTION[\"Mollweide\"],PARAMETER[\"central_meridian\",0],PARAMETER[\"false_easting\",0],PARAMETER[\"false_northing\",0],UNIT[\"metre\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\",NORTH]]',\n    'GeoTransform': '-18041000.0 1000.0 0.0 9000000.0 0.0 -1000.0'}}},\n 'data_vars': {'band_1': {'name': 'band_1',\n   'dtype': 'float64',\n   'dims': ['y', 'x'],\n   'chunks': [512, 512],\n   'attrs': {'AREA_OR_POINT': 'Area',\n    'STATISTICS_COVARIANCES': 330985.3282731281,\n    'STATISTICS_MAXIMUM': 615756.8270821,\n    'STATISTICS_MEAN': 56.450798856297,\n    'STATISTICS_MEDIAN': 0.0,\n    'STATISTICS_MINIMUM': 0,\n    'STATISTICS_SKIPFACTORX': 1,\n    'STATISTICS_SKIPFACTORY': 1,\n    'STATISTICS_STDDEV': 575.31324361006,\n    'STATISTICS_VALID_PERCENT': 21.26,\n    '_FillValue': -200.0,\n    'scale_factor': 1.0,\n    'add_offset': 0.0,\n    'grid_mapping': 'spatial_ref'}}},\n 'attrs': {'source': 's3://xcube-dcfs/GHSL/GHS-POP/GHS_POP_E2020_GLOBE_R2022A_54009_1000_V1_0.tif'},\n 'num_levels': 6}","content_type":"text/plain"}}}],"visibility":"show","key":"JiIko6OCK4"}],"visibility":"show","key":"yDOwEkGocc"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:49.941829Z","iopub.status.busy":"2023-03-22T12:55:49.941401Z","iopub.status.idle":"2023-03-22T12:55:49.951250Z","shell.execute_reply":"2023-03-22T12:55:49.949817Z"},"papermill":{"duration":0.071908,"end_time":"2023-03-22T12:55:49.954826","exception":false,"start_time":"2023-03-22T12:55:49.882918","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# # Info about population data for Reference year\n# print(POP_data_store.open_data(POP_REFyear).num_levels, '\\n')\n# print(POP_data_store.open_data(POP_REFyear).datasets, '\\n')\n# POP_data_store.open_data(POP_REFyear).grid_mapping","visibility":"show","key":"rLZkXaw9GZ"},{"type":"output","id":"-aYYWY9zLF2mMm1fcBcyv","data":[],"visibility":"show","key":"HMqgixBOTB"}],"visibility":"show","key":"pQoValpoZj"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:50.073185Z","iopub.status.busy":"2023-03-22T12:55:50.071855Z","iopub.status.idle":"2023-03-22T12:55:55.915339Z","shell.execute_reply":"2023-03-22T12:55:55.913585Z"},"papermill":{"duration":5.895095,"end_time":"2023-03-22T12:55:55.918364","exception":false,"start_time":"2023-03-22T12:55:50.023269","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"level = 0   # this is the highest resolution, which corresponds to 1km\n\n# Population dataset  for selected Reference year - clipped by AOI\nPOP_ds_0 = POP_data_store.open_data(POP_REFyear).get_dataset(level).rio.clip(AOI54009.geometry, AOI54009.crs)\nPOP_ds_0 = POP_ds_0.rename({\"band_1\": \"population_grid\"})\n#POP_ds_0","visibility":"show","key":"uNBGNxsu7I"},{"type":"output","id":"gudHfGrC4SlbnwHn9cL8k","data":[],"visibility":"show","key":"nAqvdovIMw"}],"visibility":"show","key":"bRgHW2ctE1"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.058536,"end_time":"2023-03-22T12:55:56.026149","exception":false,"start_time":"2023-03-22T12:55:55.967613","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dataset to DataArray","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XJV1jYOY3S"}],"identifier":"dataset-to-dataarray","label":"Dataset to DataArray","html_id":"dataset-to-dataarray","implicit":true,"key":"HWNqH34F12"}],"visibility":"show","key":"mon5eyR2DU"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:56.106534Z","iopub.status.busy":"2023-03-22T12:55:56.105623Z","iopub.status.idle":"2023-03-22T12:55:57.207857Z","shell.execute_reply":"2023-03-22T12:55:57.203517Z"},"papermill":{"duration":1.147389,"end_time":"2023-03-22T12:55:57.212179","exception":false,"start_time":"2023-03-22T12:55:56.064790","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"BTU_da=(BTU_ds_0['built-up']).squeeze()\nBTU_da = BTU_da.load()\nBTU_da=BTU_da.where(BTU_da != BTU_da.attrs['_FillValue']).fillna(0)\nBTU_da","visibility":"show","key":"CbU2DoFnSP"},{"type":"output","id":"8W326lun5kHS83MK7FIxE","data":[{"output_type":"execute_result","execution_count":21,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\u003csvg style=\"position: absolute; width: 0; height: 0; overflow: hidden\"\u003e\n\u003cdefs\u003e\n\u003csymbol id=\"icon-database\" viewBox=\"0 0 32 32\"\u003e\n\u003cpath d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"\u003e\u003c/path\u003e\n\u003c/symbol\u003e\n\u003csymbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\"\u003e\n\u003cpath d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003c/symbol\u003e\n\u003c/defs\u003e\n\u003c/svg\u003e\n\u003cstyle\u003e/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=dark],\nbody[data-theme=dark],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1F1F1F;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header \u003e div,\n.xr-header \u003e ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 20px 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: none;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary \u003e span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: '►';\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: '▼';\n}\n\n.xr-section-summary-in:checked + label \u003e span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap \u003e label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: '(';\n}\n\n.xr-dim-list:after {\n  content: ')';\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: ',';\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item \u003e div,\n.xr-var-item label,\n.xr-var-item \u003e .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item \u003e .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list \u003e li:nth-child(odd) \u003e div,\n.xr-var-list \u003e li:nth-child(odd) \u003e label,\n.xr-var-list \u003e li:nth-child(odd) \u003e .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data \u003e table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\u003c/style\u003e\u003cpre class='xr-text-repr-fallback'\u003e\u0026lt;xarray.DataArray \u0026#x27;built-up\u0026#x27; (y: 831, x: 1266)\u0026gt;\narray([[   0.,    0.,    0., ...,    0.,    0.,    0.],\n       [   0.,    0.,    0., ...,    0.,    0.,    0.],\n       [1203.,    0.,    0., ...,    0.,    0.,    0.],\n       ...,\n       [   0.,    0.,    0., ...,    0.,    0.,    0.],\n       [   0.,    0.,    0., ...,    0.,    0.,    0.],\n       [   0.,    0.,    0., ...,    0.,    0.,    0.]])\nCoordinates:\n  * x            (x) float64 7.085e+05 7.095e+05 ... 1.972e+06 1.974e+06\n  * y            (y) float64 6.386e+06 6.386e+06 ... 5.558e+06 5.556e+06\n    spatial_ref  int64 0\nAttributes:\n    AREA_OR_POINT:  Area\n    scale_factor:   1.0\n    add_offset:     0.0\n    grid_mapping:   spatial_ref\n    _FillValue:     4294967295\u003c/pre\u003e\u003cdiv class='xr-wrap' style='display:none'\u003e\u003cdiv class='xr-header'\u003e\u003cdiv class='xr-obj-type'\u003exarray.DataArray\u003c/div\u003e\u003cdiv class='xr-array-name'\u003e'built-up'\u003c/div\u003e\u003cul class='xr-dim-list'\u003e\u003cli\u003e\u003cspan class='xr-has-index'\u003ey\u003c/span\u003e: 831\u003c/li\u003e\u003cli\u003e\u003cspan class='xr-has-index'\u003ex\u003c/span\u003e: 1266\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cul class='xr-sections'\u003e\u003cli class='xr-section-item'\u003e\u003cdiv class='xr-array-wrap'\u003e\u003cinput id='section-36d7c00b-590d-482d-a6de-cf84fc86b559' class='xr-array-in' type='checkbox' checked\u003e\u003clabel for='section-36d7c00b-590d-482d-a6de-cf84fc86b559' title='Show/hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-array-preview xr-preview'\u003e\u003cspan\u003e0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-array-data'\u003e\u003cpre\u003earray([[   0.,    0.,    0., ...,    0.,    0.,    0.],\n       [   0.,    0.,    0., ...,    0.,    0.,    0.],\n       [1203.,    0.,    0., ...,    0.,    0.,    0.],\n       ...,\n       [   0.,    0.,    0., ...,    0.,    0.,    0.],\n       [   0.,    0.,    0., ...,    0.,    0.,    0.],\n       [   0.,    0.,    0., ...,    0.,    0.,    0.]])\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-ca8bfbfa-ad41-4c99-a2bf-732121badef8' class='xr-section-summary-in' type='checkbox'  checked\u003e\u003clabel for='section-ca8bfbfa-ad41-4c99-a2bf-732121badef8' class='xr-section-summary' \u003eCoordinates: \u003cspan\u003e(3)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cul class='xr-var-list'\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan class='xr-has-index'\u003ex\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e(x)\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003efloat64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e7.085e+05 7.095e+05 ... 1.974e+06\u003c/div\u003e\u003cinput id='attrs-61f0d1b2-0932-4483-b465-1ac0af7fe2a3' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-61f0d1b2-0932-4483-b465-1ac0af7fe2a3' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-077dc242-5234-4904-ba8d-42f852b72602' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-077dc242-5234-4904-ba8d-42f852b72602' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003eaxis :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eX\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003elong_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ex coordinate of projection\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003estandard_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eprojection_x_coordinate\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eunits :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003emetre\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray([ 708500.,  709500.,  710500., ..., 1971500., 1972500., 1973500.])\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan class='xr-has-index'\u003ey\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e(y)\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003efloat64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e6.386e+06 6.386e+06 ... 5.556e+06\u003c/div\u003e\u003cinput id='attrs-3795a79e-8dfb-4adc-93a5-b5e399ea8d8a' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-3795a79e-8dfb-4adc-93a5-b5e399ea8d8a' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-fc2adafb-aa5c-467c-bb0b-fb76a82beac5' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-fc2adafb-aa5c-467c-bb0b-fb76a82beac5' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003eaxis :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eY\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003elong_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ey coordinate of projection\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003estandard_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eprojection_y_coordinate\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eunits :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003emetre\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray([6386500., 6385500., 6384500., ..., 5558500., 5557500., 5556500.])\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan\u003espatial_ref\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e()\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003eint64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e0\u003c/div\u003e\u003cinput id='attrs-64f5b56e-46da-4690-bf4b-45186c319dcc' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-64f5b56e-46da-4690-bf4b-45186c319dcc' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-89ae460e-1932-482e-b2d4-c317523fe8d8' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-89ae460e-1932-482e-b2d4-c317523fe8d8' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003ecrs_wkt :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ePROJCS[\u0026quot;World_Mollweide\u0026quot;,GEOGCS[\u0026quot;WGS 84\u0026quot;,DATUM[\u0026quot;WGS_1984\u0026quot;,SPHEROID[\u0026quot;WGS 84\u0026quot;,6378137,298.257223563,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;7030\u0026quot;]],AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;6326\u0026quot;]],PRIMEM[\u0026quot;Greenwich\u0026quot;,0],UNIT[\u0026quot;Degree\u0026quot;,0.0174532925199433]],PROJECTION[\u0026quot;Mollweide\u0026quot;],PARAMETER[\u0026quot;central_meridian\u0026quot;,0],PARAMETER[\u0026quot;false_easting\u0026quot;,0],PARAMETER[\u0026quot;false_northing\u0026quot;,0],UNIT[\u0026quot;metre\u0026quot;,1,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;9001\u0026quot;]],AXIS[\u0026quot;Easting\u0026quot;,EAST],AXIS[\u0026quot;Northing\u0026quot;,NORTH]]\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003espatial_ref :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ePROJCS[\u0026quot;World_Mollweide\u0026quot;,GEOGCS[\u0026quot;WGS 84\u0026quot;,DATUM[\u0026quot;WGS_1984\u0026quot;,SPHEROID[\u0026quot;WGS 84\u0026quot;,6378137,298.257223563,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;7030\u0026quot;]],AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;6326\u0026quot;]],PRIMEM[\u0026quot;Greenwich\u0026quot;,0],UNIT[\u0026quot;Degree\u0026quot;,0.0174532925199433]],PROJECTION[\u0026quot;Mollweide\u0026quot;],PARAMETER[\u0026quot;central_meridian\u0026quot;,0],PARAMETER[\u0026quot;false_easting\u0026quot;,0],PARAMETER[\u0026quot;false_northing\u0026quot;,0],UNIT[\u0026quot;metre\u0026quot;,1,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;9001\u0026quot;]],AXIS[\u0026quot;Easting\u0026quot;,EAST],AXIS[\u0026quot;Northing\u0026quot;,NORTH]]\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eGeoTransform :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e708000.0 1000.0 0.0 6387000.0 0.0 -1000.0\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray(0)\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-1a1006e2-b0a8-4681-bf46-cc18a2ebc1f5' class='xr-section-summary-in' type='checkbox'  \u003e\u003clabel for='section-1a1006e2-b0a8-4681-bf46-cc18a2ebc1f5' class='xr-section-summary' \u003eIndexes: \u003cspan\u003e(2)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cul class='xr-var-list'\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-index-name'\u003e\u003cdiv\u003ex\u003c/div\u003e\u003c/div\u003e\u003cdiv class='xr-index-preview'\u003ePandasIndex\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cinput id='index-eadf05a0-0885-4468-a7a5-cb11334d078b' class='xr-index-data-in' type='checkbox'/\u003e\u003clabel for='index-eadf05a0-0885-4468-a7a5-cb11334d078b' title='Show/Hide index repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-index-data'\u003e\u003cpre\u003ePandasIndex(Float64Index([ 708500.0,  709500.0,  710500.0,  711500.0,  712500.0,  713500.0,\n               714500.0,  715500.0,  716500.0,  717500.0,\n              ...\n              1964500.0, 1965500.0, 1966500.0, 1967500.0, 1968500.0, 1969500.0,\n              1970500.0, 1971500.0, 1972500.0, 1973500.0],\n             dtype=\u0026#x27;float64\u0026#x27;, name=\u0026#x27;x\u0026#x27;, length=1266))\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-index-name'\u003e\u003cdiv\u003ey\u003c/div\u003e\u003c/div\u003e\u003cdiv class='xr-index-preview'\u003ePandasIndex\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cinput id='index-b70dc3c4-f47c-4b3e-8a6e-5371555b60f6' class='xr-index-data-in' type='checkbox'/\u003e\u003clabel for='index-b70dc3c4-f47c-4b3e-8a6e-5371555b60f6' title='Show/Hide index repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-index-data'\u003e\u003cpre\u003ePandasIndex(Float64Index([6386500.0, 6385500.0, 6384500.0, 6383500.0, 6382500.0, 6381500.0,\n              6380500.0, 6379500.0, 6378500.0, 6377500.0,\n              ...\n              5565500.0, 5564500.0, 5563500.0, 5562500.0, 5561500.0, 5560500.0,\n              5559500.0, 5558500.0, 5557500.0, 5556500.0],\n             dtype=\u0026#x27;float64\u0026#x27;, name=\u0026#x27;y\u0026#x27;, length=831))\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-f7bbca14-2b7a-41a0-b82c-66c91b6b56e3' class='xr-section-summary-in' type='checkbox'  checked\u003e\u003clabel for='section-f7bbca14-2b7a-41a0-b82c-66c91b6b56e3' class='xr-section-summary' \u003eAttributes: \u003cspan\u003e(5)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003eAREA_OR_POINT :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eArea\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003escale_factor :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e1.0\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eadd_offset :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e0.0\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003egrid_mapping :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003espatial_ref\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003e_FillValue :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e4294967295\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"\u003cxarray.DataArray 'built-up' (y: 831, x: 1266)\u003e\narray([[   0.,    0.,    0., ...,    0.,    0.,    0.],\n       [   0.,    0.,    0., ...,    0.,    0.,    0.],\n       [1203.,    0.,    0., ...,    0.,    0.,    0.],\n       ...,\n       [   0.,    0.,    0., ...,    0.,    0.,    0.],\n       [   0.,    0.,    0., ...,    0.,    0.,    0.],\n       [   0.,    0.,    0., ...,    0.,    0.,    0.]])\nCoordinates:\n  * x            (x) float64 7.085e+05 7.095e+05 ... 1.972e+06 1.974e+06\n  * y            (y) float64 6.386e+06 6.386e+06 ... 5.558e+06 5.556e+06\n    spatial_ref  int64 0\nAttributes:\n    AREA_OR_POINT:  Area\n    scale_factor:   1.0\n    add_offset:     0.0\n    grid_mapping:   spatial_ref\n    _FillValue:     4294967295","content_type":"text/plain"}}}],"visibility":"show","key":"Tdc4yiU24A"}],"visibility":"show","key":"VHe3O8ZOF7"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:57.355816Z","iopub.status.busy":"2023-03-22T12:55:57.355273Z","iopub.status.idle":"2023-03-22T12:55:59.010719Z","shell.execute_reply":"2023-03-22T12:55:58.997384Z"},"papermill":{"duration":1.752247,"end_time":"2023-03-22T12:55:59.019065","exception":false,"start_time":"2023-03-22T12:55:57.266818","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"POP_da=(POP_ds_0['population_grid']).squeeze()\nPOP_da = POP_da.load()\nPOP_da=POP_da.where(POP_da != POP_da.attrs['_FillValue']).fillna(0)\nPOP_da","visibility":"show","key":"acPprK0JdC"},{"type":"output","id":"vp7Y5LfYntpcRLFoJrOCd","data":[{"output_type":"execute_result","execution_count":22,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\u003csvg style=\"position: absolute; width: 0; height: 0; overflow: hidden\"\u003e\n\u003cdefs\u003e\n\u003csymbol id=\"icon-database\" viewBox=\"0 0 32 32\"\u003e\n\u003cpath d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"\u003e\u003c/path\u003e\n\u003c/symbol\u003e\n\u003csymbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\"\u003e\n\u003cpath d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003c/symbol\u003e\n\u003c/defs\u003e\n\u003c/svg\u003e\n\u003cstyle\u003e/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=dark],\nbody[data-theme=dark],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1F1F1F;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header \u003e div,\n.xr-header \u003e ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 20px 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: none;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary \u003e span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: '►';\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: '▼';\n}\n\n.xr-section-summary-in:checked + label \u003e span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap \u003e label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: '(';\n}\n\n.xr-dim-list:after {\n  content: ')';\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: ',';\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item \u003e div,\n.xr-var-item label,\n.xr-var-item \u003e .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item \u003e .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list \u003e li:nth-child(odd) \u003e div,\n.xr-var-list \u003e li:nth-child(odd) \u003e label,\n.xr-var-list \u003e li:nth-child(odd) \u003e .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data \u003e table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\u003c/style\u003e\u003cpre class='xr-text-repr-fallback'\u003e\u0026lt;xarray.DataArray \u0026#x27;population_grid\u0026#x27; (y: 831, x: 1266)\u0026gt;\narray([[0.        , 0.        , 0.        , ..., 0.        , 0.        ,\n        0.        ],\n       [0.        , 0.        , 0.        , ..., 0.        , 0.        ,\n        0.        ],\n       [5.30303578, 0.        , 0.        , ..., 0.        , 0.        ,\n        0.        ],\n       ...,\n       [0.        , 0.        , 0.        , ..., 0.        , 0.        ,\n        0.        ],\n       [0.        , 0.        , 0.        , ..., 0.        , 0.        ,\n        0.        ],\n       [0.        , 0.        , 0.        , ..., 0.        , 0.        ,\n        0.        ]])\nCoordinates:\n  * x            (x) float64 7.085e+05 7.095e+05 ... 1.972e+06 1.974e+06\n  * y            (y) float64 6.386e+06 6.386e+06 ... 5.558e+06 5.556e+06\n    spatial_ref  int64 0\nAttributes: (12/14)\n    AREA_OR_POINT:             Area\n    STATISTICS_COVARIANCES:    330985.3282731281\n    STATISTICS_MAXIMUM:        615756.8270821\n    STATISTICS_MEAN:           56.450798856297\n    STATISTICS_MEDIAN:         0.0\n    STATISTICS_MINIMUM:        0\n    ...                        ...\n    STATISTICS_STDDEV:         575.31324361006\n    STATISTICS_VALID_PERCENT:  21.26\n    scale_factor:              1.0\n    add_offset:                0.0\n    grid_mapping:              spatial_ref\n    _FillValue:                -200.0\u003c/pre\u003e\u003cdiv class='xr-wrap' style='display:none'\u003e\u003cdiv class='xr-header'\u003e\u003cdiv class='xr-obj-type'\u003exarray.DataArray\u003c/div\u003e\u003cdiv class='xr-array-name'\u003e'population_grid'\u003c/div\u003e\u003cul class='xr-dim-list'\u003e\u003cli\u003e\u003cspan class='xr-has-index'\u003ey\u003c/span\u003e: 831\u003c/li\u003e\u003cli\u003e\u003cspan class='xr-has-index'\u003ex\u003c/span\u003e: 1266\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cul class='xr-sections'\u003e\u003cli class='xr-section-item'\u003e\u003cdiv class='xr-array-wrap'\u003e\u003cinput id='section-79b73e76-f488-4461-9039-e8ceae08709e' class='xr-array-in' type='checkbox' checked\u003e\u003clabel for='section-79b73e76-f488-4461-9039-e8ceae08709e' title='Show/hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-array-preview xr-preview'\u003e\u003cspan\u003e0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-array-data'\u003e\u003cpre\u003earray([[0.        , 0.        , 0.        , ..., 0.        , 0.        ,\n        0.        ],\n       [0.        , 0.        , 0.        , ..., 0.        , 0.        ,\n        0.        ],\n       [5.30303578, 0.        , 0.        , ..., 0.        , 0.        ,\n        0.        ],\n       ...,\n       [0.        , 0.        , 0.        , ..., 0.        , 0.        ,\n        0.        ],\n       [0.        , 0.        , 0.        , ..., 0.        , 0.        ,\n        0.        ],\n       [0.        , 0.        , 0.        , ..., 0.        , 0.        ,\n        0.        ]])\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-f618e6af-001e-4ce1-bb33-7eb3c8b2c09e' class='xr-section-summary-in' type='checkbox'  checked\u003e\u003clabel for='section-f618e6af-001e-4ce1-bb33-7eb3c8b2c09e' class='xr-section-summary' \u003eCoordinates: \u003cspan\u003e(3)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cul class='xr-var-list'\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan class='xr-has-index'\u003ex\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e(x)\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003efloat64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e7.085e+05 7.095e+05 ... 1.974e+06\u003c/div\u003e\u003cinput id='attrs-f605fc64-0a6a-4b8a-9fe2-994073fccc27' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-f605fc64-0a6a-4b8a-9fe2-994073fccc27' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-2666e3f4-1eef-485d-a520-eec571b10505' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-2666e3f4-1eef-485d-a520-eec571b10505' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003eaxis :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eX\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003elong_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ex coordinate of projection\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003estandard_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eprojection_x_coordinate\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eunits :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003emetre\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray([ 708500.,  709500.,  710500., ..., 1971500., 1972500., 1973500.])\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan class='xr-has-index'\u003ey\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e(y)\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003efloat64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e6.386e+06 6.386e+06 ... 5.556e+06\u003c/div\u003e\u003cinput id='attrs-5b3eca8c-76dc-454f-9f54-71ea0720d8a3' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-5b3eca8c-76dc-454f-9f54-71ea0720d8a3' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-12843276-3bf4-4283-8296-f26e465bffad' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-12843276-3bf4-4283-8296-f26e465bffad' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003eaxis :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eY\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003elong_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ey coordinate of projection\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003estandard_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eprojection_y_coordinate\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eunits :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003emetre\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray([6386500., 6385500., 6384500., ..., 5558500., 5557500., 5556500.])\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan\u003espatial_ref\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e()\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003eint64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e0\u003c/div\u003e\u003cinput id='attrs-bdeb094c-65de-44dc-bc6c-00eb3dc02c56' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-bdeb094c-65de-44dc-bc6c-00eb3dc02c56' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-c1ee8fda-deaa-4f20-a145-ef877cae0127' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-c1ee8fda-deaa-4f20-a145-ef877cae0127' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003ecrs_wkt :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ePROJCS[\u0026quot;World_Mollweide\u0026quot;,GEOGCS[\u0026quot;WGS 84\u0026quot;,DATUM[\u0026quot;WGS_1984\u0026quot;,SPHEROID[\u0026quot;WGS 84\u0026quot;,6378137,298.257223563,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;7030\u0026quot;]],AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;6326\u0026quot;]],PRIMEM[\u0026quot;Greenwich\u0026quot;,0],UNIT[\u0026quot;Degree\u0026quot;,0.0174532925199433]],PROJECTION[\u0026quot;Mollweide\u0026quot;],PARAMETER[\u0026quot;central_meridian\u0026quot;,0],PARAMETER[\u0026quot;false_easting\u0026quot;,0],PARAMETER[\u0026quot;false_northing\u0026quot;,0],UNIT[\u0026quot;metre\u0026quot;,1,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;9001\u0026quot;]],AXIS[\u0026quot;Easting\u0026quot;,EAST],AXIS[\u0026quot;Northing\u0026quot;,NORTH]]\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003espatial_ref :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ePROJCS[\u0026quot;World_Mollweide\u0026quot;,GEOGCS[\u0026quot;WGS 84\u0026quot;,DATUM[\u0026quot;WGS_1984\u0026quot;,SPHEROID[\u0026quot;WGS 84\u0026quot;,6378137,298.257223563,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;7030\u0026quot;]],AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;6326\u0026quot;]],PRIMEM[\u0026quot;Greenwich\u0026quot;,0],UNIT[\u0026quot;Degree\u0026quot;,0.0174532925199433]],PROJECTION[\u0026quot;Mollweide\u0026quot;],PARAMETER[\u0026quot;central_meridian\u0026quot;,0],PARAMETER[\u0026quot;false_easting\u0026quot;,0],PARAMETER[\u0026quot;false_northing\u0026quot;,0],UNIT[\u0026quot;metre\u0026quot;,1,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;9001\u0026quot;]],AXIS[\u0026quot;Easting\u0026quot;,EAST],AXIS[\u0026quot;Northing\u0026quot;,NORTH]]\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eGeoTransform :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e708000.0 1000.0 0.0 6387000.0 0.0 -1000.0\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray(0)\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-3294ef7a-1855-4672-91d2-2b1f12576270' class='xr-section-summary-in' type='checkbox'  \u003e\u003clabel for='section-3294ef7a-1855-4672-91d2-2b1f12576270' class='xr-section-summary' \u003eIndexes: \u003cspan\u003e(2)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cul class='xr-var-list'\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-index-name'\u003e\u003cdiv\u003ex\u003c/div\u003e\u003c/div\u003e\u003cdiv class='xr-index-preview'\u003ePandasIndex\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cinput id='index-c4622588-9968-48e0-b078-5aa5d1995275' class='xr-index-data-in' type='checkbox'/\u003e\u003clabel for='index-c4622588-9968-48e0-b078-5aa5d1995275' title='Show/Hide index repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-index-data'\u003e\u003cpre\u003ePandasIndex(Float64Index([ 708500.0,  709500.0,  710500.0,  711500.0,  712500.0,  713500.0,\n               714500.0,  715500.0,  716500.0,  717500.0,\n              ...\n              1964500.0, 1965500.0, 1966500.0, 1967500.0, 1968500.0, 1969500.0,\n              1970500.0, 1971500.0, 1972500.0, 1973500.0],\n             dtype=\u0026#x27;float64\u0026#x27;, name=\u0026#x27;x\u0026#x27;, length=1266))\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-index-name'\u003e\u003cdiv\u003ey\u003c/div\u003e\u003c/div\u003e\u003cdiv class='xr-index-preview'\u003ePandasIndex\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cinput id='index-23e114e2-2e38-4386-8467-3c4252555f28' class='xr-index-data-in' type='checkbox'/\u003e\u003clabel for='index-23e114e2-2e38-4386-8467-3c4252555f28' title='Show/Hide index repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-index-data'\u003e\u003cpre\u003ePandasIndex(Float64Index([6386500.0, 6385500.0, 6384500.0, 6383500.0, 6382500.0, 6381500.0,\n              6380500.0, 6379500.0, 6378500.0, 6377500.0,\n              ...\n              5565500.0, 5564500.0, 5563500.0, 5562500.0, 5561500.0, 5560500.0,\n              5559500.0, 5558500.0, 5557500.0, 5556500.0],\n             dtype=\u0026#x27;float64\u0026#x27;, name=\u0026#x27;y\u0026#x27;, length=831))\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-d9b75835-9ef7-4e60-8ffc-bf9bcda0109b' class='xr-section-summary-in' type='checkbox'  \u003e\u003clabel for='section-d9b75835-9ef7-4e60-8ffc-bf9bcda0109b' class='xr-section-summary' \u003eAttributes: \u003cspan\u003e(14)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003eAREA_OR_POINT :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eArea\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eSTATISTICS_COVARIANCES :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e330985.3282731281\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eSTATISTICS_MAXIMUM :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e615756.8270821\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eSTATISTICS_MEAN :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e56.450798856297\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eSTATISTICS_MEDIAN :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e0.0\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eSTATISTICS_MINIMUM :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e0\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eSTATISTICS_SKIPFACTORX :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e1\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eSTATISTICS_SKIPFACTORY :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e1\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eSTATISTICS_STDDEV :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e575.31324361006\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eSTATISTICS_VALID_PERCENT :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e21.26\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003escale_factor :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e1.0\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eadd_offset :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e0.0\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003egrid_mapping :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003espatial_ref\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003e_FillValue :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e-200.0\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"\u003cxarray.DataArray 'population_grid' (y: 831, x: 1266)\u003e\narray([[0.        , 0.        , 0.        , ..., 0.        , 0.        ,\n        0.        ],\n       [0.        , 0.        , 0.        , ..., 0.        , 0.        ,\n        0.        ],\n       [5.30303578, 0.        , 0.        , ..., 0.        , 0.        ,\n        0.        ],\n       ...,\n       [0.        , 0.        , 0.        , ..., 0.        , 0.        ,\n        0.        ],\n       [0.        , 0.        , 0.        , ..., 0.        , 0.        ,\n        0.        ],\n       [0.        , 0.        , 0.        , ..., 0.        , 0.        ,\n        0.        ]])\nCoordinates:\n  * x            (x) float64 7.085e+05 7.095e+05 ... 1.972e+06 1.974e+06\n  * y            (y) float64 6.386e+06 6.386e+06 ... 5.558e+06 5.556e+06\n    spatial_ref  int64 0\nAttributes: (12/14)\n    AREA_OR_POINT:             Area\n    STATISTICS_COVARIANCES:    330985.3282731281\n    STATISTICS_MAXIMUM:        615756.8270821\n    STATISTICS_MEAN:           56.450798856297\n    STATISTICS_MEDIAN:         0.0\n    STATISTICS_MINIMUM:        0\n    ...                        ...\n    STATISTICS_STDDEV:         575.31324361006\n    STATISTICS_VALID_PERCENT:  21.26\n    scale_factor:              1.0\n    add_offset:                0.0\n    grid_mapping:              spatial_ref\n    _FillValue:                -200.0","content_type":"text/plain"}}}],"visibility":"show","key":"fRoTVivU1O"}],"visibility":"show","key":"Wvz5nvwSEJ"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:59.169574Z","iopub.status.busy":"2023-03-22T12:55:59.169149Z","iopub.status.idle":"2023-03-22T12:55:59.179753Z","shell.execute_reply":"2023-03-22T12:55:59.177720Z"},"papermill":{"duration":0.086146,"end_time":"2023-03-22T12:55:59.183854","exception":false,"start_time":"2023-03-22T12:55:59.097708","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# # Info about  DataArray\n# print(type(POP_da),'\\n')\n# print(type(POP_da.data))\n# print(POP_da.name), print()\n# print(\"The shape of data is:\\n\", POP_da.shape,'\\n')\n# print(POP_da.coords), print()\n# print(\"the minimum raster value is:\\n\", np.nanmin(POP_da.values))\n# print(\"the maximum raster value is:\\n\", np.nanmax(POP_da.values),'\\n')\n# print('dim:',POP_da.dims,'\\n')\n# print('attributes/metadata:\\n',POP_da.attrs,'\\n')\n# print('----------------')\n# # View generate metadata associated with the raster file\n# # World Mollweide  ESRI:54009, \n# print(\"The crs of data is:\\n\", POP_da.rio.crs,'\\n')\n# print('transform:\\n',POP_da.rio.transform(),'\\n')\n# print(\"The spatial extent is:\\n\", POP_da.rio.bounds(),'\\n')\n# print(\"The nodatavalue of data is:\\n\", POP_da.rio.nodata,'\\n')\n# print(\"The spatial resolution of data is:\\n\", POP_da.rio.resolution(),'\\n')\n\n# print(BTU_da.data.min(), BTU_da.data.max())\n# print(POP_da.data.min(), POP_da.data.max().round(0))\n# POP_da.data","visibility":"show","key":"WMPFyx33hK"},{"type":"output","id":"RCtaAcIOdqUddafBUFBmR","data":[],"visibility":"show","key":"d88akD35XJ"}],"visibility":"show","key":"lmvRO0TZNf"},{"type":"block","kind":"notebook-code","data":{"papermill":{"duration":0.056326,"end_time":"2023-03-22T12:55:59.302356","exception":false,"start_time":"2023-03-22T12:55:59.246030","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"","visibility":"show","key":"nKJD5bgzjH"},{"type":"output","id":"pH4dP2bfYo-_OkMNwJ47T","data":[],"visibility":"show","key":"ZE9AKX5wyf"}],"visibility":"show","key":"fo6Mcz1V7k"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.066947,"end_time":"2023-03-22T12:55:59.421115","exception":false,"start_time":"2023-03-22T12:55:59.354168","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","children":[],"key":"RLYia9EUuQ"},{"type":"text","value":"L1: Urban Centre (HDC) and Urban Cluster (MDC)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CQp2xp9rIM"},{"type":"strong","children":[],"key":"TXhJhDnt3M"}],"identifier":"l1-urban-centre-hdc-and-urban-cluster-mdc","label":"L1: Urban Centre (HDC) and Urban Cluster (MDC)","html_id":"l1-urban-centre-hdc-and-urban-cluster-mdc","implicit":true,"key":"GjDVL5e7zR"}],"visibility":"show","key":"Zo4mxQQj82"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.0568,"end_time":"2023-03-22T12:55:59.545815","exception":false,"start_time":"2023-03-22T12:55:59.489015","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"step1: built-up and population data - binary masks  by model definition","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"maAgREjPvU"}],"identifier":"step1-built-up-and-population-data-binary-masks-by-model-definition","label":"step1: built-up and population data - binary masks  by model definition","html_id":"step1-built-up-and-population-data-binary-masks-by-model-definition","implicit":true,"key":"L04fADHSRV"}],"visibility":"show","key":"CA31zWCmyM"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:59.676805Z","iopub.status.busy":"2023-03-22T12:55:59.674956Z","iopub.status.idle":"2023-03-22T12:55:59.753734Z","shell.execute_reply":"2023-03-22T12:55:59.750478Z"},"papermill":{"duration":0.1492,"end_time":"2023-03-22T12:55:59.757559","exception":false,"start_time":"2023-03-22T12:55:59.608359","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# HDC\n# built-up area\nHDC_BTU_mask = 1 * np.ones_like(BTU_da) * (BTU_da \u003e HDC_Bdens).astype(np.int8)  # HDC_Bdens (share of built-up area/km2: 0.5 =\u003e 500000 m2/km2)\n# population\nHDC_POP_mask = 1 * np.ones_like(POP_da) * (POP_da \u003e HDC_Pdens).astype(np.int8) # HDC_Pdens \u003e=1500 inh/km2\nHDC_UC01_mask = HDC_BTU_mask + HDC_POP_mask\n\n# MDC\nMDC_POP_mask = 1 * np.ones_like(POP_da) * (POP_da \u003e MDC_Pdens).astype(np.int8) # MDC_Pdens \u003e=300  inh/km2","visibility":"show","key":"xR7HvS2CZ5"},{"type":"output","id":"wSK9iH3Q3lwp9W2xMwnZs","data":[],"visibility":"show","key":"G8fmNl8WOj"}],"visibility":"show","key":"NxeRGro4Tt"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:55:59.864977Z","iopub.status.busy":"2023-03-22T12:55:59.862881Z","iopub.status.idle":"2023-03-22T12:55:59.885016Z","shell.execute_reply":"2023-03-22T12:55:59.882581Z"},"papermill":{"duration":0.081899,"end_time":"2023-03-22T12:55:59.888438","exception":false,"start_time":"2023-03-22T12:55:59.806539","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# BINARY MASK:\nHDC_UC01_mask = 1 * np.ones_like(HDC_UC01_mask) * (HDC_UC01_mask\u003e 0).astype(np.int8)\nMDC_UC01_mask = MDC_POP_mask","visibility":"show","key":"YqVGosNapW"},{"type":"output","id":"IaSdw9P9MUlnL50-0fVux","data":[],"visibility":"show","key":"hjZPt5FVGP"}],"visibility":"show","key":"C3QxVgAmLr"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.046709,"end_time":"2023-03-22T12:55:59.987477","exception":false,"start_time":"2023-03-22T12:55:59.940768","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"step2: cluster connectivity","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Erou5dtgov"}],"identifier":"step2-cluster-connectivity","label":"step2: cluster connectivity","html_id":"step2-cluster-connectivity","implicit":true,"key":"DiameNTn9y"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"link","url":"https://scikit-image.org/docs/dev/api/skimage.measure.html#skimage.measure.label","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"https://​scikit​-image​.org​/docs​/dev​/api​/skimage​.measure​.html​#skimage​.measure​.label","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"pdmEkIwlau"}],"urlSource":"https://scikit-image.org/docs/dev/api/skimage.measure.html#skimage.measure.label","key":"xDC29gO60t"}],"key":"AS09i406lO"}],"visibility":"show","key":"HnxiLBcNVN"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:56:00.103360Z","iopub.status.busy":"2023-03-22T12:56:00.102344Z","iopub.status.idle":"2023-03-22T12:56:00.148141Z","shell.execute_reply":"2023-03-22T12:56:00.144082Z"},"papermill":{"duration":0.110379,"end_time":"2023-03-22T12:56:00.154346","exception":false,"start_time":"2023-03-22T12:56:00.043967","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# 4/8-connectivity regions:\n# HDC_Tcon=1 for 4-connectivity clusters\n# MDC_Tcon=2 for 8-connectivity clusters\n\nHDC_UC02_4conn = measure.label(HDC_UC01_mask, background=0, return_num=False, connectivity=HDC_Tcon)\n# print('HDC number of regions:', HDC_UC02_4conn.max())\n\nMDC_UC02_8conn = measure.label(MDC_UC01_mask, background=0, return_num=False, connectivity=MDC_Tcon)\n# print('MDC number of regions:', MDC_UC02_8conn.max())","visibility":"show","key":"ZdQt31krQU"},{"type":"output","id":"iU9l-JN4q6xam3jSW8YEt","data":[],"visibility":"show","key":"VwPpc4jRSD"}],"visibility":"show","key":"XnYUntfeTA"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.052199,"end_time":"2023-03-22T12:56:00.262171","exception":false,"start_time":"2023-03-22T12:56:00.209972","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"step3: total population in cluster","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kbu33SyvXJ"}],"identifier":"step3-total-population-in-cluster","label":"step3: total population in cluster","html_id":"step3-total-population-in-cluster","implicit":true,"key":"vFMpj3iZ8Z"}],"visibility":"show","key":"KjOST9flxe"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:56:00.374512Z","iopub.status.busy":"2023-03-22T12:56:00.373339Z","iopub.status.idle":"2023-03-22T12:56:17.796901Z","shell.execute_reply":"2023-03-22T12:56:17.794805Z"},"papermill":{"duration":17.482045,"end_time":"2023-03-22T12:56:17.800833","exception":false,"start_time":"2023-03-22T12:56:00.318788","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"HDC_UC03=np.zeros_like(HDC_POP_mask).astype('int')\n\nPOPregionIDsum=[]\nPOPregionSUM=[]\nfor regionID in range(1, HDC_UC02_4conn.max()):\n    POPregionID=((HDC_UC02_4conn == regionID).astype('int')) * POP_da.data    \n    # threshold for population in cluster \u003e 50000\n    if POPregionID.sum() \u003e HDC_Pmin:\n        POPregionSUM.append(int(round(POPregionID.sum())))\n        POPregionIDsum.append(regionID)\n        HDC_UC03=HDC_UC03+np.where(HDC_UC02_4conn == regionID, HDC_UC02_4conn, 0)","visibility":"show","key":"jKFZSovM2I"},{"type":"output","id":"I9bBnSloxxetCB0SYFKO-","data":[],"visibility":"show","key":"axCkDBUVCT"}],"visibility":"show","key":"mdXyruFa1V"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:56:17.917230Z","iopub.status.busy":"2023-03-22T12:56:17.916862Z","iopub.status.idle":"2023-03-22T12:57:49.985950Z","shell.execute_reply":"2023-03-22T12:57:49.981851Z"},"papermill":{"duration":92.139676,"end_time":"2023-03-22T12:57:49.995230","exception":false,"start_time":"2023-03-22T12:56:17.855554","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"MDC_UC03=np.zeros_like(MDC_POP_mask).astype('int')\n\nPOPregionIDsum=[]\nPOPregionSUM=[]\nfor regionID in range(1, MDC_UC02_8conn.max()):\n    POPregionID=((MDC_UC02_8conn == regionID).astype('int')) * POP_da.data    \n    # threshold for population in cluster \u003e 5000\n    if POPregionID.sum() \u003e MDC_Pmin:\n        POPregionSUM.append(int(round(POPregionID.sum())))\n        POPregionIDsum.append(regionID)\n        MDC_UC03=MDC_UC03+np.where(MDC_UC02_8conn == regionID, MDC_UC02_8conn, 0)","visibility":"show","key":"MmSt1ypLuD"},{"type":"output","id":"4xJjuRpeSeyvnJAAkJPPD","data":[],"visibility":"show","key":"wkgf0xVfz3"}],"visibility":"show","key":"K3m4Ce9bPd"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.043796,"end_time":"2023-03-22T12:57:50.096123","exception":false,"start_time":"2023-03-22T12:57:50.052327","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"L1: Urban Center (HDC)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fSXzmhW2w9"}],"identifier":"l1-urban-center-hdc","label":"L1: Urban Center (HDC)","html_id":"l1-urban-center-hdc","implicit":true,"key":"HlYDV69QpN"}],"visibility":"show","key":"mF0yUQEjmZ"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.059405,"end_time":"2023-03-22T12:57:50.203708","exception":false,"start_time":"2023-03-22T12:57:50.144303","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"step4: Urban Centre (HDC) - gaps filling \u003c 15km2","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xtzBDYPU4W"}],"identifier":"step4-urban-centre-hdc-gaps-filling-15km2","label":"step4: Urban Centre (HDC) - gaps filling \u003c 15km2","html_id":"step4-urban-centre-hdc-gaps-filling-15km2","implicit":true,"key":"SY63rAFrPC"}],"visibility":"show","key":"LuXRQU26ys"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.052089,"end_time":"2023-03-22T12:57:50.311378","exception":false,"start_time":"2023-03-22T12:57:50.259289","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"inverse raster / gaps","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"MKNn32e33x"}],"key":"YMyBCz3TRF"}],"visibility":"show","key":"YH4qCTo1yG"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:57:50.417483Z","iopub.status.busy":"2023-03-22T12:57:50.417011Z","iopub.status.idle":"2023-03-22T12:57:50.476675Z","shell.execute_reply":"2023-03-22T12:57:50.475064Z"},"papermill":{"duration":0.113971,"end_time":"2023-03-22T12:57:50.480086","exception":false,"start_time":"2023-03-22T12:57:50.366115","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"HDC_UC03_BIN=np.where(HDC_UC03 \u003e 0, 1, 0)\nHDC_UC03_INV=np.where(HDC_UC03_BIN == 1, 0, 1)\n\nHDC_UC03_INV = measure.label(HDC_UC03_INV, background=0, connectivity=2) # 8-connectivity\n# number of holes\n# HDC_UC03_INV.max()","visibility":"show","key":"PLd7ArdCqV"},{"type":"output","id":"vab8R3CX0ZhLDYmXaL88K","data":[],"visibility":"show","key":"Tfn76z9AOi"}],"visibility":"show","key":"u90YHPtRqU"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.047952,"end_time":"2023-03-22T12:57:50.582861","exception":false,"start_time":"2023-03-22T12:57:50.534909","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"gaps filling","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wY56nB794K"}],"key":"gm4Ai00PZH"}],"visibility":"show","key":"WB4vkXbZHr"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:57:50.679730Z","iopub.status.busy":"2023-03-22T12:57:50.679216Z","iopub.status.idle":"2023-03-22T12:57:50.999769Z","shell.execute_reply":"2023-03-22T12:57:50.997968Z"},"papermill":{"duration":0.369219,"end_time":"2023-03-22T12:57:51.005475","exception":false,"start_time":"2023-03-22T12:57:50.636256","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"unique, counts = np.unique(HDC_UC03_INV, return_counts=True,)\ngaps=list(zip(unique, counts)) \n#print(gaps)\n\nfor gap in gaps:\n    if gap[1] \u003c HDC_GAPfill:\n        gapID=(HDC_UC03_INV == gap[0]).astype(int)        \n        HDC_UC03_BIN=HDC_UC03_BIN+gapID","visibility":"show","key":"ymEzlrl9Wk"},{"type":"output","id":"eSG_8hkDgwtvg5DPfms7E","data":[],"visibility":"show","key":"ES9qjWhvxk"}],"visibility":"show","key":"JOl8GCO4FD"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.041855,"end_time":"2023-03-22T12:57:51.110031","exception":false,"start_time":"2023-03-22T12:57:51.068176","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"regions where POP \u003e 50000 with filled gaps \u003c 15km2","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nnQskN9OTc"}],"key":"AVNNSjlmiv"}],"visibility":"show","key":"RT5SEL3iXJ"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:57:51.197238Z","iopub.status.busy":"2023-03-22T12:57:51.194797Z","iopub.status.idle":"2023-03-22T12:57:51.238462Z","shell.execute_reply":"2023-03-22T12:57:51.236943Z"},"papermill":{"duration":0.089754,"end_time":"2023-03-22T12:57:51.242025","exception":false,"start_time":"2023-03-22T12:57:51.152271","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"HDC_UC03_4conn = measure.label(HDC_UC03_BIN, background=0, connectivity=HDC_Tcon)  # connectivity=HDC_Tcon\nprint(HDC_UC03_4conn.min(),HDC_UC03_4conn.max())","visibility":"show","key":"QgdeYwudzF"},{"type":"output","id":"lFEkNvhxTpZw6KuWwZxjl","data":[{"name":"stdout","output_type":"stream","text":"0 123\n"}],"visibility":"show","key":"mOooo9StB4"}],"visibility":"show","key":"k5JvO4quU9"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:57:51.349327Z","iopub.status.busy":"2023-03-22T12:57:51.348437Z","iopub.status.idle":"2023-03-22T12:57:51.362090Z","shell.execute_reply":"2023-03-22T12:57:51.360465Z"},"papermill":{"duration":0.065228,"end_time":"2023-03-22T12:57:51.367464","exception":false,"start_time":"2023-03-22T12:57:51.302236","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# binary raster\nHDC_UC04_BIN=np.where(HDC_UC03_4conn \u003e= 1, 1, 0)\nprint(HDC_UC04_BIN.sum())","visibility":"show","key":"Pk0b5zakQB"},{"type":"output","id":"A6Jc587OB5EpGsQtnWG0M","data":[{"name":"stdout","output_type":"stream","text":"8165\n"}],"visibility":"show","key":"ScomIeY1gB"}],"visibility":"show","key":"BWPnH9KhJp"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.056221,"end_time":"2023-03-22T12:57:51.509510","exception":false,"start_time":"2023-03-22T12:57:51.453289","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"step5: Urban Centre (HDC) - morphology","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pZn7j80Fxe"}],"identifier":"step5-urban-centre-hdc-morphology","label":"step5: Urban Centre (HDC) - morphology","html_id":"step5-urban-centre-hdc-morphology","implicit":true,"key":"cuvwaGGxSD"}],"visibility":"show","key":"xxttUAr1Xj"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.039691,"end_time":"2023-03-22T12:57:51.592399","exception":false,"start_time":"2023-03-22T12:57:51.552708","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"closing, erosion, dilatation","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"kf0IuaKmzm"}],"key":"U96MXnvWS8"}],"visibility":"show","key":"SEvKPHwU56"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:57:51.678442Z","iopub.status.busy":"2023-03-22T12:57:51.678056Z","iopub.status.idle":"2023-03-22T12:57:58.515830Z","shell.execute_reply":"2023-03-22T12:57:58.514409Z"},"papermill":{"duration":6.884347,"end_time":"2023-03-22T12:57:58.518868","exception":false,"start_time":"2023-03-22T12:57:51.634521","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"HDC_UC04=np.zeros_like(HDC_UC03_BIN).astype('int')\n# regiony sa vyhodnocuju sekvencne v cykle:\nPOPregionIDsum=[]\nPOPregionSUM=[]\nfor regionID in range(1, HDC_UC03_4conn.max()):\n    # mask 0-1 for region, # POP in region\n    POPregionID=((HDC_UC03_4conn == regionID).astype('int'))  \n    #print(POPregionID.min(), POPregionID.max(), POPregionID.sum())\n    POPregionID = morphology.binary_closing(POPregionID, square(3))\n    POPregionID= morphology.binary_dilation(POPregionID)\n    POPregionID= morphology.binary_erosion(POPregionID)\n    #POPregionID = skimage.morphology.binary_closing(POPregionID, square(3))\n    HDC_UC04=HDC_UC04+POPregionID\n    #print(HDC_UC05.sum())","visibility":"show","key":"W9X32I56ch"},{"type":"output","id":"lgDtvZwUQqzlkp4H1-M2L","data":[],"visibility":"show","key":"NdEkkajHfC"}],"visibility":"show","key":"EEbzhvB5Jf"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:57:58.613099Z","iopub.status.busy":"2023-03-22T12:57:58.611254Z","iopub.status.idle":"2023-03-22T12:57:58.690835Z","shell.execute_reply":"2023-03-22T12:57:58.685306Z"},"papermill":{"duration":0.131383,"end_time":"2023-03-22T12:57:58.697241","exception":false,"start_time":"2023-03-22T12:57:58.565858","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# gaps filling after morphology:\nHDC_UC04_INV=np.where(HDC_UC04 == 1, 0, 1)\nHDC_UC04_INV = measure.label(HDC_UC04_INV, background=0, connectivity=2)\n# number of holes\nHDC_UC04_INV.max()","visibility":"show","key":"HwNyUHXIem"},{"type":"output","id":"jKm3itQLNm8p2n3W8797R","data":[{"output_type":"execute_result","execution_count":34,"metadata":{},"data":{"text/plain":{"content":"2","content_type":"text/plain"}}}],"visibility":"show","key":"PQor9gb6Yr"}],"visibility":"show","key":"zezVpVGnYL"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:57:58.804038Z","iopub.status.busy":"2023-03-22T12:57:58.803542Z","iopub.status.idle":"2023-03-22T12:57:58.841124Z","shell.execute_reply":"2023-03-22T12:57:58.839003Z"},"papermill":{"duration":0.085959,"end_time":"2023-03-22T12:57:58.845764","exception":false,"start_time":"2023-03-22T12:57:58.759805","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"unique1, counts1 = np.unique(HDC_UC04_INV, return_counts=True,)\ngaps1 = [x for x in zip(unique1, counts1) if x[1] \u003c HDC_GAPfill]\n#print(gaps1)\n\nfor gap1 in gaps1:\n    gapID1=(HDC_UC04_INV == gap1[0]).astype(int)\n    HDC_UC04=HDC_UC04+gapID1","visibility":"show","key":"k9HCnQsx18"},{"type":"output","id":"gBU170YUHgnsbsR0sQCad","data":[],"visibility":"show","key":"VHUQdqww7q"}],"visibility":"show","key":"b534BIjQfR"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:57:58.936709Z","iopub.status.busy":"2023-03-22T12:57:58.936186Z","iopub.status.idle":"2023-03-22T12:57:58.978346Z","shell.execute_reply":"2023-03-22T12:57:58.976875Z"},"papermill":{"duration":0.092934,"end_time":"2023-03-22T12:57:58.981725","exception":false,"start_time":"2023-03-22T12:57:58.888791","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"HDC_UC04_4conn = measure.label(HDC_UC04, background=0, connectivity=HDC_Tcon)\nHDC_UC04_4conn.max()","visibility":"show","key":"Ky0xJqqfvH"},{"type":"output","id":"yYZnSaKMMbivY9yl17lXE","data":[{"output_type":"execute_result","execution_count":36,"metadata":{},"data":{"text/plain":{"content":"121","content_type":"text/plain"}}}],"visibility":"show","key":"OTyscTP6Z0"}],"visibility":"show","key":"IoHBOuswqG"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:57:59.070744Z","iopub.status.busy":"2023-03-22T12:57:59.069725Z","iopub.status.idle":"2023-03-22T12:57:59.096204Z","shell.execute_reply":"2023-03-22T12:57:59.094620Z"},"papermill":{"duration":0.075397,"end_time":"2023-03-22T12:57:59.099823","exception":false,"start_time":"2023-03-22T12:57:59.024426","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# binary raster\nHDC_UC04_4conn_BIN=np.where(HDC_UC04_4conn \u003e= 1, 1, 0)\nHDC_UC04_4conn_BIN.sum()","visibility":"show","key":"Ayf1I419rc"},{"type":"output","id":"46WPrMlp5I-c4dBJZ_HEC","data":[{"output_type":"execute_result","execution_count":37,"metadata":{},"data":{"text/plain":{"content":"9193","content_type":"text/plain"}}}],"visibility":"show","key":"U2j6bCgjPF"}],"visibility":"show","key":"hvO3dXDcD5"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.049032,"end_time":"2023-03-22T12:57:59.217311","exception":false,"start_time":"2023-03-22T12:57:59.168279","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"L1: Urban Cluster (MDC)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"j5CVpuRZOr"}],"identifier":"l1-urban-cluster-mdc","label":"L1: Urban Cluster (MDC)","html_id":"l1-urban-cluster-mdc","implicit":true,"key":"ydupl4IXPB"}],"visibility":"show","key":"ZNoo4qK3Pf"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:57:59.322660Z","iopub.status.busy":"2023-03-22T12:57:59.321686Z","iopub.status.idle":"2023-03-22T12:57:59.352843Z","shell.execute_reply":"2023-03-22T12:57:59.341968Z"},"papermill":{"duration":0.094435,"end_time":"2023-03-22T12:57:59.358682","exception":false,"start_time":"2023-03-22T12:57:59.264247","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# binary\nMDC_UC03=np.where(MDC_UC03 \u003e 0, 1, 0)\n# \nMDC_UC04=MDC_UC03-HDC_UC04\nMDC_UC04=np.where(MDC_UC04 == 1, 1, 0)","visibility":"show","key":"MmuYsbETQB"},{"type":"output","id":"cv4NuYXFvzMx_ZjDOrdy0","data":[],"visibility":"show","key":"X0zUxnn0jT"}],"visibility":"show","key":"mr85tktOZx"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:57:59.462375Z","iopub.status.busy":"2023-03-22T12:57:59.456904Z","iopub.status.idle":"2023-03-22T12:57:59.501477Z","shell.execute_reply":"2023-03-22T12:57:59.494120Z"},"papermill":{"duration":0.101743,"end_time":"2023-03-22T12:57:59.507094","exception":false,"start_time":"2023-03-22T12:57:59.405351","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"MDC_UC04_8conn = measure.label(MDC_UC04, background=0, connectivity=MDC_Tcon)\nprint(MDC_UC04_8conn.min(),MDC_UC04_8conn.max())","visibility":"show","key":"uETCPVKKHJ"},{"type":"output","id":"0aw0QvDQfmrADdkvTsecL","data":[{"name":"stdout","output_type":"stream","text":"0 1909\n"}],"visibility":"show","key":"aLlYlustq7"}],"visibility":"show","key":"Nz0vErmbrO"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.049026,"end_time":"2023-03-22T12:57:59.614453","exception":false,"start_time":"2023-03-22T12:57:59.565427","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"break","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"j7XDTBKmWf"},{"type":"text","value":"HDC and MDC to vector","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"fIs6AxLHJo"}],"key":"uaCAQljVcX"}],"visibility":"show","key":"BAxToHw6na"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.062194,"end_time":"2023-03-22T12:57:59.725903","exception":false,"start_time":"2023-03-22T12:57:59.663709","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"HDC:  numpy.ndarray to DataArray","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lSIaGAartv"}],"key":"WJWvILJ6Fd"}],"visibility":"show","key":"FTJhjiZYqX"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:57:59.846397Z","iopub.status.busy":"2023-03-22T12:57:59.842472Z","iopub.status.idle":"2023-03-22T12:57:59.893274Z","shell.execute_reply":"2023-03-22T12:57:59.891700Z"},"papermill":{"duration":0.128757,"end_time":"2023-03-22T12:57:59.909967","exception":false,"start_time":"2023-03-22T12:57:59.781210","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"HDC_UC05 = xr.DataArray(\n    data=HDC_UC04_4conn,\n    dims=BTU_da.dims,\n    coords=BTU_da.coords,\n    name='urban_centre',\n    )\n\nHDC_UC05=HDC_UC05.astype(np.int16)\nHDC_UC05","visibility":"show","key":"Tpgpa8hxLf"},{"type":"output","id":"ys9Qgxt0Fd9RxHqIYyCul","data":[{"output_type":"execute_result","execution_count":40,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\u003csvg style=\"position: absolute; width: 0; height: 0; overflow: hidden\"\u003e\n\u003cdefs\u003e\n\u003csymbol id=\"icon-database\" viewBox=\"0 0 32 32\"\u003e\n\u003cpath d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"\u003e\u003c/path\u003e\n\u003c/symbol\u003e\n\u003csymbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\"\u003e\n\u003cpath d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003c/symbol\u003e\n\u003c/defs\u003e\n\u003c/svg\u003e\n\u003cstyle\u003e/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=dark],\nbody[data-theme=dark],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1F1F1F;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header \u003e div,\n.xr-header \u003e ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 20px 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: none;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary \u003e span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: '►';\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: '▼';\n}\n\n.xr-section-summary-in:checked + label \u003e span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap \u003e label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: '(';\n}\n\n.xr-dim-list:after {\n  content: ')';\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: ',';\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item \u003e div,\n.xr-var-item label,\n.xr-var-item \u003e .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item \u003e .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list \u003e li:nth-child(odd) \u003e div,\n.xr-var-list \u003e li:nth-child(odd) \u003e label,\n.xr-var-list \u003e li:nth-child(odd) \u003e .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data \u003e table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\u003c/style\u003e\u003cpre class='xr-text-repr-fallback'\u003e\u0026lt;xarray.DataArray \u0026#x27;urban_centre\u0026#x27; (y: 831, x: 1266)\u0026gt;\narray([[0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       ...,\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0]], dtype=int16)\nCoordinates:\n  * x            (x) float64 7.085e+05 7.095e+05 ... 1.972e+06 1.974e+06\n  * y            (y) float64 6.386e+06 6.386e+06 ... 5.558e+06 5.556e+06\n    spatial_ref  int64 0\u003c/pre\u003e\u003cdiv class='xr-wrap' style='display:none'\u003e\u003cdiv class='xr-header'\u003e\u003cdiv class='xr-obj-type'\u003exarray.DataArray\u003c/div\u003e\u003cdiv class='xr-array-name'\u003e'urban_centre'\u003c/div\u003e\u003cul class='xr-dim-list'\u003e\u003cli\u003e\u003cspan class='xr-has-index'\u003ey\u003c/span\u003e: 831\u003c/li\u003e\u003cli\u003e\u003cspan class='xr-has-index'\u003ex\u003c/span\u003e: 1266\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cul class='xr-sections'\u003e\u003cli class='xr-section-item'\u003e\u003cdiv class='xr-array-wrap'\u003e\u003cinput id='section-309aff0f-1f6d-4572-8e2f-e731ffd55cdd' class='xr-array-in' type='checkbox' checked\u003e\u003clabel for='section-309aff0f-1f6d-4572-8e2f-e731ffd55cdd' title='Show/hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-array-preview xr-preview'\u003e\u003cspan\u003e0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 ... 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-array-data'\u003e\u003cpre\u003earray([[0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       ...,\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0]], dtype=int16)\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-c5196e48-bd50-4268-81bd-148f23275eae' class='xr-section-summary-in' type='checkbox'  checked\u003e\u003clabel for='section-c5196e48-bd50-4268-81bd-148f23275eae' class='xr-section-summary' \u003eCoordinates: \u003cspan\u003e(3)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cul class='xr-var-list'\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan class='xr-has-index'\u003ex\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e(x)\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003efloat64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e7.085e+05 7.095e+05 ... 1.974e+06\u003c/div\u003e\u003cinput id='attrs-1e27b0f3-5a3c-44d4-9e1b-70f7ebd269a7' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-1e27b0f3-5a3c-44d4-9e1b-70f7ebd269a7' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-35e3de73-d8c9-4455-84a6-6cdc20a3ac2a' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-35e3de73-d8c9-4455-84a6-6cdc20a3ac2a' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003eaxis :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eX\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003elong_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ex coordinate of projection\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003estandard_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eprojection_x_coordinate\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eunits :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003emetre\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray([ 708500.,  709500.,  710500., ..., 1971500., 1972500., 1973500.])\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan class='xr-has-index'\u003ey\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e(y)\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003efloat64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e6.386e+06 6.386e+06 ... 5.556e+06\u003c/div\u003e\u003cinput id='attrs-18581103-e4b2-4a92-815a-35c212e3c1cc' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-18581103-e4b2-4a92-815a-35c212e3c1cc' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-6919b215-c7cb-49f3-9bc6-3828850d3191' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-6919b215-c7cb-49f3-9bc6-3828850d3191' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003eaxis :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eY\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003elong_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ey coordinate of projection\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003estandard_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eprojection_y_coordinate\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eunits :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003emetre\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray([6386500., 6385500., 6384500., ..., 5558500., 5557500., 5556500.])\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan\u003espatial_ref\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e()\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003eint64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e0\u003c/div\u003e\u003cinput id='attrs-b397a33b-8904-4a80-9b6a-f4c1cf0e3dc7' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-b397a33b-8904-4a80-9b6a-f4c1cf0e3dc7' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-8cd9aa70-0377-473a-850e-41f44c24e706' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-8cd9aa70-0377-473a-850e-41f44c24e706' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003ecrs_wkt :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ePROJCS[\u0026quot;World_Mollweide\u0026quot;,GEOGCS[\u0026quot;WGS 84\u0026quot;,DATUM[\u0026quot;WGS_1984\u0026quot;,SPHEROID[\u0026quot;WGS 84\u0026quot;,6378137,298.257223563,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;7030\u0026quot;]],AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;6326\u0026quot;]],PRIMEM[\u0026quot;Greenwich\u0026quot;,0],UNIT[\u0026quot;Degree\u0026quot;,0.0174532925199433]],PROJECTION[\u0026quot;Mollweide\u0026quot;],PARAMETER[\u0026quot;central_meridian\u0026quot;,0],PARAMETER[\u0026quot;false_easting\u0026quot;,0],PARAMETER[\u0026quot;false_northing\u0026quot;,0],UNIT[\u0026quot;metre\u0026quot;,1,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;9001\u0026quot;]],AXIS[\u0026quot;Easting\u0026quot;,EAST],AXIS[\u0026quot;Northing\u0026quot;,NORTH]]\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003espatial_ref :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ePROJCS[\u0026quot;World_Mollweide\u0026quot;,GEOGCS[\u0026quot;WGS 84\u0026quot;,DATUM[\u0026quot;WGS_1984\u0026quot;,SPHEROID[\u0026quot;WGS 84\u0026quot;,6378137,298.257223563,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;7030\u0026quot;]],AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;6326\u0026quot;]],PRIMEM[\u0026quot;Greenwich\u0026quot;,0],UNIT[\u0026quot;Degree\u0026quot;,0.0174532925199433]],PROJECTION[\u0026quot;Mollweide\u0026quot;],PARAMETER[\u0026quot;central_meridian\u0026quot;,0],PARAMETER[\u0026quot;false_easting\u0026quot;,0],PARAMETER[\u0026quot;false_northing\u0026quot;,0],UNIT[\u0026quot;metre\u0026quot;,1,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;9001\u0026quot;]],AXIS[\u0026quot;Easting\u0026quot;,EAST],AXIS[\u0026quot;Northing\u0026quot;,NORTH]]\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eGeoTransform :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e708000.0 1000.0 0.0 6387000.0 0.0 -1000.0\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray(0)\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-424c44ed-4b8a-4bdc-b5da-31d98f2ab94f' class='xr-section-summary-in' type='checkbox'  \u003e\u003clabel for='section-424c44ed-4b8a-4bdc-b5da-31d98f2ab94f' class='xr-section-summary' \u003eIndexes: \u003cspan\u003e(2)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cul class='xr-var-list'\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-index-name'\u003e\u003cdiv\u003ex\u003c/div\u003e\u003c/div\u003e\u003cdiv class='xr-index-preview'\u003ePandasIndex\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cinput id='index-bfab7357-e653-4a42-b837-a3dadb2e60bb' class='xr-index-data-in' type='checkbox'/\u003e\u003clabel for='index-bfab7357-e653-4a42-b837-a3dadb2e60bb' title='Show/Hide index repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-index-data'\u003e\u003cpre\u003ePandasIndex(Float64Index([ 708500.0,  709500.0,  710500.0,  711500.0,  712500.0,  713500.0,\n               714500.0,  715500.0,  716500.0,  717500.0,\n              ...\n              1964500.0, 1965500.0, 1966500.0, 1967500.0, 1968500.0, 1969500.0,\n              1970500.0, 1971500.0, 1972500.0, 1973500.0],\n             dtype=\u0026#x27;float64\u0026#x27;, name=\u0026#x27;x\u0026#x27;, length=1266))\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-index-name'\u003e\u003cdiv\u003ey\u003c/div\u003e\u003c/div\u003e\u003cdiv class='xr-index-preview'\u003ePandasIndex\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cinput id='index-96e3a5da-cd43-4a3d-a07c-79235cb12a10' class='xr-index-data-in' type='checkbox'/\u003e\u003clabel for='index-96e3a5da-cd43-4a3d-a07c-79235cb12a10' title='Show/Hide index repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-index-data'\u003e\u003cpre\u003ePandasIndex(Float64Index([6386500.0, 6385500.0, 6384500.0, 6383500.0, 6382500.0, 6381500.0,\n              6380500.0, 6379500.0, 6378500.0, 6377500.0,\n              ...\n              5565500.0, 5564500.0, 5563500.0, 5562500.0, 5561500.0, 5560500.0,\n              5559500.0, 5558500.0, 5557500.0, 5556500.0],\n             dtype=\u0026#x27;float64\u0026#x27;, name=\u0026#x27;y\u0026#x27;, length=831))\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-be643c2c-9248-4059-87ee-abe53adda95b' class='xr-section-summary-in' type='checkbox' disabled \u003e\u003clabel for='section-be643c2c-9248-4059-87ee-abe53adda95b' class='xr-section-summary'  title='Expand/collapse section'\u003eAttributes: \u003cspan\u003e(0)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cdl class='xr-attrs'\u003e\u003c/dl\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"\u003cxarray.DataArray 'urban_centre' (y: 831, x: 1266)\u003e\narray([[0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       ...,\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0]], dtype=int16)\nCoordinates:\n  * x            (x) float64 7.085e+05 7.095e+05 ... 1.972e+06 1.974e+06\n  * y            (y) float64 6.386e+06 6.386e+06 ... 5.558e+06 5.556e+06\n    spatial_ref  int64 0","content_type":"text/plain"}}}],"visibility":"show","key":"jFoqiMW4XZ"}],"visibility":"show","key":"gE3815LaLf"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:00.017051Z","iopub.status.busy":"2023-03-22T12:58:00.016018Z","iopub.status.idle":"2023-03-22T12:58:00.032917Z","shell.execute_reply":"2023-03-22T12:58:00.029571Z"},"papermill":{"duration":0.09231,"end_time":"2023-03-22T12:58:00.052773","exception":false,"start_time":"2023-03-22T12:57:59.960463","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# # Info about HDC DataArray\n# print('type:',type(HDC_UC05))\n# print('name:',HDC_UC05.name)\n# print('shape:',HDC_UC05.shape)\n# #print(HDC_UC05.coords)\n# print('dim:',HDC_UC05.dims,'\\n')\n# # World Mollweide  ESRI:54009\n# print(\"The crs is: \", HDC_UC05.rio.crs)\n# print('transform: ',HDC_UC05.rio.transform())\n# print(\"The spatial extent is: \", HDC_UC05.rio.bounds())\n# print(\"The nodatavalue of data is: \", HDC_UC05.rio.nodata)\n# print(\"The shape of data is: \", HDC_UC05.shape)\n# print(\"The spatial resolution of data is: \", HDC_UC05.rio.resolution())\n# print(\"the minimum raster value is: \", np.nanmin(HDC_UC05.values))\n# print(\"the maximum raster value is: \", np.nanmax(HDC_UC05.values))\n# print(\"The metadata of data is: \", HDC_UC05.attrs)","visibility":"show","key":"Dd7jhebM4O"},{"type":"output","id":"4LAKVrfCyeMvLB5ibnFVz","data":[],"visibility":"show","key":"bpTlLf6U7B"}],"visibility":"show","key":"WoR29lxILU"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.044271,"end_time":"2023-03-22T12:58:00.145132","exception":false,"start_time":"2023-03-22T12:58:00.100861","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"HDC: export to vector","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hHA8CiH412"}],"key":"q9B76SHg16"}],"visibility":"show","key":"Y3f4rPOf5J"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:00.244380Z","iopub.status.busy":"2023-03-22T12:58:00.243900Z","iopub.status.idle":"2023-03-22T12:58:00.305354Z","shell.execute_reply":"2023-03-22T12:58:00.303925Z"},"papermill":{"duration":0.116057,"end_time":"2023-03-22T12:58:00.310565","exception":false,"start_time":"2023-03-22T12:58:00.194508","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# mask=None\nmask=HDC_UC05.data != 0\nwith HDC_UC05 as src:\n    image = src.data # first band\n    results = (\n    {'properties': {'raster_val': v}, 'geometry': s}\n    for i, (s, v) \n    in enumerate(\n        shapes(image, mask=mask, connectivity=4, transform=HDC_UC05.rio.transform())))\n\ngeoms = list(results)\n# first feature\n# print(geoms[0])","visibility":"show","key":"BJrKVdVuW8"},{"type":"output","id":"bjHsFwXybKuxxuuWxW8CP","data":[],"visibility":"show","key":"T1sd9oy62U"}],"visibility":"show","key":"mw42I7FtYY"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:00.433690Z","iopub.status.busy":"2023-03-22T12:58:00.424834Z","iopub.status.idle":"2023-03-22T12:58:00.491630Z","shell.execute_reply":"2023-03-22T12:58:00.489308Z"},"papermill":{"duration":0.119707,"end_time":"2023-03-22T12:58:00.495327","exception":false,"start_time":"2023-03-22T12:58:00.375620","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"HDC_UrbanCentre  = gpd.GeoDataFrame.from_features(geoms)\nHDC_UrbanCentre.crs=HDC_UC05.rio.crs\nHDC_UrbanCentre.raster_val=HDC_UrbanCentre.raster_val.astype('int')\nHDC_UrbanCentre.rename(columns={'raster_val':'hdcid'}, inplace=True)\nHDC_UrbanCentre['area_km2'] = HDC_UrbanCentre['geometry'].area/ 10**6\nHDC_UrbanCentre['code']=3\nHDC_UrbanCentre.sort_values(['area_km2'],ascending=False).head(3)","visibility":"show","key":"eIXv4KZugN"},{"type":"output","id":"TZaJiq9yBJgWxj2w8YLuX","data":[{"output_type":"execute_result","execution_count":43,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\n\u003cstyle scoped\u003e\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n\u003c/style\u003e\n\u003ctable border=\"1\" class=\"dataframe\"\u003e\n  \u003cthead\u003e\n    \u003ctr style=\"text-align: right;\"\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003egeometry\u003c/th\u003e\n      \u003cth\u003ehdcid\u003c/th\u003e\n      \u003cth\u003earea_km2\u003c/th\u003e\n      \u003cth\u003ecode\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003cth\u003e32\u003c/th\u003e\n      \u003ctd\u003ePOLYGON ((991000.000 6151000.000, 994000.000 6...\u003c/td\u003e\n      \u003ctd\u003e29\u003c/td\u003e\n      \u003ctd\u003e729.0\u003c/td\u003e\n      \u003ctd\u003e3\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e70\u003c/th\u003e\n      \u003ctd\u003ePOLYGON ((1423000.000 5916000.000, 1424000.000...\u003c/td\u003e\n      \u003ctd\u003e69\u003c/td\u003e\n      \u003ctd\u003e478.0\u003c/td\u003e\n      \u003ctd\u003e3\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e39\u003c/th\u003e\n      \u003ctd\u003ePOLYGON ((1542000.000 6118000.000, 1551000.000...\u003c/td\u003e\n      \u003ctd\u003e36\u003c/td\u003e\n      \u003ctd\u003e457.0\u003c/td\u003e\n      \u003ctd\u003e3\u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"                                             geometry  hdcid  area_km2  code\n32  POLYGON ((991000.000 6151000.000, 994000.000 6...     29     729.0     3\n70  POLYGON ((1423000.000 5916000.000, 1424000.000...     69     478.0     3\n39  POLYGON ((1542000.000 6118000.000, 1551000.000...     36     457.0     3","content_type":"text/plain"}}}],"visibility":"show","key":"SwuHS7dYaS"}],"visibility":"show","key":"tTznJaLQ46"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.057521,"end_time":"2023-03-22T12:58:00.618742","exception":false,"start_time":"2023-03-22T12:58:00.561221","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"MDC:  numpy.ndarray to DataArray","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"f8lKzuARuB"}],"key":"SBagUmo1Ka"}],"visibility":"show","key":"AYMOUD2bbF"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:00.738438Z","iopub.status.busy":"2023-03-22T12:58:00.737831Z","iopub.status.idle":"2023-03-22T12:58:00.785138Z","shell.execute_reply":"2023-03-22T12:58:00.783565Z"},"papermill":{"duration":0.109648,"end_time":"2023-03-22T12:58:00.789003","exception":false,"start_time":"2023-03-22T12:58:00.679355","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"MDC_UC05 = xr.DataArray(\n    data=MDC_UC04_8conn,\n    dims=BTU_da.dims,\n    coords=BTU_da.coords,\n    name='urban_cluster',\n    )\n\nMDC_UC05=MDC_UC05.astype(np.int16)\nMDC_UC05","visibility":"show","key":"JdOc5cfobD"},{"type":"output","id":"zAF9huQ2Wg_SlScUeEsOb","data":[{"output_type":"execute_result","execution_count":44,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\u003csvg style=\"position: absolute; width: 0; height: 0; overflow: hidden\"\u003e\n\u003cdefs\u003e\n\u003csymbol id=\"icon-database\" viewBox=\"0 0 32 32\"\u003e\n\u003cpath d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"\u003e\u003c/path\u003e\n\u003c/symbol\u003e\n\u003csymbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\"\u003e\n\u003cpath d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003c/symbol\u003e\n\u003c/defs\u003e\n\u003c/svg\u003e\n\u003cstyle\u003e/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=dark],\nbody[data-theme=dark],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1F1F1F;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header \u003e div,\n.xr-header \u003e ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 20px 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: none;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary \u003e span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: '►';\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: '▼';\n}\n\n.xr-section-summary-in:checked + label \u003e span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap \u003e label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: '(';\n}\n\n.xr-dim-list:after {\n  content: ')';\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: ',';\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item \u003e div,\n.xr-var-item label,\n.xr-var-item \u003e .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item \u003e .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list \u003e li:nth-child(odd) \u003e div,\n.xr-var-list \u003e li:nth-child(odd) \u003e label,\n.xr-var-list \u003e li:nth-child(odd) \u003e .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data \u003e table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\u003c/style\u003e\u003cpre class='xr-text-repr-fallback'\u003e\u0026lt;xarray.DataArray \u0026#x27;urban_cluster\u0026#x27; (y: 831, x: 1266)\u0026gt;\narray([[0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       ...,\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0]], dtype=int16)\nCoordinates:\n  * x            (x) float64 7.085e+05 7.095e+05 ... 1.972e+06 1.974e+06\n  * y            (y) float64 6.386e+06 6.386e+06 ... 5.558e+06 5.556e+06\n    spatial_ref  int64 0\u003c/pre\u003e\u003cdiv class='xr-wrap' style='display:none'\u003e\u003cdiv class='xr-header'\u003e\u003cdiv class='xr-obj-type'\u003exarray.DataArray\u003c/div\u003e\u003cdiv class='xr-array-name'\u003e'urban_cluster'\u003c/div\u003e\u003cul class='xr-dim-list'\u003e\u003cli\u003e\u003cspan class='xr-has-index'\u003ey\u003c/span\u003e: 831\u003c/li\u003e\u003cli\u003e\u003cspan class='xr-has-index'\u003ex\u003c/span\u003e: 1266\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cul class='xr-sections'\u003e\u003cli class='xr-section-item'\u003e\u003cdiv class='xr-array-wrap'\u003e\u003cinput id='section-e03bfd71-737d-4452-be57-c581f69af378' class='xr-array-in' type='checkbox' checked\u003e\u003clabel for='section-e03bfd71-737d-4452-be57-c581f69af378' title='Show/hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-array-preview xr-preview'\u003e\u003cspan\u003e0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 ... 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-array-data'\u003e\u003cpre\u003earray([[0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       ...,\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0]], dtype=int16)\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-a31104da-f3fb-4557-82f2-c8c17cf980dc' class='xr-section-summary-in' type='checkbox'  checked\u003e\u003clabel for='section-a31104da-f3fb-4557-82f2-c8c17cf980dc' class='xr-section-summary' \u003eCoordinates: \u003cspan\u003e(3)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cul class='xr-var-list'\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan class='xr-has-index'\u003ex\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e(x)\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003efloat64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e7.085e+05 7.095e+05 ... 1.974e+06\u003c/div\u003e\u003cinput id='attrs-443004b6-2d7f-4412-93c5-da640a4d0a42' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-443004b6-2d7f-4412-93c5-da640a4d0a42' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-2f8d8492-971f-4d21-88ac-27c950ef55ea' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-2f8d8492-971f-4d21-88ac-27c950ef55ea' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003eaxis :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eX\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003elong_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ex coordinate of projection\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003estandard_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eprojection_x_coordinate\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eunits :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003emetre\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray([ 708500.,  709500.,  710500., ..., 1971500., 1972500., 1973500.])\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan class='xr-has-index'\u003ey\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e(y)\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003efloat64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e6.386e+06 6.386e+06 ... 5.556e+06\u003c/div\u003e\u003cinput id='attrs-4cc2c316-2000-42c2-8ed2-4757c45c367d' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-4cc2c316-2000-42c2-8ed2-4757c45c367d' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-3a1e2dbc-40b3-4c11-bd19-b341f632a9f6' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-3a1e2dbc-40b3-4c11-bd19-b341f632a9f6' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003eaxis :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eY\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003elong_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ey coordinate of projection\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003estandard_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eprojection_y_coordinate\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eunits :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003emetre\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray([6386500., 6385500., 6384500., ..., 5558500., 5557500., 5556500.])\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan\u003espatial_ref\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e()\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003eint64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e0\u003c/div\u003e\u003cinput id='attrs-4a85087e-db8b-40e9-ba91-cd7a5668f73e' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-4a85087e-db8b-40e9-ba91-cd7a5668f73e' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-9ce7ff6a-855f-4ac6-8ed0-e5e18a4fc1a4' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-9ce7ff6a-855f-4ac6-8ed0-e5e18a4fc1a4' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003ecrs_wkt :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ePROJCS[\u0026quot;World_Mollweide\u0026quot;,GEOGCS[\u0026quot;WGS 84\u0026quot;,DATUM[\u0026quot;WGS_1984\u0026quot;,SPHEROID[\u0026quot;WGS 84\u0026quot;,6378137,298.257223563,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;7030\u0026quot;]],AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;6326\u0026quot;]],PRIMEM[\u0026quot;Greenwich\u0026quot;,0],UNIT[\u0026quot;Degree\u0026quot;,0.0174532925199433]],PROJECTION[\u0026quot;Mollweide\u0026quot;],PARAMETER[\u0026quot;central_meridian\u0026quot;,0],PARAMETER[\u0026quot;false_easting\u0026quot;,0],PARAMETER[\u0026quot;false_northing\u0026quot;,0],UNIT[\u0026quot;metre\u0026quot;,1,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;9001\u0026quot;]],AXIS[\u0026quot;Easting\u0026quot;,EAST],AXIS[\u0026quot;Northing\u0026quot;,NORTH]]\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003espatial_ref :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ePROJCS[\u0026quot;World_Mollweide\u0026quot;,GEOGCS[\u0026quot;WGS 84\u0026quot;,DATUM[\u0026quot;WGS_1984\u0026quot;,SPHEROID[\u0026quot;WGS 84\u0026quot;,6378137,298.257223563,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;7030\u0026quot;]],AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;6326\u0026quot;]],PRIMEM[\u0026quot;Greenwich\u0026quot;,0],UNIT[\u0026quot;Degree\u0026quot;,0.0174532925199433]],PROJECTION[\u0026quot;Mollweide\u0026quot;],PARAMETER[\u0026quot;central_meridian\u0026quot;,0],PARAMETER[\u0026quot;false_easting\u0026quot;,0],PARAMETER[\u0026quot;false_northing\u0026quot;,0],UNIT[\u0026quot;metre\u0026quot;,1,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;9001\u0026quot;]],AXIS[\u0026quot;Easting\u0026quot;,EAST],AXIS[\u0026quot;Northing\u0026quot;,NORTH]]\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eGeoTransform :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e708000.0 1000.0 0.0 6387000.0 0.0 -1000.0\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray(0)\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-a3bd27e8-3f45-44c1-a9e2-49e83f17f5ab' class='xr-section-summary-in' type='checkbox'  \u003e\u003clabel for='section-a3bd27e8-3f45-44c1-a9e2-49e83f17f5ab' class='xr-section-summary' \u003eIndexes: \u003cspan\u003e(2)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cul class='xr-var-list'\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-index-name'\u003e\u003cdiv\u003ex\u003c/div\u003e\u003c/div\u003e\u003cdiv class='xr-index-preview'\u003ePandasIndex\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cinput id='index-5ffa30da-4d72-489e-aa5a-cf5b9694ea7b' class='xr-index-data-in' type='checkbox'/\u003e\u003clabel for='index-5ffa30da-4d72-489e-aa5a-cf5b9694ea7b' title='Show/Hide index repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-index-data'\u003e\u003cpre\u003ePandasIndex(Float64Index([ 708500.0,  709500.0,  710500.0,  711500.0,  712500.0,  713500.0,\n               714500.0,  715500.0,  716500.0,  717500.0,\n              ...\n              1964500.0, 1965500.0, 1966500.0, 1967500.0, 1968500.0, 1969500.0,\n              1970500.0, 1971500.0, 1972500.0, 1973500.0],\n             dtype=\u0026#x27;float64\u0026#x27;, name=\u0026#x27;x\u0026#x27;, length=1266))\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-index-name'\u003e\u003cdiv\u003ey\u003c/div\u003e\u003c/div\u003e\u003cdiv class='xr-index-preview'\u003ePandasIndex\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cinput id='index-a2b350e2-ceed-4f48-8786-203885cc6e13' class='xr-index-data-in' type='checkbox'/\u003e\u003clabel for='index-a2b350e2-ceed-4f48-8786-203885cc6e13' title='Show/Hide index repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-index-data'\u003e\u003cpre\u003ePandasIndex(Float64Index([6386500.0, 6385500.0, 6384500.0, 6383500.0, 6382500.0, 6381500.0,\n              6380500.0, 6379500.0, 6378500.0, 6377500.0,\n              ...\n              5565500.0, 5564500.0, 5563500.0, 5562500.0, 5561500.0, 5560500.0,\n              5559500.0, 5558500.0, 5557500.0, 5556500.0],\n             dtype=\u0026#x27;float64\u0026#x27;, name=\u0026#x27;y\u0026#x27;, length=831))\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-c33ef805-5d93-4fb4-a800-efde69398a97' class='xr-section-summary-in' type='checkbox' disabled \u003e\u003clabel for='section-c33ef805-5d93-4fb4-a800-efde69398a97' class='xr-section-summary'  title='Expand/collapse section'\u003eAttributes: \u003cspan\u003e(0)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cdl class='xr-attrs'\u003e\u003c/dl\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"\u003cxarray.DataArray 'urban_cluster' (y: 831, x: 1266)\u003e\narray([[0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       ...,\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0]], dtype=int16)\nCoordinates:\n  * x            (x) float64 7.085e+05 7.095e+05 ... 1.972e+06 1.974e+06\n  * y            (y) float64 6.386e+06 6.386e+06 ... 5.558e+06 5.556e+06\n    spatial_ref  int64 0","content_type":"text/plain"}}}],"visibility":"show","key":"pUqPjLS6rd"}],"visibility":"show","key":"y3ODlyjbk1"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:00.951940Z","iopub.status.busy":"2023-03-22T12:58:00.950886Z","iopub.status.idle":"2023-03-22T12:58:00.966381Z","shell.execute_reply":"2023-03-22T12:58:00.959356Z"},"papermill":{"duration":0.072114,"end_time":"2023-03-22T12:58:00.970073","exception":false,"start_time":"2023-03-22T12:58:00.897959","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# # BASIC INFO\n# print('type:',type(MDC_UC05))\n# print('name:',MDC_UC05.name)\n# print('shape:',MDC_UC05.shape)\n# #print(MDC_UC05.coords)\n# print('dim:',MDC_UC05.dims,'\\n')\n# # View generate metadata associated with the raster file\n# # World Mollweide  ESRI:54009\n# print(\"The crs is: \", MDC_UC05.rio.crs)\n# print('transform: ',MDC_UC05.rio.transform())\n# print(\"The spatial extent is: \", MDC_UC05.rio.bounds())\n# print(\"The nodatavalue of data is: \", MDC_UC05.rio.nodata)\n# print(\"The shape of data is: \", MDC_UC05.shape)\n# print(\"The spatial resolution of data is: \", MDC_UC05.rio.resolution())\n# print(\"the minimum raster value is: \", np.nanmin(MDC_UC05.values))\n# print(\"the maximum raster value is: \", np.nanmax(MDC_UC05.values))\n# print(\"The metadata of data is: \", MDC_UC05.attrs,'\\n')\n# print(MDC_UC05.data.max())","visibility":"show","key":"oStgPi32yj"},{"type":"output","id":"keoQL4BMnpckXVnhrwCk7","data":[],"visibility":"show","key":"c2YfnckVBT"}],"visibility":"show","key":"s3ZRxlNXBv"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.049661,"end_time":"2023-03-22T12:58:01.072474","exception":false,"start_time":"2023-03-22T12:58:01.022813","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"MDC: export to vector","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ABBg7A9cOd"}],"key":"kC9WrixcIu"}],"visibility":"show","key":"INEOb5kejV"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:01.210634Z","iopub.status.busy":"2023-03-22T12:58:01.210035Z","iopub.status.idle":"2023-03-22T12:58:01.365652Z","shell.execute_reply":"2023-03-22T12:58:01.362963Z"},"papermill":{"duration":0.240109,"end_time":"2023-03-22T12:58:01.370484","exception":false,"start_time":"2023-03-22T12:58:01.130375","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# mask=None\nmask=MDC_UC05.data != 0\nwith MDC_UC05 as src:\n    image = src.data # first band\n    results = (\n    {'properties': {'raster_val': v}, 'geometry': s}\n    for i, (s, v) \n    in enumerate(\n        shapes(image, mask=mask, connectivity=8, transform=MDC_UC05.rio.transform())))\n\ngeoms = list(results)","visibility":"show","key":"HlH1cU3LT1"},{"type":"output","id":"HyrQ1crjuABvJmm91wxzc","data":[],"visibility":"show","key":"TMZuluHD7h"}],"visibility":"show","key":"rjb6SyitJf"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:01.497759Z","iopub.status.busy":"2023-03-22T12:58:01.497347Z","iopub.status.idle":"2023-03-22T12:58:01.862232Z","shell.execute_reply":"2023-03-22T12:58:01.860878Z"},"papermill":{"duration":0.433775,"end_time":"2023-03-22T12:58:01.867000","exception":false,"start_time":"2023-03-22T12:58:01.433225","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"MDC_UrbanCluster  = gpd.GeoDataFrame.from_features(geoms)\nMDC_UrbanCluster.crs=MDC_UC05.rio.crs\nMDC_UrbanCluster.raster_val=MDC_UrbanCluster.raster_val.astype('int')\nMDC_UrbanCluster.rename(columns={'raster_val':'mdcid'}, inplace=True)\nMDC_UrbanCluster[\"area_km2\"] = MDC_UrbanCluster['geometry'].area/ 10**6\nMDC_UrbanCluster['code']=2\nMDC_UrbanCluster.sort_values(['area_km2'],ascending=False).head(3)","visibility":"show","key":"uv3Hu9oaEl"},{"type":"output","id":"K7JSa9u7wo02W4zRss8iB","data":[{"output_type":"execute_result","execution_count":47,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\n\u003cstyle scoped\u003e\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n\u003c/style\u003e\n\u003ctable border=\"1\" class=\"dataframe\"\u003e\n  \u003cthead\u003e\n    \u003ctr style=\"text-align: right;\"\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003egeometry\u003c/th\u003e\n      \u003cth\u003emdcid\u003c/th\u003e\n      \u003cth\u003earea_km2\u003c/th\u003e\n      \u003cth\u003ecode\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003cth\u003e1164\u003c/th\u003e\n      \u003ctd\u003ePOLYGON ((1407000.000 5892000.000, 1408000.000...\u003c/td\u003e\n      \u003ctd\u003e997\u003c/td\u003e\n      \u003ctd\u003e849.0\u003c/td\u003e\n      \u003ctd\u003e2\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e505\u003c/th\u003e\n      \u003ctd\u003ePOLYGON ((1568000.000 6122000.000, 1569000.000...\u003c/td\u003e\n      \u003ctd\u003e423\u003c/td\u003e\n      \u003ctd\u003e632.0\u003c/td\u003e\n      \u003ctd\u003e2\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e1141\u003c/th\u003e\n      \u003ctd\u003ePOLYGON ((1437000.000 5876000.000, 1438000.000...\u003c/td\u003e\n      \u003ctd\u003e1047\u003c/td\u003e\n      \u003ctd\u003e538.0\u003c/td\u003e\n      \u003ctd\u003e2\u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"                                               geometry  mdcid  area_km2  code\n1164  POLYGON ((1407000.000 5892000.000, 1408000.000...    997     849.0     2\n505   POLYGON ((1568000.000 6122000.000, 1569000.000...    423     632.0     2\n1141  POLYGON ((1437000.000 5876000.000, 1438000.000...   1047     538.0     2","content_type":"text/plain"}}}],"visibility":"show","key":"wpFIkBteiW"}],"visibility":"show","key":"nQo1MC9vdb"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.063993,"end_time":"2023-03-22T12:58:02.050964","exception":false,"start_time":"2023-03-22T12:58:01.986971","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"HDC and MDC export to shapefiles","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lWX5npmgDs"}],"identifier":"hdc-and-mdc-export-to-shapefiles","label":"HDC and MDC export to shapefiles","html_id":"hdc-and-mdc-export-to-shapefiles","implicit":true,"key":"ga6IrCQxsF"}],"visibility":"show","key":"USjah9pWbr"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:02.186343Z","iopub.status.busy":"2023-03-22T12:58:02.178332Z","iopub.status.idle":"2023-03-22T12:58:02.200371Z","shell.execute_reply":"2023-03-22T12:58:02.197625Z"},"papermill":{"duration":0.088531,"end_time":"2023-03-22T12:58:02.207918","exception":false,"start_time":"2023-03-22T12:58:02.119387","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Create folder for GHSL_results, if it doesn't exist:\nPath(os.path.realpath('GHSL_results')).mkdir(parents=True, exist_ok=True) ","visibility":"show","key":"UmnMho1Iqd"},{"type":"output","id":"Tvawv7HsOBWoJ_EAeSRbh","data":[],"visibility":"show","key":"IejLFdTzrR"}],"visibility":"show","key":"DdYpCddyFi"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:02.373765Z","iopub.status.busy":"2023-03-22T12:58:02.368906Z","iopub.status.idle":"2023-03-22T12:58:03.174831Z","shell.execute_reply":"2023-03-22T12:58:03.173301Z"},"papermill":{"duration":0.875083,"end_time":"2023-03-22T12:58:03.181188","exception":false,"start_time":"2023-03-22T12:58:02.306105","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# EXPORT 2 shapefile World Mollweide (ESRI:54009)\nHDC_UrbanCentre.to_file(os.path.join(os.path.realpath('GHSL_results'),'HDC_UrbanCentre_'+str(REFyear)+'.shp'))\n# Export to shapefile WGS84 (EPSG:4326 )\n# HDC_UrbanCentre.to_crs(epsg=4326).to_file(os.path.join(os.path.realpath('GHSL_results'),'HDC_UrbanCentre_4326_'+str(REFyear)+'.shp'))\n\n# EXPORT 2 shapefile World Mollweide (ESRI:54009)\nMDC_UrbanCluster.to_file(os.path.join(os.path.realpath('GHSL_results'),'MDC_UrbanCluster_'+str(REFyear)+'.shp'))\n# Export to shapefile WGS84 (EPSG:4326 )\n# MDC_UrbanCentre.to_crs(epsg=4326).to_file(os.path.join(os.path.realpath('GHSL_results'),'MDC_UrbanCluster_4326_'+str(REFyear)+'.shp'))","visibility":"show","key":"nx5U8Bsn26"},{"type":"output","id":"teIqHtF-AREoHcLOh-B-3","data":[],"visibility":"show","key":"aRFsp5mGwr"}],"visibility":"show","key":"kAVtjrv2RJ"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.049004,"end_time":"2023-03-22T12:58:03.283459","exception":false,"start_time":"2023-03-22T12:58:03.234455","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"L1: Visualization of results","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pobvryaSNO"}],"identifier":"l1-visualization-of-results","label":"L1: Visualization of results","html_id":"l1-visualization-of-results","implicit":true,"key":"FkgXPdHROX"}],"visibility":"show","key":"letUri4NEW"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:03.447453Z","iopub.status.busy":"2023-03-22T12:58:03.446800Z","iopub.status.idle":"2023-03-22T12:58:05.297755Z","shell.execute_reply":"2023-03-22T12:58:05.290401Z"},"papermill":{"duration":1.999645,"end_time":"2023-03-22T12:58:05.337523","exception":false,"start_time":"2023-03-22T12:58:03.337878","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig = Figure(width=600, height=600)\n\nm = AOI54009.explore(style_kwds={'fillColor':'None','color':'blue','weight': 1}, name='aoi')\n\n# parallels:\nfor lat in range(-90, 91, lat_interval):\n     folium.PolyLine([[lat, -180],[lat, 180]], weight=0.5).add_to(m)\n# meridianss:\nfor lon in range(-180, 181, lon_interval):\n    folium.PolyLine([[-90, lon],[90, lon]], weight=0.5).add_to(m)\n\nMDC_UrbanCluster.explore(m=m,style_kwds={'fillColor':'orange','color':'orange','weight': 1}, name='MDC_UrbanCluster')\nHDC_UrbanCentre.explore(m=m,style_kwds={'fillColor':'red','color':'red','weight': 1.5}, name='HDC_UrbanCentre')\n\nfolium.LayerControl('topright',collapsed=True).add_to(m)\nminimap = plugins.MiniMap(height=90, width=90, zoom_level_offset=-7)\nm.add_child(minimap)\n\nfig.add_child(m)\nm","visibility":"show","key":"Dn7miS7M4B"},{"type":"output","id":"uS7ED-58n2mV9iVztG8gh","data":[{"output_type":"execute_result","execution_count":50,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"259bf5400abf906a0c61f68f4831b095","path":"/notebooks_test/build/259bf5400abf906a0c61f68f4831b095.html"},"text/plain":{"content":"\u003cfolium.folium.Map at 0x7f7dfa969430\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"U3sXjIP0dN"}],"visibility":"show","key":"XqRvlGClMX"},{"type":"block","kind":"notebook-code","data":{"papermill":{"duration":0.095818,"end_time":"2023-03-22T12:58:05.541446","exception":false,"start_time":"2023-03-22T12:58:05.445628","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"","visibility":"show","key":"Al00gS6cbe"},{"type":"output","id":"KlDTgdJMhoq8Slffa6DHz","data":[],"visibility":"show","key":"FIBg6vLnKC"}],"visibility":"show","key":"dTvoS00Xe1"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.09727,"end_time":"2023-03-22T12:58:05.727510","exception":false,"start_time":"2023-03-22T12:58:05.630240","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","children":[],"key":"rt1Gy6nYYx"},{"type":"text","value":"L2: Dense Urban Cluster (DUC), Semi-Dense Urban Cluster (SDUC) and  Peri-Urban Cluster (PUC)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zOguRZioGh"},{"type":"strong","children":[],"key":"AltZYGLw93"}],"identifier":"l2-dense-urban-cluster-duc-semi-dense-urban-cluster-sduc-and-peri-urban-cluster-puc","label":"L2: Dense Urban Cluster (DUC), Semi-Dense Urban Cluster (SDUC) and  Peri-Urban Cluster (PUC)","html_id":"l2-dense-urban-cluster-duc-semi-dense-urban-cluster-sduc-and-peri-urban-cluster-puc","implicit":true,"key":"zV0ffi66pg"}],"visibility":"show","key":"gkETuhor37"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.127582,"end_time":"2023-03-22T12:58:05.987574","exception":false,"start_time":"2023-03-22T12:58:05.859992","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"step1: Dense Urban Cluster (DUC)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"unGvAgawAE"}],"identifier":"step1-dense-urban-cluster-duc","label":"step1: Dense Urban Cluster (DUC)","html_id":"step1-dense-urban-cluster-duc","implicit":true,"key":"StKfd27dxo"}],"visibility":"show","key":"U6HjSiOODs"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:06.305211Z","iopub.status.busy":"2023-03-22T12:58:06.299979Z","iopub.status.idle":"2023-03-22T12:58:06.318215Z","shell.execute_reply":"2023-03-22T12:58:06.316417Z"},"papermill":{"duration":0.169786,"end_time":"2023-03-22T12:58:06.324575","exception":false,"start_time":"2023-03-22T12:58:06.154789","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# MASK\nDUC_mask=HDC_UC01_mask  \n#print(DUC_mask.sum())","visibility":"show","key":"vYQFOFaK5Z"},{"type":"output","id":"VlCKNQVrtRFCAsReLsO7q","data":[],"visibility":"show","key":"m63wHuaf7n"}],"visibility":"show","key":"H09JTub9Hl"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:06.584345Z","iopub.status.busy":"2023-03-22T12:58:06.556962Z","iopub.status.idle":"2023-03-22T12:58:06.636205Z","shell.execute_reply":"2023-03-22T12:58:06.634460Z"},"papermill":{"duration":0.208906,"end_time":"2023-03-22T12:58:06.645590","exception":false,"start_time":"2023-03-22T12:58:06.436684","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# CONNECTIVITY\nDUC_4conn = measure.label(DUC_mask, background=0, return_num=False, connectivity=HDC_Tcon) #.squeeze()\nprint('DUC number of regions:', DUC_4conn.max())","visibility":"show","key":"yD4wJveK3z"},{"type":"output","id":"5jU74akWYsbATFmZS35BM","data":[{"name":"stdout","output_type":"stream","text":"DUC number of regions: 2437\n"}],"visibility":"show","key":"pdxhttxjav"}],"visibility":"show","key":"cMy9odeqXO"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:06.893128Z","iopub.status.busy":"2023-03-22T12:58:06.891547Z","iopub.status.idle":"2023-03-22T12:58:28.581469Z","shell.execute_reply":"2023-03-22T12:58:28.580076Z"},"papermill":{"duration":21.839323,"end_time":"2023-03-22T12:58:28.594194","exception":false,"start_time":"2023-03-22T12:58:06.754871","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# TOTAL POPULATION IN CLUSTER\nDUC_UC03=np.zeros_like(HDC_POP_mask).astype('int')\n\nPOPregionIDsum=[]\nPOPregionSUM=[]\nfor regionID in range(1, DUC_4conn.max()):\n    POPregionID=((DUC_4conn == regionID).astype('int')) * POP_da.data    \n    # threshold for population in cluster \u003e 5000\n    if POPregionID.sum() \u003e MDC_Pmin:\n        POPregionSUM.append(int(round(POPregionID.sum())))\n        POPregionIDsum.append(regionID)\n        DUC_UC03=DUC_UC03+np.where(DUC_4conn == regionID, DUC_4conn, 0)","visibility":"show","key":"mYqvNJkRDf"},{"type":"output","id":"0rRW_0KrJcr3MfjV9jl7e","data":[],"visibility":"show","key":"ATEdoPwrr9"}],"visibility":"show","key":"D62gM0Chv7"},{"type":"block","kind":"notebook-code","data":{"papermill":{"duration":0.104902,"end_time":"2023-03-22T12:58:28.805711","exception":false,"start_time":"2023-03-22T12:58:28.700809","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"","visibility":"show","key":"SCZZBeKvai"},{"type":"output","id":"OLhM7R6ATKpZUG5PiVzwO","data":[],"visibility":"show","key":"oUnvcLpsf6"}],"visibility":"show","key":"F30slR3v18"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:29.012144Z","iopub.status.busy":"2023-03-22T12:58:29.011495Z","iopub.status.idle":"2023-03-22T12:58:29.030045Z","shell.execute_reply":"2023-03-22T12:58:29.027498Z"},"papermill":{"duration":0.117866,"end_time":"2023-03-22T12:58:29.033429","exception":false,"start_time":"2023-03-22T12:58:28.915563","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# SUBTRACTION OF HDC\nDUC_UC03_BIN=np.where(DUC_UC03 \u003e 0, 1, 0)\nDUC_UC03_BIN=DUC_UC03_BIN-HDC_UC04_4conn_BIN\nDUC_UC03_BIN=np.where(DUC_UC03_BIN \u003e0, 1, 0)\nprint(DUC_UC03_BIN.sum())","visibility":"show","key":"lEP7OuLMbH"},{"type":"output","id":"QikuyMN41SU0r-YB62Q0R","data":[{"name":"stdout","output_type":"stream","text":"4591\n"}],"visibility":"show","key":"urZG5NrnmF"}],"visibility":"show","key":"b2CAS7MtIQ"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:29.214540Z","iopub.status.busy":"2023-03-22T12:58:29.214102Z","iopub.status.idle":"2023-03-22T12:58:29.238684Z","shell.execute_reply":"2023-03-22T12:58:29.234126Z"},"papermill":{"duration":0.123546,"end_time":"2023-03-22T12:58:29.242091","exception":false,"start_time":"2023-03-22T12:58:29.118545","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# CONNECTIVITY\nDUC_UC04_4conn = measure.label(DUC_UC03_BIN, background=0, connectivity=HDC_Tcon)  # connectivity=HDC_Tcon\nprint(DUC_UC04_4conn.min(),DUC_UC04_4conn.max())","visibility":"show","key":"vyxQJNiMK2"},{"type":"output","id":"2jwINhXRY9FFalIB15gdb","data":[{"name":"stdout","output_type":"stream","text":"0 756\n"}],"visibility":"show","key":"UNHdErdOAB"}],"visibility":"show","key":"TOrDK1yDz3"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:29.471038Z","iopub.status.busy":"2023-03-22T12:58:29.463827Z","iopub.status.idle":"2023-03-22T12:58:29.491313Z","shell.execute_reply":"2023-03-22T12:58:29.489350Z"},"papermill":{"duration":0.144228,"end_time":"2023-03-22T12:58:29.497128","exception":false,"start_time":"2023-03-22T12:58:29.352900","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# BINARY MASK\nDUC_UC04_4conn_BIN=np.where(DUC_UC04_4conn \u003e 0, 1, 0)\nDUC_UC04_4conn_BIN.sum()","visibility":"show","key":"y4cUf4B6Ka"},{"type":"output","id":"4xAhuS8C6wDG98w5qnqH9","data":[{"output_type":"execute_result","execution_count":56,"metadata":{},"data":{"text/plain":{"content":"4591","content_type":"text/plain"}}}],"visibility":"show","key":"z68rGhST6n"}],"visibility":"show","key":"LcbkST5Ipk"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.120252,"end_time":"2023-03-22T12:58:29.788928","exception":false,"start_time":"2023-03-22T12:58:29.668676","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"DUC:  numpy.ndarray to DataArray","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wnSr809hSz"}],"key":"eDLSRWS2bB"}],"visibility":"show","key":"YLtNGDBit1"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:30.008337Z","iopub.status.busy":"2023-03-22T12:58:30.006386Z","iopub.status.idle":"2023-03-22T12:58:30.068095Z","shell.execute_reply":"2023-03-22T12:58:30.066527Z"},"papermill":{"duration":0.171225,"end_time":"2023-03-22T12:58:30.072338","exception":false,"start_time":"2023-03-22T12:58:29.901113","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"DUC_UC05 = xr.DataArray(\n    data=DUC_UC04_4conn,\n    dims=BTU_da.dims,\n    coords=BTU_da.coords,\n    name='dense_urban_cluster',\n    )\n\nDUC_UC05=DUC_UC05.astype(np.int16)\nDUC_UC05","visibility":"show","key":"gce72bPngq"},{"type":"output","id":"JgSruElxFfiOV6DHSRQsQ","data":[{"output_type":"execute_result","execution_count":57,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\u003csvg style=\"position: absolute; width: 0; height: 0; overflow: hidden\"\u003e\n\u003cdefs\u003e\n\u003csymbol id=\"icon-database\" viewBox=\"0 0 32 32\"\u003e\n\u003cpath d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"\u003e\u003c/path\u003e\n\u003c/symbol\u003e\n\u003csymbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\"\u003e\n\u003cpath d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003c/symbol\u003e\n\u003c/defs\u003e\n\u003c/svg\u003e\n\u003cstyle\u003e/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=dark],\nbody[data-theme=dark],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1F1F1F;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header \u003e div,\n.xr-header \u003e ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 20px 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: none;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary \u003e span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: '►';\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: '▼';\n}\n\n.xr-section-summary-in:checked + label \u003e span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap \u003e label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: '(';\n}\n\n.xr-dim-list:after {\n  content: ')';\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: ',';\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item \u003e div,\n.xr-var-item label,\n.xr-var-item \u003e .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item \u003e .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list \u003e li:nth-child(odd) \u003e div,\n.xr-var-list \u003e li:nth-child(odd) \u003e label,\n.xr-var-list \u003e li:nth-child(odd) \u003e .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data \u003e table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\u003c/style\u003e\u003cpre class='xr-text-repr-fallback'\u003e\u0026lt;xarray.DataArray \u0026#x27;dense_urban_cluster\u0026#x27; (y: 831, x: 1266)\u0026gt;\narray([[0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       ...,\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0]], dtype=int16)\nCoordinates:\n  * x            (x) float64 7.085e+05 7.095e+05 ... 1.972e+06 1.974e+06\n  * y            (y) float64 6.386e+06 6.386e+06 ... 5.558e+06 5.556e+06\n    spatial_ref  int64 0\u003c/pre\u003e\u003cdiv class='xr-wrap' style='display:none'\u003e\u003cdiv class='xr-header'\u003e\u003cdiv class='xr-obj-type'\u003exarray.DataArray\u003c/div\u003e\u003cdiv class='xr-array-name'\u003e'dense_urban_cluster'\u003c/div\u003e\u003cul class='xr-dim-list'\u003e\u003cli\u003e\u003cspan class='xr-has-index'\u003ey\u003c/span\u003e: 831\u003c/li\u003e\u003cli\u003e\u003cspan class='xr-has-index'\u003ex\u003c/span\u003e: 1266\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cul class='xr-sections'\u003e\u003cli class='xr-section-item'\u003e\u003cdiv class='xr-array-wrap'\u003e\u003cinput id='section-a1535cd9-0541-4a8f-aa0e-73c1ddef7c08' class='xr-array-in' type='checkbox' checked\u003e\u003clabel for='section-a1535cd9-0541-4a8f-aa0e-73c1ddef7c08' title='Show/hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-array-preview xr-preview'\u003e\u003cspan\u003e0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 ... 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-array-data'\u003e\u003cpre\u003earray([[0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       ...,\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0]], dtype=int16)\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-bb6e96df-2386-4eca-8868-fb52cc66d75a' class='xr-section-summary-in' type='checkbox'  checked\u003e\u003clabel for='section-bb6e96df-2386-4eca-8868-fb52cc66d75a' class='xr-section-summary' \u003eCoordinates: \u003cspan\u003e(3)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cul class='xr-var-list'\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan class='xr-has-index'\u003ex\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e(x)\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003efloat64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e7.085e+05 7.095e+05 ... 1.974e+06\u003c/div\u003e\u003cinput id='attrs-1bdd373d-1b8f-46ea-b256-6ffe9b6620a3' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-1bdd373d-1b8f-46ea-b256-6ffe9b6620a3' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-70621aaf-2bba-4a00-9a8d-aa02afe85ee3' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-70621aaf-2bba-4a00-9a8d-aa02afe85ee3' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003eaxis :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eX\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003elong_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ex coordinate of projection\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003estandard_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eprojection_x_coordinate\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eunits :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003emetre\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray([ 708500.,  709500.,  710500., ..., 1971500., 1972500., 1973500.])\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan class='xr-has-index'\u003ey\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e(y)\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003efloat64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e6.386e+06 6.386e+06 ... 5.556e+06\u003c/div\u003e\u003cinput id='attrs-92c4bd82-a597-4b45-9de1-8dcb63f6d088' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-92c4bd82-a597-4b45-9de1-8dcb63f6d088' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-5a660061-1bd4-4f4b-97a9-6fe605b2f5b0' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-5a660061-1bd4-4f4b-97a9-6fe605b2f5b0' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003eaxis :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eY\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003elong_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ey coordinate of projection\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003estandard_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eprojection_y_coordinate\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eunits :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003emetre\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray([6386500., 6385500., 6384500., ..., 5558500., 5557500., 5556500.])\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan\u003espatial_ref\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e()\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003eint64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e0\u003c/div\u003e\u003cinput id='attrs-c5b32a19-ace4-4825-8a74-8d62884b317e' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-c5b32a19-ace4-4825-8a74-8d62884b317e' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-0cf3e7b6-9aeb-4635-a5b4-f1bcaf039e0a' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-0cf3e7b6-9aeb-4635-a5b4-f1bcaf039e0a' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003ecrs_wkt :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ePROJCS[\u0026quot;World_Mollweide\u0026quot;,GEOGCS[\u0026quot;WGS 84\u0026quot;,DATUM[\u0026quot;WGS_1984\u0026quot;,SPHEROID[\u0026quot;WGS 84\u0026quot;,6378137,298.257223563,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;7030\u0026quot;]],AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;6326\u0026quot;]],PRIMEM[\u0026quot;Greenwich\u0026quot;,0],UNIT[\u0026quot;Degree\u0026quot;,0.0174532925199433]],PROJECTION[\u0026quot;Mollweide\u0026quot;],PARAMETER[\u0026quot;central_meridian\u0026quot;,0],PARAMETER[\u0026quot;false_easting\u0026quot;,0],PARAMETER[\u0026quot;false_northing\u0026quot;,0],UNIT[\u0026quot;metre\u0026quot;,1,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;9001\u0026quot;]],AXIS[\u0026quot;Easting\u0026quot;,EAST],AXIS[\u0026quot;Northing\u0026quot;,NORTH]]\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003espatial_ref :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ePROJCS[\u0026quot;World_Mollweide\u0026quot;,GEOGCS[\u0026quot;WGS 84\u0026quot;,DATUM[\u0026quot;WGS_1984\u0026quot;,SPHEROID[\u0026quot;WGS 84\u0026quot;,6378137,298.257223563,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;7030\u0026quot;]],AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;6326\u0026quot;]],PRIMEM[\u0026quot;Greenwich\u0026quot;,0],UNIT[\u0026quot;Degree\u0026quot;,0.0174532925199433]],PROJECTION[\u0026quot;Mollweide\u0026quot;],PARAMETER[\u0026quot;central_meridian\u0026quot;,0],PARAMETER[\u0026quot;false_easting\u0026quot;,0],PARAMETER[\u0026quot;false_northing\u0026quot;,0],UNIT[\u0026quot;metre\u0026quot;,1,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;9001\u0026quot;]],AXIS[\u0026quot;Easting\u0026quot;,EAST],AXIS[\u0026quot;Northing\u0026quot;,NORTH]]\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eGeoTransform :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e708000.0 1000.0 0.0 6387000.0 0.0 -1000.0\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray(0)\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-a23fbdfa-bc2a-4087-a77a-8eaa041df24f' class='xr-section-summary-in' type='checkbox'  \u003e\u003clabel for='section-a23fbdfa-bc2a-4087-a77a-8eaa041df24f' class='xr-section-summary' \u003eIndexes: \u003cspan\u003e(2)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cul class='xr-var-list'\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-index-name'\u003e\u003cdiv\u003ex\u003c/div\u003e\u003c/div\u003e\u003cdiv class='xr-index-preview'\u003ePandasIndex\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cinput id='index-09b69b0c-df3c-4fc2-9291-29f67d7101d9' class='xr-index-data-in' type='checkbox'/\u003e\u003clabel for='index-09b69b0c-df3c-4fc2-9291-29f67d7101d9' title='Show/Hide index repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-index-data'\u003e\u003cpre\u003ePandasIndex(Float64Index([ 708500.0,  709500.0,  710500.0,  711500.0,  712500.0,  713500.0,\n               714500.0,  715500.0,  716500.0,  717500.0,\n              ...\n              1964500.0, 1965500.0, 1966500.0, 1967500.0, 1968500.0, 1969500.0,\n              1970500.0, 1971500.0, 1972500.0, 1973500.0],\n             dtype=\u0026#x27;float64\u0026#x27;, name=\u0026#x27;x\u0026#x27;, length=1266))\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-index-name'\u003e\u003cdiv\u003ey\u003c/div\u003e\u003c/div\u003e\u003cdiv class='xr-index-preview'\u003ePandasIndex\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cinput id='index-0df5c502-2d9a-4a6f-87d7-b8e55f00c6d7' class='xr-index-data-in' type='checkbox'/\u003e\u003clabel for='index-0df5c502-2d9a-4a6f-87d7-b8e55f00c6d7' title='Show/Hide index repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-index-data'\u003e\u003cpre\u003ePandasIndex(Float64Index([6386500.0, 6385500.0, 6384500.0, 6383500.0, 6382500.0, 6381500.0,\n              6380500.0, 6379500.0, 6378500.0, 6377500.0,\n              ...\n              5565500.0, 5564500.0, 5563500.0, 5562500.0, 5561500.0, 5560500.0,\n              5559500.0, 5558500.0, 5557500.0, 5556500.0],\n             dtype=\u0026#x27;float64\u0026#x27;, name=\u0026#x27;y\u0026#x27;, length=831))\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-f624317b-43ef-4290-bb44-dc00123e2c40' class='xr-section-summary-in' type='checkbox' disabled \u003e\u003clabel for='section-f624317b-43ef-4290-bb44-dc00123e2c40' class='xr-section-summary'  title='Expand/collapse section'\u003eAttributes: \u003cspan\u003e(0)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cdl class='xr-attrs'\u003e\u003c/dl\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"\u003cxarray.DataArray 'dense_urban_cluster' (y: 831, x: 1266)\u003e\narray([[0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       ...,\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0]], dtype=int16)\nCoordinates:\n  * x            (x) float64 7.085e+05 7.095e+05 ... 1.972e+06 1.974e+06\n  * y            (y) float64 6.386e+06 6.386e+06 ... 5.558e+06 5.556e+06\n    spatial_ref  int64 0","content_type":"text/plain"}}}],"visibility":"show","key":"k1J1Nl6Loo"}],"visibility":"show","key":"RCNIehRvjH"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.10512,"end_time":"2023-03-22T12:58:30.291984","exception":false,"start_time":"2023-03-22T12:58:30.186864","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"DUC: export to vector","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sk4Sq4qdPj"}],"key":"zrNDwVJRan"}],"visibility":"show","key":"p93lLbwrJT"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:30.490802Z","iopub.status.busy":"2023-03-22T12:58:30.489985Z","iopub.status.idle":"2023-03-22T12:58:30.765441Z","shell.execute_reply":"2023-03-22T12:58:30.764381Z"},"papermill":{"duration":0.375952,"end_time":"2023-03-22T12:58:30.768168","exception":false,"start_time":"2023-03-22T12:58:30.392216","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# mask=None\nmask=DUC_UC05.data != 0\nwith DUC_UC05 as src:\n    image = src.data # first band\n    results = (\n    {'properties': {'raster_val': v}, 'geometry': s}\n    for i, (s, v) \n    in enumerate(\n        shapes(image, mask=mask, connectivity=4, transform=DUC_UC05.rio.transform())))\n\ngeoms = list(results)","visibility":"show","key":"hleR9FgeVu"},{"type":"output","id":"alGIZpxADMkyenguuZPiT","data":[],"visibility":"show","key":"g63h9gs69u"}],"visibility":"show","key":"Fa4cql0JUB"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:30.954484Z","iopub.status.busy":"2023-03-22T12:58:30.954069Z","iopub.status.idle":"2023-03-22T12:58:31.030169Z","shell.execute_reply":"2023-03-22T12:58:31.028058Z"},"papermill":{"duration":0.178806,"end_time":"2023-03-22T12:58:31.033113","exception":false,"start_time":"2023-03-22T12:58:30.854307","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"DUC_DenseUrbanCluster  = gpd.GeoDataFrame.from_features(geoms)\nDUC_DenseUrbanCluster.crs=DUC_UC05.rio.crs\nDUC_DenseUrbanCluster.raster_val=DUC_DenseUrbanCluster.raster_val.astype('int')\nDUC_DenseUrbanCluster.rename(columns={'raster_val':'ducid'}, inplace=True)\nDUC_DenseUrbanCluster['code']=23","visibility":"show","key":"nwsfG6q6Lv"},{"type":"output","id":"wRYEa3ht-UUGC3oSpONgf","data":[],"visibility":"show","key":"p7obVJPbuw"}],"visibility":"show","key":"BAS7Zcr8fW"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.092116,"end_time":"2023-03-22T12:58:31.227850","exception":false,"start_time":"2023-03-22T12:58:31.135734","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"step2: Semi-Dense Urban Cluster (SDUC)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lgKiUdwJdq"}],"identifier":"step2-semi-dense-urban-cluster-sduc","label":"step2: Semi-Dense Urban Cluster (SDUC)","html_id":"step2-semi-dense-urban-cluster-sduc","implicit":true,"key":"QaAujpB2px"}],"visibility":"show","key":"RCK7P02pbv"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:31.438514Z","iopub.status.busy":"2023-03-22T12:58:31.437741Z","iopub.status.idle":"2023-03-22T12:58:31.455743Z","shell.execute_reply":"2023-03-22T12:58:31.454302Z"},"papermill":{"duration":0.135515,"end_time":"2023-03-22T12:58:31.459152","exception":false,"start_time":"2023-03-22T12:58:31.323637","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# MASK\nSDUC_mask=MDC_UC01_mask \nprint(DUC_mask.sum())","visibility":"show","key":"aQRydL7uNW"},{"type":"output","id":"6gVWyggXoXWP2dEhN5WTF","data":[{"name":"stdout","output_type":"stream","text":"\u003cxarray.DataArray ()\u003e\narray(14494.)\nCoordinates:\n    spatial_ref  int64 0\n"}],"visibility":"show","key":"trohmnR4Bq"}],"visibility":"show","key":"j5TKLi0cE1"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:31.662542Z","iopub.status.busy":"2023-03-22T12:58:31.661660Z","iopub.status.idle":"2023-03-22T12:58:31.685337Z","shell.execute_reply":"2023-03-22T12:58:31.683089Z"},"papermill":{"duration":0.128732,"end_time":"2023-03-22T12:58:31.691346","exception":false,"start_time":"2023-03-22T12:58:31.562614","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# CONNECTIVITY\nSDUC_8conn = measure.label(SDUC_mask, background=0, return_num=False, connectivity=MDC_Tcon) # 8-connectivity cluster\nprint('SDUC number of regions:', SDUC_8conn.max())","visibility":"show","key":"rCaxFjLYtq"},{"type":"output","id":"w_5fUzykWbOsuyDRz8BJV","data":[{"name":"stdout","output_type":"stream","text":"SDUC number of regions: 15569\n"}],"visibility":"show","key":"jFb46vT6cO"}],"visibility":"show","key":"jZZZ80Pc18"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T12:58:31.900348Z","iopub.status.busy":"2023-03-22T12:58:31.899561Z","iopub.status.idle":"2023-03-22T13:00:13.105664Z","shell.execute_reply":"2023-03-22T13:00:13.104220Z"},"papermill":{"duration":101.317464,"end_time":"2023-03-22T13:00:13.108717","exception":false,"start_time":"2023-03-22T12:58:31.791253","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# TOTAL POPULATION IN CLUSTER\nSDUC_UC03=np.zeros_like(HDC_POP_mask).astype('int')\n\nPOPregionIDsum=[]\nPOPregionSUM=[]\nfor regionID in range(1, SDUC_8conn.max()):\n    POPregionID=((SDUC_8conn == regionID).astype('int')) * POP_da.data    \n    # threshold for population in cluster \u003e 5000\n    if POPregionID.sum() \u003e MDC_Pmin:\n        POPregionSUM.append(int(round(POPregionID.sum())))\n        POPregionIDsum.append(regionID)\n        SDUC_UC03=SDUC_UC03+np.where(SDUC_8conn == regionID, SDUC_8conn, 0)","visibility":"show","key":"VtEScpUBia"},{"type":"output","id":"uM0lh06rc-0yG1x7HN20x","data":[],"visibility":"show","key":"YSXIIiWPXg"}],"visibility":"show","key":"ZPMnjcnHNM"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:13.331596Z","iopub.status.busy":"2023-03-22T13:00:13.330773Z","iopub.status.idle":"2023-03-22T13:00:13.362294Z","shell.execute_reply":"2023-03-22T13:00:13.357931Z"},"papermill":{"duration":0.150481,"end_time":"2023-03-22T13:00:13.369065","exception":false,"start_time":"2023-03-22T13:00:13.218584","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Minus HDC and DUC\nSDUC_UC03_BIN=np.where(SDUC_UC03 \u003e 0, 1, 0)\nSDUC_UC03_BIN=SDUC_UC03_BIN - HDC_UC04_4conn_BIN - DUC_UC04_4conn_BIN\nSDUC_UC03_BIN=np.where(SDUC_UC03_BIN \u003e0, 1, 0)\nprint(SDUC_UC03_BIN.sum())","visibility":"show","key":"spqo5nv4Uz"},{"type":"output","id":"3oFm-hVdXgqFfksI5Uu3F","data":[{"name":"stdout","output_type":"stream","text":"32703\n"}],"visibility":"show","key":"hyya4RhfKS"}],"visibility":"show","key":"sJ3pJarNCF"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:13.799666Z","iopub.status.busy":"2023-03-22T13:00:13.799018Z","iopub.status.idle":"2023-03-22T13:00:13.836075Z","shell.execute_reply":"2023-03-22T13:00:13.831690Z"},"papermill":{"duration":0.209716,"end_time":"2023-03-22T13:00:13.838881","exception":false,"start_time":"2023-03-22T13:00:13.629165","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"SDUC_UC04_8conn = measure.label(SDUC_UC03_BIN, background=0, connectivity=MDC_Tcon)  # connectivity=HDC_Tcon\nprint(SDUC_UC04_8conn.min(),SDUC_UC04_8conn.max())","visibility":"show","key":"ygXaNgjPSA"},{"type":"output","id":"II0D3A17IDuJTa_sayn5Q","data":[{"name":"stdout","output_type":"stream","text":"0 2536\n"}],"visibility":"show","key":"NCpqM2bDQq"}],"visibility":"show","key":"RyK5cXvJ2p"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:14.079351Z","iopub.status.busy":"2023-03-22T13:00:14.078810Z","iopub.status.idle":"2023-03-22T13:00:14.113367Z","shell.execute_reply":"2023-03-22T13:00:14.109121Z"},"papermill":{"duration":0.173502,"end_time":"2023-03-22T13:00:14.117156","exception":false,"start_time":"2023-03-22T13:00:13.943654","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"SDUC_UC05 = xr.DataArray(\n    data=SDUC_UC04_8conn,\n    dims=BTU_da.dims,\n    coords=BTU_da.coords,\n    name='semidense_urban_cluster',\n    )\n\nSDUC_UC05=SDUC_UC05.astype(np.int16)\nSDUC_UC05","visibility":"show","key":"nRUMJedn2E"},{"type":"output","id":"83WxIheknwic-WxpOqdNX","data":[{"output_type":"execute_result","execution_count":65,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\u003csvg style=\"position: absolute; width: 0; height: 0; overflow: hidden\"\u003e\n\u003cdefs\u003e\n\u003csymbol id=\"icon-database\" viewBox=\"0 0 32 32\"\u003e\n\u003cpath d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"\u003e\u003c/path\u003e\n\u003c/symbol\u003e\n\u003csymbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\"\u003e\n\u003cpath d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003c/symbol\u003e\n\u003c/defs\u003e\n\u003c/svg\u003e\n\u003cstyle\u003e/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=dark],\nbody[data-theme=dark],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1F1F1F;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header \u003e div,\n.xr-header \u003e ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 20px 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: none;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary \u003e span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: '►';\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: '▼';\n}\n\n.xr-section-summary-in:checked + label \u003e span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap \u003e label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: '(';\n}\n\n.xr-dim-list:after {\n  content: ')';\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: ',';\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item \u003e div,\n.xr-var-item label,\n.xr-var-item \u003e .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item \u003e .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list \u003e li:nth-child(odd) \u003e div,\n.xr-var-list \u003e li:nth-child(odd) \u003e label,\n.xr-var-list \u003e li:nth-child(odd) \u003e .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data \u003e table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\u003c/style\u003e\u003cpre class='xr-text-repr-fallback'\u003e\u0026lt;xarray.DataArray \u0026#x27;semidense_urban_cluster\u0026#x27; (y: 831, x: 1266)\u0026gt;\narray([[0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       ...,\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0]], dtype=int16)\nCoordinates:\n  * x            (x) float64 7.085e+05 7.095e+05 ... 1.972e+06 1.974e+06\n  * y            (y) float64 6.386e+06 6.386e+06 ... 5.558e+06 5.556e+06\n    spatial_ref  int64 0\u003c/pre\u003e\u003cdiv class='xr-wrap' style='display:none'\u003e\u003cdiv class='xr-header'\u003e\u003cdiv class='xr-obj-type'\u003exarray.DataArray\u003c/div\u003e\u003cdiv class='xr-array-name'\u003e'semidense_urban_cluster'\u003c/div\u003e\u003cul class='xr-dim-list'\u003e\u003cli\u003e\u003cspan class='xr-has-index'\u003ey\u003c/span\u003e: 831\u003c/li\u003e\u003cli\u003e\u003cspan class='xr-has-index'\u003ex\u003c/span\u003e: 1266\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cul class='xr-sections'\u003e\u003cli class='xr-section-item'\u003e\u003cdiv class='xr-array-wrap'\u003e\u003cinput id='section-481fa5c4-8e5c-4eb3-9b96-6bf6950ec66e' class='xr-array-in' type='checkbox' checked\u003e\u003clabel for='section-481fa5c4-8e5c-4eb3-9b96-6bf6950ec66e' title='Show/hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-array-preview xr-preview'\u003e\u003cspan\u003e0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 ... 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-array-data'\u003e\u003cpre\u003earray([[0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       ...,\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0]], dtype=int16)\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-fae04f4f-c09f-4951-baca-262e42a4f0a0' class='xr-section-summary-in' type='checkbox'  checked\u003e\u003clabel for='section-fae04f4f-c09f-4951-baca-262e42a4f0a0' class='xr-section-summary' \u003eCoordinates: \u003cspan\u003e(3)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cul class='xr-var-list'\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan class='xr-has-index'\u003ex\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e(x)\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003efloat64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e7.085e+05 7.095e+05 ... 1.974e+06\u003c/div\u003e\u003cinput id='attrs-0731a833-1e06-461e-836f-390155bfd5f6' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-0731a833-1e06-461e-836f-390155bfd5f6' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-cc330ce5-ac9a-4935-9527-1c388a38202e' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-cc330ce5-ac9a-4935-9527-1c388a38202e' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003eaxis :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eX\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003elong_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ex coordinate of projection\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003estandard_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eprojection_x_coordinate\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eunits :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003emetre\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray([ 708500.,  709500.,  710500., ..., 1971500., 1972500., 1973500.])\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan class='xr-has-index'\u003ey\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e(y)\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003efloat64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e6.386e+06 6.386e+06 ... 5.556e+06\u003c/div\u003e\u003cinput id='attrs-cf97d94f-5808-49b2-9f84-6a48c0913504' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-cf97d94f-5808-49b2-9f84-6a48c0913504' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-2123c53d-43c8-4727-9f54-d2df3f0ed753' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-2123c53d-43c8-4727-9f54-d2df3f0ed753' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003eaxis :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eY\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003elong_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ey coordinate of projection\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003estandard_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003eprojection_y_coordinate\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eunits :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003emetre\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray([6386500., 6385500., 6384500., ..., 5558500., 5557500., 5556500.])\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan\u003espatial_ref\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e()\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003eint64\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e0\u003c/div\u003e\u003cinput id='attrs-508c0e85-f5ff-43e4-8133-e102637a8130' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-508c0e85-f5ff-43e4-8133-e102637a8130' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-7c8d3183-8aad-4227-88d0-2ca18868e8dd' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-7c8d3183-8aad-4227-88d0-2ca18868e8dd' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003ecrs_wkt :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ePROJCS[\u0026quot;World_Mollweide\u0026quot;,GEOGCS[\u0026quot;WGS 84\u0026quot;,DATUM[\u0026quot;WGS_1984\u0026quot;,SPHEROID[\u0026quot;WGS 84\u0026quot;,6378137,298.257223563,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;7030\u0026quot;]],AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;6326\u0026quot;]],PRIMEM[\u0026quot;Greenwich\u0026quot;,0],UNIT[\u0026quot;Degree\u0026quot;,0.0174532925199433]],PROJECTION[\u0026quot;Mollweide\u0026quot;],PARAMETER[\u0026quot;central_meridian\u0026quot;,0],PARAMETER[\u0026quot;false_easting\u0026quot;,0],PARAMETER[\u0026quot;false_northing\u0026quot;,0],UNIT[\u0026quot;metre\u0026quot;,1,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;9001\u0026quot;]],AXIS[\u0026quot;Easting\u0026quot;,EAST],AXIS[\u0026quot;Northing\u0026quot;,NORTH]]\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003espatial_ref :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003ePROJCS[\u0026quot;World_Mollweide\u0026quot;,GEOGCS[\u0026quot;WGS 84\u0026quot;,DATUM[\u0026quot;WGS_1984\u0026quot;,SPHEROID[\u0026quot;WGS 84\u0026quot;,6378137,298.257223563,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;7030\u0026quot;]],AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;6326\u0026quot;]],PRIMEM[\u0026quot;Greenwich\u0026quot;,0],UNIT[\u0026quot;Degree\u0026quot;,0.0174532925199433]],PROJECTION[\u0026quot;Mollweide\u0026quot;],PARAMETER[\u0026quot;central_meridian\u0026quot;,0],PARAMETER[\u0026quot;false_easting\u0026quot;,0],PARAMETER[\u0026quot;false_northing\u0026quot;,0],UNIT[\u0026quot;metre\u0026quot;,1,AUTHORITY[\u0026quot;EPSG\u0026quot;,\u0026quot;9001\u0026quot;]],AXIS[\u0026quot;Easting\u0026quot;,EAST],AXIS[\u0026quot;Northing\u0026quot;,NORTH]]\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003eGeoTransform :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003e708000.0 1000.0 0.0 6387000.0 0.0 -1000.0\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray(0)\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-44e36591-06f6-4682-8ea3-d29d4856ec36' class='xr-section-summary-in' type='checkbox'  \u003e\u003clabel for='section-44e36591-06f6-4682-8ea3-d29d4856ec36' class='xr-section-summary' \u003eIndexes: \u003cspan\u003e(2)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cul class='xr-var-list'\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-index-name'\u003e\u003cdiv\u003ex\u003c/div\u003e\u003c/div\u003e\u003cdiv class='xr-index-preview'\u003ePandasIndex\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cinput id='index-1460d39e-8962-41e9-a059-36113aba29ae' class='xr-index-data-in' type='checkbox'/\u003e\u003clabel for='index-1460d39e-8962-41e9-a059-36113aba29ae' title='Show/Hide index repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-index-data'\u003e\u003cpre\u003ePandasIndex(Float64Index([ 708500.0,  709500.0,  710500.0,  711500.0,  712500.0,  713500.0,\n               714500.0,  715500.0,  716500.0,  717500.0,\n              ...\n              1964500.0, 1965500.0, 1966500.0, 1967500.0, 1968500.0, 1969500.0,\n              1970500.0, 1971500.0, 1972500.0, 1973500.0],\n             dtype=\u0026#x27;float64\u0026#x27;, name=\u0026#x27;x\u0026#x27;, length=1266))\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-index-name'\u003e\u003cdiv\u003ey\u003c/div\u003e\u003c/div\u003e\u003cdiv class='xr-index-preview'\u003ePandasIndex\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cinput id='index-8e6043b9-3b78-4a5f-b7fb-4592a4e6e5ca' class='xr-index-data-in' type='checkbox'/\u003e\u003clabel for='index-8e6043b9-3b78-4a5f-b7fb-4592a4e6e5ca' title='Show/Hide index repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-index-data'\u003e\u003cpre\u003ePandasIndex(Float64Index([6386500.0, 6385500.0, 6384500.0, 6383500.0, 6382500.0, 6381500.0,\n              6380500.0, 6379500.0, 6378500.0, 6377500.0,\n              ...\n              5565500.0, 5564500.0, 5563500.0, 5562500.0, 5561500.0, 5560500.0,\n              5559500.0, 5558500.0, 5557500.0, 5556500.0],\n             dtype=\u0026#x27;float64\u0026#x27;, name=\u0026#x27;y\u0026#x27;, length=831))\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-1f3207a3-2118-4600-bfcd-d0cfa47ee712' class='xr-section-summary-in' type='checkbox' disabled \u003e\u003clabel for='section-1f3207a3-2118-4600-bfcd-d0cfa47ee712' class='xr-section-summary'  title='Expand/collapse section'\u003eAttributes: \u003cspan\u003e(0)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cdl class='xr-attrs'\u003e\u003c/dl\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"\u003cxarray.DataArray 'semidense_urban_cluster' (y: 831, x: 1266)\u003e\narray([[0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       ...,\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0],\n       [0, 0, 0, ..., 0, 0, 0]], dtype=int16)\nCoordinates:\n  * x            (x) float64 7.085e+05 7.095e+05 ... 1.972e+06 1.974e+06\n  * y            (y) float64 6.386e+06 6.386e+06 ... 5.558e+06 5.556e+06\n    spatial_ref  int64 0","content_type":"text/plain"}}}],"visibility":"show","key":"IPWtpGUD0g"}],"visibility":"show","key":"zv7Wc4Tnno"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.099814,"end_time":"2023-03-22T13:00:14.333341","exception":false,"start_time":"2023-03-22T13:00:14.233527","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"SDUC: export to vector","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aNK1RVch0U"}],"key":"TdxNpjPbys"}],"visibility":"show","key":"hg3cD9axrh"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:14.526185Z","iopub.status.busy":"2023-03-22T13:00:14.525087Z","iopub.status.idle":"2023-03-22T13:00:14.664113Z","shell.execute_reply":"2023-03-22T13:00:14.662923Z"},"papermill":{"duration":0.242196,"end_time":"2023-03-22T13:00:14.668154","exception":false,"start_time":"2023-03-22T13:00:14.425958","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# mask=None\nmask=SDUC_UC05.data != 0\nwith SDUC_UC05 as src:\n    image = src.data # first band\n    results = (\n    {'properties': {'raster_val': v}, 'geometry': s}\n    for i, (s, v) \n    in enumerate(\n        shapes(image, mask=mask, connectivity=8, transform=SDUC_UC05.rio.transform())))\n\ngeoms = list(results)\n# first feature\n# print(geoms[0])","visibility":"show","key":"wkOOlda2yB"},{"type":"output","id":"mZ6ShZFTTgEj6O7Z6kJIE","data":[],"visibility":"show","key":"C7SJ286H5a"}],"visibility":"show","key":"ApeAzawOpg"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:14.926053Z","iopub.status.busy":"2023-03-22T13:00:14.924479Z","iopub.status.idle":"2023-03-22T13:00:15.279777Z","shell.execute_reply":"2023-03-22T13:00:15.277960Z"},"papermill":{"duration":0.483065,"end_time":"2023-03-22T13:00:15.283475","exception":false,"start_time":"2023-03-22T13:00:14.800410","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"SDUC_SemiDenseUrbanCluster_temp  = gpd.GeoDataFrame.from_features(geoms)\nSDUC_SemiDenseUrbanCluster_temp.crs=SDUC_UC05.rio.crs\nSDUC_SemiDenseUrbanCluster_temp.raster_val=SDUC_SemiDenseUrbanCluster_temp.raster_val.astype('int')\nSDUC_SemiDenseUrbanCluster_temp.rename(columns={'raster_val':'sducid'}, inplace=True)\nSDUC_SemiDenseUrbanCluster_temp['code']=22","visibility":"show","key":"NKd0ZtBWvs"},{"type":"output","id":"5luZPVT00DzWdMjdMb2dw","data":[],"visibility":"show","key":"izEmewJQmf"}],"visibility":"show","key":"xVXda1meoJ"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:15.484392Z","iopub.status.busy":"2023-03-22T13:00:15.483738Z","iopub.status.idle":"2023-03-22T13:00:16.494041Z","shell.execute_reply":"2023-03-22T13:00:16.492384Z"},"papermill":{"duration":1.114568,"end_time":"2023-03-22T13:00:16.503393","exception":false,"start_time":"2023-03-22T13:00:15.388825","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# HDC \u0026 DUC - BUFFER 3km \nres_union_buffer = gpd.overlay(HDC_UrbanCentre[['geometry']], DUC_DenseUrbanCluster[['geometry']], how='union',keep_geom_type=True).buffer(3000).unary_union\n\nres_union_buffer =gpd.GeoSeries(res_union_buffer)\nres_union_buffer = gpd.GeoDataFrame(geometry=gpd.GeoSeries(res_union_buffer))\nres_union_buffer.crs=HDC_UrbanCentre.crs\nres_union_buffer[['buff3']]=1","visibility":"show","key":"ImI2dBGozF"},{"type":"output","id":"rpIDUzdEOEP0hmPaU6uhS","data":[],"visibility":"show","key":"fidTrQF0gp"}],"visibility":"show","key":"WpNhw53Ji8"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:16.711133Z","iopub.status.busy":"2023-03-22T13:00:16.710300Z","iopub.status.idle":"2023-03-22T13:00:20.421769Z","shell.execute_reply":"2023-03-22T13:00:20.419263Z"},"papermill":{"duration":3.823307,"end_time":"2023-03-22T13:00:20.427926","exception":false,"start_time":"2023-03-22T13:00:16.604619","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# sjoin with buffer\nSDUC_SemiDenseUrbanCluster_temp = gpd.sjoin(SDUC_SemiDenseUrbanCluster_temp, res_union_buffer[['buff3', 'geometry']], how='left',predicate='intersects')\nSDUC_SemiDenseUrbanCluster_temp.drop(columns =['index_right'],inplace=True)\nSDUC_SemiDenseUrbanCluster_temp['code'] = np.where(SDUC_SemiDenseUrbanCluster_temp['buff3'] == 1, 21, 22)\n# print(SDUC_SemiDenseUrbanCluster_temp.tail(2))","visibility":"show","key":"M0hqLRjlh6"},{"type":"output","id":"hyqdOYEMVnpV0k5D0o8we","data":[],"visibility":"show","key":"mrhwbkKgD1"}],"visibility":"show","key":"cottvCrkYm"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:20.710165Z","iopub.status.busy":"2023-03-22T13:00:20.709613Z","iopub.status.idle":"2023-03-22T13:00:20.740567Z","shell.execute_reply":"2023-03-22T13:00:20.738776Z"},"papermill":{"duration":0.168632,"end_time":"2023-03-22T13:00:20.744101","exception":false,"start_time":"2023-03-22T13:00:20.575469","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# SDUC_SemiDenseUrbanCluster\nSDUC_SemiDenseUrbanCluster = SDUC_SemiDenseUrbanCluster_temp[SDUC_SemiDenseUrbanCluster_temp.code == 22].drop(columns=['buff3'])","visibility":"show","key":"gWNqLAtfF9"},{"type":"output","id":"gT9M5ymo9qNUGhoEuikZ4","data":[],"visibility":"show","key":"S6w0zPwJiG"}],"visibility":"show","key":"NfEk4VH7H8"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.129809,"end_time":"2023-03-22T13:00:21.037309","exception":false,"start_time":"2023-03-22T13:00:20.907500","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"step3: Peri-Urban Cluster (PUC)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cbG72SuU1a"}],"identifier":"step3-peri-urban-cluster-puc","label":"step3: Peri-Urban Cluster (PUC)","html_id":"step3-peri-urban-cluster-puc","implicit":true,"key":"R0aaEbSHxH"}],"visibility":"show","key":"BenZAb1ioJ"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:21.275326Z","iopub.status.busy":"2023-03-22T13:00:21.274867Z","iopub.status.idle":"2023-03-22T13:00:21.300853Z","shell.execute_reply":"2023-03-22T13:00:21.297330Z"},"papermill":{"duration":0.133349,"end_time":"2023-03-22T13:00:21.304346","exception":false,"start_time":"2023-03-22T13:00:21.170997","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# PUC_PeriUrbanCluster\nPUC_PeriUrbanCluster = SDUC_SemiDenseUrbanCluster_temp[SDUC_SemiDenseUrbanCluster_temp.code == 21].drop(columns=['buff3'])\nPUC_PeriUrbanCluster.rename(columns={'sducid':'pucid'},inplace=True)","visibility":"show","key":"hJmkPuejcJ"},{"type":"output","id":"3tIcFejj8YGbe25ywqJQl","data":[],"visibility":"show","key":"M5kTTNp2x1"}],"visibility":"show","key":"eCzWjGr1aw"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.119409,"end_time":"2023-03-22T13:00:21.538637","exception":false,"start_time":"2023-03-22T13:00:21.419228","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"DUC, SDUC and PUC export to shapefile","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xZbsZq8Exn"}],"identifier":"duc-sduc-and-puc-export-to-shapefile","label":"DUC, SDUC and PUC export to shapefile","html_id":"duc-sduc-and-puc-export-to-shapefile","implicit":true,"key":"kCKLPdnFVq"}],"visibility":"show","key":"wJXzh7O5LJ"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.113461,"end_time":"2023-03-22T13:00:21.759059","exception":false,"start_time":"2023-03-22T13:00:21.645598","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"DUC: export to shapefile","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gGFJmapIC1"}],"key":"Q16BNa4bcE"}],"visibility":"show","key":"QTpfcAy44T"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:21.996105Z","iopub.status.busy":"2023-03-22T13:00:21.995539Z","iopub.status.idle":"2023-03-22T13:00:22.264120Z","shell.execute_reply":"2023-03-22T13:00:22.261452Z"},"papermill":{"duration":0.394253,"end_time":"2023-03-22T13:00:22.268371","exception":false,"start_time":"2023-03-22T13:00:21.874118","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# EXPORT 2 shapefile World Mollweide (ESRI:54009)\nDUC_DenseUrbanCluster.to_file(os.path.join(os.path.realpath('GHSL_results'),'DUC_DenseUrbanCluster_'+str(REFyear)+'.shp'))\n\n# Export to shapefile WGS84 (EPSG:4326 )\n# DUC_DenseUrbanCluster.to_crs(epsg=4326).to_file(os.path.join(os.path.realpath('GHSL_results'),'DUC_DenseUrbanCluster_4326_'+str(REFyear)+'.shp'))","visibility":"show","key":"U3Be5Nq45u"},{"type":"output","id":"5DXHiN_8EWa__LU0vXKMl","data":[],"visibility":"show","key":"OUPOIfpCeV"}],"visibility":"show","key":"pn5yKN67dv"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.109943,"end_time":"2023-03-22T13:00:22.484341","exception":false,"start_time":"2023-03-22T13:00:22.374398","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"SDUC: export to shapefile","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TW3LGO7yYz"}],"key":"EnSKGsLNrh"}],"visibility":"show","key":"A0CD1oM0Ja"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:22.762773Z","iopub.status.busy":"2023-03-22T13:00:22.762200Z","iopub.status.idle":"2023-03-22T13:00:23.037896Z","shell.execute_reply":"2023-03-22T13:00:23.036593Z"},"papermill":{"duration":0.419933,"end_time":"2023-03-22T13:00:23.041029","exception":false,"start_time":"2023-03-22T13:00:22.621096","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# EXPORT 2 shapefile World Mollweide (ESRI:54009)\nSDUC_SemiDenseUrbanCluster.to_file(os.path.join(os.path.realpath('GHSL_results'),'SDUC_SemiDenseUrbanCluster_'+str(REFyear)+'.shp'))\n\n# Export to shapefile WGS84 (EPSG:4326 )\n# SDUC_SemiDenseUrbanCluster.to_crs(epsg=4326).to_file(os.path.join(os.path.realpath('GHSL_results'),'SDUC_SemiDenseUrbanCluster_4326_'+str(REFyear)+'.shp'))","visibility":"show","key":"OCF76oYFoS"},{"type":"output","id":"oGyU5XUw7x5ia2Xtrh8Wo","data":[],"visibility":"show","key":"mnfhkvIPPB"}],"visibility":"show","key":"IrdKJSehu3"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.114041,"end_time":"2023-03-22T13:00:23.268820","exception":false,"start_time":"2023-03-22T13:00:23.154779","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"PUC: export to shapefile","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IYugmNEnVf"}],"key":"rt4fFzMrX6"}],"visibility":"show","key":"PauiCGkSVx"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:23.504356Z","iopub.status.busy":"2023-03-22T13:00:23.502233Z","iopub.status.idle":"2023-03-22T13:00:24.404234Z","shell.execute_reply":"2023-03-22T13:00:24.400472Z"},"papermill":{"duration":1.013696,"end_time":"2023-03-22T13:00:24.410151","exception":false,"start_time":"2023-03-22T13:00:23.396455","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# EXPORT 2 shapefile World Mollweide (ESRI:54009)\nPUC_PeriUrbanCluster.to_file(os.path.join(os.path.realpath('GHSL_results'),'PUC_PeriUrbanCluster_'+str(REFyear)+'.shp'))\n\n# Export to shapefile WGS84 (EPSG:4326 )\n# PUC_PeriUrbanCluster.to_crs(epsg=4326).to_file(os.path.join(os.path.realpath('GHSL_results'),'PUC_PeriUrbanCluster_4326'+str(REFyear)+'.shp'))","visibility":"show","key":"N1soAGQ3rA"},{"type":"output","id":"4KLW1ivnaxaRivQPSeE2S","data":[],"visibility":"show","key":"kS2gT8gWxc"}],"visibility":"show","key":"wn3tWx5Koy"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.210484,"end_time":"2023-03-22T13:00:24.814907","exception":false,"start_time":"2023-03-22T13:00:24.604423","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"L2: Visualization of results","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rcYiMHjzfa"}],"identifier":"l2-visualization-of-results","label":"L2: Visualization of results","html_id":"l2-visualization-of-results","implicit":true,"key":"UQvEKiM5YM"}],"visibility":"show","key":"m1mwsmofB7"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:25.133011Z","iopub.status.busy":"2023-03-22T13:00:25.132230Z","iopub.status.idle":"2023-03-22T13:00:29.316712Z","shell.execute_reply":"2023-03-22T13:00:29.314145Z"},"papermill":{"duration":4.474481,"end_time":"2023-03-22T13:00:29.461149","exception":false,"start_time":"2023-03-22T13:00:24.986668","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig = Figure(width=600, height=600)\n\nm = AOI54009.explore(style_kwds={'fillColor':'None','color':'blue','weight': 1}, name='aoi')\n\n# parallels:\nfor lat in range(-90, 91, lat_interval):\n     folium.PolyLine([[lat, -180],[lat, 180]], weight=0.5).add_to(m)\n# meridianss:\nfor lon in range(-180, 181, lon_interval):\n    folium.PolyLine([[-90, lon],[90, lon]], weight=0.5).add_to(m)\n\nPUC_PeriUrbanCluster.explore(m=m,style_kwds={'fillColor':'yellow','color':'yellow','weight': 1.5}, name='PUC_PeriUrbanCluster')\nSDUC_SemiDenseUrbanCluster.explore(m=m,style_kwds={'fillColor':'darkgoldenrod','color':'darkgoldenrod','weight': 1.5}, name='SDUC_SemiDenseUrbanCluster')\nDUC_DenseUrbanCluster.explore(m=m,style_kwds={'fillColor':'brown','color':'brown','weight': 1.5}, name='DUC_DenseUrbanCluster')\n\nMDC_UrbanCluster.explore(m=m,style_kwds={'fillColor':'orange','color':'orange','weight': 1}, name='MDC_UrbanCluster', show = False)\nHDC_UrbanCentre.explore(m=m,style_kwds={'fillColor':'red','color':'red','weight': 1.5}, name='HDC_UrbanCentre')\n\nfolium.LayerControl('topright',collapsed=True).add_to(m)\nminimap = plugins.MiniMap(height=90, width=90, zoom_level_offset=-7)\nm.add_child(minimap)\n\nfig.add_child(m)\nm","visibility":"show","key":"zigWiagA2r"},{"type":"output","id":"POWfQZmgqAwPGsIZn0ctd","data":[{"output_type":"execute_result","execution_count":75,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"eb88ed0d8a2c9e0eebb122c3a0ad56a1","path":"/notebooks_test/build/eb88ed0d8a2c9e0eebb122c3a0ad56a1.html"},"text/plain":{"content":"\u003cfolium.folium.Map at 0x7f7e2abaef70\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"dsy5dqnDMr"}],"visibility":"show","key":"IKpEO4mGn8"},{"type":"block","kind":"notebook-code","data":{"papermill":{"duration":0.250087,"end_time":"2023-03-22T13:00:29.966207","exception":false,"start_time":"2023-03-22T13:00:29.716120","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"","visibility":"show","key":"ilhtuq2e0C"},{"type":"output","id":"NUtJhyH09vkuFepjj_bcF","data":[],"visibility":"show","key":"rfWho15mhv"}],"visibility":"show","key":"BmXT0CUiPP"},{"type":"block","kind":"notebook-code","data":{"papermill":{"duration":0.290576,"end_time":"2023-03-22T13:00:30.502573","exception":false,"start_time":"2023-03-22T13:00:30.211997","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"","visibility":"show","key":"CsuP0mv3VJ"},{"type":"output","id":"4pPjxi1u-k67IVTCfb-YD","data":[],"visibility":"show","key":"Ln5pRUhGi2"}],"visibility":"show","key":"BtGAClcJ7K"}],"key":"f40OzlxFBH"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Crop-classification using Sentinel-2 time-series","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/eurocrops-crop-classification-example","group":"Contributions"},"next":{"title":"Pre-requisites","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/globalearthmonitor-example","group":"Contributions"}}},"domain":"http://localhost:3000"},"project":{"github":"https://github.com/eoxhub-workspaces/documentation/","id":"5aa0318b-5bc1-41e2-b1d4-053e8b61961b","exports":[],"bibliography":[],"title":"Location for eodashboard notebooks","index":"readme","pages":[{"title":"External Notebooks","level":1},{"title":"Eurodatacube","level":2},{"title":"Notebooks","level":3},{"slug":"external-notebooks.eurodatacube.notebooks.readme","title":"Jupyter notebooks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Notebooks","level":4},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.readme","title":"Euro Data Cube Notebooks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":5},{"title":"Contributions","level":5},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-ai4arctic-sea-ice","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-biomass-forest-observation-sys","title":"AIREO pilot dataset - Biomass (Forest Observation System)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-cap","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-spacenet7","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aot-covid19","title":"Aerosol Optical Thickness (AOT) Anomaly Detection Using Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.batch-zarr-output","title":"Generating Zarr data cubes with Sentinel Hub Batch API","description":"","date":"","thumbnail":"/notebooks_test/build/68dffbf744fa42f4bf3d35e55684984e.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.client-side-processing-using-mass-sh","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.cmems-data-download","title":"Cmems Data Download","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.detect-trucks-sentinel2","title":"Detect Trucks using Sentinel-2 data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.drought-monitoring","title":"Drought impact monitoring platform","description":"","date":"","thumbnail":"/notebooks_test/build/ad5c19782b006f72352ae57794305840.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-africa-cube-africa-custom-contest","title":"Custom Script Contest – Urban Growth in Africa","description":"","date":"","thumbnail":"/notebooks_test/build/e9275f3fe80a704e2f5aa1ec1220e48a.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-byoc-tutorial","title":"How to bring your own data to EDC: Using Sentinel Hub Python package","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-demo-phi-week-v2","title":"xcube-gen and xcube-geodb Hands-On Workshop Φ-Week 2020","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-geodb-4-eurocrops-demo","title":"Demonstration of Eurocrops data use in geoDB","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-notebook-lstm","title":"South Africa Crop Type Classification on Euro Data Cube (EDC)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-usecase-lpis-crop-type-classification","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.eurocrops-crop-classification-example","title":"Crop-classification using Sentinel-2 time-series","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ghsl-urban-delineation","title":"\u003cb\u003eUrban delineation\u003cb\u003e","description":"","date":"","thumbnail":"/notebooks_test/build/7bbf545a5eae1d9ebdb91ae42b261063.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.globalearthmonitor-example","title":"Pre-requisites","description":"","date":"","thumbnail":"/notebooks_test/build/205c1ded6bd59771975a9fbd3753fd3b.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.gpu-support-eoxhub","title":"GPU-Support on EOxHub","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.gran-chaco-phiweek","title":"ESA EO \\phi- week 2020","description":"","date":"","thumbnail":"/notebooks_test/build/80cee7db6cdc7002ceedda5689f889fa.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.howtolulc-batch-updated-210621","title":"How To: Land-Use-Land-Cover Prediction for Slovenia - using the Batch Processing API","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.lpis-lulc-slo","title":"LPIS Use Case for Land Use / Land Cover Classification","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.lps2022-leverage-euro-data-cube-services","title":"Living Planet Symposium 2022 Training Session","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.no2-analysis-covid19-lockdowns","title":"Impact of Covid19 induced lockdown on NO2 levels","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.no2-so2-trend-veda-api-igarss-2023","title":"Using the NASA VEDA EOAPI","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ogc-edc","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.openeo-client-demo","title":"openEO Client Demo","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.race-finishedgoodsinventory-inidcator","title":"Finished Goods Inventory indicator for RACE","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.third-party-planetscope","title":"Third Party Data Import - PlanetScope","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.xcube-access-datasets","title":"Using xcube to access non-commercial and commercial data sets","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.xcube-viewer-as-a-service-in-edc1","title":"Visualizing data with xcube viewer in EuroDataCube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-evaluation-workshop","title":"DAPA Evaluation Workshop: Introduction \u0026 Documentation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-1-cube-sentinel-2","title":"DAPA Tutorial #1: Cube - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-2-area-sentinel-2","title":"DAPA Tutorial #2: Area - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-3-timeseries-sentinel-2","title":"DAPA Tutorial #3: Timeseries - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-4-value-sentinel-2","title":"DAPA Tutorial #4: Value - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-5-dem","title":"DAPA Tutorial #5: DEM","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.fairicube.fairicube-data-access-demonstration","title":"EDC Sentinel Hub - data access using xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-australian-bushfires","title":"Australian Bushfires","description":"","date":"","thumbnail":"/notebooks_test/build/ab194b4f8c40a2b9d64d8a85e37ce1fd.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["IGARSS-22","EO Dashboard"],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-data-access","title":"Data Access","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-detect-trucks-sentinel2","title":"Truck Detection Exercise","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-lockdown-in-venice","title":"Environmental Impacts of Lockdown in Venice, Italy during 2020","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-nasa-api-lockdown-in-venice","title":"Lockdown in Venice","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-no2-timeseries-analysis","title":"NO2 timeseries analysis","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-timeseries-stac-api-single-vs-multi","title":"Time series using STAC API statistics endpoints","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"Curated","level":5},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.access-iacs-data","title":"How to access IACS Spatial Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-access-cci-data","title":"Access CCI data with xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-first-steps","title":"First steps on the Euro Data Cube platform","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-1-manage-datasets-v11","title":"Manage Collections in your GeoDB","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-2-explore-datasets-2","title":"Exploring Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-3-share-datasets1","title":"Sharing Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-access-urban-atlas-data-v1","title":"[xcube-geodb] How to accesss EEA Urban Atlas Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-data-access","title":"EDC Sentinel Hub - data access using xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinelhub-datafusion-basic","title":"EDC Sentinel Hub: Data Fusion","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinelhub-datafusion-ndvi","title":"EDC Sentinel Hub: Data Fusion","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-datasets","title":"EDC Sentinel Hub - using xcube to access different data sets in Sentinel Hub","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-setup","title":"Setup for EDC core API access using xcube client library","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-xcube-integration","title":"EDC Sentinel Hub - XCUBE integration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-usecase-ndvi-timeline","title":"NDVI timeline","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.eo-learn","title":"Using eo-learn in EDC: a starter’s guide.","description":"","date":"","thumbnail":"/notebooks_test/build/5a1f8475f0c3652f4630d03d72891b98.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.esdl-edc-v0-2","title":"Earth System Data Lab Tutorial @ Euro Data Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.exploring-time-and-space-with-edc","title":"Exploring Time and Space: A guide to accessing, analysing and visualising data in the Euro Data Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.how-to-access-dem-data-through-sentinel-hub-api","title":"How to access DEM data through Sentinel Hub API","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.sentinelhub-py","title":"Using Sentinel Hub Process API in EDC: a starter’s guide.","description":"","date":"","thumbnail":"/notebooks_test/build/01e22903839391bc356ac886ec2b2fa7.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"Notebooks","level":1},{"slug":"notebooks.example1","title":"📘 Example Notebook 1","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.example2","title":"📘 Example Notebook 2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/notebooks_test/build/manifest-B4831781.js";
import * as route0 from "/notebooks_test/build/root-QGLRP2PL.js";
import * as route1 from "/notebooks_test/build/routes/$-7JYT5576.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/notebooks_test/build/entry.client-UNPC4GT3.js");</script></body></html>