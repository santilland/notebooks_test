<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Living Planet Symposium 2022 Training Session - Location for eodashboard notebooks</title><meta property="og:title" content="Living Planet Symposium 2022 Training Session - Location for eodashboard notebooks"/><meta name="generator" content="mystmd"/><meta name="keywords" content=""/><link rel="stylesheet" href="/notebooks_test/build/_assets/app-HG4THSM4.css"/><link rel="stylesheet" href="/notebooks_test/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/notebooks_test/favicon.ico"/><link rel="stylesheet" href="/notebooks_test/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="block px-2 py-1 text-black underline">Skip to article content</a></div><div class="bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><a class="flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/notebooks_test/"><span class="text-md sm:text-xl tracking-tight sm:mr-5">Made with MyST</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R3iop:" data-state="closed" class="flex items-center h-10 aspect-square sm:w-64 text-left text-gray-400 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="hidden sm:block grow">Search</span><div aria-hidden="true" class="items-center hidden mx-1 font-mono text-sm text-gray-400 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-8 h-8 mx-3" title="Toggle theme between light and dark mode." aria-label="Toggle theme between light and dark mode."><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><article class="article content article-grid grid-gap"><main class="article-grid subgrid-gap col-screen"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="mb-8 pt-9"><div class="flex items-center h-6 mb-5 text-sm font-light"><div class="flex-grow"></div><a href="https://github.com/eoxhub-workspaces/documentation/" title="GitHub Repository: eoxhub-workspaces/documentation/" target="_blank" rel="noopener noreferrer" class="text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a><div class="inline-block mr-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="inline-block"><title>Jupyter Notebook</title><path d="M20.2 1.7c0 .8-.5 1.4-1.3 1.5-.8 0-1.4-.5-1.5-1.3 0-.8.5-1.4 1.3-1.5.8-.1 1.5.5 1.5 1.3zM12 17.9c-3.7 0-7-1.3-8.7-3.3 1.8 4.8 7.1 7.3 11.9 5.5 2.5-.9 4.5-2.9 5.5-5.5-1.7 2-4.9 3.3-8.7 3.3zM12 5.1c3.7 0 7 1.3 8.7 3.3-1.8-4.8-7.1-7.3-11.9-5.5-2.5.9-4.5 2.9-5.5 5.5 1.7-2 5-3.3 8.7-3.3zM6.9 21.8c.1 1-.7 1.8-1.7 1.9-1 .1-1.8-.7-1.9-1.7 0-1 .7-1.8 1.7-1.9 1-.1 1.8.7 1.9 1.7zM3.7 4.6c-.6 0-1-.4-1-1s.4-1 1-1 1 .4 1 1c0 .5-.4 1-1 1z"></path></svg></div><div class="relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="relative ml-2 -mr-1" id="headlessui-menu-button-:Rd4fop:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="mb-0">Living Planet Symposium 2022 Training Session</h1></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><div id="a6bR29mx9M" class="relative group/block"><h2 id="living-planet-symposium-2022-training-session" class="relative group"><span class="heading-text">Living Planet Symposium 2022 Training Session</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#living-planet-symposium-2022-training-session" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><h1 id="leverage-euro-data-cube-services-for-accessing-analysing-and-visualising-eo-data" class="relative group"><span class="heading-text">Leverage Euro Data Cube services for accessing, analysing and visualising EO data</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#leverage-euro-data-cube-services-for-accessing-analysing-and-visualising-eo-data" title="Link to this Section" aria-label="Link to this Section">¶</a></h1><hr class="py-2 my-5 translate-y-2"/><p><strong>Original JN:</strong> <em>Exploring Time and Space: A guide to accessing, analysing and visualising data in the Euro Data Cube</em></p><p><strong>Author original JN:</strong> <em>William Ray</em></p><p><strong>Edited and extended by:</strong> <em>Alicja Balfanz</em> &amp; <em>Max Kampen</em></p><h2 id="getting-started-with-edc" class="relative group"><span class="heading-text">Getting started with EDC</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#getting-started-with-edc" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>In this demonstration Jupyter Notebook, we will be visualising and analysing a flooding event using Sentinel data to demonstrate how you can use EDC for your own applications. Much of what we we will focus on can be used for many other applications and use cases.</p><p>We are going to use EDC with its associated libaries and APIs to do this. In this notebook we will learn how to:</p><ul><li>Build a data cube</li><li>Create a new variable</li><li>Visualise a variable of your data cube</li><li>Create a new variable using a threshold</li><li>Visualise a spatial subset of a variable over time</li><li>Create a new variable based upon space and time</li></ul></div><div id="Ui40E25NU0" class="relative group/block"><h2 id="configuration" class="relative group"><span class="heading-text">Configuration</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#configuration" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Before acccessing the data, we will start by importing the necessary Python libraries (already configured in your EDC workspace), and fetch pre-generated credentials as environment variables to access the services.</p></div><div id="ovkZvVhzKj" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Check compatibility and import environment credentials
from edc import check_compatibility
check_compatibility(&quot;user-2023.03-02&quot;, dependencies=[&quot;GEODB&quot;, &quot;SH&quot;])

# EDC libraries
from xcube_sh.config import CubeConfig
from xcube_sh.cube import open_cube
from xcube_sh.sentinelhub import SentinelHub
from xcube.core.geom import mask_dataset_by_geometry

# Sentinel Hub
from sentinelhub import BBox

# Utilities
import IPython.display
import matplotlib.pyplot as plt
import datetime as dt
import rioxarray
import shapely

# Numerical computation
import xarray as xr
import numpy as np</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="kAXi60xRbrt9KQ50F7T-V" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="B9QjFwX58u" class="relative group/block"><h2 id="define-an-aoi" class="relative group"><span class="heading-text">Define an AOI</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#define-an-aoi" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Next, we will define our area of interest using a bounding box. For our example we will use WGS84 coordinates to build the data cube. We have chosen an AOI that covers Madagascar’s capital city Antananarivo and surrounding regions. In early 2022, the east coast of Madagascar was impacted by two different tropical weather systems, which caused heavy rainfall and flooding in the country’s capital and Analamanga region (<a target="_blank" rel="noreferrer" href="https://reliefweb.int/report/madagascar/madagascar-rainy-and-cyclone-season-flash-update-no1-24-january-2022" class="">source</a>). Across Madagascar, the heavy rainfall persisted throughout January and February, when the moderate tropical storm <em>Ana</em> and the tropical cyclone <em>Batsirai</em> made landfall in January and Februrary respectively (<a target="_blank" rel="noreferrer" href="https://www.worldweatherattribution.org/climate-change-increased-rainfall-associated-with-tropical-cyclones-hitting-highly-vulnerable-communities-in-madagascar-mozambique-malawi/" class="">source</a>).</p></div><div id="wbkyELeAvD" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Bbox
Antananarivo_bbox = [47.221985, -19.129599, 47.671051, -18.659257]

# Bbox EPSG
bbox_epsg = 4326</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="9I_huuB2JcXhjARx_naFB" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="NaViZSNLGX" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Plot the bounding box on a map
IPython.display.GeoJSON(BBox(Antananarivo_bbox,crs=bbox_epsg).get_geojson())</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="-g69ooMv-jJn6g5F1UBaw" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="qf3ojAoMSA" class="relative group/block"><h2 id="how-to-build-a-data-cube" class="relative group"><span class="heading-text">How to build a data cube</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#how-to-build-a-data-cube" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Firstly, we will go through the required steps to build a data cube.</p><p>We are going to visualise the flooding events using Sentinel-2 imagery. The Sentinel-2 system (consisting of two twin satellites) is part of the Copernicus programme and collects multispectral data globally with a revisit time of 5 days. The satellite’s multispectral imager acquires data in 13 spectral bands spanning from the visible and near infrared to shortwave infrared.</p><h3 id="check-available-sentinel-2-l2a-bands" class="relative group"><span class="heading-text">Check available Sentinel-2 L2A bands</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#check-available-sentinel-2-l2a-bands" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Using EDC inbuilt functions that query Sentinel Hub services, we can easily list the available bands for a given dataset to help us build the cube!</p></div><div id="I5VR43dKP1" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Create a Sentinel Hub class
SH = SentinelHub()

# List bands for S2-L2A
SH.band_names(&#x27;S2L2A&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="I1rvOR_8VdJRwxZfM7YDq" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>[&#x27;B01&#x27;,
 &#x27;B02&#x27;,
 &#x27;B03&#x27;,
 &#x27;B04&#x27;,
 &#x27;B05&#x27;,
 &#x27;B06&#x27;,
 &#x27;B07&#x27;,
 &#x27;B08&#x27;,
 &#x27;B8A&#x27;,
 &#x27;B09&#x27;,
 &#x27;B11&#x27;,
 &#x27;B12&#x27;,
 &#x27;SCL&#x27;,
 &#x27;SNW&#x27;,
 &#x27;CLD&#x27;,
 &#x27;viewZenithMean&#x27;,
 &#x27;viewAzimuthMean&#x27;,
 &#x27;sunZenithAngles&#x27;,
 &#x27;sunAzimuthAngles&#x27;,
 &#x27;AOT&#x27;,
 &#x27;CLM&#x27;,
 &#x27;CLP&#x27;]</span></code></div></div></div><div id="aC2M4YFG5o" class="relative group/block"><h3 id="build-an-xcube" class="relative group"><span class="heading-text">Build an xcube</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#build-an-xcube" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>In the following cell we will specify the input parameters needed to build an xcube array. The following parameters are specified:</p><ul><li><p><em>dataset_name</em>: the Sentinel Hub identification of the dataset. Here we will call <code>S2L2A</code> for Sentinel-2 L2A. All available datasets can be listed with <code>SH.dataset_names</code></p></li><li><p><em>band_names</em>: the band names to be used in the xcube array (see previous code cell). Here, we will call the B02, B03, B04, B08, CLM (Blue, Green, Red &amp; NIR, Cloud Mask) bands.</p></li><li><p><em>bbox</em>: the bounding box that sets the extent of the AOI. Because we are using the default WGS84 coordinate system here, the CRS parameter doesn’t need to be set.</p></li><li><p><em>spatial_res</em>: the spatial resolution of the rasters contained in the xcube array. The spatial resolution is expressed in the units of the coordinate system used. Therefore, in this example, the spatial resolution is set in degrees. For an approximate pixel size of 30 meters, we set the resolution to 0.00045 degrees.</p></li><li><p><em>time_range</em>: a list of two dates [start_date, end_date] forming a time period for which all acquisitions will be returned. Sentinel-2 L2A data is available from October 2016 onwards. In this example, we will fetch data for January 2022 through March 2022.</p></li><li><p><em>time_tolerance</em>: The tolerance used to identify whether a dataset should still be included within a time period. Here, <code>30M</code> corresponds to 30 minutes, thus avoiding duplicate datasets.</p></li></ul><p><em>Note: the <code>return _coerce_scalar_to_timedelta_type(arg, unit=unit, errors=errors)</code> warning can be safely ignored.</em></p></div><div id="XGbCDAqmkV" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Setup xcube
s2_cube_config = CubeConfig(dataset_name=&#x27;S2L2A&#x27;,
                            band_names=[&#x27;B02&#x27;, &#x27;B03&#x27;, &#x27;B04&#x27;, &#x27;B08&#x27;, &#x27;CLM&#x27;],
                            bbox=Antananarivo_bbox,
                            spatial_res=0.00045,
                            time_range=[&#x27;2022-01-01&#x27;, &#x27;2022-04-01&#x27;],
                            time_tolerance=&#x27;30M&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="-vAFp06pSTXU_M5wKy3qJ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/xcube_sh/config.py:248: FutureWarning: Units &#x27;M&#x27;, &#x27;Y&#x27; and &#x27;y&#x27; do not represent unambiguous timedelta values and will be removed in a future version.
  time_tolerance = pd.to_timedelta(time_tolerance)
</span></code></pre></div></div></div><div id="ijEFYivzl3" class="relative group/block"><h3 id="open-the-xcube" class="relative group"><span class="heading-text">Open the xcube</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#open-the-xcube" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>In the following cell we open the cube and display its contents. It’s important to note that at this stage, we’re not processing anything, but generate a cube on the fly with data ready to be called when needed for analysis.</p><p>Once you open the cube, you can visualise the contents. For example, you can view the number of timestamps as a list in the Coordinates tab. You can also visualise the seperate variables, with information on their size and data type.</p></div><div id="nt08pZ6m6D" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Open cube (on the fly)
s2_cube = open_cube(s2_cube_config)

# Display contents
s2_cube</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="TyEwQhBhvBi2PJDaOjDv7" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="vhKCpwqruw" class="relative group/block"><h3 id="create-a-new-variable" class="relative group"><span class="heading-text">Create a new variable</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#create-a-new-variable" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>A great way to visualise the extent of surface water with multispectral data at hand, is to use the Normalised Difference Water Index (NDWI). We can calculate the index with the Green and NIR bands as stated below, and add it to the data cube as a new variable.</p><p>NDWI = Green - NIR / Green + NIR</p><p>For this, we are going to create a new variable in the next cell. To create the new variable we are using two existing variables defined as s2.cube.B03 and s2_cube.B08. We then insert these variables into an index formula to calculate our <code>ndwi</code> variable. To integrate the new varibale into our data cube, we first need to define a new empty data cube attribute, provided with a name and associated units, before assigning the calculated <code>ndwi</code> variable to it. Feel free to call <code>s2_cube</code> again to check the newly added variable that can now be called from the data cube.</p></div><div id="zz4RcAKL3z" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Define NDWI in visualisation
ndwi = ((s2_cube.B03-s2_cube.B08)/(s2_cube.B03+s2_cube.B08))

ndwi.attrs[&#x27;long_name&#x27;] = &#x27;NDWI&#x27;
ndwi.attrs[&#x27;units&#x27;] =&#x27;unitless&#x27;

s2_cube[&#x27;NDWI&#x27;] = ndwi
s2_cube</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="lSbXdK6-8UPT14Jel55OM" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="eGnc5QiCgf" class="relative group/block"><h2 id="how-to-visualise-your-datacube" class="relative group"><span class="heading-text">How to visualise your datacube</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#how-to-visualise-your-datacube" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><h3 id="visualise-variables" class="relative group"><span class="heading-text">Visualise variables</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#visualise-variables" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>We are going to visualise a True Color image and the NDWI image in the same plot. For the True Color image, we select the Blue, Green and RED bands for one timstamp in the data cube in order to create a multiband RGB image stack. For visualisation purposes, we will multiply the reflectance values by 3 to brighten the image a little. We also fetch the NDWI variable for the exact same date for a side-by-side comparison.</p></div><div id="m1VREplkkV" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Select timestamp
t = &#x27;2022-01-30 07:00:00&#x27;

# Select the bands and stack them.
Red = s2_cube.B04.sel(time=t, method=&#x27;nearest&#x27;)
Green = s2_cube.B03.sel(time=t, method=&#x27;nearest&#x27;)
Blue = s2_cube.B02.sel(time=t, method=&#x27;nearest&#x27;)

rgb = np.dstack((Red,Green,Blue)) #Stack the three arrays

ndwi = s2_cube.NDWI.sel(time=t, method=&#x27;nearest&#x27;)

# Plot 
f = plt.figure(figsize=[18, 16])
f.add_subplot(1, 2, 1)
plt.title(f&quot;True Color: {str(s2_cube.time.sel(time=t, method=&#x27;nearest&#x27;).data).split(&#x27;T&#x27;)[0]}&quot;)
plt.imshow(3 * rgb)  # We multiply the rgb by 3 to make the image brighter
f.add_subplot(1, 2, 2)
plt.title(f&quot;NDWI: {str(s2_cube.time.sel(time=t, method=&#x27;nearest&#x27;).data).split(&#x27;T&#x27;)[0]}&quot;)
plt.imshow(ndwi, vmin=-1, vmax=1, cmap=&#x27;GnBu&#x27;)
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="5TUDKn-zGFwY5Tgi3lb5A" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>Clipping input data to the valid range for imshow with RGB data ([0..1] for floats or [0..255] for integers).
</span></code></pre></div><img src="/notebooks_test/build/1f4965e2e729a29c6251cbf6538ed7ee.png" alt="&lt;Figure size 1800x1600 with 2 Axes&gt;"/></div></div><div id="Hw2OAAWEim" class="relative group/block"><h3 id="visualise-multiple-timestamps" class="relative group"><span class="heading-text">Visualise multiple timestamps</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#visualise-multiple-timestamps" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>We would like to get a better idea of the course of events and examine how the two storm weather systems affected the area. The flooding events we are trying to monitor happened in the middle of the Southwest Indian Ocean cyclone season, which approximately lasts from November until April. In order to check how many suitable Sentinel-2 acquisitions we have at hand, we will take a look at multiple timestamps from the data cube.</p></div><div id="O08x7tmlrd" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Select timestamps
ndwi1 = s2_cube.NDWI.sel(time=&#x27;2022-01-05 07:00:00&#x27;, method=&#x27;nearest&#x27;)
ndwi2 = s2_cube.NDWI.sel(time=&#x27;2022-01-15 07:00:00&#x27;, method=&#x27;nearest&#x27;)
ndwi3 = s2_cube.NDWI.sel(time=&#x27;2022-01-30 07:00:00&#x27;, method=&#x27;nearest&#x27;)
ndwi4 = s2_cube.NDWI.sel(time=&#x27;2022-02-09 07:00:00&#x27;, method=&#x27;nearest&#x27;)
ndwi5 = s2_cube.NDWI.sel(time=&#x27;2022-02-24 07:00:00&#x27;, method=&#x27;nearest&#x27;)
ndwi6 = s2_cube.NDWI.sel(time=&#x27;2022-03-06 07:00:00&#x27;, method=&#x27;nearest&#x27;)
ndwi7 = s2_cube.NDWI.sel(time=&#x27;2022-03-16 07:00:00&#x27;, method=&#x27;nearest&#x27;)
ndwi8 = s2_cube.NDWI.sel(time=&#x27;2022-03-31 07:00:00&#x27;, method=&#x27;nearest&#x27;)

# Plot 
f = plt.figure(figsize=[16, 18])
ax1 = f.add_subplot(3, 3, 1)
ax2 = f.add_subplot(3, 3, 2)
ax3 = f.add_subplot(3, 3, 3)
ax4 = f.add_subplot(3, 3, 4)
ax5 = f.add_subplot(3, 3, 5)
ax6 = f.add_subplot(3, 3, 6)
ax7 = f.add_subplot(3, 3, 7)
ax8 = f.add_subplot(3, 3, 8)

axlist = [ax1, ax2, ax3, ax4, ax5, ax6, ax7, ax8]

t = ndwi1.plot.imshow(ax=ax1, vmin=-1, vmax=1, cmap=&#x27;GnBu&#x27;, add_colorbar=False)
ndwi2.plot.imshow(ax=ax2, vmin=-1, vmax=1, cmap=&#x27;GnBu&#x27;, add_colorbar=False)
ndwi3.plot.imshow(ax=ax3, vmin=-1, vmax=1, cmap=&#x27;GnBu&#x27;, add_colorbar=False)
ndwi4.plot.imshow(ax=ax4, vmin=-1, vmax=1, cmap=&#x27;GnBu&#x27;, add_colorbar=False)
ndwi5.plot.imshow(ax=ax5, vmin=-1, vmax=1, cmap=&#x27;GnBu&#x27;, add_colorbar=False)
ndwi6.plot.imshow(ax=ax6, vmin=-1, vmax=1, cmap=&#x27;GnBu&#x27;, add_colorbar=False)
ndwi7.plot.imshow(ax=ax7, vmin=-1, vmax=1, cmap=&#x27;GnBu&#x27;, add_colorbar=False)
ndwi8.plot.imshow(ax=ax8, vmin=-1, vmax=1, cmap=&#x27;GnBu&#x27;, add_colorbar=False)

cbar_ax = f.add_axes([1, 0.15, 0.05, 0.7])
f.colorbar(t, cax=cbar_ax, label=&quot;NDWI&quot;)

plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="wikDLR2IUWtPm1S_uXKA2" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><img src="/notebooks_test/build/3fd1cf950f1072b15c40ba8f86afc695.png" alt="&lt;Figure size 1600x1800 with 9 Axes&gt;"/></div></div><div id="UFjsYMdXD7" class="relative group/block"><p>Unsurprisingly, the weather conditions during storm season are not suitable for Earth monitoring with optical imagery. Of the eight dates we have requested, only one, the acquisition from 30th January, is not completely overcast and the remaining ones are unusable. Fortunately, we can resort to using Sentinel-1 GRD radar data, which is unimpeded by weather conditions and should provide a better picture of the course of events.</p><hr class="py-2 my-5 translate-y-2"/></div><div id="oPNRuqg6I8" class="relative group/block"><h2 id="buildind-a-sentinel-1-data-cube" class="relative group"><span class="heading-text">Buildind a Sentinel-1 data cube</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#buildind-a-sentinel-1-data-cube" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>The Sentinel-1 satellite system is also part of the Copernicus programme and collects data globally with a revisit time of 5 days when both twin satellites are active. Unfortunately, the recent failure of Sentinel-1B leaves us with longer revisit times (<a target="_blank" rel="noreferrer" href="https://scihub.copernicus.eu/news/News01026" class="">source</a>). In contrast to Sentinel-2, Sentinel-1 SAR is an active sensor that sends SAR signals and records the backscatter. Due to the wavelengths used, SAR is not hindered by clouds and can be operated day and night.</p></div><div id="SHDG6Svv6K" class="relative group/block"><h3 id="check-sentinel-1-grd-available-bands" class="relative group"><span class="heading-text">Check Sentinel-1 GRD available bands</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#check-sentinel-1-grd-available-bands" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Using EDC inbuilt functions that query Sentinel Hub services, we can easily list the available bands for a given dataset.</p></div><div id="PkJZ78rsOk" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># List bands for S1-GRD
SH.band_names(&#x27;S1GRD&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="pugEWFKFZVy2CxYrFN-xT" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>[&#x27;VV&#x27;, &#x27;HH&#x27;, &#x27;VH&#x27;, &#x27;localIncidenceAngle&#x27;, &#x27;scatteringArea&#x27;, &#x27;shadowMask&#x27;, &#x27;HV&#x27;]</span></code></div></div></div><div id="UJ2bLCSlBx" class="relative group/block"><h3 id="build-the-s-1-grd-xcube" class="relative group"><span class="heading-text">Build the S-1 GRD xcube</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#build-the-s-1-grd-xcube" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>In the following cell we will specify the input parameters needed to build an xcube array. The following parameters are specified:</p><ul><li><p><em>dataset_name</em>: the Sentinel Hub identification of the dataset. Here we will call <code>S1GRD</code> for Sentinel-1 GRD. All available datasets can be listed with <code>SH.dataset_names</code></p></li><li><p><em>band_names</em>: the band names to be used in the xcube array (see previous code cell). Here, we will call just the VV polarisation band.</p></li><li><p><em>bbox</em>: the bounding box that sets the extent of the AOI. Because we are using the default WGS84 coordinate system here, the CRS parameter doesn’t need to be set.</p></li><li><p><em>spatial_res</em>: the spatial resolution of the rasters contained in the xcube array. The spatial resolution is expressed in the units of the coordinate system used. Therefore, in this example, the spatial resolution is set in degrees. For an approximate pixel size of 30 meters, we set the resolution to 0.00045 degrees.</p></li><li><p><em>time_range</em>: a list of two dates [start_date, end_date] forming a time period for which all acquisitions will be returned. Sentinel-1 GRD data is available from February 2015 onwards. In this example, we will fetch data for January 2022 through March 2022.</p></li><li><p><em>time_tolerance</em>: The tolerance used to identify whether a dataset should still be included within a time period. Here, <code>30M</code> corresponds to 30 minutes, thus avoiding duplicate datasets.</p></li></ul><p><em>Note: the <code>return _coerce_scalar_to_timedelta_type(arg, unit=unit, errors=errors)</code> warning can be safely ignored.</em></p></div><div id="HvU5ixMrd7" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Setup xcube
s1_cube_config = CubeConfig(dataset_name=&#x27;S1GRD&#x27;,
                            band_names=[&#x27;VV&#x27;],
                            bbox=Antananarivo_bbox,
                            spatial_res=0.00045,
                            time_range=[&#x27;2022-01-01&#x27;, &#x27;2022-04-01&#x27;],
                            time_tolerance=&#x27;30M&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="Y6uWFS4jlvZOaNqbw26kj" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/xcube_sh/config.py:248: FutureWarning: Units &#x27;M&#x27;, &#x27;Y&#x27; and &#x27;y&#x27; do not represent unambiguous timedelta values and will be removed in a future version.
  time_tolerance = pd.to_timedelta(time_tolerance)
</span></code></pre></div></div></div><div id="KvdTORAHIz" class="relative group/block"><h3 id="open-the-xcube-1" class="relative group"><span class="heading-text">Open the xcube</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#open-the-xcube-1" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>In the following cell we pass the configurated cube to the open cube command to open the cube and display its contents.</p></div><div id="iyVl2fvN9l" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Open cube (on the fly)
s1_cube = open_cube(s1_cube_config)

# Display contents
s1_cube</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="4Ixmir4aJojVjyqn1A4ZY" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="awKHZIOyts" class="relative group/block"><h3 id="visualising-the-flooded-areas-using-sar" class="relative group"><span class="heading-text">Visualising the flooded areas using SAR</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#visualising-the-flooded-areas-using-sar" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Firstly, we need to generate a new variable. For Sentinel-1 data, the values are returned in linear power. For a more convenient analysis we will convert the values to decibels. This is done by mutiplying the log10 of each pixel value by 10. Secondly, as there will be pixels with a value of -inf after this operation, we need to account for this with the second function that will automatically assign 0 to these pixels.</p></div><div id="qvji6REjKx" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Convert VV Digital numbers to Decibels
vv_dn = s1_cube.VV
vv_db = 10 * (np.log10(vv_dn))

vv_db = vv_db.where(np.isfinite(vv_db), 0)

vv_db.attrs[&#x27;long_name&#x27;] = &#x27;VV_dB&#x27;
vv_db.attrs[&#x27;units&#x27;] = &#x27;decibels&#x27;

s1_cube[&#x27;VV_dB&#x27;] = vv_db</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="l4Oy6hzHtCbVljZPkl151" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="aHHD3jqKUP" class="relative group/block"><p>From the news and our previous visualisation of Sentinel-2 data, we know that there was significant surface water flooding in January and February 2022. Let’s visualise one of the acquisitions from the end of January, when the tropical storm <em>Ana</em> brought heavy rainfall to the area. Here, we select the closest acquisition to 25th January 2022 and plot the calculated <code>VV_dB</code> variable for our region of interest.</p></div><div id="sTdCumVJv6" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># select and define the timestamp you want to visualise 
VV_dB_timestamp = s1_cube.VV_dB.sel(time=&#x27;2022-01-25 07:00:00&#x27;, method=&#x27;nearest&#x27;)

# plot the timestamp
VV_dB_timestamp.plot.imshow(vmin=-40, vmax=0, cmap=&#x27;winter&#x27;, figsize=(10, 10))

# save and display the plot
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="KZYQiKPBDBCuSEuZjk9Es" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/dask/core.py:119: RuntimeWarning: divide by zero encountered in log10
  return func(*(_execute_task(a, cache) for a in args))
</span></code></pre></div><img src="/notebooks_test/build/3e6cc842aa27c15cc96ad723e24db917.png" alt="&lt;Figure size 1000x1000 with 2 Axes&gt;"/></div></div><div id="W1Rymc4zuC" class="relative group/block"><p>On this Sentinel-1 acquisition from 27th January, we can clearly see the extent of flooded areas in darker blue colour. The visualisation already looks fairly well defined, so let’s plot multiple timestamps to confirm that this is a good variable for generating subsequent products like flood masks.</p></div><div id="j0pcw2AlDH" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">#### Timestamp selection
vv1 = s1_cube.VV_dB.sel(time=&#x27;2022-01-03 07:00:00&#x27;, method=&#x27;nearest&#x27;)
vv2 = s1_cube.VV_dB.sel(time=&#x27;2022-01-15 07:00:00&#x27;, method=&#x27;nearest&#x27;)
vv3 = s1_cube.VV_dB.sel(time=&#x27;2022-01-27 07:00:00&#x27;, method=&#x27;nearest&#x27;)
vv4 = s1_cube.VV_dB.sel(time=&#x27;2022-02-08 07:00:00&#x27;, method=&#x27;nearest&#x27;)
vv5 = s1_cube.VV_dB.sel(time=&#x27;2022-02-20 07:00:00&#x27;, method=&#x27;nearest&#x27;)
vv6 = s1_cube.VV_dB.sel(time=&#x27;2022-03-04 07:00:00&#x27;, method=&#x27;nearest&#x27;)
vv7 = s1_cube.VV_dB.sel(time=&#x27;2022-03-16 07:00:00&#x27;, method=&#x27;nearest&#x27;)
vv8 = s1_cube.VV_dB.sel(time=&#x27;2022-03-28 07:00:00&#x27;, method=&#x27;nearest&#x27;)

# Plot 
f = plt.figure(figsize=[16, 18])
ax1 = f.add_subplot(3, 3, 1)
ax2 = f.add_subplot(3, 3, 2)
ax3 = f.add_subplot(3, 3, 3)
ax4 = f.add_subplot(3, 3, 4)
ax5 = f.add_subplot(3, 3, 5)
ax6 = f.add_subplot(3, 3, 6)
ax7 = f.add_subplot(3, 3, 7)
ax8 = f.add_subplot(3, 3, 8)

axlist = [ax1, ax2, ax3, ax4, ax5, ax6, ax7, ax8]

t = vv1.plot.imshow(ax=ax1, vmin=-40, vmax=0, cmap=&#x27;winter&#x27;, add_colorbar=False)
vv2.plot.imshow(ax=ax2, vmin=-40, vmax=0, cmap=&#x27;winter&#x27;, add_colorbar=False)
vv3.plot.imshow(ax=ax3, vmin=-40, vmax=0, cmap=&#x27;winter&#x27;, add_colorbar=False)
vv4.plot.imshow(ax=ax4, vmin=-40, vmax=0, cmap=&#x27;winter&#x27;, add_colorbar=False)
vv5.plot.imshow(ax=ax5, vmin=-40, vmax=0, cmap=&#x27;winter&#x27;, add_colorbar=False)
vv6.plot.imshow(ax=ax6, vmin=-40, vmax=0, cmap=&#x27;winter&#x27;, add_colorbar=False)
vv7.plot.imshow(ax=ax7, vmin=-40, vmax=0, cmap=&#x27;winter&#x27;, add_colorbar=False)
vv8.plot.imshow(ax=ax8, vmin=-40, vmax=0, cmap=&#x27;winter&#x27;, add_colorbar=False)

cbar_ax = f.add_axes([1, 0.15, 0.05, 0.7])
f.colorbar(t, cax=cbar_ax, label=&quot;VV dB&quot;)

plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="1at8AOncFKKODwj6B25Cu" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><img src="/notebooks_test/build/f19f583ad6d13f6cc5d37444796a88df.png" alt="&lt;Figure size 1600x1800 with 9 Axes&gt;"/></div></div><div id="lxE93xiGLu" class="relative group/block"><p>This gives us a much clearer picture of the spatial and temporal extent of the flooding events in the region. We can make out two flooding peaks in the acquisitons from 27th January and 4th March, which are congruent with the reports on the two storms making landfall.</p><h3 id="creating-a-flood-mask" class="relative group"><span class="heading-text">Creating a flood mask</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#creating-a-flood-mask" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Next, we want to generate a flood mask using a threshold for the <code>VV_dB</code> variable. In VV polarization mode, values below -20 dB are usually surface water. Let’s define different thresholds for a side-by-side comparison in order to find the most suitable value for generating the flood mask.</p></div><div id="KjfWk4VPoi" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">flood_threshold1_step1 = s1_cube.VV_dB.where(s1_cube.VV_dB &gt;= -15, 1)
flood_threshold2_step1 = s1_cube.VV_dB.where(s1_cube.VV_dB &gt;= -18, 1)
flood_threshold3_step1 = s1_cube.VV_dB.where(s1_cube.VV_dB &gt;= -20, 1)

flood_threshold1_step2 = flood_threshold1_step1.where(flood_threshold1_step1 == 1, 0)
flood_threshold2_step2 = flood_threshold2_step1.where(flood_threshold2_step1 == 1, 0)
flood_threshold3_step2 = flood_threshold3_step1.where(flood_threshold3_step1 == 1, 0)

flood_threshold1 = flood_threshold1_step2.sel(time=&#x27;2022-01-27 07:00:00&#x27;, method=&#x27;nearest&#x27;)
flood_threshold2 = flood_threshold2_step2.sel(time=&#x27;2022-01-27 07:00:00&#x27;, method=&#x27;nearest&#x27;)
flood_threshold3 = flood_threshold3_step2.sel(time=&#x27;2022-01-27 07:00:00&#x27;, method=&#x27;nearest&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="cw8NNaDH6iY7g7X7ABnml" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="eU4hEsqaSR" class="relative group/block"><p>Next we will plot the new thresholds we want to test:</p></div><div id="H4mCyU4lCq" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Plot 
f = plt.figure(figsize=[20, 16])
ax1 = f.add_subplot(2, 3, 1)
ax2 = f.add_subplot(2, 3, 2)
ax3 = f.add_subplot(2, 3, 3)

flood_threshold1.plot.imshow(ax=ax1, vmin=0, vmax=1, cmap=&#x27;Blues&#x27;, add_colorbar=False)
flood_threshold2.plot.imshow(ax=ax2, vmin=0, vmax=1, cmap=&#x27;Blues&#x27;, add_colorbar=False)
flood_threshold3.plot.imshow(ax=ax3, vmin=0, vmax=1, cmap=&#x27;Blues&#x27;, add_colorbar=False)

plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="doe9uU9U4_g-jU90PJv_M" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/dask/core.py:119: RuntimeWarning: divide by zero encountered in log10
  return func(*(_execute_task(a, cache) for a in args))
</span></code></pre></div><img src="/notebooks_test/build/d52db9cd8aed2af53f58384be139a058.png" alt="&lt;Figure size 2000x1600 with 3 Axes&gt;"/></div></div><div id="y6ND3ObxFS" class="relative group/block"><p>Changing the threshold by only 2 or 3 dB makes a large difference. If we set a higher threshold, we pick up a lot more false positives. With a lower threshold, we start to create more false negatives and a more fragmented flood extent. Based on the visualisation above, we will use -18 dB as the threshold.</p><p>Let’s add the flood mask variable to our Sentinel-1 data cube. At first glance, the below cell may not make much sense. The definition of variable <code>step1</code> could be interpreted as assigning a value of 1 to pixels that are equal or more than -18 dB. However, what is actually happening is that the <code>.where</code> method preserves all the pixel values of the variable that are below -18 dB and assigns everything else a value of 1. More detailed information on the method can be found in the <a target="_blank" rel="noreferrer" href="https://xarray.pydata.org/en/stable/generated/xarray.DataArray.where.html" class="">respective xarray documentation</a>.</p></div><div id="DjCyDzJ2Yl" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Assign all pixels equal or smaller than -18 a value of 1 and preserve the values of pixels 
step1 = s1_cube.VV_dB.where(s1_cube.VV_dB &gt;= -18, 1)

# Assign all other pixels a value of 0. 
flooded = step1.where(step1 == 1, 0)

flooded.attrs[&#x27;long_name&#x27;] = &#x27;flood_mask&#x27;
flooded.attrs[&#x27;units&#x27;] = &#x27;nounits&#x27;

s1_cube[&#x27;flood_mask&#x27;] = flooded
s1_cube</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="xWc_5GdbhtzqppnhSbeN2" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="XFbXKMJOI8" class="relative group/block"><p>Let’s plot the generated flood mask over multiple timestamps again:</p></div><div id="P0Jd1NRv8Y" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">#### Timestamp selection
fm1 = s1_cube.flood_mask.sel(time=&#x27;2022-01-03 07:00:00&#x27;, method=&#x27;nearest&#x27;)
fm2 = s1_cube.flood_mask.sel(time=&#x27;2022-01-15 07:00:00&#x27;, method=&#x27;nearest&#x27;)
fm3 = s1_cube.flood_mask.sel(time=&#x27;2022-01-27 07:00:00&#x27;, method=&#x27;nearest&#x27;)
fm4 = s1_cube.flood_mask.sel(time=&#x27;2022-02-08 07:00:00&#x27;, method=&#x27;nearest&#x27;)
fm5 = s1_cube.flood_mask.sel(time=&#x27;2022-02-20 07:00:00&#x27;, method=&#x27;nearest&#x27;)
fm6 = s1_cube.flood_mask.sel(time=&#x27;2022-03-04 07:00:00&#x27;, method=&#x27;nearest&#x27;)
fm7 = s1_cube.flood_mask.sel(time=&#x27;2022-03-16 07:00:00&#x27;, method=&#x27;nearest&#x27;)
fm8 = s1_cube.flood_mask.sel(time=&#x27;2022-03-28 07:00:00&#x27;, method=&#x27;nearest&#x27;)

# Plot 
f = plt.figure(figsize=[16, 18])
ax1 = f.add_subplot(3, 3, 1)
ax2 = f.add_subplot(3, 3, 2)
ax3 = f.add_subplot(3, 3, 3)
ax4 = f.add_subplot(3, 3, 4)
ax5 = f.add_subplot(3, 3, 5)
ax6 = f.add_subplot(3, 3, 6)
ax7 = f.add_subplot(3, 3, 7)
ax8 = f.add_subplot(3, 3, 8)

axlist = [ax1, ax2, ax3, ax4, ax5, ax6, ax7, ax8]

t = fm1.plot.imshow(ax=ax1, vmin=0, vmax=1, cmap=&#x27;Blues&#x27;, add_colorbar=False)
fm2.plot.imshow(ax=ax2, vmin=0, vmax=1, cmap=&#x27;Blues&#x27;, add_colorbar=False)
fm3.plot.imshow(ax=ax3, vmin=0, vmax=1, cmap=&#x27;Blues&#x27;, add_colorbar=False)
fm4.plot.imshow(ax=ax4, vmin=0, vmax=1, cmap=&#x27;Blues&#x27;, add_colorbar=False)
fm5.plot.imshow(ax=ax5, vmin=0, vmax=1, cmap=&#x27;Blues&#x27;, add_colorbar=False)
fm6.plot.imshow(ax=ax6, vmin=0, vmax=1, cmap=&#x27;Blues&#x27;, add_colorbar=False)
fm7.plot.imshow(ax=ax7, vmin=0, vmax=1, cmap=&#x27;Blues&#x27;, add_colorbar=False)
fm8.plot.imshow(ax=ax8, vmin=0, vmax=1, cmap=&#x27;Blues&#x27;, add_colorbar=False)

plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="Cd4ADIf6ViAyuvtqXqCjf" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/dask/core.py:119: RuntimeWarning: divide by zero encountered in log10
  return func(*(_execute_task(a, cache) for a in args))
</span></code></pre></div><img src="/notebooks_test/build/1104d027368812c9380ff501d9c6c5ef.png" alt="&lt;Figure size 1600x1800 with 8 Axes&gt;"/></div></div><div id="ooWq5Qupzv" class="relative group/block"><p>Despite the flood mask containing some noise, the chosen threshold looks adequate across time and space. Let’s move on to visualising the data from the temporal point of view.</p><h2 id="how-to-generate-a-time-series-plot-for-a-point" class="relative group"><span class="heading-text">How to generate a time series plot for a point</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#how-to-generate-a-time-series-plot-for-a-point" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>We now have a really good picture of how the flooding evolved over space and time. Following this, we want to monitor a specific point location within the AOI and observe how NDWI and then VV_dB variables in the cubes compare over time. Firstly, we define the point’s coordinates with <code>point_lat</code> and <code>point_lon</code>. These are used as inputs when we select the variables accross all available timestamps with the help of the <code>.to_series()</code> method. It’s at this point too that we use the CLM variable to mask out cloudy areas from the Sentinel 2 acquisitions in the time steps.</p></div><div id="L8NtjDXH9b" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Set latitude and longitude of point to query
point_lat = -18.96377
point_lon = 47.48737</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="BC5hNa-FUZWp7SFigDYDk" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="xNF97LnWRK" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Get timeseries
masked = s2_cube.NDWI.where(s2_cube.CLM == 0)
timeseriesNDWI_masked = masked.sel(lat=point_lat, lon=point_lon, method=&#x27;nearest&#x27;).to_series()
timeseriesNDWI_masked = timeseriesNDWI_masked.where(timeseriesNDWI_masked !=0).dropna()

timeseriesNDWI = s2_cube.NDWI.sel(lat=point_lat, lon=point_lon, method=&#x27;nearest&#x27;).to_series()
timeseriesNDWI = timeseriesNDWI.where(timeseriesNDWI !=0).dropna()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="Z6Dkil32whVEPxBA0S6Fo" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="fMvJgf1je1" class="relative group/block"><h3 id="plot-ndwi-time-series-for-a-given-point-location" class="relative group"><span class="heading-text">Plot NDWI time series for a given point location</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#plot-ndwi-time-series-for-a-given-point-location" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Using matplotlib we can now visualise how NDWI changes over time. In the plot we will plot 2 series, a cloud-masked series in blue, and an unmasked series in grey.</p></div><div id="oXFbTO5ufe" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Plot NDWI timeseries
_, ax = plt.subplots(1, figsize=(15, 6))
ax.plot(timeseriesNDWI, color=&quot;Grey&quot;, marker=&quot;o&quot;, linewidth=0.5, alpha=0.4)
ax.plot(timeseriesNDWI_masked, color=&quot;blue&quot;, linestyle=&quot;none&quot;, marker=&quot;o&quot;, linewidth=0.5)
ax.set_title(f&quot;NDWI timeseries. Latitude: {point_lat}, Longitude: {point_lon}.&quot;)
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="jgWy3ZuDuIv71JVjiztRk" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><img src="/notebooks_test/build/31d408583340a8e97ceff4c76695e631.png" alt="&lt;Figure size 1500x600 with 1 Axes&gt;"/></div></div><div id="hfqSPvsCNU" class="relative group/block"><p>The NDWI time series for Sentinel-2 doesn’t really show us anything significant. There is no farily consistent NDWI value to go from which makes it difficult to establish a point of reference. There are peaks in NDWI at the end of December and the start of February but as was demonstrated earlier cloud cover is a big issue. There are big gaps between non-cloudy acquisitions of over a month in some cases. Let’s plot the same but for the VV polarisation from Sentinel-1.</p><h3 id="plot-vv-db-timeseries-for-a-given-point-location" class="relative group"><span class="heading-text">Plot VV dB timeseries for a given point location</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#plot-vv-db-timeseries-for-a-given-point-location" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>We can now visualise how VV dB changes over time.</p></div><div id="OKWPuWMvY0" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Get timeseries
timeseriesVV_dB = s1_cube.VV_dB.sel(lat=point_lat, lon=point_lon, method=&#x27;nearest&#x27;).to_series()
timeseriesVV_dB = timeseriesVV_dB.where(timeseriesVV_dB !=0).dropna()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="qYh_7taI88hx3LAZG4yt9" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/dask/core.py:119: RuntimeWarning: divide by zero encountered in log10
  return func(*(_execute_task(a, cache) for a in args))
</span></code></pre></div></div></div><div id="eE1uIIlKLC" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Plot VV_dB timeseries
fig, ax = plt.subplots(1, figsize=(12, 6))
ax.plot(timeseriesVV_dB, color=&quot;blue&quot;, marker=&quot;o&quot;, linewidth=0.5)
ax.set_title(f&quot;VV dB timeseries. Latitude: {point_lat}, Longitude: {point_lon}.&quot;)
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="3ik03CJdFJ8XQjASZoDLF" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><img src="/notebooks_test/build/b929f91921092c6bd74aa4f124a28bc4.png" alt="&lt;Figure size 1200x600 with 1 Axes&gt;"/></div></div><div id="XZ2g0NQdcH" class="relative group/block"><p>This is much clearer than the Sentinel 2 time series as we have more observations due to no interference from cloud cover. We have a clear point of reference for what the VV polarisation response is during flood and non flooded time periods with a VV response of -8 to 0 dB when dry and &lt; - dB when flooded. The time series really clearly shows the two flood events at the end of January and February.</p><h3 id="plot-vv-db-timeseries-for-a-given-aoi-polygon" class="relative group"><span class="heading-text">Plot VV dB timeseries for a given AOI polygon</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#plot-vv-db-timeseries-for-a-given-aoi-polygon" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Let’s take this another step further, and generate the time series using a polygon instead of a point. For this we can use for example the administrative regions of Madagaskar, which are included into the geoDB (<a target="_blank" rel="noreferrer" href="https://data.humdata.org/dataset/cod-ab-mdg" class="">source</a>).</p><p>To be able to use data from the geoDB, we need to instantiate a geoDB client.</p></div><div id="VZlQ65NPFe" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">from xcube_geodb.core.geodb import GeoDBClient
geodb = GeoDBClient()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="tJPM6WxXN2EtL3rVSI6kE" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="zauE41Ur4j" class="relative group/block"><p>To see, what geoDB role we have, we can ask who I am. You will see a different id in your workspace.</p></div><div id="gNn8iKQikG" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">geodb.whoami</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="Nh4hdm6Vbh5i10-STt0Qd" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>&#x27;geodb_418dfeac-15f0-4606-9edb-fd9eb722bf04&#x27;</span></code></div></div></div><div id="PMaU3UK34w" class="relative group/block"><p>Different resoulution of administrative boundaries of Madagaskar are in the database called “madagascar_adm_boundaries”. Let’s have a look how many different collections we have:</p></div><div id="ITfM4AZlBK" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">geodb.get_my_collections(database=&quot;madagascar_adm_boundaries&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="NUYSPYsnj96M_w8DHMIc7" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="qknSFYo8Mz" class="relative group/block"><p>Let’s have a look, what is in the adm1 collection:</p></div><div id="Wb52ppn9fs" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">adm1 = geodb.get_collection_pg(&quot;adm1&quot;, database=&quot;madagascar_adm_boundaries&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="t7yNsUEpACYgCJWMzhM0U" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="pSXYQklhZq" class="relative group/block"><p>We want to get a brief idea of the data inside the collection, so we print out the first few lines of the data</p></div><div id="m2CFOz0Cm5" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">adm1.head()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="6kHxhB9uwS8O7dR3kRmWR" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="ynpWllw2C3" class="relative group/block"><p>Sometimes it helps more to see a plot of the data, here we group the regions by the column “old_provin”.</p></div><div id="h9CF1qzafR" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">adm1.plot(column=&quot;old_provin&quot;, figsize=(15,15), cmap = &#x27;jet&#x27;)
</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="DSf5Lo7cDucJicUsSt5Ji" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>&lt;Axes: &gt;</span></code></div><img src="/notebooks_test/build/2d5eb56de07f4ac7f9489ef59762cbe3.png" alt="&lt;Figure size 1500x1500 with 1 Axes&gt;"/></div></div><div id="UYi9ODPQed" class="relative group/block"><p>The data inside collection adm1 is a bit too coarse for our area of interest, let’s see what we find in adm2:</p></div><div id="P9X8Vte9iv" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">adm2 = geodb.get_collection_pg(&quot;adm2&quot;, database=&quot;madagascar_adm_boundaries&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="Mav9d4bqIWRBNTRoxRnzY" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="tATR7D9JTR" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">adm2.head()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="iQqU_XjYsU5awxGBy8ach" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="ToWpYBN5yb" class="relative group/block"><p>We are interested in the administrative region of Antananarivo, which belongs to Analamanga. Here we select only the rows which belong to Analamanga.</p></div><div id="UMXxElhVat" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">adm2_Analamanga = geodb.get_collection(&quot;adm2&quot;, database=&quot;madagascar_adm_boundaries&quot;, query=&#x27;adm1_en=eq.Analamanga&#x27;)
</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="F5gezP735sSf4u0jfWxgv" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="u0ps1OUw9W" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">adm2_Analamanga</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="zUoTI8KhdIEtZGneAFx3I" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="k7ryrTuP50" class="relative group/block"><p>Let’s take a bief look at a plot of our subset:</p></div><div id="q2hID6zmzS" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">adm2_Analamanga.plot(figsize=(15,15), cmap = &#x27;jet&#x27;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="f5JqunRDCFLOUX_O4UguW" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>&lt;Axes: &gt;</span></code></div><img src="/notebooks_test/build/e46001ea76203aaf21a3832ba2aef294.png" alt="&lt;Figure size 1500x1500 with 1 Axes&gt;"/></div></div><div id="TAXbZfaUIs" class="relative group/block"><h3 id="select-regions-to-mask-the-cube" class="relative group"><span class="heading-text">Select regions to mask the cube</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#select-regions-to-mask-the-cube" title="Link to this Section" aria-label="Link to this Section">¶</a></h3></div><div id="msKeHK04XR" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">sub_Analamanga = adm2_Analamanga.loc[(adm2_Analamanga.adm2_en == &quot;Antananarivo Atsimondrano&quot;) |
                                     (adm2_Analamanga.adm2_en == &quot;Antananarivo Avaradrano&quot;) |
                                     (adm2_Analamanga.adm2_en == &quot;Ambohidratrimo&quot;) |
                                     (adm2_Analamanga.adm2_en == &quot;1er Arrondissement&quot;) |
                                     (adm2_Analamanga.adm2_en == &quot;2e Arrondissement&quot;) |
                                     (adm2_Analamanga.adm2_en == &quot;3e Arrondissement&quot;) |
                                     (adm2_Analamanga.adm2_en == &quot;4e Arrondissement&quot;) |
                                     (adm2_Analamanga.adm2_en == &quot;5e Arrondissement&quot;) |
                                     (adm2_Analamanga.adm2_en == &quot;6e Arrondissement&quot;) ]</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="WAaxIj5uWpMUxjt_L1odu" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="udR70gRfCu" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">sub_Analamanga</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="ZtJmTPir2SuceybMf7FHU" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="cA22SrMucT" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">sub_Analamanga.plot(figsize=(15,15), cmap = &#x27;jet&#x27;)
</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="RrdO6PCH9mgtP5m_0m1MG" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>&lt;Axes: &gt;</span></code></div><img src="/notebooks_test/build/61e6f4b7eddec003b798aa3cb2ee7553.png" alt="&lt;Figure size 1500x1500 with 1 Axes&gt;"/></div></div><div id="CT6U2QUsv1" class="relative group/block"><p>Now we have selected only the rows which we are interested in. But they are in seperate geometry objects:</p></div><div id="D89CCziWSa" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">sub_Analamanga.geometry</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="xUYKpJQa3mmG5PaqOcn6S" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div class="font-mono text-sm whitespace-pre-wrap"><code><span>0     POLYGON ((47.50556 -18.89146, 47.50563 -18.891...
1     POLYGON ((47.55842 -18.91178, 47.55857 -18.911...
2     POLYGON ((47.51365 -18.87834, 47.51775 -18.879...
3     POLYGON ((47.50262 -18.91043, 47.50261 -18.910...
4     POLYGON ((47.53500 -18.85464, 47.53518 -18.854...
5     POLYGON ((47.48436 -18.83989, 47.48491 -18.840...
6     POLYGON ((47.61521 -18.71709, 47.61702 -18.717...
7     POLYGON ((47.49982 -18.43546, 47.50490 -18.439...
12    POLYGON ((47.47574 -18.87596, 47.47633 -18.876...
Name: geometry, dtype: geometry</span></code></div></div></div><div id="hXSy4jJbfV" class="relative group/block"><p>Unify the subareas into one area of interest:</p></div><div id="nafB055Sh4" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">Antananarivo_region = shapely.ops.unary_union(geoms=[sub_Analamanga.geometry.iloc[i] for i in range(len(sub_Analamanga.geometry))])</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="fKCCJpUaa3aHVExTA4jCm" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="BrS1pnvqbX" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Plot the polygon on a map

IPython.display.GeoJSON(shapely.geometry.polygon.Polygon(Antananarivo_region).__geo_interface__)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="mf90gnmzh2DVAAIefFLay" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="yy8iLv19Sq" class="relative group/block"><p>Next, let’s mask our dataset by the polygon we have just defined and visualise our ‘masked’ datacube.</p></div><div id="VT6kBjv5ib" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">s1_cube</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="FuDksJqBHVw3b2zXziwzm" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="lcrnidNFnZ" class="relative group/block"><p>Now we take a look at the data which is within our desired administrative boundaries. Therefore we mask the s1_cube:</p></div><div id="xFSK3qllEa" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">water_antananarivo = mask_dataset_by_geometry(s1_cube, geometry=Antananarivo_region)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="tfUtUe3L_StaH1Nip3umd" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="lLYaQCBM9a" class="relative group/block"><p>Let’s visualise our masked data cube using the timestep on 27th January and the VV_dB variable:</p></div><div id="ZnYV5yaDVJ" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">water_antananarivo.VV_dB.isel(time=2).plot.imshow(cmap=&#x27;Greys&#x27;, vmin=-20, vmax=0, figsize=(10, 10))
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="7LmeYRs2LD1zVnTXxvbUu" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/dask/core.py:119: RuntimeWarning: divide by zero encountered in log10
  return func(*(_execute_task(a, cache) for a in args))
</span></code></pre></div><img src="/notebooks_test/build/9245206439cc1049578915b48d46197b.png" alt="&lt;Figure size 1000x1000 with 2 Axes&gt;"/></div></div><div id="R0RVsU3guV" class="relative group/block"><p>OK, this looks good. Now we are going to calculate the mean VV dB polarisation across the area for each time step. Firstly, we want to calculate the mean VV_dB on axis 1 (lat) and 2 (lon). The second function removes any observations with values of 0 (observations that don’t cover our area of interest).</p></div><div id="nlOOs21igM" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># calculate the mean VV dB for each time step
timeseriesVV_dB = water_antananarivo.VV_dB.mean(axis=(1,2), skipna=True)

# remove any observations with no data
timeseriesVV_dB = timeseriesVV_dB.where(timeseriesVV_dB !=0).dropna(&quot;time&quot;)

# return the new data cube chunk
timeseriesVV_dB</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="TNW1o4zecWALENzckQQ9B" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div></div></div><div id="u8EJDlTz8L" class="relative group/block"><p>Next we can plot this new array we have generated. The result is an excellent time series plot showing the two flood events that occured in the time period. We can see the larger picture as this is the mean value over several pixels rather than just a single point like we previously plotted.</p></div><div id="I4mo2WlRO9" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># Plot VV_dB timeseries
fig, ax = plt.subplots(1, figsize=(12, 6))
ax.plot(timeseriesVV_dB.time, timeseriesVV_dB, color=&quot;blue&quot;, marker=&quot;o&quot;, linewidth=0.5)
ax.set_title(&quot;Mean VV dB returned from AOI over 01-01-2022 to 01-05-2022&quot;)
ax.set_xlabel(&#x27;Time&#x27;)
ax.set_ylabel(&#x27;VV dB&#x27;)
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="ptjlwY8x9QiJd34OFc0-n" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/dask/core.py:119: RuntimeWarning: divide by zero encountered in log10
  return func(*(_execute_task(a, cache) for a in args))
/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/dask/core.py:119: RuntimeWarning: divide by zero encountered in log10
  return func(*(_execute_task(a, cache) for a in args))
</span></code></pre></div><img src="/notebooks_test/build/3e179788e04400019cd3f9f1d323072d.png" alt="&lt;Figure size 1200x600 with 1 Axes&gt;"/></div></div><div id="ZIh38zMgHi" class="relative group/block"><p>In the time series plot generated from averaged VV_dB values over the selected region, the two separate flooding events appear appear as one longer period with surface flooding that stretches from mid January to early March 2022.</p></div><div id="biRkGnZ6M8" class="relative group/block"><h2 id="creating-advanced-variables" class="relative group"><span class="heading-text">Creating advanced variables</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#creating-advanced-variables" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><h3 id="mapping-flooding-frequency-across-the-whole-aoi" class="relative group"><span class="heading-text">Mapping flooding frequency across the whole AOI</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#mapping-flooding-frequency-across-the-whole-aoi" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>We can utilise the generated water mask to calculate the flooding frequency proportionate to the overall number of observations. Since the flood mask is a binary layer, we just need to calculate the sum of all flooded observations for each pixel and divide it by the total number (count) of observations.</p></div><div id="yd8vIhvT89" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">flood_sum = s1_cube.flood_mask.sum(dim=&quot;time&quot;)
flood_count = s1_cube.flood_mask.count(dim=&quot;time&quot;)
flood_average = flood_sum / flood_count

flood_average.attrs[&#x27;long_name&#x27;] = &#x27;flood_average&#x27;
flood_average.attrs[&#x27;units&#x27;] = &#x27;nounits&#x27;

s1_cube[&#x27;flood_average&#x27;] = flood_average</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="ek7MVPttVso9txF-LcCNQ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="FcX5DzF2aQ" class="relative group/block"><p>Now let’s plot the flood_average into a plot:</p></div><div id="Tk4vKNQPnX" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">flood_average.plot.imshow(cmap=&#x27;GnBu&#x27;, vmin=0, vmax=0.5, figsize=(10, 10))
plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="DMoiMOH-asz9E4ZdzyEFJ" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><pre class="text-sm font-thin font-system"><code><span>/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/dask/core.py:119: RuntimeWarning: divide by zero encountered in log10
  return func(*(_execute_task(a, cache) for a in args))
</span></code></pre></div><img src="/notebooks_test/build/27f0d4c9fb69d93029fd66d343f67344.png" alt="&lt;Figure size 1000x1000 with 2 Axes&gt;"/></div></div><div id="vkz8qXR3iP" class="relative group/block"><p>For our end product, we have visualised the flood plain extent very clearly here and can also identify some areas that are more susceptible to flooding than others. Added value products like this flood average map enable policy makers to make more informed decisions,</p></div><div id="r9QSVGeCcs" class="relative group/block"><h2 id="export-a-variable-to-geotiff" class="relative group"><span class="heading-text">Export a variable to GeoTiff</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#export-a-variable-to-geotiff" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Finally we will export some of the variables we have generated in this notebook. This is really easy to do and is shown in the next cell:</p></div><div id="vMLshYr1Ef" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># define the timestep you wish to export
timestep = flood_threshold2_step2.sel(time=&#x27;2022-01-27 10:00:00&#x27;, method=&#x27;nearest&#x27;)

# define projection
timestep_wgs84 = timestep.rio.write_crs(&quot;epsg:4326&quot;)

# write to raster
timestep_wgs84.rio.to_raster(&quot;flood_extent_20220127.tif&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="xF836p76GrMenAMB8JUjr" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="MBYJvFccFM" class="relative group/block"><p>Now let’s export the flood_average variable which is even easier to do as we don’t need to select a single timestamp.</p></div><div id="EPZNE5g2IT" class="relative group/block"><div class="flex sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:hidden"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="hidden sticky top-[80px] z-10 opacity-70 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute top-0 -right-[28px] flex md:flex-col"></div></div><div class="relative group not-prose overflow-auto shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 my-5 text-sm border border-l-4 border-l-blue-400 border-gray-200 dark:border-l-blue-400 dark:border-gray-800"><pre class="block p-3 hljs" style="background-color:unset"><code class="language-python" style="white-space:pre"># define projection
flood_average_wgs84 = flood_average.rio.write_crs(&quot;epsg:4326&quot;)

# write to raster
flood_average_wgs84.rio.to_raster(&quot;flood_average.tif&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-mdast-node-id="fFOtO5JlJHugGmpxfUl1Q" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div></div></main></article><script>((a,d)=>{if(!window.history.state||!window.history.state.key){let h=Math.random().toString(32).slice(2);window.history.replaceState({key:h},"")}try{let f=JSON.parse(sessionStorage.getItem(a)||"{}")[d||window.history.state.key];typeof f=="number"&&window.scrollTo(0,f)}catch(h){console.error(h),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/notebooks_test/build/entry.client-UNPC4GT3.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-OCTKKCIL.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-UAI5KRM7.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-2NH4LW52.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-IZFMW3M4.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-HBJK6BW3.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-HYMQ7M2K.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-OHOXABTA.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-CPTH56EW.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-3CVK3PYF.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-J6FHCSRC.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-S4SWV34C.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/notebooks_test/build/root-QGLRP2PL.js"/><link rel="modulepreload" href="/notebooks_test/build/_shared/chunk-CB3BH7WY.js"/><link rel="modulepreload" href="/notebooks_test/build/routes/$-7JYT5576.js"/><script>window.__remixContext = {"url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/lps2022-leverage-euro-data-cube-services","state":{"loaderData":{"root":{"config":{"version":1,"myst":"1.3.25","options":{"hide_toc":true,"hide_footer_links":true,"folders":true},"nav":[],"actions":[],"projects":[{"github":"https://github.com/eoxhub-workspaces/documentation/","id":"5aa0318b-5bc1-41e2-b1d4-053e8b61961b","exports":[],"bibliography":[],"title":"Location for eodashboard notebooks","index":"readme","pages":[{"title":"External Notebooks","level":1},{"title":"Eurodatacube","level":2},{"title":"Notebooks","level":3},{"slug":"external-notebooks.eurodatacube.notebooks.readme","title":"Jupyter notebooks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Notebooks","level":4},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.readme","title":"Euro Data Cube Notebooks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":5},{"title":"Contributions","level":5},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-ai4arctic-sea-ice","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-biomass-forest-observation-sys","title":"AIREO pilot dataset - Biomass (Forest Observation System)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-cap","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-spacenet7","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aot-covid19","title":"Aerosol Optical Thickness (AOT) Anomaly Detection Using Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.batch-zarr-output","title":"Generating Zarr data cubes with Sentinel Hub Batch API","description":"","date":"","thumbnail":"/notebooks_test/build/68dffbf744fa42f4bf3d35e55684984e.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.client-side-processing-using-mass-sh","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.cmems-data-download","title":"Cmems Data Download","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.detect-trucks-sentinel2","title":"Detect Trucks using Sentinel-2 data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.drought-monitoring","title":"Drought impact monitoring platform","description":"","date":"","thumbnail":"/notebooks_test/build/ad5c19782b006f72352ae57794305840.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-africa-cube-africa-custom-contest","title":"Custom Script Contest – Urban Growth in Africa","description":"","date":"","thumbnail":"/notebooks_test/build/e9275f3fe80a704e2f5aa1ec1220e48a.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-byoc-tutorial","title":"How to bring your own data to EDC: Using Sentinel Hub Python package","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-demo-phi-week-v2","title":"xcube-gen and xcube-geodb Hands-On Workshop Φ-Week 2020","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-geodb-4-eurocrops-demo","title":"Demonstration of Eurocrops data use in geoDB","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-notebook-lstm","title":"South Africa Crop Type Classification on Euro Data Cube (EDC)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-usecase-lpis-crop-type-classification","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.eurocrops-crop-classification-example","title":"Crop-classification using Sentinel-2 time-series","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ghsl-urban-delineation","title":"\u003cb\u003eUrban delineation\u003cb\u003e","description":"","date":"","thumbnail":"/notebooks_test/build/7bbf545a5eae1d9ebdb91ae42b261063.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.globalearthmonitor-example","title":"Pre-requisites","description":"","date":"","thumbnail":"/notebooks_test/build/205c1ded6bd59771975a9fbd3753fd3b.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.gpu-support-eoxhub","title":"GPU-Support on EOxHub","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.gran-chaco-phiweek","title":"ESA EO \\phi- week 2020","description":"","date":"","thumbnail":"/notebooks_test/build/80cee7db6cdc7002ceedda5689f889fa.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.howtolulc-batch-updated-210621","title":"How To: Land-Use-Land-Cover Prediction for Slovenia - using the Batch Processing API","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.lpis-lulc-slo","title":"LPIS Use Case for Land Use / Land Cover Classification","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.lps2022-leverage-euro-data-cube-services","title":"Living Planet Symposium 2022 Training Session","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.no2-analysis-covid19-lockdowns","title":"Impact of Covid19 induced lockdown on NO2 levels","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.no2-so2-trend-veda-api-igarss-2023","title":"Using the NASA VEDA EOAPI","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ogc-edc","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.openeo-client-demo","title":"openEO Client Demo","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.race-finishedgoodsinventory-inidcator","title":"Finished Goods Inventory indicator for RACE","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.third-party-planetscope","title":"Third Party Data Import - PlanetScope","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.xcube-access-datasets","title":"Using xcube to access non-commercial and commercial data sets","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.xcube-viewer-as-a-service-in-edc1","title":"Visualizing data with xcube viewer in EuroDataCube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-evaluation-workshop","title":"DAPA Evaluation Workshop: Introduction \u0026 Documentation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-1-cube-sentinel-2","title":"DAPA Tutorial #1: Cube - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-2-area-sentinel-2","title":"DAPA Tutorial #2: Area - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-3-timeseries-sentinel-2","title":"DAPA Tutorial #3: Timeseries - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-4-value-sentinel-2","title":"DAPA Tutorial #4: Value - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-5-dem","title":"DAPA Tutorial #5: DEM","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.fairicube.fairicube-data-access-demonstration","title":"EDC Sentinel Hub - data access using xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-australian-bushfires","title":"Australian Bushfires","description":"","date":"","thumbnail":"/notebooks_test/build/ab194b4f8c40a2b9d64d8a85e37ce1fd.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["IGARSS-22","EO Dashboard"],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-data-access","title":"Data Access","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-detect-trucks-sentinel2","title":"Truck Detection Exercise","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-lockdown-in-venice","title":"Environmental Impacts of Lockdown in Venice, Italy during 2020","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-nasa-api-lockdown-in-venice","title":"Lockdown in Venice","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-no2-timeseries-analysis","title":"NO2 timeseries analysis","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-timeseries-stac-api-single-vs-multi","title":"Time series using STAC API statistics endpoints","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"Curated","level":5},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.access-iacs-data","title":"How to access IACS Spatial Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-access-cci-data","title":"Access CCI data with xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-first-steps","title":"First steps on the Euro Data Cube platform","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-1-manage-datasets-v11","title":"Manage Collections in your GeoDB","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-2-explore-datasets-2","title":"Exploring Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-3-share-datasets1","title":"Sharing Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-access-urban-atlas-data-v1","title":"[xcube-geodb] How to accesss EEA Urban Atlas Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-data-access","title":"EDC Sentinel Hub - data access using xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinelhub-datafusion-basic","title":"EDC Sentinel Hub: Data Fusion","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinelhub-datafusion-ndvi","title":"EDC Sentinel Hub: Data Fusion","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-datasets","title":"EDC Sentinel Hub - using xcube to access different data sets in Sentinel Hub","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-setup","title":"Setup for EDC core API access using xcube client library","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-xcube-integration","title":"EDC Sentinel Hub - XCUBE integration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-usecase-ndvi-timeline","title":"NDVI timeline","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.eo-learn","title":"Using eo-learn in EDC: a starter’s guide.","description":"","date":"","thumbnail":"/notebooks_test/build/5a1f8475f0c3652f4630d03d72891b98.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.esdl-edc-v0-2","title":"Earth System Data Lab Tutorial @ Euro Data Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.exploring-time-and-space-with-edc","title":"Exploring Time and Space: A guide to accessing, analysing and visualising data in the Euro Data Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.how-to-access-dem-data-through-sentinel-hub-api","title":"How to access DEM data through Sentinel Hub API","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.sentinelhub-py","title":"Using Sentinel Hub Process API in EDC: a starter’s guide.","description":"","date":"","thumbnail":"/notebooks_test/build/01e22903839391bc356ac886ec2b2fa7.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"Notebooks","level":1},{"slug":"notebooks.example1","title":"📘 Example Notebook 1","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.example2","title":"📘 Example Notebook 2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static","BASE_URL":"/notebooks_test"},"routes/$":{"config":{"version":1,"myst":"1.3.25","options":{"hide_toc":true,"hide_footer_links":true,"folders":true},"nav":[],"actions":[],"projects":[{"github":"https://github.com/eoxhub-workspaces/documentation/","id":"5aa0318b-5bc1-41e2-b1d4-053e8b61961b","exports":[],"bibliography":[],"title":"Location for eodashboard notebooks","index":"readme","pages":[{"title":"External Notebooks","level":1},{"title":"Eurodatacube","level":2},{"title":"Notebooks","level":3},{"slug":"external-notebooks.eurodatacube.notebooks.readme","title":"Jupyter notebooks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Notebooks","level":4},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.readme","title":"Euro Data Cube Notebooks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":5},{"title":"Contributions","level":5},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-ai4arctic-sea-ice","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-biomass-forest-observation-sys","title":"AIREO pilot dataset - Biomass (Forest Observation System)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-cap","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-spacenet7","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aot-covid19","title":"Aerosol Optical Thickness (AOT) Anomaly Detection Using Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.batch-zarr-output","title":"Generating Zarr data cubes with Sentinel Hub Batch API","description":"","date":"","thumbnail":"/notebooks_test/build/68dffbf744fa42f4bf3d35e55684984e.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.client-side-processing-using-mass-sh","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.cmems-data-download","title":"Cmems Data Download","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.detect-trucks-sentinel2","title":"Detect Trucks using Sentinel-2 data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.drought-monitoring","title":"Drought impact monitoring platform","description":"","date":"","thumbnail":"/notebooks_test/build/ad5c19782b006f72352ae57794305840.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-africa-cube-africa-custom-contest","title":"Custom Script Contest – Urban Growth in Africa","description":"","date":"","thumbnail":"/notebooks_test/build/e9275f3fe80a704e2f5aa1ec1220e48a.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-byoc-tutorial","title":"How to bring your own data to EDC: Using Sentinel Hub Python package","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-demo-phi-week-v2","title":"xcube-gen and xcube-geodb Hands-On Workshop Φ-Week 2020","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-geodb-4-eurocrops-demo","title":"Demonstration of Eurocrops data use in geoDB","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-notebook-lstm","title":"South Africa Crop Type Classification on Euro Data Cube (EDC)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-usecase-lpis-crop-type-classification","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.eurocrops-crop-classification-example","title":"Crop-classification using Sentinel-2 time-series","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ghsl-urban-delineation","title":"\u003cb\u003eUrban delineation\u003cb\u003e","description":"","date":"","thumbnail":"/notebooks_test/build/7bbf545a5eae1d9ebdb91ae42b261063.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.globalearthmonitor-example","title":"Pre-requisites","description":"","date":"","thumbnail":"/notebooks_test/build/205c1ded6bd59771975a9fbd3753fd3b.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.gpu-support-eoxhub","title":"GPU-Support on EOxHub","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.gran-chaco-phiweek","title":"ESA EO \\phi- week 2020","description":"","date":"","thumbnail":"/notebooks_test/build/80cee7db6cdc7002ceedda5689f889fa.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.howtolulc-batch-updated-210621","title":"How To: Land-Use-Land-Cover Prediction for Slovenia - using the Batch Processing API","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.lpis-lulc-slo","title":"LPIS Use Case for Land Use / Land Cover Classification","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.lps2022-leverage-euro-data-cube-services","title":"Living Planet Symposium 2022 Training Session","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.no2-analysis-covid19-lockdowns","title":"Impact of Covid19 induced lockdown on NO2 levels","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.no2-so2-trend-veda-api-igarss-2023","title":"Using the NASA VEDA EOAPI","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ogc-edc","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.openeo-client-demo","title":"openEO Client Demo","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.race-finishedgoodsinventory-inidcator","title":"Finished Goods Inventory indicator for RACE","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.third-party-planetscope","title":"Third Party Data Import - PlanetScope","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.xcube-access-datasets","title":"Using xcube to access non-commercial and commercial data sets","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.xcube-viewer-as-a-service-in-edc1","title":"Visualizing data with xcube viewer in EuroDataCube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-evaluation-workshop","title":"DAPA Evaluation Workshop: Introduction \u0026 Documentation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-1-cube-sentinel-2","title":"DAPA Tutorial #1: Cube - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-2-area-sentinel-2","title":"DAPA Tutorial #2: Area - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-3-timeseries-sentinel-2","title":"DAPA Tutorial #3: Timeseries - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-4-value-sentinel-2","title":"DAPA Tutorial #4: Value - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-5-dem","title":"DAPA Tutorial #5: DEM","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.fairicube.fairicube-data-access-demonstration","title":"EDC Sentinel Hub - data access using xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-australian-bushfires","title":"Australian Bushfires","description":"","date":"","thumbnail":"/notebooks_test/build/ab194b4f8c40a2b9d64d8a85e37ce1fd.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["IGARSS-22","EO Dashboard"],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-data-access","title":"Data Access","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-detect-trucks-sentinel2","title":"Truck Detection Exercise","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-lockdown-in-venice","title":"Environmental Impacts of Lockdown in Venice, Italy during 2020","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-nasa-api-lockdown-in-venice","title":"Lockdown in Venice","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-no2-timeseries-analysis","title":"NO2 timeseries analysis","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-timeseries-stac-api-single-vs-multi","title":"Time series using STAC API statistics endpoints","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"Curated","level":5},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.access-iacs-data","title":"How to access IACS Spatial Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-access-cci-data","title":"Access CCI data with xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-first-steps","title":"First steps on the Euro Data Cube platform","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-1-manage-datasets-v11","title":"Manage Collections in your GeoDB","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-2-explore-datasets-2","title":"Exploring Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-3-share-datasets1","title":"Sharing Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-access-urban-atlas-data-v1","title":"[xcube-geodb] How to accesss EEA Urban Atlas Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-data-access","title":"EDC Sentinel Hub - data access using xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinelhub-datafusion-basic","title":"EDC Sentinel Hub: Data Fusion","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinelhub-datafusion-ndvi","title":"EDC Sentinel Hub: Data Fusion","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-datasets","title":"EDC Sentinel Hub - using xcube to access different data sets in Sentinel Hub","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-setup","title":"Setup for EDC core API access using xcube client library","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-xcube-integration","title":"EDC Sentinel Hub - XCUBE integration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-usecase-ndvi-timeline","title":"NDVI timeline","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.eo-learn","title":"Using eo-learn in EDC: a starter’s guide.","description":"","date":"","thumbnail":"/notebooks_test/build/5a1f8475f0c3652f4630d03d72891b98.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.esdl-edc-v0-2","title":"Earth System Data Lab Tutorial @ Euro Data Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.exploring-time-and-space-with-edc","title":"Exploring Time and Space: A guide to accessing, analysing and visualising data in the Euro Data Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.how-to-access-dem-data-through-sentinel-hub-api","title":"How to access DEM data through Sentinel Hub API","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.sentinelhub-py","title":"Using Sentinel Hub Process API in EDC: a starter’s guide.","description":"","date":"","thumbnail":"/notebooks_test/build/01e22903839391bc356ac886ec2b2fa7.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"Notebooks","level":1},{"slug":"notebooks.example1","title":"📘 Example Notebook 1","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.example2","title":"📘 Example Notebook 2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}]},"page":{"version":1,"kind":"Notebook","sha256":"d49c8c78de25269f3e9a2275083bb0c1d1064c13bd87fa03b60aef38d6a6b292","slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.lps2022-leverage-euro-data-cube-services","location":"/external_notebooks/eurodatacube/notebooks/notebooks/contributions/LPS2022_Leverage_Euro_Data_Cube_Services.ipynb","dependencies":[],"frontmatter":{"title":"Living Planet Symposium 2022 Training Session","content_includes_title":true,"kernelspec":{"name":"edc","display_name":"EDC 2022.02 (Python3)","language":"python"},"github":"https://github.com/eoxhub-workspaces/documentation/","numbering":{"title":{"offset":5}},"edit_url":"https://github.com/eoxhub-workspaces/documentation//blob/main/external_notebooks/eurodatacube/notebooks/notebooks/contributions/LPS2022_Leverage_Euro_Data_Cube_Services.ipynb","exports":[{"format":"ipynb","filename":"LPS2022_Leverage_Euro_Data_Cube_Services.ipynb","url":"/notebooks_test/build/LPS2022_Leverage_Eur-5977d2251c80d4863d1794198598b97f.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.054083,"end_time":"2023-03-22T13:00:43.625621","exception":false,"start_time":"2023-03-22T13:00:43.571538","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Living Planet Symposium 2022 Training Session","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YLTVIQah7q"}],"identifier":"living-planet-symposium-2022-training-session","label":"Living Planet Symposium 2022 Training Session","html_id":"living-planet-symposium-2022-training-session","implicit":true,"key":"Jvw7mTC1WX"},{"type":"heading","depth":1,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Leverage Euro Data Cube services for accessing, analysing and visualising EO data","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"dNpSMHYxjp"}],"identifier":"leverage-euro-data-cube-services-for-accessing-analysing-and-visualising-eo-data","label":"Leverage Euro Data Cube services for accessing, analysing and visualising EO data","html_id":"leverage-euro-data-cube-services-for-accessing-analysing-and-visualising-eo-data","implicit":true,"key":"usWW6rJz20"},{"type":"thematicBreak","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mO1lJcnN7S"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"strong","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Original JN:","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"s38dcQpNXE"}],"key":"ItXj3EwWZb"},{"type":"text","value":" ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"omBgEyv6nn"},{"type":"emphasis","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Exploring Time and Space: A guide to accessing, analysing and visualising data in the Euro Data Cube","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"YLyZDcdo9z"}],"key":"CFUWWbv7Jn"}],"key":"k9e8ZMNRtA"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Author original JN:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"drljHM7GMz"}],"key":"Qb24tJ00uW"},{"type":"text","value":" ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"DNCY3toJ7A"},{"type":"emphasis","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"William Ray","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"kxSkRTPu1i"}],"key":"AJZzmys4eB"}],"key":"a4HJ65j3Mc"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"strong","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Edited and extended by:","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"B8aUC0WxwP"}],"key":"UCVq1qUzRm"},{"type":"text","value":" ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"rPVI2zR5BT"},{"type":"emphasis","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Alicja Balfanz","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"XBHqiiTqI5"}],"key":"tX5ua9r9BQ"},{"type":"text","value":" \u0026 ","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"g1Ws84fI9x"},{"type":"emphasis","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Max Kampen","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"AMmcOGUSg0"}],"key":"skdDi3yH2C"}],"key":"VorHCVc7bL"},{"type":"heading","depth":2,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Getting started with EDC","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"CpitM21chf"}],"identifier":"getting-started-with-edc","label":"Getting started with EDC","html_id":"getting-started-with-edc","implicit":true,"key":"ZxIVyWRMPk"},{"type":"paragraph","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"In this demonstration Jupyter Notebook, we will be visualising and analysing a flooding event using Sentinel data to demonstrate how you can use EDC for your own applications. Much of what we we will focus on can be used for many other applications and use cases.","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"u8Bp239ged"}],"key":"jbOtW3csDX"},{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"We are going to use EDC with its associated libaries and APIs to do this. In this notebook we will learn how to:","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"RRUFfOsejE"}],"key":"LIN5zqCHdi"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Build a data cube","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"pPTq357N47"}],"key":"Tr3zsv2eNt"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Create a new variable","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"J10wYyFpZw"}],"key":"hFyeqyCSVR"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Visualise a variable of your data cube","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"iRo7XjhujB"}],"key":"zP3CiTahDL"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Create a new variable using a threshold","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"Rl4amQ9sb8"}],"key":"q8zj3OY0iB"},{"type":"listItem","spread":true,"position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"Visualise a spatial subset of a variable over time","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"eoj5R5nwxf"}],"key":"IkzPDAHKzS"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Create a new variable based upon space and time","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"upsIrdFdRN"}],"key":"Lx8dYZqSjK"}],"key":"aRk58dYgIz"}],"visibility":"show","key":"a6bR29mx9M"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.045341,"end_time":"2023-03-22T13:00:43.837291","exception":false,"start_time":"2023-03-22T13:00:43.791950","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Configuration","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lgwYdMdTsM"}],"identifier":"configuration","label":"Configuration","html_id":"configuration","implicit":true,"key":"g7XDvj82hH"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Before acccessing the data, we will start by importing the necessary Python libraries (already configured in your EDC workspace), and fetch pre-generated credentials as environment variables to access the services.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LWIgAIQr9j"}],"key":"cHuSarcdxY"}],"visibility":"show","key":"Ui40E25NU0"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:43.937978Z","iopub.status.busy":"2023-03-22T13:00:43.937489Z","iopub.status.idle":"2023-03-22T13:00:47.128032Z","shell.execute_reply":"2023-03-22T13:00:47.126559Z"},"papermill":{"duration":3.253196,"end_time":"2023-03-22T13:00:47.131227","exception":false,"start_time":"2023-03-22T13:00:43.878031","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Check compatibility and import environment credentials\nfrom edc import check_compatibility\ncheck_compatibility(\"user-2023.03-02\", dependencies=[\"GEODB\", \"SH\"])\n\n# EDC libraries\nfrom xcube_sh.config import CubeConfig\nfrom xcube_sh.cube import open_cube\nfrom xcube_sh.sentinelhub import SentinelHub\nfrom xcube.core.geom import mask_dataset_by_geometry\n\n# Sentinel Hub\nfrom sentinelhub import BBox\n\n# Utilities\nimport IPython.display\nimport matplotlib.pyplot as plt\nimport datetime as dt\nimport rioxarray\nimport shapely\n\n# Numerical computation\nimport xarray as xr\nimport numpy as np","visibility":"show","key":"yCk0hZMgCk"},{"type":"output","id":"kAXi60xRbrt9KQ50F7T-V","data":[{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"\u003cscript type=\"text/javascript\"\u003e\n        function toggle(id) {\n            el = document.getElementById(id);\n            el.style.display = el.style.display === \"none\" ? \"block\" : \"none\";\n        }\n    \u003c/script\u003e","content_type":"text/html"},"text/plain":{"content":"\u003cIPython.core.display.HTML object\u003e","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"This notebook is compatible with this base image version (user-2023.03-02).","content_type":"text/html"},"text/plain":{"content":"\u003cIPython.core.display.HTML object\u003e","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"text/markdown":{"content":"\n\n---------\n\nThe following environment variables are available:\n\n* `GEODB_AUTH_AUD`, `GEODB_AUTH_CLIENT_ID`, `GEODB_AUTH_DOMAIN`, `GEODB_API_SERVER_URL`, `GEODB_AUTH_CLIENT_SECRET`, `GEODB_API_SERVER_PORT`\n* `SH_CLIENT_ID`, `SH_INSTANCE_ID`, `SH_CLIENT_NAME`, `SH_CLIENT_SECRET`\n","content_type":"text/markdown"},"text/plain":{"content":"\u003cIPython.core.display.Markdown object\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"YOyRUm9YPT"}],"visibility":"show","key":"ovkZvVhzKj"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.021365,"end_time":"2023-03-22T13:00:47.175217","exception":false,"start_time":"2023-03-22T13:00:47.153852","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Define an AOI","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VUDtPKQemq"}],"identifier":"define-an-aoi","label":"Define an AOI","html_id":"define-an-aoi","implicit":true,"key":"NMimiY8aJW"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Next, we will define our area of interest using a bounding box. For our example we will use WGS84 coordinates to build the data cube. We have chosen an AOI that covers Madagascar’s capital city Antananarivo and surrounding regions. In early 2022, the east coast of Madagascar was impacted by two different tropical weather systems, which caused heavy rainfall and flooding in the country’s capital and Analamanga region (","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qXLQOmlfs8"},{"type":"link","url":"https://reliefweb.int/report/madagascar/madagascar-rainy-and-cyclone-season-flash-update-no1-24-january-2022","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"source","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"L0eSGKewG3"}],"urlSource":"https://reliefweb.int/report/madagascar/madagascar-rainy-and-cyclone-season-flash-update-no1-24-january-2022","key":"Lse2ikTLxa"},{"type":"text","value":"). Across Madagascar, the heavy rainfall persisted throughout January and February, when the moderate tropical storm ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"DK37Muov30"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Ana","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"YsPzmRYyLq"}],"key":"BTfr3DnIYV"},{"type":"text","value":" and the tropical cyclone ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tNbI4ZZRZW"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Batsirai","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RxurgTGPW3"}],"key":"A7QCXHrZvK"},{"type":"text","value":" made landfall in January and Februrary respectively (","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"SFdRvmtSWN"},{"type":"link","url":"https://www.worldweatherattribution.org/climate-change-increased-rainfall-associated-with-tropical-cyclones-hitting-highly-vulnerable-communities-in-madagascar-mozambique-malawi/","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"source","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"E1TWxuAgui"}],"urlSource":"https://www.worldweatherattribution.org/climate-change-increased-rainfall-associated-with-tropical-cyclones-hitting-highly-vulnerable-communities-in-madagascar-mozambique-malawi/","key":"OaDvnuid02"},{"type":"text","value":").","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lg5JmhXPGa"}],"key":"sirusgKuCt"}],"visibility":"show","key":"B9QjFwX58u"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:47.231380Z","iopub.status.busy":"2023-03-22T13:00:47.229248Z","iopub.status.idle":"2023-03-22T13:00:47.240092Z","shell.execute_reply":"2023-03-22T13:00:47.237939Z"},"papermill":{"duration":0.041494,"end_time":"2023-03-22T13:00:47.243454","exception":false,"start_time":"2023-03-22T13:00:47.201960","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Bbox\nAntananarivo_bbox = [47.221985, -19.129599, 47.671051, -18.659257]\n\n# Bbox EPSG\nbbox_epsg = 4326","visibility":"show","key":"C7eaopHn9G"},{"type":"output","id":"9I_huuB2JcXhjARx_naFB","data":[],"visibility":"show","key":"r10lqAMhaa"}],"visibility":"show","key":"wbkyELeAvD"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:47.291948Z","iopub.status.busy":"2023-03-22T13:00:47.290759Z","iopub.status.idle":"2023-03-22T13:00:47.321101Z","shell.execute_reply":"2023-03-22T13:00:47.307641Z"},"papermill":{"duration":0.060041,"end_time":"2023-03-22T13:00:47.326212","exception":false,"start_time":"2023-03-22T13:00:47.266171","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Plot the bounding box on a map\nIPython.display.GeoJSON(BBox(Antananarivo_bbox,crs=bbox_epsg).get_geojson())","visibility":"show","key":"HgD25C8wS9"},{"type":"output","id":"-g69ooMv-jJn6g5F1UBaw","data":[{"output_type":"display_data","metadata":{"application/geo+json":{"expanded":false,"root":"root"}},"data":{"application/geo+json":{"content":"{\"coordinates\":[[[47.221985,-19.129599],[47.221985,-18.659257],[47.671051,-18.659257],[47.671051,-19.129599],[47.221985,-19.129599]]],\"crs\":{\"properties\":{\"name\":\"urn:ogc:def:crs:EPSG::4326\"},\"type\":\"name\"},\"type\":\"Polygon\"}","content_type":"application/geo+json"},"text/plain":{"content":"\u003cIPython.display.GeoJSON object\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"WMArucuZ4f"}],"visibility":"show","key":"NaViZSNLGX"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.020407,"end_time":"2023-03-22T13:00:47.373927","exception":false,"start_time":"2023-03-22T13:00:47.353520","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"How to build a data cube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GABnh4gEvs"}],"identifier":"how-to-build-a-data-cube","label":"How to build a data cube","html_id":"how-to-build-a-data-cube","implicit":true,"key":"DZOqFvEtSv"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Firstly, we will go through the required steps to build a data cube.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"AVtqOILmxZ"}],"key":"y3bYuAZ2OU"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We are going to visualise the flooding events using Sentinel-2 imagery. The Sentinel-2 system (consisting of two twin satellites) is part of the Copernicus programme and collects multispectral data globally with a revisit time of 5 days. The satellite’s multispectral imager acquires data in 13 spectral bands spanning from the visible and near infrared to shortwave infrared.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"OhtiV8wqPp"}],"key":"HqjOIwDf2U"},{"type":"heading","depth":3,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Check available Sentinel-2 L2A bands","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"N1P4ZlxoHL"}],"identifier":"check-available-sentinel-2-l2a-bands","label":"Check available Sentinel-2 L2A bands","html_id":"check-available-sentinel-2-l2a-bands","implicit":true,"key":"xEPKwHS4mw"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Using EDC inbuilt functions that query Sentinel Hub services, we can easily list the available bands for a given dataset to help us build the cube!","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"AzRBexEzfF"}],"key":"fYkaOAojhK"}],"visibility":"show","key":"qf3ojAoMSA"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:47.430757Z","iopub.status.busy":"2023-03-22T13:00:47.430156Z","iopub.status.idle":"2023-03-22T13:00:47.652307Z","shell.execute_reply":"2023-03-22T13:00:47.649981Z"},"papermill":{"duration":0.26265,"end_time":"2023-03-22T13:00:47.658914","exception":false,"start_time":"2023-03-22T13:00:47.396264","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Create a Sentinel Hub class\nSH = SentinelHub()\n\n# List bands for S2-L2A\nSH.band_names('S2L2A')","visibility":"show","key":"XCBxrB9SGl"},{"type":"output","id":"I1rvOR_8VdJRwxZfM7YDq","data":[{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/plain":{"content":"['B01',\n 'B02',\n 'B03',\n 'B04',\n 'B05',\n 'B06',\n 'B07',\n 'B08',\n 'B8A',\n 'B09',\n 'B11',\n 'B12',\n 'SCL',\n 'SNW',\n 'CLD',\n 'viewZenithMean',\n 'viewAzimuthMean',\n 'sunZenithAngles',\n 'sunAzimuthAngles',\n 'AOT',\n 'CLM',\n 'CLP']","content_type":"text/plain"}}}],"visibility":"show","key":"CHoathxZC4"}],"visibility":"show","key":"I5VR43dKP1"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.032592,"end_time":"2023-03-22T13:00:47.719863","exception":false,"start_time":"2023-03-22T13:00:47.687271","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Build an xcube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"u3RCCNFjcv"}],"identifier":"build-an-xcube","label":"Build an xcube","html_id":"build-an-xcube","implicit":true,"key":"CcRCa14nCx"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the following cell we will specify the input parameters needed to build an xcube array. The following parameters are specified:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"z3I7pSe46J"}],"key":"lDJ7GzWcBM"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"dataset_name","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"iL8q93J3Rd"}],"key":"v866mzhDox"},{"type":"text","value":": the Sentinel Hub identification of the dataset. Here we will call ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"McL1MrjtQD"},{"type":"inlineCode","value":"S2L2A","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"CNGvqAK9hq"},{"type":"text","value":" for Sentinel-2 L2A. All available datasets can be listed with ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"vHZrduuYdb"},{"type":"inlineCode","value":"SH.dataset_names","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"DSoOMiBi44"}],"key":"SEbOKTpfSq"}],"key":"tfENLWWhgE"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"band_names","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Q1mpGlYOqI"}],"key":"oKRbudwhCJ"},{"type":"text","value":": the band names to be used in the xcube array (see previous code cell). Here, we will call the B02, B03, B04, B08, CLM (Blue, Green, Red \u0026 NIR, Cloud Mask) bands.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"wvvV2KCyMI"}],"key":"SXxVKrzDOl"}],"key":"aqe78OaGGQ"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"bbox","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"WuMfxXYrwm"}],"key":"FU48xvWjTz"},{"type":"text","value":": the bounding box that sets the extent of the AOI. Because we are using the default WGS84 coordinate system here, the CRS parameter doesn’t need to be set.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"dvC29d0vEU"}],"key":"jv0v0B1fL7"}],"key":"DJILco4U2S"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"spatial_res","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"RZ7qJBVXHZ"}],"key":"ZvyFu89VAl"},{"type":"text","value":": the spatial resolution of the rasters contained in the xcube array. The spatial resolution is expressed in the units of the coordinate system used. Therefore, in this example, the spatial resolution is set in degrees. For an approximate pixel size of 30 meters, we set the resolution to 0.00045 degrees.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"JY9JzTCdrU"}],"key":"Hn9wYZejlT"}],"key":"jjggGK7iMs"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"time_range","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"HXTh89SbN3"}],"key":"f1V4rgqBz2"},{"type":"text","value":": a list of two dates [start_date, end_date] forming a time period for which all acquisitions will be returned. Sentinel-2 L2A data is available from October 2016 onwards. In this example, we will fetch data for January 2022 through March 2022.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"mGCV2evgNk"}],"key":"cXK4YOQUdV"}],"key":"fbzsJnd10F"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"time_tolerance","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"vmjqQrjfEq"}],"key":"D0iQbedU5G"},{"type":"text","value":": The tolerance used to identify whether a dataset should still be included within a time period. Here, ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"NzAW02jrvJ"},{"type":"inlineCode","value":"30M","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"KU5cbqW5Er"},{"type":"text","value":" corresponds to 30 minutes, thus avoiding duplicate datasets.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"fcVxi5idlD"}],"key":"X1VnPp88GA"}],"key":"bOLBwFVBTW"}],"key":"LYxGveupAa"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Note: the ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"u7UMZlRFMb"},{"type":"inlineCode","value":"return _coerce_scalar_to_timedelta_type(arg, unit=unit, errors=errors)","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"FCMvY167cA"},{"type":"text","value":" warning can be safely ignored.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"E1A1zvDdRY"}],"key":"xZHPt7kNrn"}],"key":"Nxbj2mHwTp"}],"visibility":"show","key":"aC2M4YFG5o"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:47.816861Z","iopub.status.busy":"2023-03-22T13:00:47.815405Z","iopub.status.idle":"2023-03-22T13:00:47.849284Z","shell.execute_reply":"2023-03-22T13:00:47.842190Z"},"papermill":{"duration":0.098227,"end_time":"2023-03-22T13:00:47.855907","exception":false,"start_time":"2023-03-22T13:00:47.757680","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Setup xcube\ns2_cube_config = CubeConfig(dataset_name='S2L2A',\n                            band_names=['B02', 'B03', 'B04', 'B08', 'CLM'],\n                            bbox=Antananarivo_bbox,\n                            spatial_res=0.00045,\n                            time_range=['2022-01-01', '2022-04-01'],\n                            time_tolerance='30M')","visibility":"show","key":"PRRnzgh08J"},{"type":"output","id":"-vAFp06pSTXU_M5wKy3qJ","data":[{"name":"stderr","output_type":"stream","text":"/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/xcube_sh/config.py:248: FutureWarning: Units 'M', 'Y' and 'y' do not represent unambiguous timedelta values and will be removed in a future version.\n  time_tolerance = pd.to_timedelta(time_tolerance)\n"}],"visibility":"show","key":"tyrKvQ9eGy"}],"visibility":"show","key":"XGbCDAqmkV"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.036027,"end_time":"2023-03-22T13:00:47.935659","exception":false,"start_time":"2023-03-22T13:00:47.899632","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Open the xcube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HAUneT7byS"}],"identifier":"open-the-xcube","label":"Open the xcube","html_id":"open-the-xcube","implicit":true,"key":"E5OFbhEdlw"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the following cell we open the cube and display its contents. It’s important to note that at this stage, we’re not processing anything, but generate a cube on the fly with data ready to be called when needed for analysis.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qhr2vEKnWc"}],"key":"x2EDgAIIPG"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Once you open the cube, you can visualise the contents. For example, you can view the number of timestamps as a list in the Coordinates tab. You can also visualise the seperate variables, with information on their size and data type.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"viDrTyVEwS"}],"key":"dh4V0C4U2Z"}],"visibility":"show","key":"ijEFYivzl3"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:48.009187Z","iopub.status.busy":"2023-03-22T13:00:48.006590Z","iopub.status.idle":"2023-03-22T13:00:48.475372Z","shell.execute_reply":"2023-03-22T13:00:48.473742Z"},"papermill":{"duration":0.509915,"end_time":"2023-03-22T13:00:48.480118","exception":false,"start_time":"2023-03-22T13:00:47.970203","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Open cube (on the fly)\ns2_cube = open_cube(s2_cube_config)\n\n# Display contents\ns2_cube","visibility":"show","key":"P3MBHrSEjc"},{"type":"output","id":"TyEwQhBhvBi2PJDaOjDv7","data":[{"output_type":"execute_result","execution_count":6,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"caafd69da7f801d95e63b2be2f811d98","path":"/notebooks_test/build/caafd69da7f801d95e63b2be2f811d98.html"},"text/plain":{"content":"\u003cxarray.Dataset\u003e\nDimensions:    (time: 36, lat: 1045, lon: 998, bnds: 2)\nCoordinates:\n  * lat        (lat) float64 -18.66 -18.66 -18.66 ... -19.13 -19.13 -19.13\n  * lon        (lon) float64 47.22 47.22 47.22 47.22 ... 47.67 47.67 47.67 47.67\n  * time       (time) datetime64[ns] 2022-01-03T07:14:49 ... 2022-03-31T07:04:55\n    time_bnds  (time, bnds) datetime64[ns] dask.array\u003cchunksize=(36, 2), meta=np.ndarray\u003e\nDimensions without coordinates: bnds\nData variables:\n    B02        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 1045, 998), meta=np.ndarray\u003e\n    B03        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 1045, 998), meta=np.ndarray\u003e\n    B04        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 1045, 998), meta=np.ndarray\u003e\n    B08        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 1045, 998), meta=np.ndarray\u003e\n    CLM        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 1045, 998), meta=np.ndarray\u003e\nAttributes:\n    Conventions:             CF-1.7\n    title:                   S2L2A Data Cube Subset\n    history:                 [{'program': 'xcube_sh.chunkstore.SentinelHubChu...\n    date_created:            2023-03-22T13:00:48.269151\n    time_coverage_start:     2022-01-03T07:14:43+00:00\n    time_coverage_end:       2022-03-31T07:05:02+00:00\n    time_coverage_duration:  P86DT23H50M19S\n    geospatial_lon_min:      47.221985\n    geospatial_lat_min:      -19.129599\n    geospatial_lon_max:      47.671085\n    geospatial_lat_max:      -18.659349\n    processing_level:        L2A","content_type":"text/plain"}}}],"visibility":"show","key":"EbYlrgTn9D"}],"visibility":"show","key":"nt08pZ6m6D"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.039289,"end_time":"2023-03-22T13:00:48.560186","exception":false,"start_time":"2023-03-22T13:00:48.520897","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Create a new variable","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"urNyvQVW2W"}],"identifier":"create-a-new-variable","label":"Create a new variable","html_id":"create-a-new-variable","implicit":true,"key":"WDYCwnJeb0"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"A great way to visualise the extent of surface water with multispectral data at hand, is to use the Normalised Difference Water Index (NDWI). We can calculate the index with the Green and NIR bands as stated below, and add it to the data cube as a new variable.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JIa72ZdWln"}],"key":"dnRs6IPVYJ"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"NDWI = Green - NIR / Green + NIR","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ZKLx8w2vwN"}],"key":"KEIN6RqKG7"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"For this, we are going to create a new variable in the next cell. To create the new variable we are using two existing variables defined as s2.cube.B03 and s2_cube.B08. We then insert these variables into an index formula to calculate our ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"K6RennK19G"},{"type":"inlineCode","value":"ndwi","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"BEWFfsDjWk"},{"type":"text","value":" variable. To integrate the new varibale into our data cube, we first need to define a new empty data cube attribute, provided with a name and associated units, before assigning the calculated ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"J5VHA2K9iG"},{"type":"inlineCode","value":"ndwi","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"TRfzrXNFgg"},{"type":"text","value":" variable to it. Feel free to call ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"auxWRfVwUd"},{"type":"inlineCode","value":"s2_cube","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"leAL3VHVbA"},{"type":"text","value":" again to check the newly added variable that can now be called from the data cube.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"avtzA02MMS"}],"key":"uJ5H9HJbpF"}],"visibility":"show","key":"vhKCpwqruw"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:48.639867Z","iopub.status.busy":"2023-03-22T13:00:48.639445Z","iopub.status.idle":"2023-03-22T13:00:48.772995Z","shell.execute_reply":"2023-03-22T13:00:48.771477Z"},"papermill":{"duration":0.18119,"end_time":"2023-03-22T13:00:48.778187","exception":false,"start_time":"2023-03-22T13:00:48.596997","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Define NDWI in visualisation\nndwi = ((s2_cube.B03-s2_cube.B08)/(s2_cube.B03+s2_cube.B08))\n\nndwi.attrs['long_name'] = 'NDWI'\nndwi.attrs['units'] ='unitless'\n\ns2_cube['NDWI'] = ndwi\ns2_cube","visibility":"show","key":"mTtzW9MyHT"},{"type":"output","id":"lSbXdK6-8UPT14Jel55OM","data":[{"output_type":"execute_result","execution_count":7,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"4d089ce7f3726fd68e057b1a30fc5d57","path":"/notebooks_test/build/4d089ce7f3726fd68e057b1a30fc5d57.html"},"text/plain":{"content":"\u003cxarray.Dataset\u003e\nDimensions:    (time: 36, lat: 1045, lon: 998, bnds: 2)\nCoordinates:\n  * lat        (lat) float64 -18.66 -18.66 -18.66 ... -19.13 -19.13 -19.13\n  * lon        (lon) float64 47.22 47.22 47.22 47.22 ... 47.67 47.67 47.67 47.67\n  * time       (time) datetime64[ns] 2022-01-03T07:14:49 ... 2022-03-31T07:04:55\n    time_bnds  (time, bnds) datetime64[ns] dask.array\u003cchunksize=(36, 2), meta=np.ndarray\u003e\nDimensions without coordinates: bnds\nData variables:\n    B02        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 1045, 998), meta=np.ndarray\u003e\n    B03        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 1045, 998), meta=np.ndarray\u003e\n    B04        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 1045, 998), meta=np.ndarray\u003e\n    B08        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 1045, 998), meta=np.ndarray\u003e\n    CLM        (time, lat, lon) float32 dask.array\u003cchunksize=(1, 1045, 998), meta=np.ndarray\u003e\n    NDWI       (time, lat, lon) float32 dask.array\u003cchunksize=(1, 1045, 998), meta=np.ndarray\u003e\nAttributes:\n    Conventions:             CF-1.7\n    title:                   S2L2A Data Cube Subset\n    history:                 [{'program': 'xcube_sh.chunkstore.SentinelHubChu...\n    date_created:            2023-03-22T13:00:48.269151\n    time_coverage_start:     2022-01-03T07:14:43+00:00\n    time_coverage_end:       2022-03-31T07:05:02+00:00\n    time_coverage_duration:  P86DT23H50M19S\n    geospatial_lon_min:      47.221985\n    geospatial_lat_min:      -19.129599\n    geospatial_lon_max:      47.671085\n    geospatial_lat_max:      -18.659349\n    processing_level:        L2A","content_type":"text/plain"}}}],"visibility":"show","key":"ENuWA1vELE"}],"visibility":"show","key":"zz4RcAKL3z"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.034,"end_time":"2023-03-22T13:00:48.849421","exception":false,"start_time":"2023-03-22T13:00:48.815421","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"How to visualise your datacube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZA9WU4oG57"}],"identifier":"how-to-visualise-your-datacube","label":"How to visualise your datacube","html_id":"how-to-visualise-your-datacube","implicit":true,"key":"FMsUKc75Gl"},{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Visualise variables","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"r9NymABXuF"}],"identifier":"visualise-variables","label":"Visualise variables","html_id":"visualise-variables","implicit":true,"key":"k71NkWhrgt"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We are going to visualise a True Color image and the NDWI image in the same plot. For the True Color image, we select the Blue, Green and RED bands for one timstamp in the data cube in order to create a multiband RGB image stack. For visualisation purposes, we will multiply the reflectance values by 3 to brighten the image a little. We also fetch the NDWI variable for the exact same date for a side-by-side comparison.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"k15aDoyZrb"}],"key":"O8fWsL5Jrk"}],"visibility":"show","key":"eGnc5QiCgf"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:48.922552Z","iopub.status.busy":"2023-03-22T13:00:48.922125Z","iopub.status.idle":"2023-03-22T13:00:55.538405Z","shell.execute_reply":"2023-03-22T13:00:55.536600Z"},"papermill":{"duration":6.686338,"end_time":"2023-03-22T13:00:55.569959","exception":false,"start_time":"2023-03-22T13:00:48.883621","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Select timestamp\nt = '2022-01-30 07:00:00'\n\n# Select the bands and stack them.\nRed = s2_cube.B04.sel(time=t, method='nearest')\nGreen = s2_cube.B03.sel(time=t, method='nearest')\nBlue = s2_cube.B02.sel(time=t, method='nearest')\n\nrgb = np.dstack((Red,Green,Blue)) #Stack the three arrays\n\nndwi = s2_cube.NDWI.sel(time=t, method='nearest')\n\n# Plot \nf = plt.figure(figsize=[18, 16])\nf.add_subplot(1, 2, 1)\nplt.title(f\"True Color: {str(s2_cube.time.sel(time=t, method='nearest').data).split('T')[0]}\")\nplt.imshow(3 * rgb)  # We multiply the rgb by 3 to make the image brighter\nf.add_subplot(1, 2, 2)\nplt.title(f\"NDWI: {str(s2_cube.time.sel(time=t, method='nearest').data).split('T')[0]}\")\nplt.imshow(ndwi, vmin=-1, vmax=1, cmap='GnBu')\nplt.show()","visibility":"show","key":"SY55wnj88L"},{"type":"output","id":"5TUDKn-zGFwY5Tgi3lb5A","data":[{"name":"stderr","output_type":"stream","text":"Clipping input data to the valid range for imshow with RGB data ([0..1] for floats or [0..255] for integers).\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"1f4965e2e729a29c6251cbf6538ed7ee","path":"/notebooks_test/build/1f4965e2e729a29c6251cbf6538ed7ee.png"},"text/plain":{"content":"\u003cFigure size 1800x1600 with 2 Axes\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"uoSI9uFWSo"}],"visibility":"show","key":"m1VREplkkV"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.069796,"end_time":"2023-03-22T13:00:55.712089","exception":false,"start_time":"2023-03-22T13:00:55.642293","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Visualise multiple timestamps","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ju3sv5CN4u"}],"identifier":"visualise-multiple-timestamps","label":"Visualise multiple timestamps","html_id":"visualise-multiple-timestamps","implicit":true,"key":"ENE218MhjI"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We would like to get a better idea of the course of events and examine how the two storm weather systems affected the area. The flooding events we are trying to monitor happened in the middle of the Southwest Indian Ocean cyclone season, which approximately lasts from November until April. In order to check how many suitable Sentinel-2 acquisitions we have at hand, we will take a look at multiple timestamps from the data cube.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Ke5UBSzck9"}],"key":"iWX0yrRLGS"}],"visibility":"show","key":"Hw2OAAWEim"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:00:55.872862Z","iopub.status.busy":"2023-03-22T13:00:55.872319Z","iopub.status.idle":"2023-03-22T13:01:16.087099Z","shell.execute_reply":"2023-03-22T13:01:16.085528Z"},"papermill":{"duration":20.328313,"end_time":"2023-03-22T13:01:16.113048","exception":false,"start_time":"2023-03-22T13:00:55.784735","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Select timestamps\nndwi1 = s2_cube.NDWI.sel(time='2022-01-05 07:00:00', method='nearest')\nndwi2 = s2_cube.NDWI.sel(time='2022-01-15 07:00:00', method='nearest')\nndwi3 = s2_cube.NDWI.sel(time='2022-01-30 07:00:00', method='nearest')\nndwi4 = s2_cube.NDWI.sel(time='2022-02-09 07:00:00', method='nearest')\nndwi5 = s2_cube.NDWI.sel(time='2022-02-24 07:00:00', method='nearest')\nndwi6 = s2_cube.NDWI.sel(time='2022-03-06 07:00:00', method='nearest')\nndwi7 = s2_cube.NDWI.sel(time='2022-03-16 07:00:00', method='nearest')\nndwi8 = s2_cube.NDWI.sel(time='2022-03-31 07:00:00', method='nearest')\n\n# Plot \nf = plt.figure(figsize=[16, 18])\nax1 = f.add_subplot(3, 3, 1)\nax2 = f.add_subplot(3, 3, 2)\nax3 = f.add_subplot(3, 3, 3)\nax4 = f.add_subplot(3, 3, 4)\nax5 = f.add_subplot(3, 3, 5)\nax6 = f.add_subplot(3, 3, 6)\nax7 = f.add_subplot(3, 3, 7)\nax8 = f.add_subplot(3, 3, 8)\n\naxlist = [ax1, ax2, ax3, ax4, ax5, ax6, ax7, ax8]\n\nt = ndwi1.plot.imshow(ax=ax1, vmin=-1, vmax=1, cmap='GnBu', add_colorbar=False)\nndwi2.plot.imshow(ax=ax2, vmin=-1, vmax=1, cmap='GnBu', add_colorbar=False)\nndwi3.plot.imshow(ax=ax3, vmin=-1, vmax=1, cmap='GnBu', add_colorbar=False)\nndwi4.plot.imshow(ax=ax4, vmin=-1, vmax=1, cmap='GnBu', add_colorbar=False)\nndwi5.plot.imshow(ax=ax5, vmin=-1, vmax=1, cmap='GnBu', add_colorbar=False)\nndwi6.plot.imshow(ax=ax6, vmin=-1, vmax=1, cmap='GnBu', add_colorbar=False)\nndwi7.plot.imshow(ax=ax7, vmin=-1, vmax=1, cmap='GnBu', add_colorbar=False)\nndwi8.plot.imshow(ax=ax8, vmin=-1, vmax=1, cmap='GnBu', add_colorbar=False)\n\ncbar_ax = f.add_axes([1, 0.15, 0.05, 0.7])\nf.colorbar(t, cax=cbar_ax, label=\"NDWI\")\n\nplt.show()","visibility":"show","key":"JJI4BROYOE"},{"type":"output","id":"wikDLR2IUWtPm1S_uXKA2","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"3fd1cf950f1072b15c40ba8f86afc695","path":"/notebooks_test/build/3fd1cf950f1072b15c40ba8f86afc695.png"},"text/plain":{"content":"\u003cFigure size 1600x1800 with 9 Axes\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"L1GzV293fi"}],"visibility":"show","key":"O08x7tmlrd"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.207117,"end_time":"2023-03-22T13:01:16.461933","exception":false,"start_time":"2023-03-22T13:01:16.254816","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Unsurprisingly, the weather conditions during storm season are not suitable for Earth monitoring with optical imagery. Of the eight dates we have requested, only one, the acquisition from 30th January, is not completely overcast and the remaining ones are unusable. Fortunately, we can resort to using Sentinel-1 GRD radar data, which is unimpeded by weather conditions and should provide a better picture of the course of events.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bbGICKLXjc"}],"key":"ZYleIO4MEU"},{"type":"thematicBreak","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"E8gx8hXQFN"}],"visibility":"show","key":"UFjsYMdXD7"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.13127,"end_time":"2023-03-22T13:01:16.722077","exception":false,"start_time":"2023-03-22T13:01:16.590807","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Buildind a Sentinel-1 data cube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ppGHqzy9EI"}],"identifier":"buildind-a-sentinel-1-data-cube","label":"Buildind a Sentinel-1 data cube","html_id":"buildind-a-sentinel-1-data-cube","implicit":true,"key":"uYVeiON3K5"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The Sentinel-1 satellite system is also part of the Copernicus programme and collects data globally with a revisit time of 5 days when both twin satellites are active. Unfortunately, the recent failure of Sentinel-1B leaves us with longer revisit times (","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ze0y7kKeDP"},{"type":"link","url":"https://scihub.copernicus.eu/news/News01026","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"source","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"eEMpIiVSVc"}],"urlSource":"https://scihub.copernicus.eu/news/News01026","key":"JZqo9Di6iW"},{"type":"text","value":"). In contrast to Sentinel-2, Sentinel-1 SAR is an active sensor that sends SAR signals and records the backscatter. Due to the wavelengths used, SAR is not hindered by clouds and can be operated day and night.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"eBNuWIFfYX"}],"key":"f7dU3dRVpl"}],"visibility":"show","key":"oPNRuqg6I8"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.140898,"end_time":"2023-03-22T13:01:16.982767","exception":false,"start_time":"2023-03-22T13:01:16.841869","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Check Sentinel-1 GRD available bands","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qRyND1wbB9"}],"identifier":"check-sentinel-1-grd-available-bands","label":"Check Sentinel-1 GRD available bands","html_id":"check-sentinel-1-grd-available-bands","implicit":true,"key":"FCd6u5zluS"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Using EDC inbuilt functions that query Sentinel Hub services, we can easily list the available bands for a given dataset.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Y30HT396Ij"}],"key":"OQnZE6lQxd"}],"visibility":"show","key":"SHDG6Svv6K"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:01:17.225360Z","iopub.status.busy":"2023-03-22T13:01:17.223415Z","iopub.status.idle":"2023-03-22T13:01:17.250742Z","shell.execute_reply":"2023-03-22T13:01:17.248718Z"},"papermill":{"duration":0.152241,"end_time":"2023-03-22T13:01:17.253856","exception":false,"start_time":"2023-03-22T13:01:17.101615","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# List bands for S1-GRD\nSH.band_names('S1GRD')","visibility":"show","key":"VdJq56ZpzU"},{"type":"output","id":"pugEWFKFZVy2CxYrFN-xT","data":[{"output_type":"execute_result","execution_count":10,"metadata":{},"data":{"text/plain":{"content":"['VV', 'HH', 'VH', 'localIncidenceAngle', 'scatteringArea', 'shadowMask', 'HV']","content_type":"text/plain"}}}],"visibility":"show","key":"wBvNhUpuoc"}],"visibility":"show","key":"PkJZ78rsOk"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.106507,"end_time":"2023-03-22T13:01:17.480606","exception":false,"start_time":"2023-03-22T13:01:17.374099","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Build the S-1 GRD xcube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SDBd9U09ig"}],"identifier":"build-the-s-1-grd-xcube","label":"Build the S-1 GRD xcube","html_id":"build-the-s-1-grd-xcube","implicit":true,"key":"rjYG1GvCH1"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the following cell we will specify the input parameters needed to build an xcube array. The following parameters are specified:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UmgUPwgKug"}],"key":"m4zZsThDkW"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"dataset_name","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"r1lOlp1SXp"}],"key":"WRVjFNTfXq"},{"type":"text","value":": the Sentinel Hub identification of the dataset. Here we will call ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"jx9UvQdD2U"},{"type":"inlineCode","value":"S1GRD","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"kAcwnV8Rcx"},{"type":"text","value":" for Sentinel-1 GRD. All available datasets can be listed with ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"CAlgmetiU6"},{"type":"inlineCode","value":"SH.dataset_names","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"MD8KvJJGQ9"}],"key":"cHATwmg3kA"}],"key":"ogBI2zNhkU"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"band_names","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"zJ5XnkgeT4"}],"key":"rdgA0pESaH"},{"type":"text","value":": the band names to be used in the xcube array (see previous code cell). Here, we will call just the VV polarisation band.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"SmpYIQIquD"}],"key":"KCzUvRo4HK"}],"key":"vfitqwedCq"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"bbox","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"gcwqgCVZRj"}],"key":"Jz5etDxCUe"},{"type":"text","value":": the bounding box that sets the extent of the AOI. Because we are using the default WGS84 coordinate system here, the CRS parameter doesn’t need to be set.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Ziz9B70WxV"}],"key":"sZuffQO8Rt"}],"key":"wYhnoXJKM4"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"spatial_res","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"wqrukO9NJ2"}],"key":"LYvNX2mgwG"},{"type":"text","value":": the spatial resolution of the rasters contained in the xcube array. The spatial resolution is expressed in the units of the coordinate system used. Therefore, in this example, the spatial resolution is set in degrees. For an approximate pixel size of 30 meters, we set the resolution to 0.00045 degrees.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"U9GEwhoCdf"}],"key":"UMEFCfIHjY"}],"key":"ABVspGGB4r"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"time_range","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"C5RjUcUeY3"}],"key":"MJPVAggqwp"},{"type":"text","value":": a list of two dates [start_date, end_date] forming a time period for which all acquisitions will be returned. Sentinel-1 GRD data is available from February 2015 onwards. In this example, we will fetch data for January 2022 through March 2022.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"u9an4bcif3"}],"key":"dmliI44IeP"}],"key":"MajMvOLOgX"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"time_tolerance","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"QuInn8lFki"}],"key":"CE9eqCvY6V"},{"type":"text","value":": The tolerance used to identify whether a dataset should still be included within a time period. Here, ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"dVzfMapk17"},{"type":"inlineCode","value":"30M","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"CAXNhgEXN9"},{"type":"text","value":" corresponds to 30 minutes, thus avoiding duplicate datasets.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"cMlB5YFIIB"}],"key":"ZUIoUo7b0W"}],"key":"emO0t5BlQY"}],"key":"IlH4pCcKoO"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Note: the ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"Vb6q8wvuM5"},{"type":"inlineCode","value":"return _coerce_scalar_to_timedelta_type(arg, unit=unit, errors=errors)","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"fU5X0VPOzM"},{"type":"text","value":" warning can be safely ignored.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"n0nxV1GXLt"}],"key":"AbP3CVjcp1"}],"key":"LfpRwIeWkp"}],"visibility":"show","key":"UJ2bLCSlBx"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:01:17.705417Z","iopub.status.busy":"2023-03-22T13:01:17.703849Z","iopub.status.idle":"2023-03-22T13:01:17.717644Z","shell.execute_reply":"2023-03-22T13:01:17.714859Z"},"papermill":{"duration":0.144429,"end_time":"2023-03-22T13:01:17.734762","exception":false,"start_time":"2023-03-22T13:01:17.590333","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Setup xcube\ns1_cube_config = CubeConfig(dataset_name='S1GRD',\n                            band_names=['VV'],\n                            bbox=Antananarivo_bbox,\n                            spatial_res=0.00045,\n                            time_range=['2022-01-01', '2022-04-01'],\n                            time_tolerance='30M')","visibility":"show","key":"hcCyn8lMTW"},{"type":"output","id":"Y6uWFS4jlvZOaNqbw26kj","data":[{"name":"stderr","output_type":"stream","text":"/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/xcube_sh/config.py:248: FutureWarning: Units 'M', 'Y' and 'y' do not represent unambiguous timedelta values and will be removed in a future version.\n  time_tolerance = pd.to_timedelta(time_tolerance)\n"}],"visibility":"show","key":"E98U2d1gdF"}],"visibility":"show","key":"HvU5ixMrd7"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.159292,"end_time":"2023-03-22T13:01:18.069906","exception":false,"start_time":"2023-03-22T13:01:17.910614","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Open the xcube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ILEDs2c7zh"}],"identifier":"open-the-xcube","label":"Open the xcube","html_id":"open-the-xcube-1","implicit":true,"key":"XIaetwA6Na"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the following cell we pass the configurated cube to the open cube command to open the cube and display its contents.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Dm72perdsd"}],"key":"ZedX7WdHsP"}],"visibility":"show","key":"KvdTORAHIz"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:01:18.330950Z","iopub.status.busy":"2023-03-22T13:01:18.330575Z","iopub.status.idle":"2023-03-22T13:01:18.673200Z","shell.execute_reply":"2023-03-22T13:01:18.671773Z"},"papermill":{"duration":0.458801,"end_time":"2023-03-22T13:01:18.677166","exception":false,"start_time":"2023-03-22T13:01:18.218365","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Open cube (on the fly)\ns1_cube = open_cube(s1_cube_config)\n\n# Display contents\ns1_cube","visibility":"show","key":"o7sjpDfKWN"},{"type":"output","id":"4Ixmir4aJojVjyqn1A4ZY","data":[{"output_type":"execute_result","execution_count":12,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"26670d4c2f133e5135eb7b28170cf186","path":"/notebooks_test/build/26670d4c2f133e5135eb7b28170cf186.html"},"text/plain":{"content":"\u003cxarray.Dataset\u003e\nDimensions:    (time: 8, lat: 1045, lon: 998, bnds: 2)\nCoordinates:\n  * lat        (lat) float64 -18.66 -18.66 -18.66 ... -19.13 -19.13 -19.13\n  * lon        (lon) float64 47.22 47.22 47.22 47.22 ... 47.67 47.67 47.67 47.67\n  * time       (time) datetime64[ns] 2022-01-03T02:19:35 ... 2022-03-28T02:19:33\n    time_bnds  (time, bnds) datetime64[ns] dask.array\u003cchunksize=(8, 2), meta=np.ndarray\u003e\nDimensions without coordinates: bnds\nData variables:\n    VV         (time, lat, lon) float32 dask.array\u003cchunksize=(1, 1045, 998), meta=np.ndarray\u003e\nAttributes:\n    Conventions:             CF-1.7\n    title:                   S1GRD Data Cube Subset\n    history:                 [{'program': 'xcube_sh.chunkstore.SentinelHubChu...\n    date_created:            2023-03-22T13:01:18.601978\n    time_coverage_start:     2022-01-03T02:19:35+00:00\n    time_coverage_end:       2022-03-28T02:19:33+00:00\n    time_coverage_duration:  P83DT23H59M58S\n    geospatial_lon_min:      47.221985\n    geospatial_lat_min:      -19.129599\n    geospatial_lon_max:      47.671085\n    geospatial_lat_max:      -18.659349\n    processing_level:        L1B","content_type":"text/plain"}}}],"visibility":"show","key":"lTasJplbzF"}],"visibility":"show","key":"iyVl2fvN9l"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.11505,"end_time":"2023-03-22T13:01:18.942269","exception":false,"start_time":"2023-03-22T13:01:18.827219","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Visualising the flooded areas using SAR","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WdbmwHR76f"}],"identifier":"visualising-the-flooded-areas-using-sar","label":"Visualising the flooded areas using SAR","html_id":"visualising-the-flooded-areas-using-sar","implicit":true,"key":"EjirFJRfhK"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Firstly, we need to generate a new variable. For Sentinel-1 data, the values are returned in linear power. For a more convenient analysis we will convert the values to decibels. This is done by mutiplying the log10 of each pixel value by 10. Secondly, as there will be pixels with a value of -inf after this operation, we need to account for this with the second function that will automatically assign 0 to these pixels.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"RrZoYORfIm"}],"key":"hnGl8mETmg"}],"visibility":"show","key":"awKHZIOyts"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:01:19.195415Z","iopub.status.busy":"2023-03-22T13:01:19.194830Z","iopub.status.idle":"2023-03-22T13:01:19.221979Z","shell.execute_reply":"2023-03-22T13:01:19.219640Z"},"papermill":{"duration":0.168906,"end_time":"2023-03-22T13:01:19.229476","exception":false,"start_time":"2023-03-22T13:01:19.060570","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Convert VV Digital numbers to Decibels\nvv_dn = s1_cube.VV\nvv_db = 10 * (np.log10(vv_dn))\n\nvv_db = vv_db.where(np.isfinite(vv_db), 0)\n\nvv_db.attrs['long_name'] = 'VV_dB'\nvv_db.attrs['units'] = 'decibels'\n\ns1_cube['VV_dB'] = vv_db","visibility":"show","key":"DrhkSAESFT"},{"type":"output","id":"l4Oy6hzHtCbVljZPkl151","data":[],"visibility":"show","key":"JLFxNPCz90"}],"visibility":"show","key":"qvji6REjKx"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.107087,"end_time":"2023-03-22T13:01:19.450333","exception":false,"start_time":"2023-03-22T13:01:19.343246","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"From the news and our previous visualisation of Sentinel-2 data, we know that there was significant surface water flooding in January and February 2022. Let’s visualise one of the acquisitions from the end of January, when the tropical storm ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"okXirEikQ3"},{"type":"emphasis","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Ana","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"k0KpT9Gdcb"}],"key":"bbnopZYMqn"},{"type":"text","value":" brought heavy rainfall to the area. Here, we select the closest acquisition to 25th January 2022 and plot the calculated ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"E0tfRAlNxY"},{"type":"inlineCode","value":"VV_dB","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EAYuMuykoe"},{"type":"text","value":" variable for our region of interest.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vCh6aK2tIX"}],"key":"nhTNjNtTss"}],"visibility":"show","key":"aHHD3jqKUP"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:01:19.680997Z","iopub.status.busy":"2023-03-22T13:01:19.680453Z","iopub.status.idle":"2023-03-22T13:01:22.634264Z","shell.execute_reply":"2023-03-22T13:01:22.632831Z"},"papermill":{"duration":3.08264,"end_time":"2023-03-22T13:01:22.642549","exception":false,"start_time":"2023-03-22T13:01:19.559909","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# select and define the timestamp you want to visualise \nVV_dB_timestamp = s1_cube.VV_dB.sel(time='2022-01-25 07:00:00', method='nearest')\n\n# plot the timestamp\nVV_dB_timestamp.plot.imshow(vmin=-40, vmax=0, cmap='winter', figsize=(10, 10))\n\n# save and display the plot\nplt.show()","visibility":"show","key":"jnaPD48bsj"},{"type":"output","id":"KZYQiKPBDBCuSEuZjk9Es","data":[{"name":"stderr","output_type":"stream","text":"/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/dask/core.py:119: RuntimeWarning: divide by zero encountered in log10\n  return func(*(_execute_task(a, cache) for a in args))\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"3e6cc842aa27c15cc96ad723e24db917","path":"/notebooks_test/build/3e6cc842aa27c15cc96ad723e24db917.png"},"text/plain":{"content":"\u003cFigure size 1000x1000 with 2 Axes\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"puMA6vYxuo"}],"visibility":"show","key":"sTdCumVJv6"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.122003,"end_time":"2023-03-22T13:01:22.875886","exception":false,"start_time":"2023-03-22T13:01:22.753883","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"On this Sentinel-1 acquisition from 27th January, we can clearly see the extent of flooded areas in darker blue colour. The visualisation already looks fairly well defined, so let’s plot multiple timestamps to confirm that this is a good variable for generating subsequent products like flood masks.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"g8G9OktgdI"}],"key":"PcnJ6sNyFc"}],"visibility":"show","key":"W1Rymc4zuC"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:01:23.160721Z","iopub.status.busy":"2023-03-22T13:01:23.159899Z","iopub.status.idle":"2023-03-22T13:01:36.239302Z","shell.execute_reply":"2023-03-22T13:01:36.237534Z"},"papermill":{"duration":13.25194,"end_time":"2023-03-22T13:01:36.273201","exception":false,"start_time":"2023-03-22T13:01:23.021261","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"#### Timestamp selection\nvv1 = s1_cube.VV_dB.sel(time='2022-01-03 07:00:00', method='nearest')\nvv2 = s1_cube.VV_dB.sel(time='2022-01-15 07:00:00', method='nearest')\nvv3 = s1_cube.VV_dB.sel(time='2022-01-27 07:00:00', method='nearest')\nvv4 = s1_cube.VV_dB.sel(time='2022-02-08 07:00:00', method='nearest')\nvv5 = s1_cube.VV_dB.sel(time='2022-02-20 07:00:00', method='nearest')\nvv6 = s1_cube.VV_dB.sel(time='2022-03-04 07:00:00', method='nearest')\nvv7 = s1_cube.VV_dB.sel(time='2022-03-16 07:00:00', method='nearest')\nvv8 = s1_cube.VV_dB.sel(time='2022-03-28 07:00:00', method='nearest')\n\n# Plot \nf = plt.figure(figsize=[16, 18])\nax1 = f.add_subplot(3, 3, 1)\nax2 = f.add_subplot(3, 3, 2)\nax3 = f.add_subplot(3, 3, 3)\nax4 = f.add_subplot(3, 3, 4)\nax5 = f.add_subplot(3, 3, 5)\nax6 = f.add_subplot(3, 3, 6)\nax7 = f.add_subplot(3, 3, 7)\nax8 = f.add_subplot(3, 3, 8)\n\naxlist = [ax1, ax2, ax3, ax4, ax5, ax6, ax7, ax8]\n\nt = vv1.plot.imshow(ax=ax1, vmin=-40, vmax=0, cmap='winter', add_colorbar=False)\nvv2.plot.imshow(ax=ax2, vmin=-40, vmax=0, cmap='winter', add_colorbar=False)\nvv3.plot.imshow(ax=ax3, vmin=-40, vmax=0, cmap='winter', add_colorbar=False)\nvv4.plot.imshow(ax=ax4, vmin=-40, vmax=0, cmap='winter', add_colorbar=False)\nvv5.plot.imshow(ax=ax5, vmin=-40, vmax=0, cmap='winter', add_colorbar=False)\nvv6.plot.imshow(ax=ax6, vmin=-40, vmax=0, cmap='winter', add_colorbar=False)\nvv7.plot.imshow(ax=ax7, vmin=-40, vmax=0, cmap='winter', add_colorbar=False)\nvv8.plot.imshow(ax=ax8, vmin=-40, vmax=0, cmap='winter', add_colorbar=False)\n\ncbar_ax = f.add_axes([1, 0.15, 0.05, 0.7])\nf.colorbar(t, cax=cbar_ax, label=\"VV dB\")\n\nplt.show()","visibility":"show","key":"eWnaVEO7wB"},{"type":"output","id":"1at8AOncFKKODwj6B25Cu","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"f19f583ad6d13f6cc5d37444796a88df","path":"/notebooks_test/build/f19f583ad6d13f6cc5d37444796a88df.png"},"text/plain":{"content":"\u003cFigure size 1600x1800 with 9 Axes\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"mvWJlJYvpc"}],"visibility":"show","key":"j0pcw2AlDH"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.170639,"end_time":"2023-03-22T13:01:36.667471","exception":false,"start_time":"2023-03-22T13:01:36.496832","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"This gives us a much clearer picture of the spatial and temporal extent of the flooding events in the region. We can make out two flooding peaks in the acquisitons from 27th January and 4th March, which are congruent with the reports on the two storms making landfall.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KMYNU0gGUi"}],"key":"VHiO18WKLP"},{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Creating a flood mask","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bdL3Oqww8i"}],"identifier":"creating-a-flood-mask","label":"Creating a flood mask","html_id":"creating-a-flood-mask","implicit":true,"key":"kmkq5GZMo1"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Next, we want to generate a flood mask using a threshold for the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"tVWOhDxBxk"},{"type":"inlineCode","value":"VV_dB","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"rVBdLpxS0d"},{"type":"text","value":" variable. In VV polarization mode, values below -20 dB are usually surface water. Let’s define different thresholds for a side-by-side comparison in order to find the most suitable value for generating the flood mask.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"YEETQpZRxw"}],"key":"n0HMnJF4GI"}],"visibility":"show","key":"lxE93xiGLu"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:01:37.237513Z","iopub.status.busy":"2023-03-22T13:01:37.236300Z","iopub.status.idle":"2023-03-22T13:01:37.315745Z","shell.execute_reply":"2023-03-22T13:01:37.312592Z"},"papermill":{"duration":0.348192,"end_time":"2023-03-22T13:01:37.328625","exception":false,"start_time":"2023-03-22T13:01:36.980433","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"flood_threshold1_step1 = s1_cube.VV_dB.where(s1_cube.VV_dB \u003e= -15, 1)\nflood_threshold2_step1 = s1_cube.VV_dB.where(s1_cube.VV_dB \u003e= -18, 1)\nflood_threshold3_step1 = s1_cube.VV_dB.where(s1_cube.VV_dB \u003e= -20, 1)\n\nflood_threshold1_step2 = flood_threshold1_step1.where(flood_threshold1_step1 == 1, 0)\nflood_threshold2_step2 = flood_threshold2_step1.where(flood_threshold2_step1 == 1, 0)\nflood_threshold3_step2 = flood_threshold3_step1.where(flood_threshold3_step1 == 1, 0)\n\nflood_threshold1 = flood_threshold1_step2.sel(time='2022-01-27 07:00:00', method='nearest')\nflood_threshold2 = flood_threshold2_step2.sel(time='2022-01-27 07:00:00', method='nearest')\nflood_threshold3 = flood_threshold3_step2.sel(time='2022-01-27 07:00:00', method='nearest')","visibility":"show","key":"NPzoNP9DEE"},{"type":"output","id":"cw8NNaDH6iY7g7X7ABnml","data":[],"visibility":"show","key":"bXTRwcFIzj"}],"visibility":"show","key":"KjfWk4VPoi"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.154039,"end_time":"2023-03-22T13:01:37.685494","exception":false,"start_time":"2023-03-22T13:01:37.531455","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Next we will plot the new thresholds we want to test:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"c2tM7mj8ze"}],"key":"j3BPfm55gG"}],"visibility":"show","key":"eU4hEsqaSR"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:01:38.109846Z","iopub.status.busy":"2023-03-22T13:01:38.108042Z","iopub.status.idle":"2023-03-22T13:01:39.688201Z","shell.execute_reply":"2023-03-22T13:01:39.685989Z"},"papermill":{"duration":1.819761,"end_time":"2023-03-22T13:01:39.702571","exception":false,"start_time":"2023-03-22T13:01:37.882810","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Plot \nf = plt.figure(figsize=[20, 16])\nax1 = f.add_subplot(2, 3, 1)\nax2 = f.add_subplot(2, 3, 2)\nax3 = f.add_subplot(2, 3, 3)\n\nflood_threshold1.plot.imshow(ax=ax1, vmin=0, vmax=1, cmap='Blues', add_colorbar=False)\nflood_threshold2.plot.imshow(ax=ax2, vmin=0, vmax=1, cmap='Blues', add_colorbar=False)\nflood_threshold3.plot.imshow(ax=ax3, vmin=0, vmax=1, cmap='Blues', add_colorbar=False)\n\nplt.show()","visibility":"show","key":"PAxNIx28Mv"},{"type":"output","id":"doe9uU9U4_g-jU90PJv_M","data":[{"name":"stderr","output_type":"stream","text":"/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/dask/core.py:119: RuntimeWarning: divide by zero encountered in log10\n  return func(*(_execute_task(a, cache) for a in args))\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"d52db9cd8aed2af53f58384be139a058","path":"/notebooks_test/build/d52db9cd8aed2af53f58384be139a058.png"},"text/plain":{"content":"\u003cFigure size 2000x1600 with 3 Axes\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"u1jDtEhpqK"}],"visibility":"show","key":"H4mCyU4lCq"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.204567,"end_time":"2023-03-22T13:01:40.154550","exception":false,"start_time":"2023-03-22T13:01:39.949983","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Changing the threshold by only 2 or 3 dB makes a large difference. If we set a higher threshold, we pick up a lot more false positives. With a lower threshold, we start to create more false negatives and a more fragmented flood extent. Based on the visualisation above, we will use -18 dB as the threshold.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lzv4EELuaA"}],"key":"nvP0aRDmiB"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Let’s add the flood mask variable to our Sentinel-1 data cube. At first glance, the below cell may not make much sense. The definition of variable ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"eJlu4ypqAu"},{"type":"inlineCode","value":"step1","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KsdZDXrDUI"},{"type":"text","value":" could be interpreted as assigning a value of 1 to pixels that are equal or more than -18 dB. However, what is actually happening is that the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ZcLvY91vVq"},{"type":"inlineCode","value":".where","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"UgK9tYq0rv"},{"type":"text","value":" method preserves all the pixel values of the variable that are below -18 dB and assigns everything else a value of 1. More detailed information on the method can be found in the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lX0ghJ9Fj9"},{"type":"link","url":"https://xarray.pydata.org/en/stable/generated/xarray.DataArray.where.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"respective xarray documentation","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jsB5QFTQXZ"}],"urlSource":"https://xarray.pydata.org/en/stable/generated/xarray.DataArray.where.html","key":"svRB1zMEtf"},{"type":"text","value":".","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"PM2XZPfuZ4"}],"key":"tYSMlk6zie"}],"visibility":"show","key":"y6ND3ObxFS"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:01:40.493257Z","iopub.status.busy":"2023-03-22T13:01:40.486675Z","iopub.status.idle":"2023-03-22T13:01:40.568271Z","shell.execute_reply":"2023-03-22T13:01:40.565688Z"},"papermill":{"duration":0.243315,"end_time":"2023-03-22T13:01:40.571699","exception":false,"start_time":"2023-03-22T13:01:40.328384","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Assign all pixels equal or smaller than -18 a value of 1 and preserve the values of pixels \nstep1 = s1_cube.VV_dB.where(s1_cube.VV_dB \u003e= -18, 1)\n\n# Assign all other pixels a value of 0. \nflooded = step1.where(step1 == 1, 0)\n\nflooded.attrs['long_name'] = 'flood_mask'\nflooded.attrs['units'] = 'nounits'\n\ns1_cube['flood_mask'] = flooded\ns1_cube","visibility":"show","key":"lc6b6FH45z"},{"type":"output","id":"xWc_5GdbhtzqppnhSbeN2","data":[{"output_type":"execute_result","execution_count":18,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"179042f31b7a1c610e48a091468858a5","path":"/notebooks_test/build/179042f31b7a1c610e48a091468858a5.html"},"text/plain":{"content":"\u003cxarray.Dataset\u003e\nDimensions:     (time: 8, lat: 1045, lon: 998, bnds: 2)\nCoordinates:\n  * lat         (lat) float64 -18.66 -18.66 -18.66 ... -19.13 -19.13 -19.13\n  * lon         (lon) float64 47.22 47.22 47.22 47.22 ... 47.67 47.67 47.67\n  * time        (time) datetime64[ns] 2022-01-03T02:19:35 ... 2022-03-28T02:1...\n    time_bnds   (time, bnds) datetime64[ns] dask.array\u003cchunksize=(8, 2), meta=np.ndarray\u003e\nDimensions without coordinates: bnds\nData variables:\n    VV          (time, lat, lon) float32 dask.array\u003cchunksize=(1, 1045, 998), meta=np.ndarray\u003e\n    VV_dB       (time, lat, lon) float32 dask.array\u003cchunksize=(1, 1045, 998), meta=np.ndarray\u003e\n    flood_mask  (time, lat, lon) float32 dask.array\u003cchunksize=(1, 1045, 998), meta=np.ndarray\u003e\nAttributes:\n    Conventions:             CF-1.7\n    title:                   S1GRD Data Cube Subset\n    history:                 [{'program': 'xcube_sh.chunkstore.SentinelHubChu...\n    date_created:            2023-03-22T13:01:18.601978\n    time_coverage_start:     2022-01-03T02:19:35+00:00\n    time_coverage_end:       2022-03-28T02:19:33+00:00\n    time_coverage_duration:  P83DT23H59M58S\n    geospatial_lon_min:      47.221985\n    geospatial_lat_min:      -19.129599\n    geospatial_lon_max:      47.671085\n    geospatial_lat_max:      -18.659349\n    processing_level:        L1B","content_type":"text/plain"}}}],"visibility":"show","key":"YS1KigyZpH"}],"visibility":"show","key":"DjCyDzJ2Yl"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.152535,"end_time":"2023-03-22T13:01:40.874435","exception":false,"start_time":"2023-03-22T13:01:40.721900","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s plot the generated flood mask over multiple timestamps again:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DrOC7LpUYZ"}],"key":"RXrUB2xosO"}],"visibility":"show","key":"XFbXKMJOI8"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:01:41.202892Z","iopub.status.busy":"2023-03-22T13:01:41.202489Z","iopub.status.idle":"2023-03-22T13:01:44.431864Z","shell.execute_reply":"2023-03-22T13:01:44.429612Z"},"papermill":{"duration":3.395669,"end_time":"2023-03-22T13:01:44.436913","exception":false,"start_time":"2023-03-22T13:01:41.041244","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"#### Timestamp selection\nfm1 = s1_cube.flood_mask.sel(time='2022-01-03 07:00:00', method='nearest')\nfm2 = s1_cube.flood_mask.sel(time='2022-01-15 07:00:00', method='nearest')\nfm3 = s1_cube.flood_mask.sel(time='2022-01-27 07:00:00', method='nearest')\nfm4 = s1_cube.flood_mask.sel(time='2022-02-08 07:00:00', method='nearest')\nfm5 = s1_cube.flood_mask.sel(time='2022-02-20 07:00:00', method='nearest')\nfm6 = s1_cube.flood_mask.sel(time='2022-03-04 07:00:00', method='nearest')\nfm7 = s1_cube.flood_mask.sel(time='2022-03-16 07:00:00', method='nearest')\nfm8 = s1_cube.flood_mask.sel(time='2022-03-28 07:00:00', method='nearest')\n\n# Plot \nf = plt.figure(figsize=[16, 18])\nax1 = f.add_subplot(3, 3, 1)\nax2 = f.add_subplot(3, 3, 2)\nax3 = f.add_subplot(3, 3, 3)\nax4 = f.add_subplot(3, 3, 4)\nax5 = f.add_subplot(3, 3, 5)\nax6 = f.add_subplot(3, 3, 6)\nax7 = f.add_subplot(3, 3, 7)\nax8 = f.add_subplot(3, 3, 8)\n\naxlist = [ax1, ax2, ax3, ax4, ax5, ax6, ax7, ax8]\n\nt = fm1.plot.imshow(ax=ax1, vmin=0, vmax=1, cmap='Blues', add_colorbar=False)\nfm2.plot.imshow(ax=ax2, vmin=0, vmax=1, cmap='Blues', add_colorbar=False)\nfm3.plot.imshow(ax=ax3, vmin=0, vmax=1, cmap='Blues', add_colorbar=False)\nfm4.plot.imshow(ax=ax4, vmin=0, vmax=1, cmap='Blues', add_colorbar=False)\nfm5.plot.imshow(ax=ax5, vmin=0, vmax=1, cmap='Blues', add_colorbar=False)\nfm6.plot.imshow(ax=ax6, vmin=0, vmax=1, cmap='Blues', add_colorbar=False)\nfm7.plot.imshow(ax=ax7, vmin=0, vmax=1, cmap='Blues', add_colorbar=False)\nfm8.plot.imshow(ax=ax8, vmin=0, vmax=1, cmap='Blues', add_colorbar=False)\n\nplt.show()","visibility":"show","key":"V4ERxdAATt"},{"type":"output","id":"Cd4ADIf6ViAyuvtqXqCjf","data":[{"name":"stderr","output_type":"stream","text":"/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/dask/core.py:119: RuntimeWarning: divide by zero encountered in log10\n  return func(*(_execute_task(a, cache) for a in args))\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"1104d027368812c9380ff501d9c6c5ef","path":"/notebooks_test/build/1104d027368812c9380ff501d9c6c5ef.png"},"text/plain":{"content":"\u003cFigure size 1600x1800 with 8 Axes\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"wUYEnOOjjm"}],"visibility":"show","key":"P0Jd1NRv8Y"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.192645,"end_time":"2023-03-22T13:01:44.802807","exception":false,"start_time":"2023-03-22T13:01:44.610162","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Despite the flood mask containing some noise, the chosen threshold looks adequate across time and space. Let’s move on to visualising the data from the temporal point of view.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"QeF9JjVGZ9"}],"key":"MntmTt3xSg"},{"type":"heading","depth":2,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"How to generate a time series plot for a point","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"nBUQBbcCCW"}],"identifier":"how-to-generate-a-time-series-plot-for-a-point","label":"How to generate a time series plot for a point","html_id":"how-to-generate-a-time-series-plot-for-a-point","implicit":true,"key":"X5pXOgUoND"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We now have a really good picture of how the flooding evolved over space and time. Following this, we want to monitor a specific point location within the AOI and observe how NDWI and then VV_dB variables in the cubes compare over time. Firstly, we define the point’s coordinates with ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"gu5p8dmp1H"},{"type":"inlineCode","value":"point_lat","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"EH3iAA2I3C"},{"type":"text","value":" and ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"AkRIvgbGFr"},{"type":"inlineCode","value":"point_lon","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"fYG7t05e3w"},{"type":"text","value":". These are used as inputs when we select the variables accross all available timestamps with the help of the ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"zmh2MDpnhX"},{"type":"inlineCode","value":".to_series()","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"OIp67n9Grh"},{"type":"text","value":" method. It’s at this point too that we use the CLM variable to mask out cloudy areas from the Sentinel 2 acquisitions in the time steps.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"dKZ0rJTT4W"}],"key":"IpaNCMwBfR"}],"visibility":"show","key":"ooWq5Qupzv"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:01:45.100606Z","iopub.status.busy":"2023-03-22T13:01:45.098325Z","iopub.status.idle":"2023-03-22T13:01:45.112784Z","shell.execute_reply":"2023-03-22T13:01:45.110009Z"},"papermill":{"duration":0.171386,"end_time":"2023-03-22T13:01:45.121577","exception":false,"start_time":"2023-03-22T13:01:44.950191","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Set latitude and longitude of point to query\npoint_lat = -18.96377\npoint_lon = 47.48737","visibility":"show","key":"y1xW6gIvpX"},{"type":"output","id":"BC5hNa-FUZWp7SFigDYDk","data":[],"visibility":"show","key":"RlxueKbYZI"}],"visibility":"show","key":"L8NtjDXH9b"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:01:45.435730Z","iopub.status.busy":"2023-03-22T13:01:45.435266Z","iopub.status.idle":"2023-03-22T13:03:00.336431Z","shell.execute_reply":"2023-03-22T13:03:00.333886Z"},"papermill":{"duration":75.056277,"end_time":"2023-03-22T13:03:00.341072","exception":false,"start_time":"2023-03-22T13:01:45.284795","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Get timeseries\nmasked = s2_cube.NDWI.where(s2_cube.CLM == 0)\ntimeseriesNDWI_masked = masked.sel(lat=point_lat, lon=point_lon, method='nearest').to_series()\ntimeseriesNDWI_masked = timeseriesNDWI_masked.where(timeseriesNDWI_masked !=0).dropna()\n\ntimeseriesNDWI = s2_cube.NDWI.sel(lat=point_lat, lon=point_lon, method='nearest').to_series()\ntimeseriesNDWI = timeseriesNDWI.where(timeseriesNDWI !=0).dropna()","visibility":"show","key":"r2qRPy49HL"},{"type":"output","id":"Z6Dkil32whVEPxBA0S6Fo","data":[],"visibility":"show","key":"MaLikAgqG3"}],"visibility":"show","key":"xNF97LnWRK"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.159939,"end_time":"2023-03-22T13:03:00.718515","exception":false,"start_time":"2023-03-22T13:03:00.558576","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot NDWI time series for a given point location","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"LEFx36wUOy"}],"identifier":"plot-ndwi-time-series-for-a-given-point-location","label":"Plot NDWI time series for a given point location","html_id":"plot-ndwi-time-series-for-a-given-point-location","implicit":true,"key":"ho3UWkbCtH"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Using matplotlib we can now visualise how NDWI changes over time. In the plot we will plot 2 series, a cloud-masked series in blue, and an unmasked series in grey.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"uB5FlJvh69"}],"key":"NObaYj22Xm"}],"visibility":"show","key":"fMvJgf1je1"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:01.073218Z","iopub.status.busy":"2023-03-22T13:03:01.070710Z","iopub.status.idle":"2023-03-22T13:03:01.725207Z","shell.execute_reply":"2023-03-22T13:03:01.714853Z"},"papermill":{"duration":0.83979,"end_time":"2023-03-22T13:03:01.730819","exception":false,"start_time":"2023-03-22T13:03:00.891029","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Plot NDWI timeseries\n_, ax = plt.subplots(1, figsize=(15, 6))\nax.plot(timeseriesNDWI, color=\"Grey\", marker=\"o\", linewidth=0.5, alpha=0.4)\nax.plot(timeseriesNDWI_masked, color=\"blue\", linestyle=\"none\", marker=\"o\", linewidth=0.5)\nax.set_title(f\"NDWI timeseries. Latitude: {point_lat}, Longitude: {point_lon}.\")\nplt.show()","visibility":"show","key":"fJzrUxE075"},{"type":"output","id":"jgWy3ZuDuIv71JVjiztRk","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"31d408583340a8e97ceff4c76695e631","path":"/notebooks_test/build/31d408583340a8e97ceff4c76695e631.png"},"text/plain":{"content":"\u003cFigure size 1500x600 with 1 Axes\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"YNkTKcC0nW"}],"visibility":"show","key":"oXFbTO5ufe"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.17306,"end_time":"2023-03-22T13:03:02.179077","exception":false,"start_time":"2023-03-22T13:03:02.006017","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The NDWI time series for Sentinel-2 doesn’t really show us anything significant. There is no farily consistent NDWI value to go from which makes it difficult to establish a point of reference. There are peaks in NDWI at the end of December and the start of February but as was demonstrated earlier cloud cover is a big issue. There are big gaps between non-cloudy acquisitions of over a month in some cases. Let’s plot the same but for the VV polarisation from Sentinel-1.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PetXPEFcGe"}],"key":"JHhHei6YtX"},{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Plot VV dB timeseries for a given point location","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jD1kUu6Ac6"}],"identifier":"plot-vv-db-timeseries-for-a-given-point-location","label":"Plot VV dB timeseries for a given point location","html_id":"plot-vv-db-timeseries-for-a-given-point-location","implicit":true,"key":"w2HqdvY1dC"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We can now visualise how VV dB changes over time.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"VNnjUv3uul"}],"key":"ljHuenDO2m"}],"visibility":"show","key":"hfqSPvsCNU"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:02.556318Z","iopub.status.busy":"2023-03-22T13:03:02.555891Z","iopub.status.idle":"2023-03-22T13:03:03.110286Z","shell.execute_reply":"2023-03-22T13:03:03.108725Z"},"papermill":{"duration":0.734243,"end_time":"2023-03-22T13:03:03.113992","exception":false,"start_time":"2023-03-22T13:03:02.379749","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Get timeseries\ntimeseriesVV_dB = s1_cube.VV_dB.sel(lat=point_lat, lon=point_lon, method='nearest').to_series()\ntimeseriesVV_dB = timeseriesVV_dB.where(timeseriesVV_dB !=0).dropna()","visibility":"show","key":"P8iOvryR0y"},{"type":"output","id":"qYh_7taI88hx3LAZG4yt9","data":[{"name":"stderr","output_type":"stream","text":"/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/dask/core.py:119: RuntimeWarning: divide by zero encountered in log10\n  return func(*(_execute_task(a, cache) for a in args))\n"}],"visibility":"show","key":"wEVLrIBkhO"}],"visibility":"show","key":"OKWPuWMvY0"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:03.446001Z","iopub.status.busy":"2023-03-22T13:03:03.445470Z","iopub.status.idle":"2023-03-22T13:03:04.031552Z","shell.execute_reply":"2023-03-22T13:03:04.030173Z"},"papermill":{"duration":0.758449,"end_time":"2023-03-22T13:03:04.035016","exception":false,"start_time":"2023-03-22T13:03:03.276567","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Plot VV_dB timeseries\nfig, ax = plt.subplots(1, figsize=(12, 6))\nax.plot(timeseriesVV_dB, color=\"blue\", marker=\"o\", linewidth=0.5)\nax.set_title(f\"VV dB timeseries. Latitude: {point_lat}, Longitude: {point_lon}.\")\nplt.show()","visibility":"show","key":"T91cxusfRo"},{"type":"output","id":"3ik03CJdFJ8XQjASZoDLF","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"b929f91921092c6bd74aa4f124a28bc4","path":"/notebooks_test/build/b929f91921092c6bd74aa4f124a28bc4.png"},"text/plain":{"content":"\u003cFigure size 1200x600 with 1 Axes\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"e9VocAIjmP"}],"visibility":"show","key":"eE1uIIlKLC"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.188652,"end_time":"2023-03-22T13:03:04.405277","exception":false,"start_time":"2023-03-22T13:03:04.216625","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"This is much clearer than the Sentinel 2 time series as we have more observations due to no interference from cloud cover. We have a clear point of reference for what the VV polarisation response is during flood and non flooded time periods with a VV response of -8 to 0 dB when dry and \u003c - dB when flooded. The time series really clearly shows the two flood events at the end of January and February.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"a4Er9yAuKm"}],"key":"TUoRJtUKdg"},{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Plot VV dB timeseries for a given AOI polygon","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VIEFxv19YO"}],"identifier":"plot-vv-db-timeseries-for-a-given-aoi-polygon","label":"Plot VV dB timeseries for a given AOI polygon","html_id":"plot-vv-db-timeseries-for-a-given-aoi-polygon","implicit":true,"key":"VZxnoV1iwR"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Let’s take this another step further, and generate the time series using a polygon instead of a point. For this we can use for example the administrative regions of Madagaskar, which are included into the geoDB (","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Z6TekARlGs"},{"type":"link","url":"https://data.humdata.org/dataset/cod-ab-mdg","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"source","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ypFwL4ctci"}],"urlSource":"https://data.humdata.org/dataset/cod-ab-mdg","key":"DCIGtMdmch"},{"type":"text","value":").","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"cuU4lJVGbm"}],"key":"KRTTFgSMmW"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"To be able to use data from the geoDB, we need to instantiate a geoDB client.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"oIS9ydegTJ"}],"key":"PauChD7Cmb"}],"visibility":"show","key":"XZ2g0NQdcH"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:04.841218Z","iopub.status.busy":"2023-03-22T13:03:04.840180Z","iopub.status.idle":"2023-03-22T13:03:04.860653Z","shell.execute_reply":"2023-03-22T13:03:04.858423Z"},"papermill":{"duration":0.263625,"end_time":"2023-03-22T13:03:04.864364","exception":false,"start_time":"2023-03-22T13:03:04.600739","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from xcube_geodb.core.geodb import GeoDBClient\ngeodb = GeoDBClient()","visibility":"show","key":"DiUzC76xet"},{"type":"output","id":"tJPM6WxXN2EtL3rVSI6kE","data":[],"visibility":"show","key":"IXC716NXBp"}],"visibility":"show","key":"VZlQ65NPFe"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.202579,"end_time":"2023-03-22T13:03:05.273810","exception":false,"start_time":"2023-03-22T13:03:05.071231","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"To see, what geoDB role we have, we can ask who I am. You will see a different id in your workspace.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dtOhaKK0S5"}],"key":"PppfvWG61b"}],"visibility":"show","key":"zauE41Ur4j"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:05.753928Z","iopub.status.busy":"2023-03-22T13:03:05.753471Z","iopub.status.idle":"2023-03-22T13:03:06.622716Z","shell.execute_reply":"2023-03-22T13:03:06.616915Z"},"papermill":{"duration":1.105836,"end_time":"2023-03-22T13:03:06.626734","exception":false,"start_time":"2023-03-22T13:03:05.520898","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"geodb.whoami","visibility":"show","key":"VjxIfCTjEG"},{"type":"output","id":"Nh4hdm6Vbh5i10-STt0Qd","data":[{"output_type":"execute_result","execution_count":26,"metadata":{},"data":{"text/plain":{"content":"'geodb_418dfeac-15f0-4606-9edb-fd9eb722bf04'","content_type":"text/plain"}}}],"visibility":"show","key":"rY8DRSG2rB"}],"visibility":"show","key":"gNn8iKQikG"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.318534,"end_time":"2023-03-22T13:03:07.174843","exception":false,"start_time":"2023-03-22T13:03:06.856309","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Different resoulution of administrative boundaries of Madagaskar are in the database called “madagascar_adm_boundaries”. Let’s have a look how many different collections we have:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eb2FOYjv8x"}],"key":"O4gFDWomDL"}],"visibility":"show","key":"PMaU3UK34w"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:07.638783Z","iopub.status.busy":"2023-03-22T13:03:07.638033Z","iopub.status.idle":"2023-03-22T13:03:07.901238Z","shell.execute_reply":"2023-03-22T13:03:07.898539Z"},"papermill":{"duration":0.501949,"end_time":"2023-03-22T13:03:07.905918","exception":false,"start_time":"2023-03-22T13:03:07.403969","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"geodb.get_my_collections(database=\"madagascar_adm_boundaries\")","visibility":"show","key":"h3r3p8xtVH"},{"type":"output","id":"NUYSPYsnj96M_w8DHMIc7","data":[{"output_type":"execute_result","execution_count":27,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\n\u003cstyle scoped\u003e\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n\u003c/style\u003e\n\u003ctable border=\"1\" class=\"dataframe\"\u003e\n  \u003cthead\u003e\n    \u003ctr style=\"text-align: right;\"\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003eowner\u003c/th\u003e\n      \u003cth\u003edatabase\u003c/th\u003e\n      \u003cth\u003ecollection\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003cth\u003e0\u003c/th\u003e\n      \u003ctd\u003egeodb_admin\u003c/td\u003e\n      \u003ctd\u003emadagascar_adm_boundaries\u003c/td\u003e\n      \u003ctd\u003eadm0\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e1\u003c/th\u003e\n      \u003ctd\u003egeodb_admin\u003c/td\u003e\n      \u003ctd\u003emadagascar_adm_boundaries\u003c/td\u003e\n      \u003ctd\u003eadm1\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2\u003c/th\u003e\n      \u003ctd\u003egeodb_admin\u003c/td\u003e\n      \u003ctd\u003emadagascar_adm_boundaries\u003c/td\u003e\n      \u003ctd\u003eadm2\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e3\u003c/th\u003e\n      \u003ctd\u003egeodb_admin\u003c/td\u003e\n      \u003ctd\u003emadagascar_adm_boundaries\u003c/td\u003e\n      \u003ctd\u003eadm3\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e4\u003c/th\u003e\n      \u003ctd\u003egeodb_admin\u003c/td\u003e\n      \u003ctd\u003emadagascar_adm_boundaries\u003c/td\u003e\n      \u003ctd\u003eadm4\u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"         owner                   database collection\n0  geodb_admin  madagascar_adm_boundaries       adm0\n1  geodb_admin  madagascar_adm_boundaries       adm1\n2  geodb_admin  madagascar_adm_boundaries       adm2\n3  geodb_admin  madagascar_adm_boundaries       adm3\n4  geodb_admin  madagascar_adm_boundaries       adm4","content_type":"text/plain"}}}],"visibility":"show","key":"ZB9FG6lIdb"}],"visibility":"show","key":"ITfM4AZlBK"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.207683,"end_time":"2023-03-22T13:03:08.342715","exception":false,"start_time":"2023-03-22T13:03:08.135032","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s have a look, what is in the adm1 collection:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DFZxklZunB"}],"key":"JKJNsnW2Bo"}],"visibility":"show","key":"qknSFYo8Mz"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:08.767653Z","iopub.status.busy":"2023-03-22T13:03:08.766713Z","iopub.status.idle":"2023-03-22T13:03:15.204707Z","shell.execute_reply":"2023-03-22T13:03:15.202633Z"},"papermill":{"duration":6.666234,"end_time":"2023-03-22T13:03:15.207326","exception":false,"start_time":"2023-03-22T13:03:08.541092","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"adm1 = geodb.get_collection_pg(\"adm1\", database=\"madagascar_adm_boundaries\")","visibility":"show","key":"JHViDTHbF3"},{"type":"output","id":"t7yNsUEpACYgCJWMzhM0U","data":[],"visibility":"show","key":"Y4cluDClCA"}],"visibility":"show","key":"Wb52ppn9fs"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.175076,"end_time":"2023-03-22T13:03:15.526970","exception":false,"start_time":"2023-03-22T13:03:15.351894","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We want to get a brief idea of the data inside the collection, so we print out the first few lines of the data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SpK6Io1N6C"}],"key":"qS5nzhbBtF"}],"visibility":"show","key":"pSXYQklhZq"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:15.899867Z","iopub.status.busy":"2023-03-22T13:03:15.898225Z","iopub.status.idle":"2023-03-22T13:03:16.456035Z","shell.execute_reply":"2023-03-22T13:03:16.452805Z"},"papermill":{"duration":0.752148,"end_time":"2023-03-22T13:03:16.460317","exception":false,"start_time":"2023-03-22T13:03:15.708169","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"adm1.head()","visibility":"show","key":"Ed2OohXjSg"},{"type":"output","id":"6kHxhB9uwS8O7dR3kRmWR","data":[{"output_type":"execute_result","execution_count":29,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\n\u003cstyle scoped\u003e\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n\u003c/style\u003e\n\u003ctable border=\"1\" class=\"dataframe\"\u003e\n  \u003cthead\u003e\n    \u003ctr style=\"text-align: right;\"\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003eid\u003c/th\u003e\n      \u003cth\u003ecreated_at\u003c/th\u003e\n      \u003cth\u003emodified_at\u003c/th\u003e\n      \u003cth\u003egeometry\u003c/th\u003e\n      \u003cth\u003eadm0_pcode\u003c/th\u003e\n      \u003cth\u003eadm0_en\u003c/th\u003e\n      \u003cth\u003eadm1_pcode\u003c/th\u003e\n      \u003cth\u003eadm1_en\u003c/th\u003e\n      \u003cth\u003eadm1_type\u003c/th\u003e\n      \u003cth\u003eprov_code\u003c/th\u003e\n      \u003cth\u003eold_provin\u003c/th\u003e\n      \u003cth\u003eprov_type\u003c/th\u003e\n      \u003cth\u003esource\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003cth\u003e0\u003c/th\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:29:10.323348+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((46.74249 -17.71321, 46.74325 -17.713...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003eBNGRC (National Disaster Management Office) Fo...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e1\u003c/th\u003e\n      \u003ctd\u003e2\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:29:10.323348+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.49716 -19.11777, 47.49748 -19.118...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG12\u003c/td\u003e\n      \u003ctd\u003eVakinankaratra\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003eBNGRC (National Disaster Management Office) Fo...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2\u003c/th\u003e\n      \u003ctd\u003e3\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:29:10.323348+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((46.57273 -18.67973, 46.57734 -18.679...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG13\u003c/td\u003e\n      \u003ctd\u003eItasy\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003eBNGRC (National Disaster Management Office) Fo...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e3\u003c/th\u003e\n      \u003ctd\u003e4\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:29:10.323348+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((46.46281 -17.74554, 46.46550 -17.745...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG14\u003c/td\u003e\n      \u003ctd\u003eBongolava\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003eBNGRC (National Disaster Management Office) Fo...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e4\u003c/th\u003e\n      \u003ctd\u003e5\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:29:10.323348+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((46.57042 -20.70627, 46.57205 -20.707...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG21\u003c/td\u003e\n      \u003ctd\u003eHaute Matsiatra\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003e2\u003c/td\u003e\n      \u003ctd\u003eFianarantsoa\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003eBNGRC (National Disaster Management Office) Fo...\u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"   id                        created_at modified_at  \\\n0   1  2022-04-29T12:29:10.323348+00:00        None   \n1   2  2022-04-29T12:29:10.323348+00:00        None   \n2   3  2022-04-29T12:29:10.323348+00:00        None   \n3   4  2022-04-29T12:29:10.323348+00:00        None   \n4   5  2022-04-29T12:29:10.323348+00:00        None   \n\n                                            geometry adm0_pcode     adm0_en  \\\n0  POLYGON ((46.74249 -17.71321, 46.74325 -17.713...         MG  Madagascar   \n1  POLYGON ((47.49716 -19.11777, 47.49748 -19.118...         MG  Madagascar   \n2  POLYGON ((46.57273 -18.67973, 46.57734 -18.679...         MG  Madagascar   \n3  POLYGON ((46.46281 -17.74554, 46.46550 -17.745...         MG  Madagascar   \n4  POLYGON ((46.57042 -20.70627, 46.57205 -20.707...         MG  Madagascar   \n\n  adm1_pcode          adm1_en adm1_type  prov_code    old_provin  \\\n0       MG11       Analamanga    Region          1  Antananarivo   \n1       MG12   Vakinankaratra    Region          1  Antananarivo   \n2       MG13            Itasy    Region          1  Antananarivo   \n3       MG14        Bongolava    Region          1  Antananarivo   \n4       MG21  Haute Matsiatra    Region          2  Fianarantsoa   \n\n                                  prov_type  \\\n0  Old Provinces/Faritany dissolved in 2007   \n1  Old Provinces/Faritany dissolved in 2007   \n2  Old Provinces/Faritany dissolved in 2007   \n3  Old Provinces/Faritany dissolved in 2007   \n4  Old Provinces/Faritany dissolved in 2007   \n\n                                              source  \n0  BNGRC (National Disaster Management Office) Fo...  \n1  BNGRC (National Disaster Management Office) Fo...  \n2  BNGRC (National Disaster Management Office) Fo...  \n3  BNGRC (National Disaster Management Office) Fo...  \n4  BNGRC (National Disaster Management Office) Fo...  ","content_type":"text/plain"}}}],"visibility":"show","key":"QaXRq4wme4"}],"visibility":"show","key":"m2CFOz0Cm5"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.223079,"end_time":"2023-03-22T13:03:16.873187","exception":false,"start_time":"2023-03-22T13:03:16.650108","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Sometimes it helps more to see a plot of the data, here we group the regions by the column “old_provin”.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"R8ctcWbd5f"}],"key":"bXoTwbNfti"}],"visibility":"show","key":"ynpWllw2C3"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:17.286173Z","iopub.status.busy":"2023-03-22T13:03:17.283097Z","iopub.status.idle":"2023-03-22T13:03:18.015728Z","shell.execute_reply":"2023-03-22T13:03:18.008027Z"},"papermill":{"duration":0.941106,"end_time":"2023-03-22T13:03:18.019843","exception":false,"start_time":"2023-03-22T13:03:17.078737","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"adm1.plot(column=\"old_provin\", figsize=(15,15), cmap = 'jet')\n","visibility":"show","key":"k9MkTmqHJ6"},{"type":"output","id":"DSf5Lo7cDucJicUsSt5Ji","data":[{"output_type":"execute_result","execution_count":30,"metadata":{},"data":{"text/plain":{"content":"\u003cAxes: \u003e","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"2d5eb56de07f4ac7f9489ef59762cbe3","path":"/notebooks_test/build/2d5eb56de07f4ac7f9489ef59762cbe3.png"},"text/plain":{"content":"\u003cFigure size 1500x1500 with 1 Axes\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"bluENIvJ6l"}],"visibility":"show","key":"h9CF1qzafR"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.186482,"end_time":"2023-03-22T13:03:18.395937","exception":false,"start_time":"2023-03-22T13:03:18.209455","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The data inside collection adm1 is a bit too coarse for our area of interest, let’s see what we find in adm2:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GSegbjkBqP"}],"key":"mXBvHHnU3u"}],"visibility":"show","key":"UYi9ODPQed"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:18.758639Z","iopub.status.busy":"2023-03-22T13:03:18.758204Z","iopub.status.idle":"2023-03-22T13:03:24.512385Z","shell.execute_reply":"2023-03-22T13:03:24.509500Z"},"papermill":{"duration":5.934043,"end_time":"2023-03-22T13:03:24.516044","exception":false,"start_time":"2023-03-22T13:03:18.582001","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"adm2 = geodb.get_collection_pg(\"adm2\", database=\"madagascar_adm_boundaries\")","visibility":"show","key":"JZ1jebn2EH"},{"type":"output","id":"Mav9d4bqIWRBNTRoxRnzY","data":[],"visibility":"show","key":"KpkqpMXOcp"}],"visibility":"show","key":"P9X8Vte9iv"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:24.861811Z","iopub.status.busy":"2023-03-22T13:03:24.859943Z","iopub.status.idle":"2023-03-22T13:03:24.926916Z","shell.execute_reply":"2023-03-22T13:03:24.924421Z"},"papermill":{"duration":0.253667,"end_time":"2023-03-22T13:03:24.934289","exception":false,"start_time":"2023-03-22T13:03:24.680622","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"adm2.head()","visibility":"show","key":"Z90hpkcHVf"},{"type":"output","id":"iQqU_XjYsU5awxGBy8ach","data":[{"output_type":"execute_result","execution_count":32,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\n\u003cstyle scoped\u003e\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n\u003c/style\u003e\n\u003ctable border=\"1\" class=\"dataframe\"\u003e\n  \u003cthead\u003e\n    \u003ctr style=\"text-align: right;\"\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003eid\u003c/th\u003e\n      \u003cth\u003ecreated_at\u003c/th\u003e\n      \u003cth\u003emodified_at\u003c/th\u003e\n      \u003cth\u003egeometry\u003c/th\u003e\n      \u003cth\u003eadm0_pcode\u003c/th\u003e\n      \u003cth\u003eadm0_en\u003c/th\u003e\n      \u003cth\u003eadm1_pcode\u003c/th\u003e\n      \u003cth\u003eadm1_en\u003c/th\u003e\n      \u003cth\u003eadm1_type\u003c/th\u003e\n      \u003cth\u003eadm2_pcode\u003c/th\u003e\n      \u003cth\u003eadm2_en\u003c/th\u003e\n      \u003cth\u003eadm2_type\u003c/th\u003e\n      \u003cth\u003eprov_code\u003c/th\u003e\n      \u003cth\u003eold_provin\u003c/th\u003e\n      \u003cth\u003eprov_type\u003c/th\u003e\n      \u003cth\u003enotes\u003c/th\u003e\n      \u003cth\u003esource\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003cth\u003e0\u003c/th\u003e\n      \u003ctd\u003e239\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.50556 -18.89146, 47.50563 -18.891...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11101001A\u003c/td\u003e\n      \u003ctd\u003e1er Arrondissement\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003ePrevious district name is Antananarivo Renivoh...\u003c/td\u003e\n      \u003ctd\u003eNote that Communes (admin 3) have become the D...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e1\u003c/th\u003e\n      \u003ctd\u003e240\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.55842 -18.91178, 47.55857 -18.911...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11101002A\u003c/td\u003e\n      \u003ctd\u003e2e Arrondissement\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003ePrevious district name is Antananarivo Renivoh...\u003c/td\u003e\n      \u003ctd\u003eNote that Communes (admin 3) have become the D...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2\u003c/th\u003e\n      \u003ctd\u003e241\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.51365 -18.87834, 47.51775 -18.879...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11101003A\u003c/td\u003e\n      \u003ctd\u003e3e Arrondissement\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003ePrevious district name is Antananarivo Renivoh...\u003c/td\u003e\n      \u003ctd\u003eNote that Communes (admin 3) have become the D...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e3\u003c/th\u003e\n      \u003ctd\u003e242\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.50262 -18.91043, 47.50261 -18.910...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11101004A\u003c/td\u003e\n      \u003ctd\u003e4e Arrondissement\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003ePrevious district name is Antananarivo Renivoh...\u003c/td\u003e\n      \u003ctd\u003eNote that Communes (admin 3) have become the D...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e4\u003c/th\u003e\n      \u003ctd\u003e243\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.53500 -18.85464, 47.53518 -18.854...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11101005A\u003c/td\u003e\n      \u003ctd\u003e5e Arrondissement\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003ePrevious district name is Antananarivo Renivoh...\u003c/td\u003e\n      \u003ctd\u003eNote that Communes (admin 3) have become the D...\u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"    id                        created_at modified_at  \\\n0  239  2022-04-29T12:32:11.189736+00:00        None   \n1  240  2022-04-29T12:32:11.189736+00:00        None   \n2  241  2022-04-29T12:32:11.189736+00:00        None   \n3  242  2022-04-29T12:32:11.189736+00:00        None   \n4  243  2022-04-29T12:32:11.189736+00:00        None   \n\n                                            geometry adm0_pcode     adm0_en  \\\n0  POLYGON ((47.50556 -18.89146, 47.50563 -18.891...         MG  Madagascar   \n1  POLYGON ((47.55842 -18.91178, 47.55857 -18.911...         MG  Madagascar   \n2  POLYGON ((47.51365 -18.87834, 47.51775 -18.879...         MG  Madagascar   \n3  POLYGON ((47.50262 -18.91043, 47.50261 -18.910...         MG  Madagascar   \n4  POLYGON ((47.53500 -18.85464, 47.53518 -18.854...         MG  Madagascar   \n\n  adm1_pcode     adm1_en adm1_type   adm2_pcode             adm2_en adm2_type  \\\n0       MG11  Analamanga    Region  MG11101001A  1er Arrondissement  District   \n1       MG11  Analamanga    Region  MG11101002A   2e Arrondissement  District   \n2       MG11  Analamanga    Region  MG11101003A   3e Arrondissement  District   \n3       MG11  Analamanga    Region  MG11101004A   4e Arrondissement  District   \n4       MG11  Analamanga    Region  MG11101005A   5e Arrondissement  District   \n\n   prov_code    old_provin                                 prov_type  \\\n0          1  Antananarivo  Old Provinces/Faritany dissolved in 2007   \n1          1  Antananarivo  Old Provinces/Faritany dissolved in 2007   \n2          1  Antananarivo  Old Provinces/Faritany dissolved in 2007   \n3          1  Antananarivo  Old Provinces/Faritany dissolved in 2007   \n4          1  Antananarivo  Old Provinces/Faritany dissolved in 2007   \n\n                                               notes  \\\n0  Previous district name is Antananarivo Renivoh...   \n1  Previous district name is Antananarivo Renivoh...   \n2  Previous district name is Antananarivo Renivoh...   \n3  Previous district name is Antananarivo Renivoh...   \n4  Previous district name is Antananarivo Renivoh...   \n\n                                              source  \n0  Note that Communes (admin 3) have become the D...  \n1  Note that Communes (admin 3) have become the D...  \n2  Note that Communes (admin 3) have become the D...  \n3  Note that Communes (admin 3) have become the D...  \n4  Note that Communes (admin 3) have become the D...  ","content_type":"text/plain"}}}],"visibility":"show","key":"pOY6O4ngih"}],"visibility":"show","key":"tATR7D9JTR"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.145654,"end_time":"2023-03-22T13:03:25.245952","exception":false,"start_time":"2023-03-22T13:03:25.100298","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We are interested in the administrative region of Antananarivo, which belongs to Analamanga. Here we select only the rows which belong to Analamanga.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pRcxpnD2IJ"}],"key":"EleTSWjdZs"}],"visibility":"show","key":"ToWpYBN5yb"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:25.536348Z","iopub.status.busy":"2023-03-22T13:03:25.535837Z","iopub.status.idle":"2023-03-22T13:03:25.782484Z","shell.execute_reply":"2023-03-22T13:03:25.781512Z"},"papermill":{"duration":0.397605,"end_time":"2023-03-22T13:03:25.785236","exception":false,"start_time":"2023-03-22T13:03:25.387631","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"adm2_Analamanga = geodb.get_collection(\"adm2\", database=\"madagascar_adm_boundaries\", query='adm1_en=eq.Analamanga')\n","visibility":"show","key":"tjTWBfifun"},{"type":"output","id":"F5gezP735sSf4u0jfWxgv","data":[],"visibility":"show","key":"NJylVWBc4A"}],"visibility":"show","key":"UMXxElhVat"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:26.105079Z","iopub.status.busy":"2023-03-22T13:03:26.104228Z","iopub.status.idle":"2023-03-22T13:03:26.395669Z","shell.execute_reply":"2023-03-22T13:03:26.393640Z"},"papermill":{"duration":0.470557,"end_time":"2023-03-22T13:03:26.399759","exception":false,"start_time":"2023-03-22T13:03:25.929202","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"adm2_Analamanga","visibility":"show","key":"V0mBGWd1O6"},{"type":"output","id":"zUoTI8KhdIEtZGneAFx3I","data":[{"output_type":"execute_result","execution_count":34,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\n\u003cstyle scoped\u003e\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n\u003c/style\u003e\n\u003ctable border=\"1\" class=\"dataframe\"\u003e\n  \u003cthead\u003e\n    \u003ctr style=\"text-align: right;\"\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003eid\u003c/th\u003e\n      \u003cth\u003ecreated_at\u003c/th\u003e\n      \u003cth\u003emodified_at\u003c/th\u003e\n      \u003cth\u003egeometry\u003c/th\u003e\n      \u003cth\u003eadm0_pcode\u003c/th\u003e\n      \u003cth\u003eadm0_en\u003c/th\u003e\n      \u003cth\u003eadm1_pcode\u003c/th\u003e\n      \u003cth\u003eadm1_en\u003c/th\u003e\n      \u003cth\u003eadm1_type\u003c/th\u003e\n      \u003cth\u003eadm2_pcode\u003c/th\u003e\n      \u003cth\u003eadm2_en\u003c/th\u003e\n      \u003cth\u003eadm2_type\u003c/th\u003e\n      \u003cth\u003eprov_code\u003c/th\u003e\n      \u003cth\u003eold_provin\u003c/th\u003e\n      \u003cth\u003eprov_type\u003c/th\u003e\n      \u003cth\u003enotes\u003c/th\u003e\n      \u003cth\u003esource\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003cth\u003e0\u003c/th\u003e\n      \u003ctd\u003e239\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.50556 -18.89146, 47.50563 -18.891...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11101001A\u003c/td\u003e\n      \u003ctd\u003e1er Arrondissement\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003ePrevious district name is Antananarivo Renivoh...\u003c/td\u003e\n      \u003ctd\u003eNote that Communes (admin 3) have become the D...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e1\u003c/th\u003e\n      \u003ctd\u003e240\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.55842 -18.91178, 47.55857 -18.911...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11101002A\u003c/td\u003e\n      \u003ctd\u003e2e Arrondissement\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003ePrevious district name is Antananarivo Renivoh...\u003c/td\u003e\n      \u003ctd\u003eNote that Communes (admin 3) have become the D...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2\u003c/th\u003e\n      \u003ctd\u003e241\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.51365 -18.87834, 47.51775 -18.879...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11101003A\u003c/td\u003e\n      \u003ctd\u003e3e Arrondissement\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003ePrevious district name is Antananarivo Renivoh...\u003c/td\u003e\n      \u003ctd\u003eNote that Communes (admin 3) have become the D...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e3\u003c/th\u003e\n      \u003ctd\u003e242\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.50262 -18.91043, 47.50261 -18.910...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11101004A\u003c/td\u003e\n      \u003ctd\u003e4e Arrondissement\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003ePrevious district name is Antananarivo Renivoh...\u003c/td\u003e\n      \u003ctd\u003eNote that Communes (admin 3) have become the D...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e4\u003c/th\u003e\n      \u003ctd\u003e243\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.53500 -18.85464, 47.53518 -18.854...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11101005A\u003c/td\u003e\n      \u003ctd\u003e5e Arrondissement\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003ePrevious district name is Antananarivo Renivoh...\u003c/td\u003e\n      \u003ctd\u003eNote that Communes (admin 3) have become the D...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e5\u003c/th\u003e\n      \u003ctd\u003e244\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.48436 -18.83989, 47.48491 -18.840...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11101006A\u003c/td\u003e\n      \u003ctd\u003e6e Arrondissement\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003ePrevious district name is Antananarivo Renivoh...\u003c/td\u003e\n      \u003ctd\u003eNote that Communes (admin 3) have become the D...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e6\u003c/th\u003e\n      \u003ctd\u003e245\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.61521 -18.71709, 47.61702 -18.717...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11102\u003c/td\u003e\n      \u003ctd\u003eAntananarivo Avaradrano\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003eBNGRC (National Disaster Management Office) Fo...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e7\u003c/th\u003e\n      \u003ctd\u003e246\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.49982 -18.43546, 47.50490 -18.439...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11103\u003c/td\u003e\n      \u003ctd\u003eAmbohidratrimo\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003eBNGRC (National Disaster Management Office) Fo...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e8\u003c/th\u003e\n      \u003ctd\u003e247\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((46.74249 -17.71321, 46.74325 -17.713...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11104\u003c/td\u003e\n      \u003ctd\u003eAnkazobe\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003eBNGRC (National Disaster Management Office) Fo...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e9\u003c/th\u003e\n      \u003ctd\u003e248\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.72437 -18.47394, 47.72465 -18.477...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11106\u003c/td\u003e\n      \u003ctd\u003eManjakandriana\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003eBNGRC (National Disaster Management Office) Fo...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e10\u003c/th\u003e\n      \u003ctd\u003e249\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.84665 -17.76164, 47.84740 -17.762...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11107\u003c/td\u003e\n      \u003ctd\u003eAnjozorobe\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003eBNGRC (National Disaster Management Office) Fo...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e11\u003c/th\u003e\n      \u003ctd\u003e250\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.72871 -19.14659, 47.72961 -19.147...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11115\u003c/td\u003e\n      \u003ctd\u003eAndramasina\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003eBNGRC (National Disaster Management Office) Fo...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e12\u003c/th\u003e\n      \u003ctd\u003e251\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.47574 -18.87596, 47.47633 -18.876...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11117\u003c/td\u003e\n      \u003ctd\u003eAntananarivo Atsimondrano\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003eBNGRC (National Disaster Management Office) Fo...\u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"     id                        created_at modified_at  \\\n0   239  2022-04-29T12:32:11.189736+00:00        None   \n1   240  2022-04-29T12:32:11.189736+00:00        None   \n2   241  2022-04-29T12:32:11.189736+00:00        None   \n3   242  2022-04-29T12:32:11.189736+00:00        None   \n4   243  2022-04-29T12:32:11.189736+00:00        None   \n5   244  2022-04-29T12:32:11.189736+00:00        None   \n6   245  2022-04-29T12:32:11.189736+00:00        None   \n7   246  2022-04-29T12:32:11.189736+00:00        None   \n8   247  2022-04-29T12:32:11.189736+00:00        None   \n9   248  2022-04-29T12:32:11.189736+00:00        None   \n10  249  2022-04-29T12:32:11.189736+00:00        None   \n11  250  2022-04-29T12:32:11.189736+00:00        None   \n12  251  2022-04-29T12:32:11.189736+00:00        None   \n\n                                             geometry adm0_pcode     adm0_en  \\\n0   POLYGON ((47.50556 -18.89146, 47.50563 -18.891...         MG  Madagascar   \n1   POLYGON ((47.55842 -18.91178, 47.55857 -18.911...         MG  Madagascar   \n2   POLYGON ((47.51365 -18.87834, 47.51775 -18.879...         MG  Madagascar   \n3   POLYGON ((47.50262 -18.91043, 47.50261 -18.910...         MG  Madagascar   \n4   POLYGON ((47.53500 -18.85464, 47.53518 -18.854...         MG  Madagascar   \n5   POLYGON ((47.48436 -18.83989, 47.48491 -18.840...         MG  Madagascar   \n6   POLYGON ((47.61521 -18.71709, 47.61702 -18.717...         MG  Madagascar   \n7   POLYGON ((47.49982 -18.43546, 47.50490 -18.439...         MG  Madagascar   \n8   POLYGON ((46.74249 -17.71321, 46.74325 -17.713...         MG  Madagascar   \n9   POLYGON ((47.72437 -18.47394, 47.72465 -18.477...         MG  Madagascar   \n10  POLYGON ((47.84665 -17.76164, 47.84740 -17.762...         MG  Madagascar   \n11  POLYGON ((47.72871 -19.14659, 47.72961 -19.147...         MG  Madagascar   \n12  POLYGON ((47.47574 -18.87596, 47.47633 -18.876...         MG  Madagascar   \n\n   adm1_pcode     adm1_en adm1_type   adm2_pcode                    adm2_en  \\\n0        MG11  Analamanga    Region  MG11101001A         1er Arrondissement   \n1        MG11  Analamanga    Region  MG11101002A          2e Arrondissement   \n2        MG11  Analamanga    Region  MG11101003A          3e Arrondissement   \n3        MG11  Analamanga    Region  MG11101004A          4e Arrondissement   \n4        MG11  Analamanga    Region  MG11101005A          5e Arrondissement   \n5        MG11  Analamanga    Region  MG11101006A          6e Arrondissement   \n6        MG11  Analamanga    Region      MG11102    Antananarivo Avaradrano   \n7        MG11  Analamanga    Region      MG11103             Ambohidratrimo   \n8        MG11  Analamanga    Region      MG11104                   Ankazobe   \n9        MG11  Analamanga    Region      MG11106             Manjakandriana   \n10       MG11  Analamanga    Region      MG11107                 Anjozorobe   \n11       MG11  Analamanga    Region      MG11115                Andramasina   \n12       MG11  Analamanga    Region      MG11117  Antananarivo Atsimondrano   \n\n   adm2_type  prov_code    old_provin  \\\n0   District          1  Antananarivo   \n1   District          1  Antananarivo   \n2   District          1  Antananarivo   \n3   District          1  Antananarivo   \n4   District          1  Antananarivo   \n5   District          1  Antananarivo   \n6   District          1  Antananarivo   \n7   District          1  Antananarivo   \n8   District          1  Antananarivo   \n9   District          1  Antananarivo   \n10  District          1  Antananarivo   \n11  District          1  Antananarivo   \n12  District          1  Antananarivo   \n\n                                   prov_type  \\\n0   Old Provinces/Faritany dissolved in 2007   \n1   Old Provinces/Faritany dissolved in 2007   \n2   Old Provinces/Faritany dissolved in 2007   \n3   Old Provinces/Faritany dissolved in 2007   \n4   Old Provinces/Faritany dissolved in 2007   \n5   Old Provinces/Faritany dissolved in 2007   \n6   Old Provinces/Faritany dissolved in 2007   \n7   Old Provinces/Faritany dissolved in 2007   \n8   Old Provinces/Faritany dissolved in 2007   \n9   Old Provinces/Faritany dissolved in 2007   \n10  Old Provinces/Faritany dissolved in 2007   \n11  Old Provinces/Faritany dissolved in 2007   \n12  Old Provinces/Faritany dissolved in 2007   \n\n                                                notes  \\\n0   Previous district name is Antananarivo Renivoh...   \n1   Previous district name is Antananarivo Renivoh...   \n2   Previous district name is Antananarivo Renivoh...   \n3   Previous district name is Antananarivo Renivoh...   \n4   Previous district name is Antananarivo Renivoh...   \n5   Previous district name is Antananarivo Renivoh...   \n6                                                None   \n7                                                None   \n8                                                None   \n9                                                None   \n10                                               None   \n11                                               None   \n12                                               None   \n\n                                               source  \n0   Note that Communes (admin 3) have become the D...  \n1   Note that Communes (admin 3) have become the D...  \n2   Note that Communes (admin 3) have become the D...  \n3   Note that Communes (admin 3) have become the D...  \n4   Note that Communes (admin 3) have become the D...  \n5   Note that Communes (admin 3) have become the D...  \n6   BNGRC (National Disaster Management Office) Fo...  \n7   BNGRC (National Disaster Management Office) Fo...  \n8   BNGRC (National Disaster Management Office) Fo...  \n9   BNGRC (National Disaster Management Office) Fo...  \n10  BNGRC (National Disaster Management Office) Fo...  \n11  BNGRC (National Disaster Management Office) Fo...  \n12  BNGRC (National Disaster Management Office) Fo...  ","content_type":"text/plain"}}}],"visibility":"show","key":"iRUhHDATXH"}],"visibility":"show","key":"u0ps1OUw9W"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.14672,"end_time":"2023-03-22T13:03:26.691964","exception":false,"start_time":"2023-03-22T13:03:26.545244","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s take a bief look at a plot of our subset:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OUAi0y4yTd"}],"key":"INR4TuDPuG"}],"visibility":"show","key":"k7ryrTuP50"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:27.074117Z","iopub.status.busy":"2023-03-22T13:03:27.073722Z","iopub.status.idle":"2023-03-22T13:03:27.848210Z","shell.execute_reply":"2023-03-22T13:03:27.845941Z"},"papermill":{"duration":1.009258,"end_time":"2023-03-22T13:03:27.857512","exception":false,"start_time":"2023-03-22T13:03:26.848254","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"adm2_Analamanga.plot(figsize=(15,15), cmap = 'jet')","visibility":"show","key":"HMsFLECmxK"},{"type":"output","id":"f5JqunRDCFLOUX_O4UguW","data":[{"output_type":"execute_result","execution_count":35,"metadata":{},"data":{"text/plain":{"content":"\u003cAxes: \u003e","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"e46001ea76203aaf21a3832ba2aef294","path":"/notebooks_test/build/e46001ea76203aaf21a3832ba2aef294.png"},"text/plain":{"content":"\u003cFigure size 1500x1500 with 1 Axes\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"wGPas9k6MU"}],"visibility":"show","key":"q2hID6zmzS"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.212959,"end_time":"2023-03-22T13:03:28.251908","exception":false,"start_time":"2023-03-22T13:03:28.038949","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Select regions to mask the cube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PnuRPAl7EQ"}],"identifier":"select-regions-to-mask-the-cube","label":"Select regions to mask the cube","html_id":"select-regions-to-mask-the-cube","implicit":true,"key":"DnTlukujmd"}],"visibility":"show","key":"TAXbZfaUIs"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:28.693093Z","iopub.status.busy":"2023-03-22T13:03:28.692642Z","iopub.status.idle":"2023-03-22T13:03:28.715336Z","shell.execute_reply":"2023-03-22T13:03:28.713309Z"},"papermill":{"duration":0.309984,"end_time":"2023-03-22T13:03:28.738739","exception":false,"start_time":"2023-03-22T13:03:28.428755","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"sub_Analamanga = adm2_Analamanga.loc[(adm2_Analamanga.adm2_en == \"Antananarivo Atsimondrano\") |\n                                     (adm2_Analamanga.adm2_en == \"Antananarivo Avaradrano\") |\n                                     (adm2_Analamanga.adm2_en == \"Ambohidratrimo\") |\n                                     (adm2_Analamanga.adm2_en == \"1er Arrondissement\") |\n                                     (adm2_Analamanga.adm2_en == \"2e Arrondissement\") |\n                                     (adm2_Analamanga.adm2_en == \"3e Arrondissement\") |\n                                     (adm2_Analamanga.adm2_en == \"4e Arrondissement\") |\n                                     (adm2_Analamanga.adm2_en == \"5e Arrondissement\") |\n                                     (adm2_Analamanga.adm2_en == \"6e Arrondissement\") ]","visibility":"show","key":"haZLc89Xzo"},{"type":"output","id":"WAaxIj5uWpMUxjt_L1odu","data":[],"visibility":"show","key":"deaBqZxAPO"}],"visibility":"show","key":"msKeHK04XR"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:29.166736Z","iopub.status.busy":"2023-03-22T13:03:29.165686Z","iopub.status.idle":"2023-03-22T13:03:29.302667Z","shell.execute_reply":"2023-03-22T13:03:29.298598Z"},"papermill":{"duration":0.395867,"end_time":"2023-03-22T13:03:29.313526","exception":false,"start_time":"2023-03-22T13:03:28.917659","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"sub_Analamanga","visibility":"show","key":"ddBHRTsY74"},{"type":"output","id":"ZtJmTPir2SuceybMf7FHU","data":[{"output_type":"execute_result","execution_count":37,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\n\u003cstyle scoped\u003e\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n\u003c/style\u003e\n\u003ctable border=\"1\" class=\"dataframe\"\u003e\n  \u003cthead\u003e\n    \u003ctr style=\"text-align: right;\"\u003e\n      \u003cth\u003e\u003c/th\u003e\n      \u003cth\u003eid\u003c/th\u003e\n      \u003cth\u003ecreated_at\u003c/th\u003e\n      \u003cth\u003emodified_at\u003c/th\u003e\n      \u003cth\u003egeometry\u003c/th\u003e\n      \u003cth\u003eadm0_pcode\u003c/th\u003e\n      \u003cth\u003eadm0_en\u003c/th\u003e\n      \u003cth\u003eadm1_pcode\u003c/th\u003e\n      \u003cth\u003eadm1_en\u003c/th\u003e\n      \u003cth\u003eadm1_type\u003c/th\u003e\n      \u003cth\u003eadm2_pcode\u003c/th\u003e\n      \u003cth\u003eadm2_en\u003c/th\u003e\n      \u003cth\u003eadm2_type\u003c/th\u003e\n      \u003cth\u003eprov_code\u003c/th\u003e\n      \u003cth\u003eold_provin\u003c/th\u003e\n      \u003cth\u003eprov_type\u003c/th\u003e\n      \u003cth\u003enotes\u003c/th\u003e\n      \u003cth\u003esource\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003cth\u003e0\u003c/th\u003e\n      \u003ctd\u003e239\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.50556 -18.89146, 47.50563 -18.891...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11101001A\u003c/td\u003e\n      \u003ctd\u003e1er Arrondissement\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003ePrevious district name is Antananarivo Renivoh...\u003c/td\u003e\n      \u003ctd\u003eNote that Communes (admin 3) have become the D...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e1\u003c/th\u003e\n      \u003ctd\u003e240\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.55842 -18.91178, 47.55857 -18.911...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11101002A\u003c/td\u003e\n      \u003ctd\u003e2e Arrondissement\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003ePrevious district name is Antananarivo Renivoh...\u003c/td\u003e\n      \u003ctd\u003eNote that Communes (admin 3) have become the D...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e2\u003c/th\u003e\n      \u003ctd\u003e241\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.51365 -18.87834, 47.51775 -18.879...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11101003A\u003c/td\u003e\n      \u003ctd\u003e3e Arrondissement\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003ePrevious district name is Antananarivo Renivoh...\u003c/td\u003e\n      \u003ctd\u003eNote that Communes (admin 3) have become the D...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e3\u003c/th\u003e\n      \u003ctd\u003e242\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.50262 -18.91043, 47.50261 -18.910...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11101004A\u003c/td\u003e\n      \u003ctd\u003e4e Arrondissement\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003ePrevious district name is Antananarivo Renivoh...\u003c/td\u003e\n      \u003ctd\u003eNote that Communes (admin 3) have become the D...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e4\u003c/th\u003e\n      \u003ctd\u003e243\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.53500 -18.85464, 47.53518 -18.854...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11101005A\u003c/td\u003e\n      \u003ctd\u003e5e Arrondissement\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003ePrevious district name is Antananarivo Renivoh...\u003c/td\u003e\n      \u003ctd\u003eNote that Communes (admin 3) have become the D...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e5\u003c/th\u003e\n      \u003ctd\u003e244\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.48436 -18.83989, 47.48491 -18.840...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11101006A\u003c/td\u003e\n      \u003ctd\u003e6e Arrondissement\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003ePrevious district name is Antananarivo Renivoh...\u003c/td\u003e\n      \u003ctd\u003eNote that Communes (admin 3) have become the D...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e6\u003c/th\u003e\n      \u003ctd\u003e245\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.61521 -18.71709, 47.61702 -18.717...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11102\u003c/td\u003e\n      \u003ctd\u003eAntananarivo Avaradrano\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003eBNGRC (National Disaster Management Office) Fo...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e7\u003c/th\u003e\n      \u003ctd\u003e246\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.49982 -18.43546, 47.50490 -18.439...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11103\u003c/td\u003e\n      \u003ctd\u003eAmbohidratrimo\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003eBNGRC (National Disaster Management Office) Fo...\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003cth\u003e12\u003c/th\u003e\n      \u003ctd\u003e251\u003c/td\u003e\n      \u003ctd\u003e2022-04-29T12:32:11.189736+00:00\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003ePOLYGON ((47.47574 -18.87596, 47.47633 -18.876...\u003c/td\u003e\n      \u003ctd\u003eMG\u003c/td\u003e\n      \u003ctd\u003eMadagascar\u003c/td\u003e\n      \u003ctd\u003eMG11\u003c/td\u003e\n      \u003ctd\u003eAnalamanga\u003c/td\u003e\n      \u003ctd\u003eRegion\u003c/td\u003e\n      \u003ctd\u003eMG11117\u003c/td\u003e\n      \u003ctd\u003eAntananarivo Atsimondrano\u003c/td\u003e\n      \u003ctd\u003eDistrict\u003c/td\u003e\n      \u003ctd\u003e1\u003c/td\u003e\n      \u003ctd\u003eAntananarivo\u003c/td\u003e\n      \u003ctd\u003eOld Provinces/Faritany dissolved in 2007\u003c/td\u003e\n      \u003ctd\u003eNone\u003c/td\u003e\n      \u003ctd\u003eBNGRC (National Disaster Management Office) Fo...\u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"     id                        created_at modified_at  \\\n0   239  2022-04-29T12:32:11.189736+00:00        None   \n1   240  2022-04-29T12:32:11.189736+00:00        None   \n2   241  2022-04-29T12:32:11.189736+00:00        None   \n3   242  2022-04-29T12:32:11.189736+00:00        None   \n4   243  2022-04-29T12:32:11.189736+00:00        None   \n5   244  2022-04-29T12:32:11.189736+00:00        None   \n6   245  2022-04-29T12:32:11.189736+00:00        None   \n7   246  2022-04-29T12:32:11.189736+00:00        None   \n12  251  2022-04-29T12:32:11.189736+00:00        None   \n\n                                             geometry adm0_pcode     adm0_en  \\\n0   POLYGON ((47.50556 -18.89146, 47.50563 -18.891...         MG  Madagascar   \n1   POLYGON ((47.55842 -18.91178, 47.55857 -18.911...         MG  Madagascar   \n2   POLYGON ((47.51365 -18.87834, 47.51775 -18.879...         MG  Madagascar   \n3   POLYGON ((47.50262 -18.91043, 47.50261 -18.910...         MG  Madagascar   \n4   POLYGON ((47.53500 -18.85464, 47.53518 -18.854...         MG  Madagascar   \n5   POLYGON ((47.48436 -18.83989, 47.48491 -18.840...         MG  Madagascar   \n6   POLYGON ((47.61521 -18.71709, 47.61702 -18.717...         MG  Madagascar   \n7   POLYGON ((47.49982 -18.43546, 47.50490 -18.439...         MG  Madagascar   \n12  POLYGON ((47.47574 -18.87596, 47.47633 -18.876...         MG  Madagascar   \n\n   adm1_pcode     adm1_en adm1_type   adm2_pcode                    adm2_en  \\\n0        MG11  Analamanga    Region  MG11101001A         1er Arrondissement   \n1        MG11  Analamanga    Region  MG11101002A          2e Arrondissement   \n2        MG11  Analamanga    Region  MG11101003A          3e Arrondissement   \n3        MG11  Analamanga    Region  MG11101004A          4e Arrondissement   \n4        MG11  Analamanga    Region  MG11101005A          5e Arrondissement   \n5        MG11  Analamanga    Region  MG11101006A          6e Arrondissement   \n6        MG11  Analamanga    Region      MG11102    Antananarivo Avaradrano   \n7        MG11  Analamanga    Region      MG11103             Ambohidratrimo   \n12       MG11  Analamanga    Region      MG11117  Antananarivo Atsimondrano   \n\n   adm2_type  prov_code    old_provin  \\\n0   District          1  Antananarivo   \n1   District          1  Antananarivo   \n2   District          1  Antananarivo   \n3   District          1  Antananarivo   \n4   District          1  Antananarivo   \n5   District          1  Antananarivo   \n6   District          1  Antananarivo   \n7   District          1  Antananarivo   \n12  District          1  Antananarivo   \n\n                                   prov_type  \\\n0   Old Provinces/Faritany dissolved in 2007   \n1   Old Provinces/Faritany dissolved in 2007   \n2   Old Provinces/Faritany dissolved in 2007   \n3   Old Provinces/Faritany dissolved in 2007   \n4   Old Provinces/Faritany dissolved in 2007   \n5   Old Provinces/Faritany dissolved in 2007   \n6   Old Provinces/Faritany dissolved in 2007   \n7   Old Provinces/Faritany dissolved in 2007   \n12  Old Provinces/Faritany dissolved in 2007   \n\n                                                notes  \\\n0   Previous district name is Antananarivo Renivoh...   \n1   Previous district name is Antananarivo Renivoh...   \n2   Previous district name is Antananarivo Renivoh...   \n3   Previous district name is Antananarivo Renivoh...   \n4   Previous district name is Antananarivo Renivoh...   \n5   Previous district name is Antananarivo Renivoh...   \n6                                                None   \n7                                                None   \n12                                               None   \n\n                                               source  \n0   Note that Communes (admin 3) have become the D...  \n1   Note that Communes (admin 3) have become the D...  \n2   Note that Communes (admin 3) have become the D...  \n3   Note that Communes (admin 3) have become the D...  \n4   Note that Communes (admin 3) have become the D...  \n5   Note that Communes (admin 3) have become the D...  \n6   BNGRC (National Disaster Management Office) Fo...  \n7   BNGRC (National Disaster Management Office) Fo...  \n12  BNGRC (National Disaster Management Office) Fo...  ","content_type":"text/plain"}}}],"visibility":"show","key":"GlDDiu8L7n"}],"visibility":"show","key":"udR70gRfCu"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:29.910540Z","iopub.status.busy":"2023-03-22T13:03:29.908221Z","iopub.status.idle":"2023-03-22T13:03:30.756867Z","shell.execute_reply":"2023-03-22T13:03:30.754282Z"},"papermill":{"duration":1.096873,"end_time":"2023-03-22T13:03:30.762333","exception":false,"start_time":"2023-03-22T13:03:29.665460","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"sub_Analamanga.plot(figsize=(15,15), cmap = 'jet')\n","visibility":"show","key":"jrWKWv5jqC"},{"type":"output","id":"RrdO6PCH9mgtP5m_0m1MG","data":[{"output_type":"execute_result","execution_count":38,"metadata":{},"data":{"text/plain":{"content":"\u003cAxes: \u003e","content_type":"text/plain"}}},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"61e6f4b7eddec003b798aa3cb2ee7553","path":"/notebooks_test/build/61e6f4b7eddec003b798aa3cb2ee7553.png"},"text/plain":{"content":"\u003cFigure size 1500x1500 with 1 Axes\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"FgyxI20x8o"}],"visibility":"show","key":"cA22SrMucT"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.228713,"end_time":"2023-03-22T13:03:31.188866","exception":false,"start_time":"2023-03-22T13:03:30.960153","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now we have selected only the rows which we are interested in. But they are in seperate geometry objects:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nelvlIWosC"}],"key":"TMpnTyIh3O"}],"visibility":"show","key":"CT6U2QUsv1"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:31.605750Z","iopub.status.busy":"2023-03-22T13:03:31.605284Z","iopub.status.idle":"2023-03-22T13:03:31.688177Z","shell.execute_reply":"2023-03-22T13:03:31.684726Z"},"papermill":{"duration":0.305389,"end_time":"2023-03-22T13:03:31.692238","exception":false,"start_time":"2023-03-22T13:03:31.386849","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"sub_Analamanga.geometry","visibility":"show","key":"d2yQCFaPG2"},{"type":"output","id":"xUYKpJQa3mmG5PaqOcn6S","data":[{"output_type":"execute_result","execution_count":39,"metadata":{},"data":{"text/plain":{"content":"0     POLYGON ((47.50556 -18.89146, 47.50563 -18.891...\n1     POLYGON ((47.55842 -18.91178, 47.55857 -18.911...\n2     POLYGON ((47.51365 -18.87834, 47.51775 -18.879...\n3     POLYGON ((47.50262 -18.91043, 47.50261 -18.910...\n4     POLYGON ((47.53500 -18.85464, 47.53518 -18.854...\n5     POLYGON ((47.48436 -18.83989, 47.48491 -18.840...\n6     POLYGON ((47.61521 -18.71709, 47.61702 -18.717...\n7     POLYGON ((47.49982 -18.43546, 47.50490 -18.439...\n12    POLYGON ((47.47574 -18.87596, 47.47633 -18.876...\nName: geometry, dtype: geometry","content_type":"text/plain"}}}],"visibility":"show","key":"aY5ouhHGuk"}],"visibility":"show","key":"D89CCziWSa"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.212563,"end_time":"2023-03-22T13:03:32.118495","exception":false,"start_time":"2023-03-22T13:03:31.905932","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Unify the subareas into one area of interest:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"DCAHF0VxDR"}],"key":"BoThhqKEnr"}],"visibility":"show","key":"hXSy4jJbfV"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:32.474950Z","iopub.status.busy":"2023-03-22T13:03:32.473300Z","iopub.status.idle":"2023-03-22T13:03:32.526885Z","shell.execute_reply":"2023-03-22T13:03:32.523105Z"},"papermill":{"duration":0.238506,"end_time":"2023-03-22T13:03:32.530367","exception":false,"start_time":"2023-03-22T13:03:32.291861","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"Antananarivo_region = shapely.ops.unary_union(geoms=[sub_Analamanga.geometry.iloc[i] for i in range(len(sub_Analamanga.geometry))])","visibility":"show","key":"VC5HEqsv9d"},{"type":"output","id":"fKCCJpUaa3aHVExTA4jCm","data":[],"visibility":"show","key":"LVipRON4QW"}],"visibility":"show","key":"nafB055Sh4"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:32.905283Z","iopub.status.busy":"2023-03-22T13:03:32.903935Z","iopub.status.idle":"2023-03-22T13:03:32.941781Z","shell.execute_reply":"2023-03-22T13:03:32.940394Z"},"papermill":{"duration":0.275152,"end_time":"2023-03-22T13:03:32.971027","exception":false,"start_time":"2023-03-22T13:03:32.695875","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Plot the polygon on a map\n\nIPython.display.GeoJSON(shapely.geometry.polygon.Polygon(Antananarivo_region).__geo_interface__)","visibility":"show","key":"Q5kuwu1iVi"},{"type":"output","id":"mf90gnmzh2DVAAIefFLay","data":[{"output_type":"display_data","metadata":{"application/geo+json":{"expanded":false,"root":"root"}},"data":{"application/geo+json":{"content_type":"application/geo+json","hash":"9ef3dcd0a443c5d4e2d52348164ec376","path":"/notebooks_test/build/9ef3dcd0a443c5d4e2d52348164ec376.json"},"text/plain":{"content":"\u003cIPython.display.GeoJSON object\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"Xf7EcjUYWX"}],"visibility":"show","key":"BrS1pnvqbX"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.289648,"end_time":"2023-03-22T13:03:33.521264","exception":false,"start_time":"2023-03-22T13:03:33.231616","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Next, let’s mask our dataset by the polygon we have just defined and visualise our ‘masked’ datacube.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Laq3C7Kszd"}],"key":"kuFmCwg80u"}],"visibility":"show","key":"yy8iLv19Sq"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:34.017619Z","iopub.status.busy":"2023-03-22T13:03:34.014002Z","iopub.status.idle":"2023-03-22T13:03:34.089692Z","shell.execute_reply":"2023-03-22T13:03:34.086040Z"},"papermill":{"duration":0.34351,"end_time":"2023-03-22T13:03:34.092902","exception":false,"start_time":"2023-03-22T13:03:33.749392","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"s1_cube","visibility":"show","key":"u8VcGpqkhd"},{"type":"output","id":"FuDksJqBHVw3b2zXziwzm","data":[{"output_type":"execute_result","execution_count":42,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"3e14d9def217d04336e1999fabf34b42","path":"/notebooks_test/build/3e14d9def217d04336e1999fabf34b42.html"},"text/plain":{"content":"\u003cxarray.Dataset\u003e\nDimensions:     (time: 8, lat: 1045, lon: 998, bnds: 2)\nCoordinates:\n  * lat         (lat) float64 -18.66 -18.66 -18.66 ... -19.13 -19.13 -19.13\n  * lon         (lon) float64 47.22 47.22 47.22 47.22 ... 47.67 47.67 47.67\n  * time        (time) datetime64[ns] 2022-01-03T02:19:35 ... 2022-03-28T02:1...\n    time_bnds   (time, bnds) datetime64[ns] dask.array\u003cchunksize=(8, 2), meta=np.ndarray\u003e\nDimensions without coordinates: bnds\nData variables:\n    VV          (time, lat, lon) float32 dask.array\u003cchunksize=(1, 1045, 998), meta=np.ndarray\u003e\n    VV_dB       (time, lat, lon) float32 dask.array\u003cchunksize=(1, 1045, 998), meta=np.ndarray\u003e\n    flood_mask  (time, lat, lon) float32 dask.array\u003cchunksize=(1, 1045, 998), meta=np.ndarray\u003e\nAttributes:\n    Conventions:             CF-1.7\n    title:                   S1GRD Data Cube Subset\n    history:                 [{'program': 'xcube_sh.chunkstore.SentinelHubChu...\n    date_created:            2023-03-22T13:01:18.601978\n    time_coverage_start:     2022-01-03T02:19:35+00:00\n    time_coverage_end:       2022-03-28T02:19:33+00:00\n    time_coverage_duration:  P83DT23H59M58S\n    geospatial_lon_min:      47.221985\n    geospatial_lat_min:      -19.129599\n    geospatial_lon_max:      47.671085\n    geospatial_lat_max:      -18.659349\n    processing_level:        L1B","content_type":"text/plain"}}}],"visibility":"show","key":"gnT7l26OSK"}],"visibility":"show","key":"VT6kBjv5ib"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.229698,"end_time":"2023-03-22T13:03:34.629194","exception":false,"start_time":"2023-03-22T13:03:34.399496","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now we take a look at the data which is within our desired administrative boundaries. Therefore we mask the s1_cube:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YcgIaLSNy1"}],"key":"zzkhhtbUbG"}],"visibility":"show","key":"lcrnidNFnZ"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:35.095679Z","iopub.status.busy":"2023-03-22T13:03:35.093847Z","iopub.status.idle":"2023-03-22T13:03:35.164089Z","shell.execute_reply":"2023-03-22T13:03:35.162615Z"},"papermill":{"duration":0.322258,"end_time":"2023-03-22T13:03:35.167632","exception":false,"start_time":"2023-03-22T13:03:34.845374","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"water_antananarivo = mask_dataset_by_geometry(s1_cube, geometry=Antananarivo_region)","visibility":"show","key":"ib9q6YklOt"},{"type":"output","id":"tfUtUe3L_StaH1Nip3umd","data":[],"visibility":"show","key":"w1TZ5sZ3Pe"}],"visibility":"show","key":"xFSK3qllEa"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.258934,"end_time":"2023-03-22T13:03:35.645634","exception":false,"start_time":"2023-03-22T13:03:35.386700","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s visualise our masked data cube using the timestep on 27th January and the VV_dB variable:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JN9KNuEl9n"}],"key":"ZwYwneetj3"}],"visibility":"show","key":"lLYaQCBM9a"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:36.188470Z","iopub.status.busy":"2023-03-22T13:03:36.187968Z","iopub.status.idle":"2023-03-22T13:03:37.402407Z","shell.execute_reply":"2023-03-22T13:03:37.399542Z"},"papermill":{"duration":1.514868,"end_time":"2023-03-22T13:03:37.414415","exception":false,"start_time":"2023-03-22T13:03:35.899547","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"water_antananarivo.VV_dB.isel(time=2).plot.imshow(cmap='Greys', vmin=-20, vmax=0, figsize=(10, 10))\nplt.show()","visibility":"show","key":"KWdkz71xBy"},{"type":"output","id":"7LmeYRs2LD1zVnTXxvbUu","data":[{"name":"stderr","output_type":"stream","text":"/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/dask/core.py:119: RuntimeWarning: divide by zero encountered in log10\n  return func(*(_execute_task(a, cache) for a in args))\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"9245206439cc1049578915b48d46197b","path":"/notebooks_test/build/9245206439cc1049578915b48d46197b.png"},"text/plain":{"content":"\u003cFigure size 1000x1000 with 2 Axes\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"t7SoCILFuw"}],"visibility":"show","key":"ZnYV5yaDVJ"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.20018,"end_time":"2023-03-22T13:03:37.876144","exception":false,"start_time":"2023-03-22T13:03:37.675964","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"OK, this looks good. Now we are going to calculate the mean VV dB polarisation across the area for each time step. Firstly, we want to calculate the mean VV_dB on axis 1 (lat) and 2 (lon). The second function removes any observations with values of 0 (observations that don’t cover our area of interest).","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Kisum2RjiI"}],"key":"kGVEk0Ylvm"}],"visibility":"show","key":"R0RVsU3guV"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:38.306046Z","iopub.status.busy":"2023-03-22T13:03:38.302913Z","iopub.status.idle":"2023-03-22T13:03:39.128226Z","shell.execute_reply":"2023-03-22T13:03:39.124645Z"},"papermill":{"duration":1.047959,"end_time":"2023-03-22T13:03:39.131531","exception":false,"start_time":"2023-03-22T13:03:38.083572","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# calculate the mean VV dB for each time step\ntimeseriesVV_dB = water_antananarivo.VV_dB.mean(axis=(1,2), skipna=True)\n\n# remove any observations with no data\ntimeseriesVV_dB = timeseriesVV_dB.where(timeseriesVV_dB !=0).dropna(\"time\")\n\n# return the new data cube chunk\ntimeseriesVV_dB","visibility":"show","key":"R6Y9hdTQzF"},{"type":"output","id":"TNW1o4zecWALENzckQQ9B","data":[{"name":"stderr","output_type":"stream","text":"/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/dask/core.py:119: RuntimeWarning: divide by zero encountered in log10\n  return func(*(_execute_task(a, cache) for a in args))\n/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/dask/core.py:119: RuntimeWarning: divide by zero encountered in log10\n  return func(*(_execute_task(a, cache) for a in args))\n"},{"output_type":"execute_result","execution_count":45,"metadata":{},"data":{"text/html":{"content":"\u003cdiv\u003e\u003csvg style=\"position: absolute; width: 0; height: 0; overflow: hidden\"\u003e\n\u003cdefs\u003e\n\u003csymbol id=\"icon-database\" viewBox=\"0 0 32 32\"\u003e\n\u003cpath d=\"M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z\"\u003e\u003c/path\u003e\n\u003c/symbol\u003e\n\u003csymbol id=\"icon-file-text2\" viewBox=\"0 0 32 32\"\u003e\n\u003cpath d=\"M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003cpath d=\"M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z\"\u003e\u003c/path\u003e\n\u003c/symbol\u003e\n\u003c/defs\u003e\n\u003c/svg\u003e\n\u003cstyle\u003e/* CSS stylesheet for displaying xarray objects in jupyterlab.\n *\n */\n\n:root {\n  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));\n  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));\n  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));\n  --xr-border-color: var(--jp-border-color2, #e0e0e0);\n  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);\n  --xr-background-color: var(--jp-layout-color0, white);\n  --xr-background-color-row-even: var(--jp-layout-color1, white);\n  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);\n}\n\nhtml[theme=dark],\nbody[data-theme=dark],\nbody.vscode-dark {\n  --xr-font-color0: rgba(255, 255, 255, 1);\n  --xr-font-color2: rgba(255, 255, 255, 0.54);\n  --xr-font-color3: rgba(255, 255, 255, 0.38);\n  --xr-border-color: #1F1F1F;\n  --xr-disabled-color: #515151;\n  --xr-background-color: #111111;\n  --xr-background-color-row-even: #111111;\n  --xr-background-color-row-odd: #313131;\n}\n\n.xr-wrap {\n  display: block !important;\n  min-width: 300px;\n  max-width: 700px;\n}\n\n.xr-text-repr-fallback {\n  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */\n  display: none;\n}\n\n.xr-header {\n  padding-top: 6px;\n  padding-bottom: 6px;\n  margin-bottom: 4px;\n  border-bottom: solid 1px var(--xr-border-color);\n}\n\n.xr-header \u003e div,\n.xr-header \u003e ul {\n  display: inline;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.xr-obj-type,\n.xr-array-name {\n  margin-left: 2px;\n  margin-right: 10px;\n}\n\n.xr-obj-type {\n  color: var(--xr-font-color2);\n}\n\n.xr-sections {\n  padding-left: 0 !important;\n  display: grid;\n  grid-template-columns: 150px auto auto 1fr 20px 20px;\n}\n\n.xr-section-item {\n  display: contents;\n}\n\n.xr-section-item input {\n  display: none;\n}\n\n.xr-section-item input + label {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-item input:enabled + label {\n  cursor: pointer;\n  color: var(--xr-font-color2);\n}\n\n.xr-section-item input:enabled + label:hover {\n  color: var(--xr-font-color0);\n}\n\n.xr-section-summary {\n  grid-column: 1;\n  color: var(--xr-font-color2);\n  font-weight: 500;\n}\n\n.xr-section-summary \u003e span {\n  display: inline-block;\n  padding-left: 0.5em;\n}\n\n.xr-section-summary-in:disabled + label {\n  color: var(--xr-font-color2);\n}\n\n.xr-section-summary-in + label:before {\n  display: inline-block;\n  content: '►';\n  font-size: 11px;\n  width: 15px;\n  text-align: center;\n}\n\n.xr-section-summary-in:disabled + label:before {\n  color: var(--xr-disabled-color);\n}\n\n.xr-section-summary-in:checked + label:before {\n  content: '▼';\n}\n\n.xr-section-summary-in:checked + label \u003e span {\n  display: none;\n}\n\n.xr-section-summary,\n.xr-section-inline-details {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n.xr-section-inline-details {\n  grid-column: 2 / -1;\n}\n\n.xr-section-details {\n  display: none;\n  grid-column: 1 / -1;\n  margin-bottom: 5px;\n}\n\n.xr-section-summary-in:checked ~ .xr-section-details {\n  display: contents;\n}\n\n.xr-array-wrap {\n  grid-column: 1 / -1;\n  display: grid;\n  grid-template-columns: 20px auto;\n}\n\n.xr-array-wrap \u003e label {\n  grid-column: 1;\n  vertical-align: top;\n}\n\n.xr-preview {\n  color: var(--xr-font-color3);\n}\n\n.xr-array-preview,\n.xr-array-data {\n  padding: 0 5px !important;\n  grid-column: 2;\n}\n\n.xr-array-data,\n.xr-array-in:checked ~ .xr-array-preview {\n  display: none;\n}\n\n.xr-array-in:checked ~ .xr-array-data,\n.xr-array-preview {\n  display: inline-block;\n}\n\n.xr-dim-list {\n  display: inline-block !important;\n  list-style: none;\n  padding: 0 !important;\n  margin: 0;\n}\n\n.xr-dim-list li {\n  display: inline-block;\n  padding: 0;\n  margin: 0;\n}\n\n.xr-dim-list:before {\n  content: '(';\n}\n\n.xr-dim-list:after {\n  content: ')';\n}\n\n.xr-dim-list li:not(:last-child):after {\n  content: ',';\n  padding-right: 5px;\n}\n\n.xr-has-index {\n  font-weight: bold;\n}\n\n.xr-var-list,\n.xr-var-item {\n  display: contents;\n}\n\n.xr-var-item \u003e div,\n.xr-var-item label,\n.xr-var-item \u003e .xr-var-name span {\n  background-color: var(--xr-background-color-row-even);\n  margin-bottom: 0;\n}\n\n.xr-var-item \u003e .xr-var-name:hover span {\n  padding-right: 5px;\n}\n\n.xr-var-list \u003e li:nth-child(odd) \u003e div,\n.xr-var-list \u003e li:nth-child(odd) \u003e label,\n.xr-var-list \u003e li:nth-child(odd) \u003e .xr-var-name span {\n  background-color: var(--xr-background-color-row-odd);\n}\n\n.xr-var-name {\n  grid-column: 1;\n}\n\n.xr-var-dims {\n  grid-column: 2;\n}\n\n.xr-var-dtype {\n  grid-column: 3;\n  text-align: right;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-preview {\n  grid-column: 4;\n}\n\n.xr-index-preview {\n  grid-column: 2 / 5;\n  color: var(--xr-font-color2);\n}\n\n.xr-var-name,\n.xr-var-dims,\n.xr-var-dtype,\n.xr-preview,\n.xr-attrs dt {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-right: 10px;\n}\n\n.xr-var-name:hover,\n.xr-var-dims:hover,\n.xr-var-dtype:hover,\n.xr-attrs dt:hover {\n  overflow: visible;\n  width: auto;\n  z-index: 1;\n}\n\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  display: none;\n  background-color: var(--xr-background-color) !important;\n  padding-bottom: 5px !important;\n}\n\n.xr-var-attrs-in:checked ~ .xr-var-attrs,\n.xr-var-data-in:checked ~ .xr-var-data,\n.xr-index-data-in:checked ~ .xr-index-data {\n  display: block;\n}\n\n.xr-var-data \u003e table {\n  float: right;\n}\n\n.xr-var-name span,\n.xr-var-data,\n.xr-index-name div,\n.xr-index-data,\n.xr-attrs {\n  padding-left: 25px !important;\n}\n\n.xr-attrs,\n.xr-var-attrs,\n.xr-var-data,\n.xr-index-data {\n  grid-column: 1 / -1;\n}\n\ndl.xr-attrs {\n  padding: 0;\n  margin: 0;\n  display: grid;\n  grid-template-columns: 125px auto;\n}\n\n.xr-attrs dt,\n.xr-attrs dd {\n  padding: 0;\n  margin: 0;\n  float: left;\n  padding-right: 10px;\n  width: auto;\n}\n\n.xr-attrs dt {\n  font-weight: normal;\n  grid-column: 1;\n}\n\n.xr-attrs dt:hover span {\n  display: inline-block;\n  background: var(--xr-background-color);\n  padding-right: 10px;\n}\n\n.xr-attrs dd {\n  grid-column: 2;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n.xr-icon-database,\n.xr-icon-file-text2,\n.xr-no-icon {\n  display: inline-block;\n  vertical-align: middle;\n  width: 1em;\n  height: 1.5em !important;\n  stroke-width: 0;\n  stroke: currentColor;\n  fill: currentColor;\n}\n\u003c/style\u003e\u003cpre class='xr-text-repr-fallback'\u003e\u0026lt;xarray.DataArray \u0026#x27;VV_dB\u0026#x27; (time: 8)\u0026gt;\ndask.array\u0026lt;where, shape=(8,), dtype=float32, chunksize=(1,), chunktype=numpy.ndarray\u0026gt;\nCoordinates:\n  * time     (time) datetime64[ns] 2022-01-03T02:19:35 ... 2022-03-28T02:19:33\u003c/pre\u003e\u003cdiv class='xr-wrap' style='display:none'\u003e\u003cdiv class='xr-header'\u003e\u003cdiv class='xr-obj-type'\u003exarray.DataArray\u003c/div\u003e\u003cdiv class='xr-array-name'\u003e'VV_dB'\u003c/div\u003e\u003cul class='xr-dim-list'\u003e\u003cli\u003e\u003cspan class='xr-has-index'\u003etime\u003c/span\u003e: 8\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003cul class='xr-sections'\u003e\u003cli class='xr-section-item'\u003e\u003cdiv class='xr-array-wrap'\u003e\u003cinput id='section-7e2b0f4d-7aa6-4f3d-a791-4f9a818f034f' class='xr-array-in' type='checkbox' checked\u003e\u003clabel for='section-7e2b0f4d-7aa6-4f3d-a791-4f9a818f034f' title='Show/hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-array-preview xr-preview'\u003e\u003cspan\u003edask.array\u0026lt;chunksize=(1,), meta=np.ndarray\u0026gt;\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-array-data'\u003e\u003ctable\u003e\n    \u003ctr\u003e\n        \u003ctd\u003e\n            \u003ctable style=\"border-collapse: collapse;\"\u003e\n                \u003cthead\u003e\n                    \u003ctr\u003e\n                        \u003ctd\u003e \u003c/td\u003e\n                        \u003cth\u003e Array \u003c/th\u003e\n                        \u003cth\u003e Chunk \u003c/th\u003e\n                    \u003c/tr\u003e\n                \u003c/thead\u003e\n                \u003ctbody\u003e\n                    \n                    \u003ctr\u003e\n                        \u003cth\u003e Bytes \u003c/th\u003e\n                        \u003ctd\u003e 32 B \u003c/td\u003e\n                        \u003ctd\u003e 4 B \u003c/td\u003e\n                    \u003c/tr\u003e\n                    \n                    \u003ctr\u003e\n                        \u003cth\u003e Shape \u003c/th\u003e\n                        \u003ctd\u003e (8,) \u003c/td\u003e\n                        \u003ctd\u003e (1,) \u003c/td\u003e\n                    \u003c/tr\u003e\n                    \u003ctr\u003e\n                        \u003cth\u003e Dask graph \u003c/th\u003e\n                        \u003ctd colspan=\"2\"\u003e 8 chunks in 14 graph layers \u003c/td\u003e\n                    \u003c/tr\u003e\n                    \u003ctr\u003e\n                        \u003cth\u003e Data type \u003c/th\u003e\n                        \u003ctd colspan=\"2\"\u003e float32 numpy.ndarray \u003c/td\u003e\n                    \u003c/tr\u003e\n                \u003c/tbody\u003e\n            \u003c/table\u003e\n        \u003c/td\u003e\n        \u003ctd\u003e\n        \u003csvg width=\"170\" height=\"89\" style=\"stroke:rgb(0,0,0);stroke-width:1\" \u003e\n\n  \u003c!-- Horizontal lines --\u003e\n  \u003cline x1=\"0\" y1=\"0\" x2=\"120\" y2=\"0\" style=\"stroke-width:2\" /\u003e\n  \u003cline x1=\"0\" y1=\"39\" x2=\"120\" y2=\"39\" style=\"stroke-width:2\" /\u003e\n\n  \u003c!-- Vertical lines --\u003e\n  \u003cline x1=\"0\" y1=\"0\" x2=\"0\" y2=\"39\" style=\"stroke-width:2\" /\u003e\n  \u003cline x1=\"15\" y1=\"0\" x2=\"15\" y2=\"39\" /\u003e\n  \u003cline x1=\"30\" y1=\"0\" x2=\"30\" y2=\"39\" /\u003e\n  \u003cline x1=\"45\" y1=\"0\" x2=\"45\" y2=\"39\" /\u003e\n  \u003cline x1=\"60\" y1=\"0\" x2=\"60\" y2=\"39\" /\u003e\n  \u003cline x1=\"75\" y1=\"0\" x2=\"75\" y2=\"39\" /\u003e\n  \u003cline x1=\"90\" y1=\"0\" x2=\"90\" y2=\"39\" /\u003e\n  \u003cline x1=\"105\" y1=\"0\" x2=\"105\" y2=\"39\" /\u003e\n  \u003cline x1=\"120\" y1=\"0\" x2=\"120\" y2=\"39\" style=\"stroke-width:2\" /\u003e\n\n  \u003c!-- Colored Rectangle --\u003e\n  \u003cpolygon points=\"0.0,0.0 120.0,0.0 120.0,39.793935054828374 0.0,39.793935054828374\" style=\"fill:#ECB172A0;stroke-width:0\"/\u003e\n\n  \u003c!-- Text --\u003e\n  \u003ctext x=\"60.000000\" y=\"59.793935\" font-size=\"1.0rem\" font-weight=\"100\" text-anchor=\"middle\" \u003e8\u003c/text\u003e\n  \u003ctext x=\"140.000000\" y=\"19.896968\" font-size=\"1.0rem\" font-weight=\"100\" text-anchor=\"middle\" transform=\"rotate(0,140.000000,19.896968)\"\u003e1\u003c/text\u003e\n\u003c/svg\u003e\n        \u003c/td\u003e\n    \u003c/tr\u003e\n\u003c/table\u003e\u003c/div\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-f9a0d3fd-0c7a-401f-abd2-03bed1a9b01b' class='xr-section-summary-in' type='checkbox'  checked\u003e\u003clabel for='section-f9a0d3fd-0c7a-401f-abd2-03bed1a9b01b' class='xr-section-summary' \u003eCoordinates: \u003cspan\u003e(1)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cul class='xr-var-list'\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-var-name'\u003e\u003cspan class='xr-has-index'\u003etime\u003c/span\u003e\u003c/div\u003e\u003cdiv class='xr-var-dims'\u003e(time)\u003c/div\u003e\u003cdiv class='xr-var-dtype'\u003edatetime64[ns]\u003c/div\u003e\u003cdiv class='xr-var-preview xr-preview'\u003e2022-01-03T02:19:35 ... 2022-03-...\u003c/div\u003e\u003cinput id='attrs-5d0081e8-bfc9-432e-aa21-28901bf5b976' class='xr-var-attrs-in' type='checkbox' \u003e\u003clabel for='attrs-5d0081e8-bfc9-432e-aa21-28901bf5b976' title='Show/Hide attributes'\u003e\u003csvg class='icon xr-icon-file-text2'\u003e\u003cuse xlink:href='#icon-file-text2'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cinput id='data-222bb6a3-73d2-465b-9a11-1d1ce9761a02' class='xr-var-data-in' type='checkbox'\u003e\u003clabel for='data-222bb6a3-73d2-465b-9a11-1d1ce9761a02' title='Show/Hide data repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-var-attrs'\u003e\u003cdl class='xr-attrs'\u003e\u003cdt\u003e\u003cspan\u003estandard_name :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003etime\u003c/dd\u003e\u003cdt\u003e\u003cspan\u003ebounds :\u003c/span\u003e\u003c/dt\u003e\u003cdd\u003etime_bnds\u003c/dd\u003e\u003c/dl\u003e\u003c/div\u003e\u003cdiv class='xr-var-data'\u003e\u003cpre\u003earray([\u0026#x27;2022-01-03T02:19:35.000000000\u0026#x27;, \u0026#x27;2022-01-15T02:19:34.000000000\u0026#x27;,\n       \u0026#x27;2022-01-27T02:19:34.000000000\u0026#x27;, \u0026#x27;2022-02-08T02:19:33.000000000\u0026#x27;,\n       \u0026#x27;2022-02-20T02:19:33.000000000\u0026#x27;, \u0026#x27;2022-03-04T02:19:33.000000000\u0026#x27;,\n       \u0026#x27;2022-03-16T02:19:33.000000000\u0026#x27;, \u0026#x27;2022-03-28T02:19:33.000000000\u0026#x27;],\n      dtype=\u0026#x27;datetime64[ns]\u0026#x27;)\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-d640b7ec-32e4-4681-b5bb-02ad599c1d07' class='xr-section-summary-in' type='checkbox'  \u003e\u003clabel for='section-d640b7ec-32e4-4681-b5bb-02ad599c1d07' class='xr-section-summary' \u003eIndexes: \u003cspan\u003e(1)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cul class='xr-var-list'\u003e\u003cli class='xr-var-item'\u003e\u003cdiv class='xr-index-name'\u003e\u003cdiv\u003etime\u003c/div\u003e\u003c/div\u003e\u003cdiv class='xr-index-preview'\u003ePandasIndex\u003c/div\u003e\u003cdiv\u003e\u003c/div\u003e\u003cinput id='index-12e08538-fc07-44e7-884d-87bf030470fe' class='xr-index-data-in' type='checkbox'/\u003e\u003clabel for='index-12e08538-fc07-44e7-884d-87bf030470fe' title='Show/Hide index repr'\u003e\u003csvg class='icon xr-icon-database'\u003e\u003cuse xlink:href='#icon-database'\u003e\u003c/use\u003e\u003c/svg\u003e\u003c/label\u003e\u003cdiv class='xr-index-data'\u003e\u003cpre\u003ePandasIndex(DatetimeIndex([\u0026#x27;2022-01-03 02:19:35\u0026#x27;, \u0026#x27;2022-01-15 02:19:34\u0026#x27;,\n               \u0026#x27;2022-01-27 02:19:34\u0026#x27;, \u0026#x27;2022-02-08 02:19:33\u0026#x27;,\n               \u0026#x27;2022-02-20 02:19:33\u0026#x27;, \u0026#x27;2022-03-04 02:19:33\u0026#x27;,\n               \u0026#x27;2022-03-16 02:19:33\u0026#x27;, \u0026#x27;2022-03-28 02:19:33\u0026#x27;],\n              dtype=\u0026#x27;datetime64[ns]\u0026#x27;, name=\u0026#x27;time\u0026#x27;, freq=None))\u003c/pre\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/li\u003e\u003cli class='xr-section-item'\u003e\u003cinput id='section-2465b1f4-21db-4663-ac25-b09bbe4a1539' class='xr-section-summary-in' type='checkbox' disabled \u003e\u003clabel for='section-2465b1f4-21db-4663-ac25-b09bbe4a1539' class='xr-section-summary'  title='Expand/collapse section'\u003eAttributes: \u003cspan\u003e(0)\u003c/span\u003e\u003c/label\u003e\u003cdiv class='xr-section-inline-details'\u003e\u003c/div\u003e\u003cdiv class='xr-section-details'\u003e\u003cdl class='xr-attrs'\u003e\u003c/dl\u003e\u003c/div\u003e\u003c/li\u003e\u003c/ul\u003e\u003c/div\u003e\u003c/div\u003e","content_type":"text/html"},"text/plain":{"content":"\u003cxarray.DataArray 'VV_dB' (time: 8)\u003e\ndask.array\u003cwhere, shape=(8,), dtype=float32, chunksize=(1,), chunktype=numpy.ndarray\u003e\nCoordinates:\n  * time     (time) datetime64[ns] 2022-01-03T02:19:35 ... 2022-03-28T02:19:33","content_type":"text/plain"}}}],"visibility":"show","key":"kn5Thqsu9K"}],"visibility":"show","key":"nlOOs21igM"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.213482,"end_time":"2023-03-22T13:03:39.560180","exception":false,"start_time":"2023-03-22T13:03:39.346698","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Next we can plot this new array we have generated. The result is an excellent time series plot showing the two flood events that occured in the time period. We can see the larger picture as this is the mean value over several pixels rather than just a single point like we previously plotted.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZvyAG86zis"}],"key":"FB1jrQ5B0k"}],"visibility":"show","key":"u8EJDlTz8L"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:39.987144Z","iopub.status.busy":"2023-03-22T13:03:39.986718Z","iopub.status.idle":"2023-03-22T13:03:41.104978Z","shell.execute_reply":"2023-03-22T13:03:41.099637Z"},"papermill":{"duration":1.328133,"end_time":"2023-03-22T13:03:41.108273","exception":false,"start_time":"2023-03-22T13:03:39.780140","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Plot VV_dB timeseries\nfig, ax = plt.subplots(1, figsize=(12, 6))\nax.plot(timeseriesVV_dB.time, timeseriesVV_dB, color=\"blue\", marker=\"o\", linewidth=0.5)\nax.set_title(\"Mean VV dB returned from AOI over 01-01-2022 to 01-05-2022\")\nax.set_xlabel('Time')\nax.set_ylabel('VV dB')\nplt.show()","visibility":"show","key":"hDmFjGiQzD"},{"type":"output","id":"ptjlwY8x9QiJd34OFc0-n","data":[{"name":"stderr","output_type":"stream","text":"/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/dask/core.py:119: RuntimeWarning: divide by zero encountered in log10\n  return func(*(_execute_task(a, cache) for a in args))\n/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/dask/core.py:119: RuntimeWarning: divide by zero encountered in log10\n  return func(*(_execute_task(a, cache) for a in args))\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"3e179788e04400019cd3f9f1d323072d","path":"/notebooks_test/build/3e179788e04400019cd3f9f1d323072d.png"},"text/plain":{"content":"\u003cFigure size 1200x600 with 1 Axes\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"iscbXauMsN"}],"visibility":"show","key":"I4mo2WlRO9"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.208953,"end_time":"2023-03-22T13:03:41.590846","exception":false,"start_time":"2023-03-22T13:03:41.381893","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"In the time series plot generated from averaged VV_dB values over the selected region, the two separate flooding events appear appear as one longer period with surface flooding that stretches from mid January to early March 2022.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ebAEqUpeoJ"}],"key":"dnJK7PiFkY"}],"visibility":"show","key":"ZIh38zMgHi"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.206675,"end_time":"2023-03-22T13:03:42.010910","exception":false,"start_time":"2023-03-22T13:03:41.804235","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Creating advanced variables","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tLzsQvsTrk"}],"identifier":"creating-advanced-variables","label":"Creating advanced variables","html_id":"creating-advanced-variables","implicit":true,"key":"qpLhIvC17v"},{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Mapping flooding frequency across the whole AOI","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"AZUvuz8mZW"}],"identifier":"mapping-flooding-frequency-across-the-whole-aoi","label":"Mapping flooding frequency across the whole AOI","html_id":"mapping-flooding-frequency-across-the-whole-aoi","implicit":true,"key":"yJvUqBUwu9"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"We can utilise the generated water mask to calculate the flooding frequency proportionate to the overall number of observations. Since the flood mask is a binary layer, we just need to calculate the sum of all flooded observations for each pixel and divide it by the total number (count) of observations.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"HsXRv8aXXM"}],"key":"DVRB4UYmUf"}],"visibility":"show","key":"biRkGnZ6M8"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:42.432703Z","iopub.status.busy":"2023-03-22T13:03:42.432139Z","iopub.status.idle":"2023-03-22T13:03:42.459235Z","shell.execute_reply":"2023-03-22T13:03:42.457572Z"},"papermill":{"duration":0.241555,"end_time":"2023-03-22T13:03:42.462308","exception":false,"start_time":"2023-03-22T13:03:42.220753","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"flood_sum = s1_cube.flood_mask.sum(dim=\"time\")\nflood_count = s1_cube.flood_mask.count(dim=\"time\")\nflood_average = flood_sum / flood_count\n\nflood_average.attrs['long_name'] = 'flood_average'\nflood_average.attrs['units'] = 'nounits'\n\ns1_cube['flood_average'] = flood_average","visibility":"show","key":"EAY7QpHY7W"},{"type":"output","id":"ek7MVPttVso9txF-LcCNQ","data":[],"visibility":"show","key":"fgeh1JWBSJ"}],"visibility":"show","key":"yd8vIhvT89"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.253074,"end_time":"2023-03-22T13:03:42.965715","exception":false,"start_time":"2023-03-22T13:03:42.712641","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now let’s plot the flood_average into a plot:","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"O5n4eH9wIu"}],"key":"vx0YGcFZdp"}],"visibility":"show","key":"FcX5DzF2aQ"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:43.473831Z","iopub.status.busy":"2023-03-22T13:03:43.473326Z","iopub.status.idle":"2023-03-22T13:03:44.950241Z","shell.execute_reply":"2023-03-22T13:03:44.947813Z"},"papermill":{"duration":1.764444,"end_time":"2023-03-22T13:03:44.953806","exception":false,"start_time":"2023-03-22T13:03:43.189362","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"flood_average.plot.imshow(cmap='GnBu', vmin=0, vmax=0.5, figsize=(10, 10))\nplt.show()","visibility":"show","key":"p3E3G9NliY"},{"type":"output","id":"DMoiMOH-asz9E4ZdzyEFJ","data":[{"name":"stderr","output_type":"stream","text":"/opt/conda/envs/edc-default-2023.03-02/lib/python3.9/site-packages/dask/core.py:119: RuntimeWarning: divide by zero encountered in log10\n  return func(*(_execute_task(a, cache) for a in args))\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"27f0d4c9fb69d93029fd66d343f67344","path":"/notebooks_test/build/27f0d4c9fb69d93029fd66d343f67344.png"},"text/plain":{"content":"\u003cFigure size 1000x1000 with 2 Axes\u003e","content_type":"text/plain"}}}],"visibility":"show","key":"MT1X8ZYdSn"}],"visibility":"show","key":"Tk4vKNQPnX"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.253629,"end_time":"2023-03-22T13:03:45.464428","exception":false,"start_time":"2023-03-22T13:03:45.210799","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"For our end product, we have visualised the flood plain extent very clearly here and can also identify some areas that are more susceptible to flooding than others. Added value products like this flood average map enable policy makers to make more informed decisions,","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RkJNtjhwhD"}],"key":"Xt1zi3cgXT"}],"visibility":"show","key":"vkz8qXR3iP"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.211045,"end_time":"2023-03-22T13:03:45.917258","exception":false,"start_time":"2023-03-22T13:03:45.706213","status":"completed"},"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Export a variable to GeoTiff","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"v5BSpu908W"}],"identifier":"export-a-variable-to-geotiff","label":"Export a variable to GeoTiff","html_id":"export-a-variable-to-geotiff","implicit":true,"key":"s19Dk50J1g"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Finally we will export some of the variables we have generated in this notebook. This is really easy to do and is shown in the next cell:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"je5rSdnBEA"}],"key":"XN5l6yj578"}],"visibility":"show","key":"r9QSVGeCcs"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:46.334970Z","iopub.status.busy":"2023-03-22T13:03:46.334551Z","iopub.status.idle":"2023-03-22T13:03:46.434501Z","shell.execute_reply":"2023-03-22T13:03:46.432580Z"},"papermill":{"duration":0.312418,"end_time":"2023-03-22T13:03:46.438161","exception":false,"start_time":"2023-03-22T13:03:46.125743","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# define the timestep you wish to export\ntimestep = flood_threshold2_step2.sel(time='2022-01-27 10:00:00', method='nearest')\n\n# define projection\ntimestep_wgs84 = timestep.rio.write_crs(\"epsg:4326\")\n\n# write to raster\ntimestep_wgs84.rio.to_raster(\"flood_extent_20220127.tif\")","visibility":"show","key":"gYg9FDZ7Ix"},{"type":"output","id":"xF836p76GrMenAMB8JUjr","data":[],"visibility":"show","key":"oI9JF9gVA0"}],"visibility":"show","key":"vMLshYr1Ef"},{"type":"block","kind":"notebook-content","data":{"papermill":{"duration":0.44605,"end_time":"2023-03-22T13:03:47.175713","exception":false,"start_time":"2023-03-22T13:03:46.729663","status":"completed"},"tags":[]},"children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now let’s export the flood_average variable which is even easier to do as we don’t need to select a single timestamp.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Gx0bJaNrZG"}],"key":"nNdFMEI6eU"}],"visibility":"show","key":"MBYJvFccFM"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2023-03-22T13:03:47.931916Z","iopub.status.busy":"2023-03-22T13:03:47.930900Z","iopub.status.idle":"2023-03-22T13:03:48.530883Z","shell.execute_reply":"2023-03-22T13:03:48.529549Z"},"papermill":{"duration":0.896181,"end_time":"2023-03-22T13:03:48.533618","exception":false,"start_time":"2023-03-22T13:03:47.637437","status":"completed"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# define projection\nflood_average_wgs84 = flood_average.rio.write_crs(\"epsg:4326\")\n\n# write to raster\nflood_average_wgs84.rio.to_raster(\"flood_average.tif\")","visibility":"show","key":"XQdDrnIlAP"},{"type":"output","id":"fFOtO5JlJHugGmpxfUl1Q","data":[],"visibility":"show","key":"d9KJ4Qlwys"}],"visibility":"show","key":"EPZNE5g2IT"}],"key":"FgntVT47Gh"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"LPIS Use Case for Land Use / Land Cover Classification","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/lpis-lulc-slo","group":"Contributions"},"next":{"title":"Impact of Covid19 induced lockdown on NO2 levels","url":"/external-notebooks/eurodatacube/notebooks/notebooks/contributions/no2-analysis-covid19-lockdowns","group":"Contributions"}}},"domain":"http://localhost:3000"},"project":{"github":"https://github.com/eoxhub-workspaces/documentation/","id":"5aa0318b-5bc1-41e2-b1d4-053e8b61961b","exports":[],"bibliography":[],"title":"Location for eodashboard notebooks","index":"readme","pages":[{"title":"External Notebooks","level":1},{"title":"Eurodatacube","level":2},{"title":"Notebooks","level":3},{"slug":"external-notebooks.eurodatacube.notebooks.readme","title":"Jupyter notebooks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":4},{"title":"Notebooks","level":4},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.readme","title":"Euro Data Cube Notebooks","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":5},{"title":"Contributions","level":5},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-ai4arctic-sea-ice","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-biomass-forest-observation-sys","title":"AIREO pilot dataset - Biomass (Forest Observation System)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-cap","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aireo-pilot-dataset-spacenet7","title":"Introduction","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.aot-covid19","title":"Aerosol Optical Thickness (AOT) Anomaly Detection Using Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.batch-zarr-output","title":"Generating Zarr data cubes with Sentinel Hub Batch API","description":"","date":"","thumbnail":"/notebooks_test/build/68dffbf744fa42f4bf3d35e55684984e.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.client-side-processing-using-mass-sh","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.cmems-data-download","title":"Cmems Data Download","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.detect-trucks-sentinel2","title":"Detect Trucks using Sentinel-2 data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.drought-monitoring","title":"Drought impact monitoring platform","description":"","date":"","thumbnail":"/notebooks_test/build/ad5c19782b006f72352ae57794305840.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-africa-cube-africa-custom-contest","title":"Custom Script Contest – Urban Growth in Africa","description":"","date":"","thumbnail":"/notebooks_test/build/e9275f3fe80a704e2f5aa1ec1220e48a.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-byoc-tutorial","title":"How to bring your own data to EDC: Using Sentinel Hub Python package","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-demo-phi-week-v2","title":"xcube-gen and xcube-geodb Hands-On Workshop Φ-Week 2020","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-geodb-4-eurocrops-demo","title":"Demonstration of Eurocrops data use in geoDB","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-notebook-lstm","title":"South Africa Crop Type Classification on Euro Data Cube (EDC)","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.edc-usecase-lpis-crop-type-classification","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.eurocrops-crop-classification-example","title":"Crop-classification using Sentinel-2 time-series","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ghsl-urban-delineation","title":"\u003cb\u003eUrban delineation\u003cb\u003e","description":"","date":"","thumbnail":"/notebooks_test/build/7bbf545a5eae1d9ebdb91ae42b261063.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.globalearthmonitor-example","title":"Pre-requisites","description":"","date":"","thumbnail":"/notebooks_test/build/205c1ded6bd59771975a9fbd3753fd3b.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.gpu-support-eoxhub","title":"GPU-Support on EOxHub","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.gran-chaco-phiweek","title":"ESA EO \\phi- week 2020","description":"","date":"","thumbnail":"/notebooks_test/build/80cee7db6cdc7002ceedda5689f889fa.jpeg","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.howtolulc-batch-updated-210621","title":"How To: Land-Use-Land-Cover Prediction for Slovenia - using the Batch Processing API","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.lpis-lulc-slo","title":"LPIS Use Case for Land Use / Land Cover Classification","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.lps2022-leverage-euro-data-cube-services","title":"Living Planet Symposium 2022 Training Session","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.no2-analysis-covid19-lockdowns","title":"Impact of Covid19 induced lockdown on NO2 levels","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.no2-so2-trend-veda-api-igarss-2023","title":"Using the NASA VEDA EOAPI","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.ogc-edc","title":"Important notes","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.openeo-client-demo","title":"openEO Client Demo","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.race-finishedgoodsinventory-inidcator","title":"Finished Goods Inventory indicator for RACE","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.third-party-planetscope","title":"Third Party Data Import - PlanetScope","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.xcube-access-datasets","title":"Using xcube to access non-commercial and commercial data sets","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.xcube-viewer-as-a-service-in-edc1","title":"Visualizing data with xcube viewer in EuroDataCube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-evaluation-workshop","title":"DAPA Evaluation Workshop: Introduction \u0026 Documentation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-1-cube-sentinel-2","title":"DAPA Tutorial #1: Cube - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-2-area-sentinel-2","title":"DAPA Tutorial #2: Area - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-3-timeseries-sentinel-2","title":"DAPA Tutorial #3: Timeseries - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-4-value-sentinel-2","title":"DAPA Tutorial #4: Value - Sentinel-2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.dapa.dapa-tutorial-5-dem","title":"DAPA Tutorial #5: DEM","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.fairicube.fairicube-data-access-demonstration","title":"EDC Sentinel Hub - data access using xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-australian-bushfires","title":"Australian Bushfires","description":"","date":"","thumbnail":"/notebooks_test/build/ab194b4f8c40a2b9d64d8a85e37ce1fd.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":["IGARSS-22","EO Dashboard"],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-data-access","title":"Data Access","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-detect-trucks-sentinel2","title":"Truck Detection Exercise","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-lockdown-in-venice","title":"Environmental Impacts of Lockdown in Venice, Italy during 2020","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-nasa-api-lockdown-in-venice","title":"Lockdown in Venice","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-no2-timeseries-analysis","title":"NO2 timeseries analysis","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.contributions.igarss2022.igarss-22-timeseries-stac-api-single-vs-multi","title":"Time series using STAC API statistics endpoints","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"Curated","level":5},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.access-iacs-data","title":"How to access IACS Spatial Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-access-cci-data","title":"Access CCI data with xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-first-steps","title":"First steps on the Euro Data Cube platform","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-1-manage-datasets-v11","title":"Manage Collections in your GeoDB","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-2-explore-datasets-2","title":"Exploring Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-3-share-datasets1","title":"Sharing Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-geodb-access-urban-atlas-data-v1","title":"[xcube-geodb] How to accesss EEA Urban Atlas Data","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-data-access","title":"EDC Sentinel Hub - data access using xcube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinelhub-datafusion-basic","title":"EDC Sentinel Hub: Data Fusion","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinelhub-datafusion-ndvi","title":"EDC Sentinel Hub: Data Fusion","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-datasets","title":"EDC Sentinel Hub - using xcube to access different data sets in Sentinel Hub","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-setup","title":"Setup for EDC core API access using xcube client library","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-sentinel-hub-xcube-integration","title":"EDC Sentinel Hub - XCUBE integration","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.edc-usecase-ndvi-timeline","title":"NDVI timeline","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.eo-learn","title":"Using eo-learn in EDC: a starter’s guide.","description":"","date":"","thumbnail":"/notebooks_test/build/5a1f8475f0c3652f4630d03d72891b98.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.esdl-edc-v0-2","title":"Earth System Data Lab Tutorial @ Euro Data Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.exploring-time-and-space-with-edc","title":"Exploring Time and Space: A guide to accessing, analysing and visualising data in the Euro Data Cube","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.how-to-access-dem-data-through-sentinel-hub-api","title":"How to access DEM data through Sentinel Hub API","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"slug":"external-notebooks.eurodatacube.notebooks.notebooks.curated.sentinelhub-py","title":"Using Sentinel Hub Process API in EDC: a starter’s guide.","description":"","date":"","thumbnail":"/notebooks_test/build/01e22903839391bc356ac886ec2b2fa7.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":6},{"title":"Notebooks","level":1},{"slug":"notebooks.example1","title":"📘 Example Notebook 1","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"notebooks.example2","title":"📘 Example Notebook 2","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/notebooks_test/build/manifest-B4831781.js";
import * as route0 from "/notebooks_test/build/root-QGLRP2PL.js";
import * as route1 from "/notebooks_test/build/routes/$-7JYT5576.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/notebooks_test/build/entry.client-UNPC4GT3.js");</script></body></html>